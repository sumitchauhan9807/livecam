(self["webpackChunkporntool"]=self["webpackChunkporntool"]||[]).push([[998],{9662:function(e,t,n){var i=n(614),r=n(6330),s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not a function")}},6077:function(e,t,n){var i=n(614),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},5787:function(e,t,n){var i=n(7976),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw r("Incorrect invocation")}},9670:function(e,t,n){var i=n(111),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var i,r,s,o=n(3013),a=n(9781),u=n(7854),c=n(614),l=n(111),h=n(2597),d=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(7045),y=n(7976),v=n(9518),_=n(7674),b=n(5112),T=n(9711),w=n(9909),E=w.enforce,S=w.get,k=u.Int8Array,C=k&&k.prototype,I=u.Uint8ClampedArray,O=I&&I.prototype,x=k&&v(k),A=C&&v(C),D=Object.prototype,P=u.TypeError,R=b("toStringTag"),N=T("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",M=o&&!!_&&"Opera"!==d(u.opera),U=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},B=function(e){if(!l(e))return!1;var t=d(e);return"DataView"===t||h(j,t)||h(F,t)},V=function(e){var t=v(e);if(l(t)){var n=S(t);return n&&h(n,L)?n[L]:V(t)}},$=function(e){if(!l(e))return!1;var t=d(e);return h(j,t)||h(F,t)},q=function(e){if($(e))return e;throw P("Target is not a typed array")},H=function(e){if(c(e)&&(!_||y(x,e)))return e;throw P(p(e)+" is not a typed array constructor")},W=function(e,t,n,i){if(a){if(n)for(var r in j){var s=u[r];if(s&&h(s.prototype,e))try{delete s.prototype[e]}catch(o){try{s.prototype[e]=t}catch(c){}}}A[e]&&!n||m(A,e,n?t:M&&C[e]||t,i)}},z=function(e,t,n){var i,r;if(a){if(_){if(n)for(i in j)if(r=u[i],r&&h(r,e))try{delete r[e]}catch(s){}if(x[e]&&!n)return;try{return m(x,e,n?t:M&&x[e]||t)}catch(s){}}for(i in j)r=u[i],!r||r[e]&&!n||m(r,e,t)}};for(i in j)r=u[i],s=r&&r.prototype,s?E(s)[L]=r:M=!1;for(i in F)r=u[i],s=r&&r.prototype,s&&(E(s)[L]=r);if((!M||!c(x)||x===Function.prototype)&&(x=function(){throw P("Incorrect invocation")},M))for(i in j)u[i]&&_(u[i],x);if((!M||!A||A===D)&&(A=x.prototype,M))for(i in j)u[i]&&_(u[i].prototype,A);if(M&&v(O)!==A&&_(O,A),a&&!h(A,R))for(i in U=!0,g(A,R,{configurable:!0,get:function(){return l(this)?this[N]:void 0}}),j)u[i]&&f(u[i],N,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:U&&N,aTypedArray:q,aTypedArrayConstructor:H,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:V,isView:B,isTypedArray:$,TypedArray:x,TypedArrayPrototype:A}},7745:function(e,t,n){var i=n(6244);e.exports=function(e,t){var n=0,r=i(t),s=new e(r);while(r>n)s[n]=t[n++];return s}},1318:function(e,t,n){var i=n(5656),r=n(1400),s=n(6244),o=function(e){return function(t,n,o){var a,u=i(t),c=s(u),l=r(o,c);if(e&&n!=n){while(c>l)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},3658:function(e,t,n){"use strict";var i=n(9781),r=n(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(r(e)&&!o(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},1843:function(e,t,n){var i=n(6244);e.exports=function(e,t){for(var n=i(e),r=new t(n),s=0;s<n;s++)r[s]=e[n-s-1];return r}},1572:function(e,t,n){var i=n(6244),r=n(9303),s=RangeError;e.exports=function(e,t,n,o){var a=i(e),u=r(n),c=u<0?a+u:u;if(c>=a||c<0)throw s("Incorrect index");for(var l=new t(a),h=0;h<a;h++)l[h]=h===c?o:e[h];return l}},4326:function(e,t,n){var i=n(1702),r=i({}.toString),s=i("".slice);e.exports=function(e){return s(r(e),8,-1)}},648:function(e,t,n){var i=n(1694),r=n(614),s=n(4326),o=n(5112),a=o("toStringTag"),u=Object,c="Arguments"==s(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(n){}};e.exports=i?s:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=l(t=u(e),a))?n:c?s(t):"Object"==(i=s(t))&&r(t.callee)?"Arguments":i}},9920:function(e,t,n){var i=n(2597),r=n(3887),s=n(1236),o=n(3070);e.exports=function(e,t,n){for(var a=r(t),u=o.f,c=s.f,l=0;l<a.length;l++){var h=a[l];i(e,h)||n&&i(n,h)||u(e,h,c(t,h))}}},8544:function(e,t,n){var i=n(7293);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,n){var i=n(9781),r=n(3070),s=n(9114);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var i=n(6339),r=n(3070);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},8052:function(e,t,n){var i=n(614),r=n(3070),s=n(6339),o=n(3072);e.exports=function(e,t,n,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:t;if(i(n)&&s(n,c,a),a.global)u?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(u=!0):delete e[t]}catch(l){}u?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:function(e,t,n){var i=n(7854),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},5117:function(e,t,n){"use strict";var i=n(6330),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw r("Cannot delete property "+i(t)+" of "+i(e))}},9781:function(e,t,n){var i=n(7293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var i=n(7854),r=n(111),s=i.document,o=r(s)&&r(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var i,r,s=n(7854),o=n(8113),a=s.process,u=s.Deno,c=a&&a.versions||u&&u.version,l=c&&c.v8;l&&(i=l.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),e.exports=r},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,n){var i=n(1702),r=Error,s=i("".replace),o=function(e){return String(r(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,u=a.test(o);e.exports=function(e,t){if(u&&"string"==typeof e&&!r.prepareStackTrace)while(t--)e=s(e,a,"");return e}},2109:function(e,t,n){var i=n(7854),r=n(1236).f,s=n(8880),o=n(8052),a=n(3072),u=n(9920),c=n(4705);e.exports=function(e,t){var n,l,h,d,p,f,m=e.target,g=e.global,y=e.stat;if(l=g?i:y?i[m]||a(m,{}):(i[m]||{}).prototype,l)for(h in t){if(p=t[h],e.dontCallGetSet?(f=r(l,h),d=f&&f.value):d=l[h],n=c(g?h:m+(y?".":"#")+h,e.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;u(p,d)}(e.sham||d&&d.sham)&&s(p,"sham",!0),o(l,h,p,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,n){var i=n(7293);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var i=n(4374),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(e,t,n){var i=n(9781),r=n(2597),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),u=a&&"something"===function(){}.name,c=a&&(!i||i&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:u,CONFIGURABLE:c}},5668:function(e,t,n){var i=n(1702),r=n(9662);e.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(s){}}},1702:function(e,t,n){var i=n(4374),r=Function.prototype,s=r.call,o=i&&r.bind.bind(s,s);e.exports=i?o:function(e){return function(){return s.apply(e,arguments)}}},5005:function(e,t,n){var i=n(7854),r=n(614),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e]):i[e]&&i[e][t]}},8173:function(e,t,n){var i=n(9662),r=n(8554);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},7854:function(e,t,n){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var i=n(1702),r=n(7908),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,n){var i=n(9781),r=n(7293),s=n(317);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var i=n(1702),r=n(7293),s=n(4326),o=Object,a=i("".split);e.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},9587:function(e,t,n){var i=n(614),r=n(111),s=n(7674);e.exports=function(e,t,n){var o,a;return s&&i(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(e,a),e}},2788:function(e,t,n){var i=n(1702),r=n(614),s=n(5465),o=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},9909:function(e,t,n){var i,r,s,o=n(4811),a=n(7854),u=n(111),c=n(8880),l=n(2597),h=n(5465),d=n(6200),p=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap,y=function(e){return s(e)?r(e):i(e,{})},v=function(e){return function(t){var n;if(!u(t)||(n=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(o||h.state){var _=h.state||(h.state=new g);_.get=_.get,_.has=_.has,_.set=_.set,i=function(e,t){if(_.has(e))throw m(f);return t.facade=e,_.set(e,t),t},r=function(e){return _.get(e)||{}},s=function(e){return _.has(e)}}else{var b=d("state");p[b]=!0,i=function(e,t){if(l(e,b))throw m(f);return t.facade=e,c(e,b,t),t},r=function(e){return l(e,b)?e[b]:{}},s=function(e){return l(e,b)}}e.exports={set:i,get:r,has:s,enforce:y,getterFor:v}},3157:function(e,t,n){var i=n(4326);e.exports=Array.isArray||function(e){return"Array"==i(e)}},4067:function(e,t,n){var i=n(648);e.exports=function(e){var t=i(e);return"BigInt64Array"==t||"BigUint64Array"==t}},614:function(e,t,n){var i=n(4154),r=i.all;e.exports=i.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},4705:function(e,t,n){var i=n(7293),r=n(614),s=/#|\.prototype\./,o=function(e,t){var n=u[a(e)];return n==l||n!=c&&(r(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var i=n(614),r=n(4154),s=r.all;e.exports=r.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:i(e)||e===s}:function(e){return"object"==typeof e?null!==e:i(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var i=n(5005),r=n(614),s=n(7976),o=n(3307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&s(t.prototype,a(e))}},6244:function(e,t,n){var i=n(7466);e.exports=function(e){return i(e.length)}},6339:function(e,t,n){var i=n(1702),r=n(7293),s=n(614),o=n(2597),a=n(9781),u=n(6530).CONFIGURABLE,c=n(2788),l=n(9909),h=l.enforce,d=l.get,p=String,f=Object.defineProperty,m=i("".slice),g=i("".replace),y=i([].join),v=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),_=String(String).split("String"),b=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||u&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&o(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(r){}var i=h(e);return o(i,"source")||(i.source=y(_,"string"==typeof t?t:"")),e};Function.prototype.toString=b((function(){return s(this)&&d(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},6277:function(e,t,n){var i=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},3070:function(e,t,n){var i=n(9781),r=n(4664),s=n(3353),o=n(9670),a=n(4948),u=TypeError,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";t.f=i?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var i=l(e,t);i&&i[p]&&(e[t]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:h in n?n[h]:i[h],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(o(e),t=a(t),o(n),r)try{return c(e,t,n)}catch(i){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var i=n(9781),r=n(6916),s=n(5296),o=n(9114),a=n(5656),u=n(4948),c=n(2597),l=n(4664),h=Object.getOwnPropertyDescriptor;t.f=i?h:function(e,t){if(e=a(e),t=u(t),l)try{return h(e,t)}catch(n){}if(c(e,t))return o(!r(s.f,e,t),e[t])}},8006:function(e,t,n){var i=n(6324),r=n(748),s=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,s)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var i=n(2597),r=n(614),s=n(7908),o=n(6200),a=n(8544),u=o("IE_PROTO"),c=Object,l=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=s(e);if(i(t,u))return t[u];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof c?l:null}},7976:function(e,t,n){var i=n(1702);e.exports=i({}.isPrototypeOf)},6324:function(e,t,n){var i=n(1702),r=n(2597),s=n(5656),o=n(1318).indexOf,a=n(3501),u=i([].push);e.exports=function(e,t){var n,i=s(e),c=0,l=[];for(n in i)!r(a,n)&&r(i,n)&&u(l,n);while(t.length>c)r(i,n=t[c++])&&(~o(l,n)||u(l,n));return l}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var i=n(5668),r=n(9670),s=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=i(Object.prototype,"__proto__","set"),e(n,[]),t=n instanceof Array}catch(o){}return function(n,i){return r(n),s(i),t?e(n,i):n.__proto__=i,n}}():void 0)},2140:function(e,t,n){var i=n(6916),r=n(614),s=n(111),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!s(a=i(n,e)))return a;if(r(n=e.valueOf)&&!s(a=i(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!s(a=i(n,e)))return a;throw o("Can't convert object to primitive value")}},3887:function(e,t,n){var i=n(5005),r=n(1702),s=n(8006),o=n(5181),a=n(9670),u=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?u(t,n(e)):t}},7066:function(e,t,n){"use strict";var i=n(9670);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e,t,n){var i=n(8554),r=TypeError;e.exports=function(e){if(i(e))throw r("Can't call method on "+e);return e}},6200:function(e,t,n){var i=n(2309),r=n(9711),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},5465:function(e,t,n){var i=n(7854),r=n(3072),s="__core-js_shared__",o=i[s]||r(s,{});e.exports=o},2309:function(e,t,n){var i=n(1913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.29.1",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var i=n(7392),r=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},1400:function(e,t,n){var i=n(9303),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},4599:function(e,t,n){var i=n(7593),r=TypeError;e.exports=function(e){var t=i(e,"number");if("number"==typeof t)throw r("Can't convert number to bigint");return BigInt(t)}},5656:function(e,t,n){var i=n(8361),r=n(4488);e.exports=function(e){return i(r(e))}},9303:function(e,t,n){var i=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:i(t)}},7466:function(e,t,n){var i=n(9303),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},7908:function(e,t,n){var i=n(4488),r=Object;e.exports=function(e){return r(i(e))}},7593:function(e,t,n){var i=n(6916),r=n(111),s=n(2190),o=n(8173),a=n(2140),u=n(5112),c=TypeError,l=u("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,u=o(e,l);if(u){if(void 0===t&&(t="default"),n=i(u,e,t),!r(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,n){var i=n(7593),r=n(2190);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},1694:function(e,t,n){var i=n(5112),r=i("toStringTag"),s={};s[r]="z",e.exports="[object z]"===String(s)},1340:function(e,t,n){var i=n(648),r=String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var i=n(1702),r=0,s=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++r+s,36)}},3307:function(e,t,n){var i=n(6293);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var i=n(9781),r=n(7293);e.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,n){var i=n(7854),r=n(614),s=i.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},5112:function(e,t,n){var i=n(7854),r=n(2309),s=n(2597),o=n(9711),a=n(6293),u=n(3307),c=i.Symbol,l=r("wks"),h=u?c["for"]||c:c&&c.withoutSetter||o;e.exports=function(e){return s(l,e)||(l[e]=a&&s(c,e)?c[e]:h("Symbol."+e)),l[e]}},7658:function(e,t,n){"use strict";var i=n(2109),r=n(7908),s=n(6244),o=n(3658),a=n(7207),u=n(7293),c=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},h=c||!l();i({target:"Array",proto:!0,arity:1,forced:h},{push:function(e){var t=r(this),n=s(t),i=arguments.length;a(n+i);for(var u=0;u<i;u++)t[n]=arguments[u],n++;return o(t,n),n}})},541:function(e,t,n){"use strict";var i=n(2109),r=n(7908),s=n(6244),o=n(3658),a=n(5117),u=n(7207),c=1!==[].unshift(0),l=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},h=c||!l();i({target:"Array",proto:!0,arity:1,forced:h},{unshift:function(e){var t=r(this),n=s(t),i=arguments.length;if(i){u(n+i);var c=n;while(c--){var l=c+i;c in t?t[l]=t[c]:a(t,l)}for(var h=0;h<i;h++)t[h]=arguments[h]}return o(t,n+i)}})},2087:function(e,t,n){var i=n(7854),r=n(9781),s=n(7045),o=n(7066),a=n(7293),u=i.RegExp,c=u.prototype,l=r&&a((function(){var e=!0;try{u(".","d")}catch(l){e=!1}var t={},n="",i=e?"dgimsy":"gimsy",r=function(e,i){Object.defineProperty(t,e,{get:function(){return n+=i,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(s.hasIndices="d"),s)r(o,s[o]);var a=Object.getOwnPropertyDescriptor(c,"flags").get.call(t);return a!==i||n!==i}));l&&s(c,"flags",{configurable:!0,get:o})},1439:function(e,t,n){"use strict";var i=n(1843),r=n(260),s=r.aTypedArray,o=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;o("toReversed",(function(){return i(s(this),a(this))}))},7585:function(e,t,n){"use strict";var i=n(260),r=n(1702),s=n(9662),o=n(7745),a=i.aTypedArray,u=i.getTypedArrayConstructor,c=i.exportTypedArrayMethod,l=r(i.TypedArrayPrototype.sort);c("toSorted",(function(e){void 0!==e&&s(e);var t=a(this),n=o(u(t),t);return l(n,e)}))},5315:function(e,t,n){"use strict";var i=n(1572),r=n(260),s=n(4067),o=n(9303),a=n(4599),u=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();l("with",{with:function(e,t){var n=u(this),r=o(e),l=s(n)?a(t):+t;return i(n,c(n),r,l)}}["with"],!h)},3767:function(e,t,n){n(1439)},8585:function(e,t,n){n(7585)},8696:function(e,t,n){n(5315)},2801:function(e,t,n){"use strict";var i=n(2109),r=n(7854),s=n(5005),o=n(9114),a=n(3070).f,u=n(2597),c=n(5787),l=n(9587),h=n(6277),d=n(3678),p=n(1060),f=n(9781),m=n(1913),g="DOMException",y=s("Error"),v=s(g),_=function(){c(this,b);var e=arguments.length,t=h(e<1?void 0:arguments[0]),n=h(e<2?void 0:arguments[1],"Error"),i=new v(t,n),r=y(t);return r.name=g,a(i,"stack",o(1,p(r.stack,1))),l(i,this,_),i},b=_.prototype=v.prototype,T="stack"in y(g),w="stack"in new v(1,2),E=v&&f&&Object.getOwnPropertyDescriptor(r,g),S=!!E&&!(E.writable&&E.configurable),k=T&&!S&&!w;i({global:!0,constructor:!0,forced:m||k},{DOMException:k?_:v});var C=s(g),I=C.prototype;if(I.constructor!==C)for(var O in m||a(I,"constructor",o(1,C)),d)if(u(d,O)){var x=d[O],A=x.s;u(C,A)||a(C,A,o(6,x.c))}},223:function(e,t,n){"use strict";n.d(t,{BH:function(){return v},L:function(){return u},LL:function(){return O},Pz:function(){return y},ZR:function(){return I},aH:function(){return g},b$:function(){return w},eu:function(){return k},hl:function(){return S},m9:function(){return V},ne:function(){return U},pd:function(){return M},q4:function(){return m},ru:function(){return T},tV:function(){return c},uI:function(){return b},vZ:function(){return P},w1:function(){return E},xO:function(){return N},xb:function(){return D},z$:function(){return _},zd:function(){return L}});n(2801),n(7658);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},r=function(e){const t=[];let n=0,i=0;while(n<e.length){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],u=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(1023&u))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,u=a?e[r+2]:0,c=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),i.push(n[c],n[l],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):r(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length,a=s?n[e.charAt(r)]:0;++r;const u=r<e.length,c=u?n[e.charAt(r)]:64;++r;const l=r<e.length,h=l?n[e.charAt(r)]:64;if(++r,null==t||null==a||null==c||null==h)throw new o;const d=t<<2|a>>4;if(i.push(d),64!==c){const e=a<<4&240|c>>2;if(i.push(e),64!==h){const e=c<<6&192|h;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){const t=i(e);return s.encodeByteArray(t,!0)},u=function(e){return a(e).replace(/\./g,"")},c=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h=()=>l().__FIREBASE_DEFAULTS__,d=()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0},p=()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)},f=()=>{try{return h()||d()||p()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},m=e=>{var t,n;return null===(n=null===(t=f())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},g=()=>{var e;return null===(e=f())||void 0===e?void 0:e.config},y=e=>{var t;return null===(t=f())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function b(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function T(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function E(){const e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const C="FirebaseError";class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=C,Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?x(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new I(i,o,n);return a}}function x(e,t){return e.replace(A,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}const A=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function P(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(R(n)&&R(s)){if(!P(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function R(e){return null!==e&&"object"===typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function N(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function L(e){const t={},n=e.replace(/^\?/,"").split("&");return n.forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function M(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e,t){const n=new j(e,t);return n.subscribe.bind(n)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=F(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=B),void 0===i.error&&(i.error=B),void 0===i.complete&&(i.complete=B);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function F(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}function B(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function V(e){return e&&e._delegate?e._delegate:e}},6575:function(e,t,n){"use strict";n.d(t,{Y7:function(){return mp}});var i=n(3396),r=n(4870),s=n(7139),o=(n(541),n(7658),n(3767),n(8585),n(8696),n(2087),n(5743)),a=n.n(o),u=n(9004),c=n.n(u),l=n(6274),h=n.n(l),d=n(4988),p=n.n(d),f=n(3470),m=n.n(f),g=n(5570),y=n.n(g),v=n(2940),_=n.n(v),b="http://example.com",T=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=a().location&&a().location.href||"");var n="function"===typeof a().URL,i=/^\/\//.test(e),r=!a().location&&!/\/\//i.test(e);if(n?e=new(a().URL)(e,a().location||b):/\/\//i.test(e)||(e=_().buildAbsoluteURL(a().location&&a().location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(b.length):i?s.href.slice(s.protocol.length):s.href}return _().buildAbsoluteURL(e,t)},w=T;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E.apply(this,arguments)}var S=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),k=(n(2801),function(e){return a().atob?a().atob(e):Buffer.from(e,"base64").toString("binary")});function C(e){for(var t=k(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/*! @name m3u8-parser @version 6.0.0 @license Apache-2.0 */
class I extends S{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const O=String.fromCharCode(9),x=function(e){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},A=function(){const e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")},D=function(e){const t={};if(!e)return t;const n=e.split(A());let i,r=n.length;while(r--)""!==n[r]&&(i=/([^=]*)=(.*)/.exec(n[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),t[i[0]]=i[1]);return t};class P extends S{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,n;if(e=e.trim(),0===e.length)return;if("#"!==e[0])return void this.trigger("data",{type:"uri",uri:e});const i=this.tagMappers.reduce(((t,n)=>{const i=n(e);return i===e?t:t.concat([i])}),[e]);i.forEach((e=>{for(let t=0;t<this.customParsers.length;t++)if(this.customParsers[t].call(this,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e),t)return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e),t)return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e),t)return n=E(x(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e),t)return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"map"},t[1]){const e=D(t[1]);e.URI&&(n.uri=e.URI),e.BYTERANGE&&(n.byterange=x(e.BYTERANGE))}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e),t){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=D(t[1]),n.attributes.RESOLUTION){const e=n.attributes.RESOLUTION.split("x"),t={};e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),n.attributes.RESOLUTION=t}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e),t)return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=D(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e),t)this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e),t)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e),t)return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e),t)return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=D(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e),t)return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=D(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e),t)return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-SKIP:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"skip"},n.attributes=D(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(O)),void this.trigger("data",n);if(t=/^#EXT-X-PART:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part"},n.attributes=D(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=x(n.attributes.BYTERANGE)),void this.trigger("data",n);if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"server-control"},n.attributes=D(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PART-INF:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"part-inf"},n.attributes=D(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void this.trigger("data",n);if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"preload-hint"},n.attributes=D(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);const t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void this.trigger("data",n);if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e),t&&t[1])return n={type:"tag",tagType:"rendition-report"},n.attributes=D(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)})}))}addParser({expression:e,customType:t,dataParser:n,segment:i}){"function"!==typeof n&&(n=e=>e),this.customParsers.push((r=>{const s=e.exec(r);if(s)return this.trigger("data",{type:"custom",data:n(r),customType:t,segment:i}),!0}))}addTagMapper({expression:e,map:t}){const n=n=>e.test(n)?t(n):n;this.tagMappers.push(n)}}const R=e=>e.toLowerCase().replace(/-(\w)/g,(e=>e[1].toUpperCase())),N=function(e){const t={};return Object.keys(e).forEach((function(n){t[R(n)]=e[n]})),t},L=function(e){const{serverControl:t,targetDuration:n,partTargetDuration:i}=e;if(!t)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",a=n&&3*n,u=i&&2*i;n&&!t.hasOwnProperty(s)&&(t[s]=a,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${a}).`})),a&&t[s]<a&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${t[s]}) to targetDuration * 3 (${a})`}),t[s]=a),i&&!t.hasOwnProperty(o)&&(t[o]=3*i,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[o]}).`})),i&&t[o]<u&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${t[o]}) to partTargetDuration * 2 (${u}).`}),t[o]=u)};class M extends S{constructor(){super(),this.lineStream=new I,this.parseStream=new P,this.lineStream.pipe(this.parseStream);const e=this,t=[];let n,i,r={},s=!1;const o=function(){},a={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let c=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let l=0,h=0;this.on("end",(()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&n&&(r.map=n),!r.key&&i&&(r.key=i),r.timeline||"number"!==typeof c||(r.timeline=c),this.manifest.preloadSegment=r)})),this.parseStream.on("data",(function(d){let p,f;({tag(){({version(){d.version&&(this.manifest.version=d.version)},"allow-cache"(){this.manifest.allowCache=d.allowed,"allowed"in d||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const e={};"length"in d&&(r.byterange=e,e.length=d.length,"offset"in d||(d.offset=l)),"offset"in d&&(r.byterange=e,e.offset=d.offset),l=e.offset+e.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),d.duration>0&&(r.duration=d.duration),0===d.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(d.attributes)if("NONE"!==d.attributes.METHOD)if(d.attributes.URI){if("com.apple.streamingkeydelivery"===d.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:d.attributes});if("com.microsoft.playready"===d.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:d.attributes.URI});if(d.attributes.KEYFORMAT===u){const e=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return-1===e.indexOf(d.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===d.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==d.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):d.attributes.KEYID&&"0x"===d.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:d.attributes.KEYFORMAT,keyId:d.attributes.KEYID.substring(2)},pssh:C(d.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}d.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:d.attributes.METHOD||"AES-128",uri:d.attributes.URI},"undefined"!==typeof d.attributes.IV&&(i.iv=d.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(d.number)?this.manifest.mediaSequence=d.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+d.number})},"discontinuity-sequence"(){isFinite(d.number)?(this.manifest.discontinuitySequence=d.number,c=d.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+d.number})},"playlist-type"(){/VOD|EVENT/.test(d.playlistType)?this.manifest.playlistType=d.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+d.playlist})},map(){n={},d.uri&&(n.uri=d.uri),d.byterange&&(n.byterange=d.byterange),i&&(n.key=i)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||a,d.attributes?(r.attributes||(r.attributes={}),E(r.attributes,d.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||a,!(d.attributes&&d.attributes.TYPE&&d.attributes["GROUP-ID"]&&d.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const e=this.manifest.mediaGroups[d.attributes.TYPE];e[d.attributes["GROUP-ID"]]=e[d.attributes["GROUP-ID"]]||{},p=e[d.attributes["GROUP-ID"]],f={default:/yes/i.test(d.attributes.DEFAULT)},f.default?f.autoselect=!0:f.autoselect=/yes/i.test(d.attributes.AUTOSELECT),d.attributes.LANGUAGE&&(f.language=d.attributes.LANGUAGE),d.attributes.URI&&(f.uri=d.attributes.URI),d.attributes["INSTREAM-ID"]&&(f.instreamId=d.attributes["INSTREAM-ID"]),d.attributes.CHARACTERISTICS&&(f.characteristics=d.attributes.CHARACTERISTICS),d.attributes.FORCED&&(f.forced=/yes/i.test(d.attributes.FORCED)),p[d.attributes.NAME]=f},discontinuity(){c+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=d.dateTimeString,this.manifest.dateTimeObject=d.dateTimeObject),r.dateTimeString=d.dateTimeString,r.dateTimeObject=d.dateTimeObject},targetduration(){!isFinite(d.duration)||d.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+d.duration}):(this.manifest.targetDuration=d.duration,L.call(this,this.manifest))},start(){d.attributes&&!isNaN(d.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:d.attributes["TIME-OFFSET"],precise:d.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=d.data},"cue-out-cont"(){r.cueOutCont=d.data},"cue-in"(){r.cueIn=d.data},skip(){this.manifest.skip=N(d.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",d.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;const e=this.manifest.segments.length,t=N(d.attributes);r.parts=r.parts||[],r.parts.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=h),h=t.byterange.offset+t.byterange.length);const n=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${n} for segment #${e}`,d.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(((e,t)=>{e.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${t} lacks required attribute(s): LAST-PART`})}))},"server-control"(){const e=this.manifest.serverControl=N(d.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),L.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const e=this.manifest.segments.length,t=N(d.attributes),n=t.type&&"PART"===t.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(t),t.byterange&&(t.byterange.hasOwnProperty("offset")||(t.byterange.offset=n?h:0,n&&(h=t.byterange.offset+t.byterange.length)));const i=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${i} for segment #${e}`,d.attributes,["TYPE","URI"]),t.type)for(let s=0;s<r.preloadHints.length-1;s++){const n=r.preloadHints[s];n.type&&(n.type===t.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${i} for segment #${e} has the same TYPE ${t.type} as preload hint #${s}`}))}},"rendition-report"(){const e=N(d.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);const t=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];s&&n.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${t}`,d.attributes,n)},"part-inf"(){this.manifest.partInf=N(d.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",d.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),L.call(this,this.manifest)}}[d.tagType]||o).call(e)},uri(){r.uri=d.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),i&&(r.key=i),r.timeline=c,n&&(r.map=n),h=0,r={}},comment(){},custom(){d.segment?(r.custom=r.custom||{},r.custom[d.customType]=d.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[d.customType]=d.data)}})[d.type].call(e)}))}warnOnMissingAttributes_(e,t,n){const i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var U={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},j=["video","audio","text"],F=["Video","Audio","Text"],B=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){var i=("00"+Number(t).toString(16)).slice(-2),r=("00"+Number(n).toString(16)).slice(-2);return"avc1."+i+"00"+r})):e},V=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),j.forEach((function(i){var r=U[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var s=e.substring(0,r[1].length),o=e.replace(s,"");n.push({type:s,details:o,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},$=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return V(r.playlists[0].attributes.CODECS)}return null},q=function(e){return void 0===e&&(e=""),U.audio.test(e.trim().toLowerCase())},H=function(e){return void 0===e&&(e=""),U.text.test(e.trim().toLowerCase())},W=function(e){if(e&&"string"===typeof e){var t=e.toLowerCase().split(",").map((function(e){return B(e.trim())})),n="video";1===t.length&&q(t[0])?n="audio":1===t.length&&H(t[0])&&(n="application");var i="mp4";return t.every((function(e){return U.mp4.test(e)}))?i="mp4":t.every((function(e){return U.webm.test(e)}))?i="webm":t.every((function(e){return U.ogg.test(e)}))&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}},z=function(e){return void 0===e&&(e=""),a().MediaSource&&a().MediaSource.isTypeSupported&&a().MediaSource.isTypeSupported(W(e))||!1},G=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<F.length;t++){var n=F[t];if(U["muxer"+n].test(e))return!0}return!1}))},Q="mp4a.40.2",K="avc1.4d400d",X=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Y=/^application\/dash\+xml/i,J=function(e){return X.test(e)?"hls":Y.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Z=function(e){return e.toString(2).length},ee=function(e){return Math.ceil(Z(e)/8)},te=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},ne=function(e){return te(e)},ie=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||ne(e)||e instanceof ArrayBuffer||(e="number"!==typeof e||"number"===typeof e&&e!==e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},re=a().BigInt||Number,se=[re("0x1"),re("0x100"),re("0x10000"),re("0x1000000"),re("0x100000000"),re("0x10000000000"),re("0x1000000000000"),re("0x100000000000000"),re("0x10000000000000000")],oe=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,s=n.le,o=void 0!==s&&s;e=ie(e);var a=o?"reduce":"reduceRight",u=e[a]?e[a]:Array.prototype[a],c=u.call(e,(function(t,n,i){var r=o?i:Math.abs(i+1-e.length);return t+re(n)*se[r]}),re(0));if(r){var l=se[e.length]/re(2)-re(1);c=re(c),c>l&&(c-=l,c-=l,c-=re(2))}return Number(c)}),ae=function(e,t){var n=void 0===t?{}:t,i=n.le,r=void 0!==i&&i;("bigint"!==typeof e&&"number"!==typeof e||"number"===typeof e&&e!==e)&&(e=0),e=re(e);for(var s=ee(e),o=new Uint8Array(new ArrayBuffer(s)),a=0;a<s;a++){var u=r?a:Math.abs(a+1-o.length);o[u]=Number(e/se[a]&re(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=0===a?1:2)}return o},ue=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,ie(e));try{return decodeURIComponent(escape(t))}catch(n){}return t},ce=function(e,t){if("string"!==typeof e&&e&&"function"===typeof e.toString&&(e=e.toString()),"string"!==typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},le=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!==typeof e})),t.length<=1)return ie(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),s=0;return t.forEach((function(e){e=ie(e),r.set(e,s),s+=e.byteLength})),r},he=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,s=void 0===r?0:r,o=i.mask,a=void 0===o?[]:o;e=ie(e),t=ie(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&u.call(t,(function(t,n){var i=a[n]?a[n]&e[s+n]:e[s+n];return t===i}))},de="http://example.com",pe=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=a().location&&a().location.href||"");var n="function"===typeof a().URL,i=/^\/\//.test(e),r=!a().location&&!/\/\//i.test(e);if(n?e=new(a().URL)(e,a().location||de):/\/\//i.test(e)||(e=_().buildAbsoluteURL(a().location&&a().location.href||"",e)),n){var s=new URL(t,e);return r?s.href.slice(de.length):i?s.href.slice(s.protocol.length):s.href}return _().buildAbsoluteURL(e,t)},fe=pe,me=function(e,t,n){t.forEach((function(t){for(var i in e.mediaGroups[t])for(var r in e.mediaGroups[t][i]){var s=e.mediaGroups[t][i][r];n(s,t,i,r)}}))},ge=function(e){return a().atob?a().atob(e):Buffer.from(e,"base64").toString("binary")};function ye(e){for(var t=ge(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}var ve=n(7978);const _e=e=>!!e&&"object"===typeof e,be=(...e)=>e.reduce(((e,t)=>("object"!==typeof t||Object.keys(t).forEach((n=>{Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):_e(e[n])&&_e(t[n])?e[n]=be(e[n],t[n]):e[n]=t[n]})),e)),{}),Te=e=>Object.keys(e).map((t=>e[t])),we=(e,t)=>{const n=[];for(let i=e;i<t;i++)n.push(i);return n},Ee=e=>e.reduce(((e,t)=>e.concat(t)),[]),Se=e=>{if(!e.length)return[];const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);return t},ke=(e,t)=>e.reduce(((e,n,i)=>(n[t]&&e.push(i),e)),[]),Ce=(e,t)=>Te(e.reduce(((e,n)=>(n.forEach((n=>{e[t(n)]=n})),e)),{}));var Ie={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Oe=({baseUrl:e="",source:t="",range:n="",indexRange:i=""})=>{const r={uri:t,resolvedUri:fe(e||"",t)};if(n||i){const e=n||i,t=e.split("-");let s,o=a().BigInt?a().BigInt(t[0]):parseInt(t[0],10),u=a().BigInt?a().BigInt(t[1]):parseInt(t[1],10);o<Number.MAX_SAFE_INTEGER&&"bigint"===typeof o&&(o=Number(o)),u<Number.MAX_SAFE_INTEGER&&"bigint"===typeof u&&(u=Number(u)),s="bigint"===typeof u||"bigint"===typeof o?a().BigInt(u)-a().BigInt(o)+a().BigInt(1):u-o+1,"bigint"===typeof s&&s<Number.MAX_SAFE_INTEGER&&(s=Number(s)),r.byterange={length:s,offset:o}}return r},xe=e=>{let t;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?a().BigInt(e.offset)+a().BigInt(e.length)-a().BigInt(1):e.offset+e.length-1,`${e.offset}-${t}`},Ae=e=>(e&&"number"!==typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e),De={static(e){const{duration:t,timescale:n=1,sourceDuration:i,periodDuration:r}=e,s=Ae(e.endNumber),o=t/n;return"number"===typeof s?{start:0,end:s}:"number"===typeof r?{start:0,end:r/o}:{start:0,end:i/o}},dynamic(e){const{NOW:t,clientOffset:n,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:o=0,minimumUpdatePeriod:a=0,timeShiftBufferDepth:u=1/0}=e,c=Ae(e.endNumber),l=(t+n)/1e3,h=i+o,d=l+a,p=d-h,f=Math.ceil(p*r/s),m=Math.floor((l-h-u)*r/s),g=Math.floor((l-h)*r/s);return{start:Math.max(0,m),end:"number"===typeof c?c:Math.min(f,g)}}},Pe=e=>t=>{const{duration:n,timescale:i=1,periodStart:r,startNumber:s=1}=e;return{number:s+t,duration:n/i,timeline:r,time:t*n}},Re=e=>{const{type:t,duration:n,timescale:i=1,periodDuration:r,sourceDuration:s}=e,{start:o,end:a}=De[t](e),u=we(o,a).map(Pe(e));if("static"===t){const e=u.length-1,t="number"===typeof r?r:s;u[e].duration=t-n/i*e}return u},Ne=e=>{const{baseUrl:t,initialization:n={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:o,number:a=0,duration:u}=e;if(!t)throw new Error(Ie.NO_BASE_URL);const c=Oe({baseUrl:t,source:n.sourceURL,range:n.range}),l=Oe({baseUrl:t,source:t,indexRange:r});if(l.map=c,u){const t=Re(e);t.length&&(l.duration=t[0].duration,l.timeline=t[0].timeline)}else i&&(l.duration=i,l.timeline=s);return l.presentationTime=o||s,l.number=a,[l]},Le=(e,t,n)=>{const i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,u=o.offset+o.length,c=t.timescale,l=t.references.filter((e=>1!==e.referenceType)),h=[],d=e.endList?"static":"dynamic",p=e.sidx.timeline;let f,m=p,g=e.mediaSequence||0;f="bigint"===typeof t.firstOffset?a().BigInt(u)+t.firstOffset:u+t.firstOffset;for(let y=0;y<l.length;y++){const e=t.references[y],o=e.referencedSize,u=e.subsegmentDuration;let l;l="bigint"===typeof f?f+a().BigInt(o)-a().BigInt(1):f+o-1;const v=`${f}-${l}`,_={baseUrl:n,timescale:c,timeline:s,periodStart:p,presentationTime:m,number:g,duration:u,sourceDuration:r,indexRange:v,type:d},b=Ne(_)[0];i&&(b.map=i),h.push(b),f+="bigint"===typeof f?a().BigInt(o):o,m+=u/c,g++}return e.segments=h,e},Me=["AUDIO","SUBTITLES"],Ue=1/60,je=e=>Ce(e,(({timeline:e})=>e)).sort(((e,t)=>e.timeline>t.timeline?1:-1)),Fe=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null},Be=e=>{let t=[];return me(e,Me,((e,n,i,r)=>{t=t.concat(e.playlists||[])})),t},Ve=({playlist:e,mediaSequence:t})=>{e.mediaSequence=t,e.segments.forEach(((t,n)=>{t.number=e.mediaSequence+n}))},$e=({oldPlaylists:e,newPlaylists:t,timelineStarts:n})=>{t.forEach((t=>{t.discontinuitySequence=n.findIndex((function({timeline:e}){return e===t.timeline}));const i=Fe(e,t.attributes.NAME);if(!i)return;if(t.sidx)return;const r=t.segments[0],s=i.segments.findIndex((function(e){return Math.abs(e.presentationTime-r.presentationTime)<Ue}));if(-1===s)return Ve({playlist:t,mediaSequence:i.mediaSequence+i.segments.length}),t.segments[0].discontinuity=!0,t.discontinuityStarts.unshift(0),void((!i.segments.length&&t.timeline>i.timeline||i.segments.length&&t.timeline>i.segments[i.segments.length-1].timeline)&&t.discontinuitySequence--);const o=i.segments[s];o.discontinuity&&!r.discontinuity&&(r.discontinuity=!0,t.discontinuityStarts.unshift(0),t.discontinuitySequence--),Ve({playlist:t,mediaSequence:i.segments[s].number})}))},qe=({oldManifest:e,newManifest:t})=>{const n=e.playlists.concat(Be(e)),i=t.playlists.concat(Be(t));return t.timelineStarts=je([e.timelineStarts,t.timelineStarts]),$e({oldPlaylists:n,newPlaylists:i,timelineStarts:t.timelineStarts}),t},He=e=>e&&e.uri+"-"+xe(e.byterange),We=e=>{const t=Te(e.reduce(((e,t)=>{const n=t.attributes.id+(t.attributes.lang||"");return e[n]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),e[n].segments.push(...t.segments)),t.attributes.contentProtection&&(e[n].attributes.contentProtection=t.attributes.contentProtection)):(e[n]=t,e[n].attributes.timelineStarts=[]),e[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{}));return t.map((e=>(e.discontinuityStarts=ke(e.segments||[],"discontinuity"),e)))},ze=(e,t)=>{const n=He(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&Le(e,i,e.sidx.resolvedUri),e},Ge=(e,t={})=>{if(!Object.keys(t).length)return e;for(const n in e)e[n]=ze(e[n],t);return e},Qe=({attributes:e,segments:t,sidx:n,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},o)=>{const a={attributes:{NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:e.timelineStarts,mediaSequence:i,segments:t};return e.contentProtection&&(a.contentProtection=e.contentProtection),n&&(a.sidx=n),o&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a},Ke=({attributes:e,segments:t,mediaSequence:n,discontinuityStarts:i,discontinuitySequence:r})=>{"undefined"===typeof t&&(t=[{uri:e.baseUrl,timeline:e.periodStart,resolvedUri:e.baseUrl||"",duration:e.sourceDuration,number:0}],e.duration=e.sourceDuration);const s={NAME:e.id,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1};return e.codecs&&(s.CODECS=e.codecs),{attributes:s,uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:e.baseUrl||"",targetDuration:e.duration,timelineStarts:e.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:n,segments:t}},Xe=(e,t={},n=!1)=>{let i;const r=e.reduce(((e,r)=>{const s=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"";let a=r.attributes.label||"main";if(o&&!r.attributes.label){const e=s?` (${s})`:"";a=`${r.attributes.lang}${e}`}e[a]||(e[a]={language:o,autoselect:!0,default:"main"===s,playlists:[],uri:""});const u=ze(Qe(r,n),t);return e[a].playlists.push(u),"undefined"===typeof i&&"main"===s&&(i=r,i.default=!0),e}),{});if(!i){const e=Object.keys(r)[0];r[e].default=!0}return r},Ye=(e,t={})=>e.reduce(((e,n)=>{const i=n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(ze(Ke(n),t)),e}),{}),Je=e=>e.reduce(((e,t)=>t?(t.forEach((t=>{const{channel:n,language:i}=t;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e),{}),Ze=({attributes:e,segments:t,sidx:n,discontinuityStarts:i})=>{const r={attributes:{NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:"static"===e.type,timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuityStarts:i,timelineStarts:e.timelineStarts,segments:t};return e.frameRate&&(r.attributes["FRAME-RATE"]=e.frameRate),e.contentProtection&&(r.contentProtection=e.contentProtection),n&&(r.sidx=n),r},et=({attributes:e})=>"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType,tt=({attributes:e})=>"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType,nt=({attributes:e})=>"text/vtt"===e.mimeType||"text"===e.contentType,it=(e,t)=>{e.forEach((e=>{e.mediaSequence=0,e.discontinuitySequence=t.findIndex((function({timeline:t}){return t===e.timeline})),e.segments&&e.segments.forEach(((e,t)=>{e.number=t}))}))},rt=e=>e?Object.keys(e).reduce(((t,n)=>{const i=e[n];return t.concat(i.playlists)}),[]):[],st=({dashPlaylists:e,locations:t,sidxMapping:n={},previousManifest:i})=>{if(!e.length)return{};const{sourceDuration:r,type:s,suggestedPresentationDelay:o,minimumUpdatePeriod:a}=e[0].attributes,u=We(e.filter(et)).map(Ze),c=We(e.filter(tt)),l=We(e.filter(nt)),h=e.map((e=>e.attributes.captionServices)).filter(Boolean),d={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:r,playlists:Ge(u,n)};a>=0&&(d.minimumUpdatePeriod=1e3*a),t&&(d.locations=t),"dynamic"===s&&(d.suggestedPresentationDelay=o);const p=0===d.playlists.length,f=c.length?Xe(c,n,p):null,m=l.length?Ye(l,n):null,g=u.concat(rt(f),rt(m)),y=g.map((({timelineStarts:e})=>e));return d.timelineStarts=je(y),it(g,d.timelineStarts),f&&(d.mediaGroups.AUDIO.audio=f),m&&(d.mediaGroups.SUBTITLES.subs=m),h.length&&(d.mediaGroups["CLOSED-CAPTIONS"].cc=Je(h)),i?qe({oldManifest:i,newManifest:d}):d},ot=(e,t,n)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:o=1,periodStart:a=0,minimumUpdatePeriod:u=0}=e,c=(i+r)/1e3,l=s+a,h=c+u,d=h-l;return Math.ceil((d*o-t)/n)},at=(e,t)=>{const{type:n,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:o=1,startNumber:a=1,periodStart:u}=e,c=[];let l=-1;for(let h=0;h<t.length;h++){const d=t[h],p=d.d,f=d.r||0,m=d.t||0;let g;if(l<0&&(l=m),m&&m>l&&(l=m),f<0){const a=h+1;g=a===t.length?"dynamic"===n&&i>0&&r.indexOf("$Number$")>0?ot(e,l,p):(s*o-l)/p:(t[a].t-l)/p}else g=f+1;const y=a+c.length+g;let v=a+c.length;while(v<y)c.push({number:v,duration:p/o,time:l,timeline:u}),l+=p,v++}return c},ut=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ct=e=>(t,n,i,r)=>{if("$$"===t)return"$";if("undefined"===typeof e[n])return t;const s=""+e[n];return"RepresentationID"===n?s:(r=i?parseInt(r,10):1,s.length>=r?s:`${new Array(r-s.length+1).join("0")}${s}`)},lt=(e,t)=>e.replace(ut,ct(t)),ht=(e,t)=>e.duration||t?e.duration?Re(e):at(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}],dt=(e,t)=>{const n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=e,r=Oe({baseUrl:e.baseUrl,source:lt(i.sourceURL,n),range:i.range}),s=ht(e,t);return s.map((t=>{n.Number=t.number,n.Time=t.time;const i=lt(e.media||"",n),s=e.timescale||1,o=e.presentationTimeOffset||0,a=e.periodStart+(t.time-o)/s,u={uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:fe(e.baseUrl||"",i),map:r,number:t.number,presentationTime:a};return u}))},pt=(e,t)=>{const{baseUrl:n,initialization:i={}}=e,r=Oe({baseUrl:n,source:i.sourceURL,range:i.range}),s=Oe({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=r,s},ft=(e,t)=>{const{duration:n,segmentUrls:i=[],periodStart:r}=e;if(!n&&!t||n&&t)throw new Error(Ie.SEGMENT_TIME_UNSPECIFIED);const s=i.map((t=>pt(e,t)));let o;n&&(o=Re(e)),t&&(o=at(e,t));const a=o.map(((t,n)=>{if(s[n]){const i=s[n],o=e.timescale||1,a=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-a)/o,i}})).filter((e=>e));return a},mt=({attributes:e,segmentInfo:t})=>{let n,i;t.template?(i=dt,n=be(e,t.template)):t.base?(i=Ne,n=be(e,t.base)):t.list&&(i=ft,n=be(e,t.list));const r={attributes:e};if(!i)return r;const s=i(n,t.segmentTimeline);if(n.duration){const{duration:e,timescale:t=1}=n;n.duration=e/t}else s.length?n.duration=s.reduce(((e,t)=>Math.max(e,Math.ceil(t.duration))),0):n.duration=0;return r.attributes=n,r.segments=s,t.base&&n.indexRange&&(r.sidx=s[0],r.segments=[]),r},gt=e=>e.map(mt),yt=(e,t)=>Se(e.childNodes).filter((({tagName:e})=>e===t)),vt=e=>e.textContent.trim(),_t=e=>parseFloat(e.split("/").reduce(((e,t)=>e/t))),bt=e=>{const t=31536e3,n=2592e3,i=86400,r=3600,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,a=o.exec(e);if(!a)return 0;const[u,c,l,h,d,p]=a.slice(1);return parseFloat(u||0)*t+parseFloat(c||0)*n+parseFloat(l||0)*i+parseFloat(h||0)*r+parseFloat(d||0)*s+parseFloat(p||0)},Tt=e=>{const t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},wt={mediaPresentationDuration(e){return bt(e)},availabilityStartTime(e){return Tt(e)/1e3},minimumUpdatePeriod(e){return bt(e)},suggestedPresentationDelay(e){return bt(e)},type(e){return e},timeShiftBufferDepth(e){return bt(e)},start(e){return bt(e)},width(e){return parseInt(e,10)},height(e){return parseInt(e,10)},bandwidth(e){return parseInt(e,10)},frameRate(e){return _t(e)},startNumber(e){return parseInt(e,10)},timescale(e){return parseInt(e,10)},presentationTimeOffset(e){return parseInt(e,10)},duration(e){const t=parseInt(e,10);return isNaN(t)?bt(e):t},d(e){return parseInt(e,10)},t(e){return parseInt(e,10)},r(e){return parseInt(e,10)},DEFAULT(e){return e}},Et=e=>e&&e.attributes?Se(e.attributes).reduce(((e,t)=>{const n=wt[t.name]||wt.DEFAULT;return e[t.name]=n(t.value),e}),{}):{},St={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},kt=(e,t)=>t.length?Ee(e.map((function(e){return t.map((function(t){return fe(e,vt(t))}))}))):e,Ct=e=>{const t=yt(e,"SegmentTemplate")[0],n=yt(e,"SegmentList")[0],i=n&&yt(n,"SegmentURL").map((e=>be({tag:"SegmentURL"},Et(e)))),r=yt(e,"SegmentBase")[0],s=n||t,o=s&&yt(s,"SegmentTimeline")[0],a=n||r||t,u=a&&yt(a,"Initialization")[0],c=t&&Et(t);c&&u?c.initialization=u&&Et(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});const l={template:c,segmentTimeline:o&&yt(o,"S").map((e=>Et(e))),list:n&&be(Et(n),{segmentUrls:i,initialization:Et(u)}),base:r&&be(Et(r),{initialization:Et(u)})};return Object.keys(l).forEach((e=>{l[e]||delete l[e]})),l},It=(e,t,n)=>i=>{const r=yt(i,"BaseURL"),s=kt(t,r),o=be(e,Et(i)),a=Ct(i);return s.map((e=>({segmentInfo:be(n,a),attributes:be(o,{baseUrl:e})})))},Ot=e=>e.reduce(((e,t)=>{const n=Et(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());const i=St[n.schemeIdUri];if(i){e[i]={attributes:n};const r=yt(t,"cenc:pssh")[0];if(r){const t=vt(r);e[i].pssh=t&&ye(t)}}return e}),{}),xt=e=>{if("urn:scte:dash:cc:cea-608:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map((e=>{let t,n;return n=e,/^CC\d=/.test(e)?[t,n]=e.split("="):/^CC\d$/.test(e)&&(t=e),{channel:t,language:n}}))}if("urn:scte:dash:cc:cea-708:2015"===e.schemeIdUri){const t="string"!==typeof e.value?[]:e.value.split(";");return t.map((e=>{const t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){const[n,i=""]=e.split("=");t.channel=n,t.language=e,i.split(",").forEach((e=>{const[n,i]=e.split(":");"lang"===n?t.language=i:"er"===n?t.easyReader=Number(i):"war"===n?t.aspectRatio=Number(i):"3D"===n&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t}))}},At=(e,t,n)=>i=>{const r=Et(i),s=kt(t,yt(i,"BaseURL")),o=yt(i,"Role")[0],a={role:Et(o)};let u=be(e,r,a);const c=yt(i,"Accessibility")[0],l=xt(Et(c));l&&(u=be(u,{captionServices:l}));const h=yt(i,"Label")[0];if(h&&h.childNodes.length){const e=h.childNodes[0].nodeValue.trim();u=be(u,{label:e})}const d=Ot(yt(i,"ContentProtection"));Object.keys(d).length&&(u=be(u,{contentProtection:d}));const p=Ct(i),f=yt(i,"Representation"),m=be(n,p);return Ee(f.map(It(u,s,m)))},Dt=(e,t)=>(n,i)=>{const r=kt(t,yt(n.node,"BaseURL")),s=be(e,{periodStart:n.attributes.start});"number"===typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);const o=yt(n.node,"AdaptationSet"),a=Ct(n.node);return Ee(o.map(At(s,r,a)))},Pt=({attributes:e,priorPeriodAttributes:t,mpdType:n})=>"number"===typeof e.start?e.start:t&&"number"===typeof t.start&&"number"===typeof t.duration?t.start+t.duration:t||"static"!==n?null:0,Rt=(e,t={})=>{const{manifestUri:n="",NOW:i=Date.now(),clientOffset:r=0}=t,s=yt(e,"Period");if(!s.length)throw new Error(Ie.INVALID_NUMBER_OF_PERIOD);const o=yt(e,"Location"),a=Et(e),u=kt([n],yt(e,"BaseURL"));a.type=a.type||"static",a.sourceDuration=a.mediaPresentationDuration||0,a.NOW=i,a.clientOffset=r,o.length&&(a.locations=o.map(vt));const c=[];return s.forEach(((e,t)=>{const n=Et(e),i=c[t-1];n.start=Pt({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:a.type}),c.push({node:e,attributes:n})})),{locations:a.locations,representationInfo:Ee(c.map(Dt(a,u)))}},Nt=e=>{if(""===e)throw new Error(Ie.DASH_EMPTY_MANIFEST);const t=new ve.DOMParser;let n,i;try{n=t.parseFromString(e,"application/xml"),i=n&&"MPD"===n.documentElement.tagName?n.documentElement:null}catch(r){}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Ie.DASH_INVALID_XML);return i},Lt=e=>{const t=yt(e,"UTCTiming")[0];if(!t)return null;const n=Et(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ie.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},Mt=(e,t={})=>{const n=Rt(Nt(e),t),i=gt(n.representationInfo);return st({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},Ut=e=>Lt(Nt(e));var jt,Ft=n(9577),Bt=n.n(Ft),Vt=ie([73,68,51]),$t=function(e,t){void 0===t&&(t=0),e=ie(e);var n=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=(16&n)>>4;return r?i+20:i+10},qt=function e(t,n){return void 0===n&&(n=0),t=ie(t),t.length-n<10||!he(t,Vt,{offset:n})?n:(n+=$t(t,n),e(t,n))},Ht=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"===typeof e?ce(e):e}),Wt=function(e){return Array.isArray(e)?e.map((function(e){return Ht(e)})):[Ht(e)]},zt=function(e){e=ie(e);var t=[],n=0;while(e.length>n){var i=e[n],r=0,s=0;s++;var o=e[s];s++;while(128&o)r=(127&o)<<7,o=e[s],s++;r+=127&o;for(var a=0;a<jt.length;a++){var u=jt[a],c=u.id,l=u.parser;if(i===c){t.push(l(e.subarray(s,s+r)));break}}n+=r+s}return t};jt=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=ue(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=zt(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:zt(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Gt=function e(t,n,i){void 0===i&&(i=!1),n=Wt(n),t=ie(t);var r=[];if(!n.length)return r;var s=0;while(s<t.length){var o=(t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3])>>>0,a=t.subarray(s+4,s+8);if(0===o)break;var u=s+o;if(u>t.length){if(i)break;u=t.length}var c=t.subarray(s+8,u);he(a,n[0])&&(1===n.length?r.push(c):r.push.apply(r,e(c,n.slice(1),i))),s=u}return r},Qt={EBML:ie([26,69,223,163]),DocType:ie([66,130]),Segment:ie([24,83,128,103]),SegmentInfo:ie([21,73,169,102]),Tracks:ie([22,84,174,107]),Track:ie([174]),TrackNumber:ie([215]),DefaultDuration:ie([35,227,131]),TrackEntry:ie([174]),TrackType:ie([131]),FlagDefault:ie([136]),CodecID:ie([134]),CodecPrivate:ie([99,162]),VideoTrack:ie([224]),AudioTrack:ie([225]),Cluster:ie([31,67,182,117]),Timestamp:ie([231]),TimestampScale:ie([42,215,177]),BlockGroup:ie([160]),BlockDuration:ie([155]),Block:ie([161]),SimpleBlock:ie([163])},Kt=[128,64,32,16,8,4,2,1],Xt=function(e){for(var t=1,n=0;n<Kt.length;n++){if(e&Kt[n])break;t++}return t},Yt=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=Xt(e[t]),s=e.subarray(t,t+r);return n&&(s=Array.prototype.slice.call(e,t,t+r),s[0]^=Kt[r-1]),{length:r,value:oe(s,{signed:i}),bytes:s}},Jt=function e(t){return"string"===typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"===typeof t?ae(t):t},Zt=function(e){return Array.isArray(e)?e.map((function(e){return Jt(e)})):[Jt(e)]},en=function e(t,n,i){if(i>=n.length)return n.length;var r=Yt(n,i,!1);if(he(t.bytes,r.bytes))return i;var s=Yt(n,i+r.length);return e(t,n,i+s.length+s.value+r.length)},tn=function e(t,n){n=Zt(n),t=ie(t);var i=[];if(!n.length)return i;var r=0;while(r<t.length){var s=Yt(t,r,!1),o=Yt(t,r+s.length),a=r+s.length+o.length;127===o.value&&(o.value=en(s,t,a),o.value!==t.length&&(o.value-=a));var u=a+o.value>t.length?t.length:a+o.value,c=t.subarray(a,u);he(n[0],s.bytes)&&(1===n.length?i.push(c):i=i.concat(e(c,n.slice(1))));var l=s.length+o.length+c.length;r+=l}return i},nn=ie([0,0,0,1]),rn=ie([0,0,1]),sn=ie([0,0,3]),on=function(e){var t=[],n=1;while(n<e.length-2)he(e.subarray(n,n+3),sn)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),s=0;for(n=0;n<i;s++,n++)s===t[0]&&(s++,t.shift()),r[n]=e[s];return r},an=function(e,t,n,i){void 0===i&&(i=1/0),e=ie(e),n=[].concat(n);var r,s=0,o=0;while(s<e.length&&(o<i||r)){var a=void 0;if(he(e.subarray(s),nn)?a=4:he(e.subarray(s),rn)&&(a=3),a){if(o++,r)return on(e.subarray(r,s));var u=void 0;"h264"===t?u=31&e[s+a]:"h265"===t&&(u=e[s+a]>>1&63),-1!==n.indexOf(u)&&(r=s+a),s+=a+("h264"===t?1:2)}else s++}return e.subarray(0,0)},un=function(e,t,n){return an(e,"h264",t,n)},cn=function(e,t,n){return an(e,"h265",t,n)},ln={webm:ie([119,101,98,109]),matroska:ie([109,97,116,114,111,115,107,97]),flac:ie([102,76,97,67]),ogg:ie([79,103,103,83]),ac3:ie([11,119]),riff:ie([82,73,70,70]),avi:ie([65,86,73]),wav:ie([87,65,86,69]),"3gp":ie([102,116,121,112,51,103]),mp4:ie([102,116,121,112]),fmp4:ie([115,116,121,112]),mov:ie([102,116,121,112,113,116]),moov:ie([109,111,111,118]),moof:ie([109,111,111,102])},hn={aac:function(e){var t=qt(e);return he(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=qt(e);return he(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=tn(e,[Qt.EBML,Qt.DocType])[0];return he(t,ln.webm)},mkv:function(e){var t=tn(e,[Qt.EBML,Qt.DocType])[0];return he(t,ln.matroska)},mp4:function(e){return!hn["3gp"](e)&&!hn.mov(e)&&(!(!he(e,ln.mp4,{offset:4})&&!he(e,ln.fmp4,{offset:4}))||(!(!he(e,ln.moof,{offset:4})&&!he(e,ln.moov,{offset:4}))||void 0))},mov:function(e){return he(e,ln.mov,{offset:4})},"3gp":function(e){return he(e,ln["3gp"],{offset:4})},ac3:function(e){var t=qt(e);return he(e,ln.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];var t=0;while(t+188<e.length&&t<188){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=qt(e);return he(e,ln.flac,{offset:t})},ogg:function(e){return he(e,ln.ogg)},avi:function(e){return he(e,ln.riff)&&he(e,ln.avi,{offset:8})},wav:function(e){return he(e,ln.riff)&&he(e,ln.wav,{offset:8})},h264:function(e){return un(e,7,3).length},h265:function(e){return cn(e,[32,33],3).length}},dn=Object.keys(hn).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);dn.forEach((function(e){var t=hn[e];hn[e]=function(e){return t(ie(e))}}));var pn=hn,fn=function(e){e=ie(e);for(var t=0;t<dn.length;t++){var n=dn[t];if(pn[n](e))return n}return""},mn=function(e){return Gt(e,["moof"]).length>0},gn=n(9771),yn="8.0.4";const vn={},_n=function(e,t){return vn[e]=vn[e]||[],t&&(vn[e]=vn[e].concat(t)),vn[e]},bn=function(e,t){_n(e,t)},Tn=function(e,t){const n=_n(e).indexOf(t);return!(n<=-1)&&(vn[e]=vn[e].slice(),vn[e].splice(n,1),!0)},wn=function(e,t){_n(e,[].concat(t).map((t=>{const n=(...i)=>(Tn(e,n),t(...i));return n})))},En={prefixed:!0},Sn=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],kn=Sn[0];let Cn;for(let gp=0;gp<Sn.length;gp++)if(Sn[gp][1]in c()){Cn=Sn[gp];break}if(Cn){for(let e=0;e<Cn.length;e++)En[kn[e]]=Cn[e];En.prefixed=Cn[0]!==kn[0]}let In=[];const On=(e,t)=>(n,i,r)=>{const s=t.levels[i],o=new RegExp(`^(${s})$`);if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),In){In.push([].concat(r));const e=In.length-1e3;In.splice(0,e>0?e:0)}if(!a().console)return;let u=a().console[n];u||"debug"!==n||(u=a().console.info||a().console.log),u&&s&&o.test(n)&&u[Array.isArray(r)?"apply":"call"](a().console,r)};function xn(e){let t,n="info";const i=function(...e){t("log",n,e)};return t=On(e,i),i.createLogger=t=>xn(e+": "+t),i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:n},i.level=e=>{if("string"===typeof e){if(!i.levels.hasOwnProperty(e))throw new Error(`"${e}" in not a valid log level`);n=e}return n},i.history=()=>In?[].concat(In):[],i.history.filter=e=>(In||[]).filter((t=>new RegExp(`.*${e}.*`).test(t[0]))),i.history.clear=()=>{In&&(In.length=0)},i.history.disable=()=>{null!==In&&(In.length=0,In=null)},i.history.enable=()=>{null===In&&(In=[])},i.error=(...e)=>t("error",n,e),i.warn=(...e)=>t("warn",n,e),i.debug=(...e)=>t("debug",n,e),i}const An=xn("VIDEOJS"),Dn=An.createLogger,Pn=Object.prototype.toString,Rn=function(e){return Mn(e)?Object.keys(e):[]};function Nn(e,t){Rn(e).forEach((n=>t(e[n],n)))}function Ln(e,t,n=0){return Rn(e).reduce(((n,i)=>t(n,e[i],i)),n)}function Mn(e){return!!e&&"object"===typeof e}function Un(e){return Mn(e)&&"[object Object]"===Pn.call(e)&&e.constructor===Object}function jn(...e){const t={};return e.forEach((e=>{e&&Nn(e,((e,n)=>{Un(e)?(Un(t[n])||(t[n]={}),t[n]=jn(t[n],e)):t[n]=e}))})),t}function Fn(e,t,n,i=!0){const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const e=n();return r(e),e}};return i&&(s.set=r),Object.defineProperty(e,t,s)}var Bn=Object.freeze({__proto__:null,each:Nn,reduce:Ln,isObject:Mn,isPlain:Un,merge:jn,defineLazyProperty:Fn});let Vn,$n=!1,qn=null,Hn=!1,Wn=!1,zn=!1,Gn=!1,Qn=!1,Kn=null,Xn=null,Yn=null,Jn=!1,Zn=!1,ei=!1,ti=!1;const ni=Boolean(ci()&&("ontouchstart"in a()||a().navigator.maxTouchPoints||a().DocumentTouch&&a().document instanceof a().DocumentTouch)),ii=a().navigator&&a().navigator.userAgentData;if(ii&&(Hn="Android"===ii.platform,zn=Boolean(ii.brands.find((e=>"Microsoft Edge"===e.brand))),Gn=Boolean(ii.brands.find((e=>"Chromium"===e.brand))),Qn=!zn&&Gn,Kn=Xn=(ii.brands.find((e=>"Chromium"===e.brand))||{}).version||null,Zn="Windows"===ii.platform),!Gn){const e=a().navigator&&a().navigator.userAgent||"";$n=/iPod/i.test(e),qn=function(){const t=e.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Hn=/Android/i.test(e),Vn=function(){const t=e.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);return n&&i?parseFloat(t[1]+"."+t[2]):n||null}(),Wn=/Firefox/i.test(e),zn=/Edg/i.test(e),Gn=/Chrome/i.test(e)||/CriOS/i.test(e),Qn=!zn&&Gn,Kn=Xn=function(){const t=e.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),Yn=function(){const t=/MSIE\s(\d+)\.\d/.exec(e);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(e)&&/rv:11.0/.test(e)&&(n=11),n}(),Jn=/Safari/i.test(e)&&!Qn&&!Hn&&!zn,Zn=/Windows/i.test(e),ei=/iPad/i.test(e)||Jn&&ni&&!/iPhone/i.test(e),ti=/iPhone/i.test(e)&&!ei}const ri=ti||ei||$n,si=(Jn||ri)&&!Qn;var oi=Object.freeze({__proto__:null,get IS_IPOD(){return $n},get IOS_VERSION(){return qn},get IS_ANDROID(){return Hn},get ANDROID_VERSION(){return Vn},get IS_FIREFOX(){return Wn},get IS_EDGE(){return zn},get IS_CHROMIUM(){return Gn},get IS_CHROME(){return Qn},get CHROMIUM_VERSION(){return Kn},get CHROME_VERSION(){return Xn},get IE_VERSION(){return Yn},get IS_SAFARI(){return Jn},get IS_WINDOWS(){return Zn},get IS_IPAD(){return ei},get IS_IPHONE(){return ti},TOUCH_ENABLED:ni,IS_IOS:ri,IS_ANY_SAFARI:si});function ai(e){return"string"===typeof e&&Boolean(e.trim())}function ui(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function ci(){return c()===a().document}function li(e){return Mn(e)&&1===e.nodeType}function hi(){try{return a().parent!==a().self}catch(e){return!0}}function di(e){return function(t,n){if(!ai(t))return c()[e](null);ai(n)&&(n=c().querySelector(n));const i=li(n)?n:c();return i[e]&&i[e](t)}}function pi(e="div",t={},n={},i){const r=c().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){const n=t[e];"textContent"===e?fi(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&Ri(r,i),r}function fi(e,t){return"undefined"===typeof e.textContent?e.innerText=t:e.textContent=t,e}function mi(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function gi(e,t){return ui(t),e.classList.contains(t)}function yi(e,...t){return e.classList.add(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e}function vi(e,...t){return e?(e.classList.remove(...t.reduce(((e,t)=>e.concat(t.split(/\s+/))),[])),e):(An.warn("removeClass was called with an element that doesn't exist"),null)}function _i(e,t,n){return"function"===typeof n&&(n=n(e,t)),"boolean"!==typeof n&&(n=void 0),t.split(/\s+/).forEach((t=>e.classList.toggle(t,n))),e}function bi(e,t){Object.getOwnPropertyNames(t).forEach((function(n){const i=t[n];null===i||"undefined"===typeof i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function Ti(e){const t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0){const i=e.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let o=i[r].value;"boolean"!==typeof e[s]&&-1===n.indexOf(","+s+",")||(o=null!==o),t[s]=o}}return t}function wi(e,t){return e.getAttribute(t)}function Ei(e,t,n){e.setAttribute(t,n)}function Si(e,t){e.removeAttribute(t)}function ki(){c().body.focus(),c().onselectstart=function(){return!1}}function Ci(){c().onselectstart=function(){return!0}}function Ii(e){if(e&&e.getBoundingClientRect&&e.parentNode){const t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((e=>{void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(ji(e,"height"))),n.width||(n.width=parseFloat(ji(e,"width"))),n}}function Oi(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};const t=e.offsetWidth,n=e.offsetHeight;let i=0,r=0;while(e.offsetParent&&e!==c()[En.fullscreenElement])i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function xi(e,t){const n={x:0,y:0};if(ri){let t=e;while(t&&"html"!==t.nodeName.toLowerCase()){const e=ji(t,"transform");if(/^matrix/.test(e)){const t=e.slice(7,-1).split(/,\s/).map(Number);n.x+=t[4],n.y+=t[5]}else if(/^matrix3d/.test(e)){const t=e.slice(9,-1).split(/,\s/).map(Number);n.x+=t[12],n.y+=t[13]}t=t.parentNode}}const i={},r=Oi(t.target),s=Oi(e),o=s.width,a=s.height;let u=t.offsetY-(s.top-r.top),c=t.offsetX-(s.left-r.left);return t.changedTouches&&(c=t.changedTouches[0].pageX-s.left,u=t.changedTouches[0].pageY+s.top,ri&&(c-=n.x,u-=n.y)),i.y=1-Math.max(0,Math.min(1,u/a)),i.x=Math.max(0,Math.min(1,c/o)),i}function Ai(e){return Mn(e)&&3===e.nodeType}function Di(e){while(e.firstChild)e.removeChild(e.firstChild);return e}function Pi(e){return"function"===typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((e=>("function"===typeof e&&(e=e()),li(e)||Ai(e)?e:"string"===typeof e&&/\S/.test(e)?c().createTextNode(e):void 0))).filter((e=>e))}function Ri(e,t){return Pi(t).forEach((t=>e.appendChild(t))),e}function Ni(e,t){return Ri(Di(e),t)}function Li(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}const Mi=di("querySelector"),Ui=di("querySelectorAll");function ji(e,t){if(!e||!t)return"";if("function"===typeof a().getComputedStyle){let i;try{i=a().getComputedStyle(e)}catch(n){return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var Fi=Object.freeze({__proto__:null,isReal:ci,isEl:li,isInFrame:hi,createEl:pi,textContent:fi,prependTo:mi,hasClass:gi,addClass:yi,removeClass:vi,toggleClass:_i,setAttributes:bi,getAttributes:Ti,getAttribute:wi,setAttribute:Ei,removeAttribute:Si,blockTextSelection:ki,unblockTextSelection:Ci,getBoundingClientRect:Ii,findPosition:Oi,getPointerPosition:xi,isTextNode:Ai,emptyEl:Di,normalizeContent:Pi,appendContent:Ri,insertContent:Ni,isSingleLeftClick:Li,$:Mi,$$:Ui,computedStyle:ji});let Bi,Vi=!1;const $i=function(){if(!1===Bi.options.autoSetup)return;const e=Array.prototype.slice.call(c().getElementsByTagName("video")),t=Array.prototype.slice.call(c().getElementsByTagName("audio")),n=Array.prototype.slice.call(c().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const e=i[r];if(!e||!e.getAttribute){qi(1);break}if(void 0===e.player){const t=e.getAttribute("data-setup");null!==t&&Bi(e)}}else Vi||qi(1)};function qi(e,t){ci()&&(t&&(Bi=t),a().setTimeout($i,e))}function Hi(){Vi=!0,a().removeEventListener("load",Hi)}ci()&&("complete"===c().readyState?Hi():a().addEventListener("load",Hi));const Wi=function(e){const t=c().createElement("style");return t.className=e,t},zi=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t};var Gi=new WeakMap;const Qi=3;let Ki,Xi=Qi;function Yi(){return Xi++}function Ji(e,t){if(!Gi.has(e))return;const n=Gi.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Gi.delete(e)}function Zi(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function er(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){const i=e||a().event;e={};for(const t in i)"layerX"!==t&&"layerY"!==t&&"keyLocation"!==t&&"webkitMovementX"!==t&&"webkitMovementY"!==t&&"path"!==t&&("returnValue"===t&&i.preventDefault||(e[t]=i[t]));if(e.target||(e.target=e.srcElement||c()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){const t=c().documentElement,n=c().body;e.pageX=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t&&t.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t&&t.clientTop||n&&n.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}const tr=function(){if("boolean"!==typeof Ki){Ki=!1;try{const e=Object.defineProperty({},"passive",{get(){Ki=!0}});a().addEventListener("test",null,e),a().removeEventListener("test",null,e)}catch(e){}}return Ki},nr=["touchstart","touchmove"];function ir(e,t,n){if(Array.isArray(t))return Zi(ir,e,t,n);Gi.has(e)||Gi.set(e,{});const i=Gi.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=Yi()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(i.disabled)return;t=er(t);const r=i.handlers[t.type];if(r){const i=r.slice(0);for(let r=0,o=i.length;r<o;r++){if(t.isImmediatePropagationStopped())break;try{i[r].call(e,t,n)}catch(s){An.error(s)}}}}),1===i.handlers[t].length)if(e.addEventListener){let n=!1;tr()&&nr.indexOf(t)>-1&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function rr(e,t,n){if(!Gi.has(e))return;const i=Gi.get(e);if(!i.handlers)return;if(Array.isArray(t))return Zi(rr,e,t,n);const r=function(e,t){i.handlers[t]=[],Ji(e,t)};if(void 0===t){for(const t in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},t)&&r(e,t);return}const s=i.handlers[t];if(s)if(n){if(n.guid)for(let e=0;e<s.length;e++)s[e].guid===n.guid&&s.splice(e--,1);Ji(e,t)}else r(e,t)}function sr(e,t,n){const i=Gi.has(e)?Gi.get(e):{},r=e.parentNode||e.ownerDocument;if("string"===typeof t?t={type:t,target:e}:t.target||(t.target=e),t=er(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)sr.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){Gi.has(t.target)||Gi.set(t.target,{});const e=Gi.get(t.target);t.target[t.type]&&(e.disabled=!0,"function"===typeof t.target[t.type]&&t.target[t.type](),e.disabled=!1)}return!t.defaultPrevented}function or(e,t,n){if(Array.isArray(t))return Zi(or,e,t,n);const i=function(){rr(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Yi(),ir(e,t,i)}function ar(e,t,n){const i=function(){rr(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Yi(),ir(e,t,i)}var ur=Object.freeze({__proto__:null,fixEvent:er,on:ir,off:rr,trigger:sr,one:or,any:ar});const cr=30,lr=function(e,t,n){t.guid||(t.guid=Yi());const i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},hr=function(e,t){let n=a().performance.now();const i=function(...i){const r=a().performance.now();r-n>=t&&(e(...i),n=r)};return i},dr=function(e,t,n,i=a()){let r;const s=()=>{i.clearTimeout(r),r=null},o=function(){const s=this,o=arguments;let a=function(){r=null,a=null,n||e.apply(s,o)};!r&&n&&e.apply(s,o),i.clearTimeout(r),r=i.setTimeout(a,t)};return o.cancel=s,o};var pr=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:cr,bind_:lr,throttle:hr,debounce:dr});let fr;class mr{on(e,t){const n=this.addEventListener;this.addEventListener=()=>{},ir(this,e,t),this.addEventListener=n}off(e,t){rr(this,e,t)}one(e,t){const n=this.addEventListener;this.addEventListener=()=>{},or(this,e,t),this.addEventListener=n}any(e,t){const n=this.addEventListener;this.addEventListener=()=>{},ar(this,e,t),this.addEventListener=n}trigger(e){const t=e.type||e;"string"===typeof e&&(e={type:t}),e=er(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),sr(this,e)}queueTrigger(e){fr||(fr=new Map);const t=e.type||e;let n=fr.get(this);n||(n=new Map,fr.set(this,n));const i=n.get(t);n.delete(t),a().clearTimeout(i);const r=a().setTimeout((()=>{n.delete(t),0===n.size&&(n=null,fr.delete(this)),this.trigger(e)}),0);n.set(t,r)}}mr.prototype.allowedEvents_={},mr.prototype.addEventListener=mr.prototype.on,mr.prototype.removeEventListener=mr.prototype.off,mr.prototype.dispatchEvent=mr.prototype.trigger;const gr=e=>"function"===typeof e.name?e.name():"string"===typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e,yr=e=>e instanceof mr||!!e.eventBusEl_&&["on","one","off","trigger"].every((t=>"function"===typeof e[t])),vr=(e,t)=>{yr(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},_r=e=>"string"===typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length,br=(e,t,n)=>{if(!e||!e.nodeName&&!yr(e))throw new Error(`Invalid target for ${gr(t)}#${n}; must be a DOM node or evented object.`)},Tr=(e,t,n)=>{if(!_r(e))throw new Error(`Invalid event type for ${gr(t)}#${n}; must be a non-empty string or array.`)},wr=(e,t,n)=>{if("function"!==typeof e)throw new Error(`Invalid listener for ${gr(t)}#${n}; must be a function.`)},Er=(e,t,n)=>{const i=t.length<3||t[0]===e||t[0]===e.eventBusEl_;let r,s,o;return i?(r=e.eventBusEl_,t.length>=3&&t.shift(),[s,o]=t):[r,s,o]=t,br(r,e,n),Tr(s,e,n),wr(o,e,n),o=lr(e,o),{isTargetingSelf:i,target:r,type:s,listener:o}},Sr=(e,t,n,i)=>{br(e,e,t),e.nodeName?ur[t](e,n,i):e[t](n,i)},kr={on(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Er(this,e,"on");if(Sr(n,"on",i,r),!t){const e=()=>this.off(n,i,r);e.guid=r.guid;const t=()=>this.off("dispose",e);t.guid=r.guid,Sr(this,"on","dispose",e),Sr(n,"on","dispose",t)}},one(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Er(this,e,"one");if(t)Sr(n,"one",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Sr(n,"one",i,e)}},any(...e){const{isTargetingSelf:t,target:n,type:i,listener:r}=Er(this,e,"any");if(t)Sr(n,"any",i,r);else{const e=(...t)=>{this.off(n,i,e),r.apply(null,t)};e.guid=r.guid,Sr(n,"any",i,e)}},off(e,t,n){if(!e||_r(e))rr(this.eventBusEl_,e,t);else{const i=e,r=t;br(i,this,"off"),Tr(r,this,"off"),wr(n,this,"off"),n=lr(this,n),this.off("dispose",n),i.nodeName?(rr(i,r,n),rr(i,"dispose",n)):yr(i)&&(i.off(r,n),i.off("dispose",n))}},trigger(e,t){br(this.eventBusEl_,this,"trigger");const n=e&&"string"!==typeof e?e.type:e;if(!_r(n))throw new Error(`Invalid event type for ${gr(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return sr(this.eventBusEl_,e,t)}};function Cr(e,t={}){const{eventBusKey:n}=t;if(n){if(!e[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);e.eventBusEl_=e[n]}else e.eventBusEl_=pi("span",{className:"vjs-event-bus"});return Object.assign(e,kr),e.eventedCallbacks&&e.eventedCallbacks.forEach((e=>{e()})),e.on("dispose",(()=>{e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&Gi.has(e)&&Gi.delete(e)})),a().setTimeout((()=>{e.eventBusEl_=null}),0)})),e}const Ir={state:{},setState(e){let t;return"function"===typeof e&&(e=e()),Nn(e,((e,n)=>{this.state[n]!==e&&(t=t||{},t[n]={from:this.state[n],to:e}),this.state[n]=e})),t&&yr(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Or(e,t){return Object.assign(e,Ir),e.state=Object.assign({},e.state,t),"function"===typeof e.handleStateChanged&&yr(e)&&e.on("statechanged",e.handleStateChanged),e}const xr=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toLowerCase()))},Ar=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},Dr=function(e,t){return Ar(e)===Ar(t)};var Pr=Object.freeze({__proto__:null,toLowerCase:xr,toTitleCase:Ar,titleCaseEquals:Dr});class Rr{constructor(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=jn({},this.options_),t=this.options_=jn(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const t=e&&e.id&&e.id()||"no_player";this.id_=`${t}_component_${Yi()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((e=>this.addClass(e))),!1!==t.evented&&(Cr(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Or(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=jn(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,n){return pi(e,t,n)}localize(e,t,n=e){const i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),s=r&&r[i],o=i&&i.split("-")[0],a=r&&r[o];let u=n;return s&&s[e]?u=s[e]:a&&a[e]&&(u=a[e]),t&&(u=u.replace(/\{(\d+)\}/g,(function(e,n){const i=t[n-1];let r=i;return"undefined"===typeof i&&(r=e),r}))),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce(((e,t)=>e.concat(t)),[]);let t=this;for(let n=0;n<e.length;n++)if(t=t.getChild(e[n]),!t||!t.getChild)return;return t}addChild(e,t={},n=this.children_.length){let i,r;if("string"===typeof e){r=Ar(e);const n=t.componentClass||r;t.name=r;const s=Rr.getComponent(n);if(!s)throw new Error(`Component ${n} does not exist`);if("function"!==typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"===typeof i.id&&(this.childIndex_[i.id()]=i),r=r||i.name&&Ar(i.name()),r&&(this.childNameIndex_[r]=i,this.childNameIndex_[xr(r)]=i),"function"===typeof i.el&&i.el()){let e=null;this.children_[n+1]&&(this.children_[n+1].el_?e=this.children_[n+1].el_:li(this.children_[n+1])&&(e=this.children_[n+1])),this.contentEl().insertBefore(i.el(),e)}return i}removeChild(e){if("string"===typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ar(e.name())]=null,this.childNameIndex_[xr(e.name())]=null;const n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,n=e=>{const n=e.name;let i=e.opts;if(void 0!==t[n]&&(i=t[n]),!1===i)return;!0===i&&(i={}),i.playerOptions=this.options_.playerOptions;const r=this.addChild(n,i);r&&(this[n]=r)};let i;const r=Rr.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"===typeof t?e===t:e===t.name}))}))).map((t=>{let n,i;return"string"===typeof t?(n=t,i=e[n]||this.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}})).filter((e=>{const t=Rr.getComponent(e.opts.componentClass||Ar(e.name));return t&&!r.isTech(t)})).forEach(n)}}buildCSSClass(){return""}ready(e,t=!1){if(e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))}triggerReady(){this.isReady_=!0,this.setTimeout((function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)}$(e,t){return Mi(e,t||this.contentEl())}$$(e,t){return Ui(e,t||this.contentEl())}hasClass(e){return gi(this.el_,e)}addClass(...e){yi(this.el_,...e)}removeClass(...e){vi(this.el_,...e)}toggleClass(e,t){_i(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return wi(this.el_,e)}setAttribute(e,t){Ei(this.el_,e,t)}removeAttribute(e){Si(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,n){if(void 0!==t)return null!==t&&t===t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Ar(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=ji(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const n=`offset${Ar(e)}`;t=this.el_[n]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(h().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const n=10,i=200;let r;this.on("touchstart",(function(n){1===n.touches.length&&(t={pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},e=a().performance.now(),r=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)r=!1;else if(t){const i=e.touches[0].pageX-t.pageX,s=e.touches[0].pageY-t.pageY,o=Math.sqrt(i*i+s*s);o>n&&(r=!1)}}));const s=function(){r=!1};this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",(function(n){if(t=null,!0===r){const t=a().performance.now()-e;t<i&&(n.preventDefault(),this.trigger("tap"))}}))}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=lr(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));const n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}setTimeout(e,t){var n;return e=lr(this,e),this.clearTimersOnDispose_(),n=a().setTimeout((()=>{this.setTimeoutIds_.has(n)&&this.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),a().clearTimeout(e)),e}setInterval(e,t){e=lr(this,e),this.clearTimersOnDispose_();const n=a().setInterval(e,t);return this.setIntervalIds_.add(n),n}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),a().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=lr(this,e),t=a().requestAnimationFrame((()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()})),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=lr(this,t);const n=this.requestAnimationFrame((()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)}));return this.namedRafs_.set(e,n),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),a().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((([e,t])=>{this[e].forEach(((e,n)=>this[t](n)))})),this.clearingTimersOnDispose_=!1})))}static registerComponent(e,t){if("string"!==typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const n=Rr.getComponent("Tech"),i=n&&n.isTech(t),r=Rr===t||Rr.prototype.isPrototypeOf(t.prototype);if(i||!r){let t;throw t=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${t}.`)}e=Ar(e),Rr.components_||(Rr.components_={});const s=Rr.getComponent("Player");if("Player"===e&&s&&s.players){const e=s.players,t=Object.keys(e);if(e&&t.length>0&&t.map((t=>e[t])).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Rr.components_[e]=t,Rr.components_[xr(e)]=t,t}static getComponent(e){if(e&&Rr.components_)return Rr.components_[e]}}function Nr(e,t,n){if("number"!==typeof t||t<0||t>n)throw new Error(`Failed to execute '${e}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}function Lr(e,t,n,i){return Nr(e,i,n.length-1),n[i][t]}function Mr(e){let t;return t=void 0===e||0===e.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Lr.bind(null,"start",0,e),end:Lr.bind(null,"end",1,e)},a().Symbol&&a().Symbol.iterator&&(t[a().Symbol.iterator]=()=>(e||[]).values()),t}function Ur(e,t){return Array.isArray(e)?Mr(e):void 0===e||void 0===t?Mr():Mr([[e,t]])}Rr.registerComponent("Component",Rr);const jr=function(e,t){e=e<0?0:e;let n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600);const s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),r=r>0||o>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,r+i+n};let Fr=jr;function Br(e){Fr=e}function Vr(){Fr=jr}function $r(e,t=e){return Fr(e,t)}var qr=Object.freeze({__proto__:null,createTimeRanges:Ur,createTimeRange:Ur,setFormatTime:Br,resetFormatTime:Vr,formatTime:$r});function Hr(e,t){let n,i,r=0;if(!t)return 0;e&&e.length||(e=Ur(0,0));for(let s=0;s<e.length;s++)n=e.start(s),i=e.end(s),i>t&&(i=t),r+=i-n;return r/t}function Wr(e){if(e instanceof Wr)return e;"number"===typeof e?this.code=e:"string"===typeof e?this.message=e:Mn(e)&&("number"===typeof e.code&&(this.code=e.code),Object.assign(this,e)),this.message||(this.message=Wr.defaultMessages[this.code]||"")}Wr.prototype.code=0,Wr.prototype.message="",Wr.prototype.status=null,Wr.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Wr.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let gp=0;gp<Wr.errorTypes.length;gp++)Wr[Wr.errorTypes[gp]]=gp,Wr.prototype[Wr.errorTypes[gp]]=gp;function zr(e){return void 0!==e&&null!==e&&"function"===typeof e.then}function Gr(e){zr(e)&&e.then(null,(e=>{}))}const Qr=function(e){const t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(((t,n,i)=>(e[n]&&(t[n]=e[n]),t)),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))});return t},Kr=function(e){const t=e.$$("track"),n=Array.prototype.map.call(t,(e=>e.track)),i=Array.prototype.map.call(t,(function(e){const t=Qr(e.track);return e.src&&(t.src=e.src),t}));return i.concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(Qr))},Xr=function(e,t){return e.forEach((function(e){const n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((e=>n.addCue(e)))})),t.textTracks()};var Yr={textTracksToJson:Kr,jsonToTextTracks:Xr,trackToJson_:Qr};const Jr="vjs-modal-dialog";class Zr extends Rr{constructor(e,t){super(e,t),this.handleKeyDown_=e=>this.handleKeyDown(e),this.close_=e=>this.close(e),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=pi("div",{className:`${Jr}-content`},{role:"document"}),this.descEl_=pi("p",{className:`${Jr}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),fi(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Jr} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"===typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"===typeof e){const t=this.closeable_=!!e;let n=this.getChild("closeButton");if(t&&!n){const e=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Ni(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);const r=this.getChild("closeButton");r&&n.appendChild(r.el_)}empty(){this.trigger("beforemodalempty"),Di(this.contentEl()),this.trigger("modalempty")}content(e){return"undefined"!==typeof e&&(this.content_=e),this.content_}conditionalFocus_(){const e=c().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),h().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!h().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),n=this.el_.querySelector(":focus");let i;for(let r=0;r<t.length;r++)if(n===t[r]){i=r;break}c().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||i!==t.length-1||(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(e=>(e instanceof a().HTMLAnchorElement||e instanceof a().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof a().HTMLInputElement||e instanceof a().HTMLSelectElement||e instanceof a().HTMLTextAreaElement||e instanceof a().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof a().HTMLIFrameElement||e instanceof a().HTMLObjectElement||e instanceof a().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")))}}Zr.prototype.options_={pauseOnOpen:!0,temporary:!0},Rr.registerComponent("ModalDialog",Zr);class es extends mr{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},yr(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this[n],t.off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}es.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const gp in es.prototype.allowedEvents_)es.prototype["on"+gp]=null;const ts=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)};class ns extends es{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){ts(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&ts(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,ts(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const is=function(e,t){for(let n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)};class rs extends es{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){is(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set(){}})}addTrack(e){e.selected&&is(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,is(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class ss extends es{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_);const t=["metadata","chapters"];-1===t.indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class os{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t}removeTrackElement_(e){for(let t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"===typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"===typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class as{constructor(e){as.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let n=0;const i=e.length;this.cues_=e,this.length_=e.length;const r=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)}getCueById(e){let t=null;for(let n=0,i=this.length;n<i;n++){const i=this[n];if(i.id===e){t=i;break}}return t}}const us={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},cs={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ls={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},hs={disabled:"disabled",hidden:"hidden",showing:"showing"};class ds extends mr{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Yi(),kind:e.kind||"",language:e.language||""};let n=e.label||"";for(const i in t)Object.defineProperty(this,i,{get(){return t[i]},set(){}});Object.defineProperty(this,"label",{get(){return n},set(e){e!==n&&(n=e,this.trigger("labelchange"))}})}}const ps=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"],n=c().createElement("a");n.href=e;const i={};for(let r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=a().location.protocol),i.host||(i.host=a().location.host),i},fs=function(e){if(!e.match(/^https?:\/\//)){const t=c().createElement("a");t.href=e,e=t.href}return e},ms=function(e){if("string"===typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""},gs=function(e,t=a().location){const n=ps(e),i=":"===n.protocol?t.protocol:n.protocol,r=i+n.host!==t.protocol+t.host;return r};var ys=Object.freeze({__proto__:null,parseUrl:ps,getAbsoluteURL:fs,getFileExtension:ms,isCrossOrigin:gs});const vs=function(e,t){const n=new(a().WebVTT.Parser)(a(),a().vttjs,a().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(a().console&&a().console.groupCollapsed&&a().console.groupCollapsed(`Text Track parsing errors for ${t.src}`),i.forEach((e=>An.error(e))),a().console&&a().console.groupEnd&&a().console.groupEnd()),n.flush()},_s=function(e,t){const n={uri:e},i=gs(e);i&&(n.cors=i);const r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),m()(n,lr(this,(function(e,n,i){if(e)return An.error(e,n);t.loaded_=!0,"function"!==typeof a().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(e=>{if("vttjserror"!==e.type)return vs(i,t);An.error(`vttjs failed to load, stopping trying to process ${t.src}`)})):vs(i,t)})))};class bs extends ds{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=jn(e,{kind:ls[e.kind]||"subtitles",language:e.language||e.srclang||""});let n=hs[t.mode]||"disabled";const i=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(n="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const r=new as(this.cues_),s=new as(this.activeCues_);let o=!1;this.timeupdateHandler=lr(this,(function(e={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));const a=()=>{this.stopTracking()};this.tech_.one("dispose",a),"disabled"!==n&&this.startTracking(),Object.defineProperties(this,{default:{get(){return i},set(){}},mode:{get(){return n},set(e){hs[e]&&n!==e&&(n=e,this.preload_||"disabled"===n||0!==this.cues.length||_s(this.src,this),this.stopTracking(),"disabled"!==n&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?r:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return s;const e=this.tech_.currentTime(),t=[];for(let n=0,i=this.cues.length;n<i;n++){const i=this.cues[n];i.startTime<=e&&i.endTime>=e&&t.push(i)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(let n=0;n<t.length;n++)-1===this.activeCues_.indexOf(t[n])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&_s(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(a().vttjs&&!(e instanceof a().vttjs.VTTCue)){t=new(a().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const n=this.tech_.textTracks();for(let i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;while(t--){const n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}bs.prototype.allowedEvents_={cuechange:"cuechange"};class Ts extends ds{constructor(e={}){const t=jn(e,{kind:cs[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"enabled",{get(){return n},set(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class ws extends ds{constructor(e={}){const t=jn(e,{kind:us[e.kind]||""});super(t);let n=!1;Object.defineProperty(this,"selected",{get(){return n},set(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Es extends mr{constructor(e={}){let t;super();const n=new bs(e);this.kind=n.kind,this.src=n.src,this.srclang=n.language,this.label=n.label,this.default=n.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return n}}}),t=Es.NONE,n.addEventListener("loadeddata",(()=>{t=Es.LOADED,this.trigger({type:"load",target:this})}))}}Es.prototype.allowedEvents_={load:"load"},Es.NONE=0,Es.LOADING=1,Es.LOADED=2,Es.ERROR=3;const Ss={audio:{ListClass:ns,TrackClass:Ts,capitalName:"Audio"},video:{ListClass:rs,TrackClass:ws,capitalName:"Video"},text:{ListClass:ss,TrackClass:bs,capitalName:"Text"}};Object.keys(Ss).forEach((function(e){Ss[e].getterName=`${e}Tracks`,Ss[e].privateName=`${e}Tracks_`}));const ks={remoteText:{ListClass:ss,TrackClass:bs,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:os,TrackClass:Es,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Cs=Object.assign({},Ss,ks);function Is(e,t,n,i,r={}){const s=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;const o=new Cs.text.TrackClass(r);return s.addTrack(o),o}ks.names=Object.keys(ks),Ss.names=Object.keys(Ss),Cs.names=[].concat(ks.names).concat(Ss.names);class Os extends Rr{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=e=>this.onDurationChange(e),this.trackProgress_=e=>this.trackProgress(e),this.trackCurrentTime_=e=>this.trackCurrentTime(e),this.stopTrackingCurrentTime_=e=>this.stopTrackingCurrentTime(e),this.disposeSourceHandler_=e=>this.disposeSourceHandler(e),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",(function(){this.hasStarted_=!0})),this.on("loadstart",(function(){this.hasStarted_=!1})),Cs.names.forEach((t=>{const n=Cs[t];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])})),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((t=>{!1===e[`native${t}Tracks`]&&(this[`featuresNative${t}Tracks`]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new Cs.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",(()=>this.setTimeout((()=>this.triggerSourceset(e)),1))),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(lr(this,(function(){const e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Ur(0,0)}bufferedPercent(){return Hr(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ss.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach((e=>{const t=this[`${e}Tracks`]()||[];let n=t.length;while(n--){const i=t[n];"text"===e&&this.removeRemoteTextTrack(i),t.removeTrack(i)}}))}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;while(t--){const n=e[t];this.removeRemoteTextTrack(n)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new Wr(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ur(0,0):Ur()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ss.names.forEach((e=>{const t=Ss[e],n=()=>{this.trigger(`${e}trackchange`)},i=this[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),this.on("dispose",(()=>{i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)}))}))}addWebVttScript_(){if(!a().WebVTT)if(c().body.contains(this.el())){if(!this.options_["vtt.js"]&&Un(y())&&Object.keys(y()).length>0)return void this.trigger("vttjsloaded");const e=c().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",(()=>{e.onload=null,e.onerror=null})),a().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),n=t=>e.addTrack(t.track),i=t=>e.removeTrack(t.track);t.on("addtrack",n),t.on("removetrack",i),this.addWebVttScript_();const r=()=>this.trigger("texttrackchange"),s=()=>{r();for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",(function(){t.off("addtrack",n),t.off("removetrack",i),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let t=0;t<e.length;t++){const n=e[t];n.removeEventListener("cuechange",r)}}))}addTextTrack(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return Is(this,e,t,n)}createRemoteTextTrack(e){const t=jn(e,{tech:this});return new ks.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const n=this.createRemoteTextTrack(e);return"boolean"!==typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(n),this.remoteTextTracks().addTrack(n.track),!1===t&&this.ready((()=>this.autoRemoteTextTracks_.addTrack(n.track))),n}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Yi();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",(()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())}))):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(e,t){return Os.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Os||e instanceof Os||e===Os}static registerTech(e,t){if(Os.techs_||(Os.techs_={}),!Os.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Os.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Os.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ar(e),Os.techs_[e]=t,Os.techs_[xr(e)]=t,"Tech"!==e&&Os.defaultTechOrder_.push(e),t}static getTech(e){if(e)return Os.techs_&&Os.techs_[e]?Os.techs_[e]:(e=Ar(e),a()&&a().videojs&&a().videojs[e]?(An.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),a().videojs[e]):void 0)}}Cs.names.forEach((function(e){const t=Cs[e];Os.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Os.prototype.featuresVolumeControl=!0,Os.prototype.featuresMuteControl=!0,Os.prototype.featuresFullscreenResize=!1,Os.prototype.featuresPlaybackRate=!1,Os.prototype.featuresProgressEvents=!1,Os.prototype.featuresSourceset=!1,Os.prototype.featuresTimeupdateEvents=!1,Os.prototype.featuresNativeTextTracks=!1,Os.prototype.featuresVideoFrameCallback=!1,Os.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){let i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){const n=e.sourceHandlers||[];let i;for(let e=0;e<n.length;e++)if(i=n[e].canPlayType(t),i)return i;return""},e.selectSourceHandler=function(t,n){const i=e.sourceHandlers||[];let r;for(let e=0;e<i.length;e++)if(r=i[e].canHandleSource(t,n),r)return i[e];return null},e.canPlaySource=function(t,n){const i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""};const t=["seekable","seeking","duration"];t.forEach((function(e){const t=this[e];"function"===typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){let n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:An.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Rr.registerComponent("Tech",Os),Os.registerTech("Tech",Os),Os.defaultTechOrder_=[];const xs={},As={},Ds={};function Ps(e,t){xs[e]=xs[e]||[],xs[e].push(t)}function Rs(e,t,n){e.setTimeout((()=>Ws(t,xs[t.type],n,e)),1)}function Ns(e,t){e.forEach((e=>e.setTech&&e.setTech(t)))}function Ls(e,t,n){return e.reduceRight(Vs(n),t[n]())}function Ms(e,t,n,i){return t[n](e.reduce(Vs(n),i))}function Us(e,t,n,i=null){const r="call"+Ar(n),s=e.reduce(Vs(r),i),o=s===Ds,a=o?null:t[n](s);return $s(e,n,a,o),a}const js={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Fs={setCurrentTime:1,setMuted:1,setVolume:1},Bs={play:1,pause:1};function Vs(e){return(t,n)=>t===Ds?Ds:n[e]?n[e](t):t}function $s(e,t,n,i){for(let r=e.length-1;r>=0;r--){const s=e[r];s[t]&&s[t](i,n)}}function qs(e){As[e.id()]=null}function Hs(e,t){const n=As[e.id()];let i=null;if(void 0===n||null===n)return i=t(e),As[e.id()]=[[t,i]],i;for(let r=0;r<n.length;r++){const[e,s]=n[r];e===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}function Ws(e={},t=[],n,i,r=[],s=!1){const[o,...a]=t;if("string"===typeof o)Ws(e,xs[o],n,i,r,s);else if(o){const t=Hs(i,o);if(!t.setSource)return r.push(t),Ws(e,a,n,i,r,s);t.setSource(Object.assign({},e),(function(o,u){if(o)return Ws(e,a,n,i,r,s);r.push(t),Ws(u,e.type===u.type?a:xs[u.type],n,i,r,s)}))}else a.length?Ws(e,a,n,i,r,s):s?n(e,r):Ws(e,xs["*"],n,i,r,!0)}const zs={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Gs=function(e=""){const t=ms(e),n=zs[t.toLowerCase()];return n||""},Qs=(e,t)=>{if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;const n=e.cache_.sources.filter((e=>e.src===t));if(n.length)return n[0].type;const i=e.$$("source");for(let r=0;r<i.length;r++){const e=i[r];if(e.type&&e.src&&e.src===t)return e.type}return Gs(t)},Ks=function(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){e=Ks(e),Array.isArray(e)?t=t.concat(e):Mn(e)&&t.push(e)})),e=t}else e="string"===typeof e&&e.trim()?[Xs({src:e})]:Mn(e)&&"string"===typeof e.src&&e.src&&e.src.trim()?[Xs(e)]:[];return e};function Xs(e){if(!e.type){const t=Gs(e.src);t&&(e.type=t)}return e}class Ys extends Rr{constructor(e,t,n){const i=jn({createEl:!1},t);if(super(e,i,n),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let r=0,s=t.playerOptions.techOrder;r<s.length;r++){const t=Ar(s[r]);let n=Os.getTech(t);if(t||(n=Rr.getComponent(t)),n&&n.isSupported()){e.loadTech_(t);break}}}}Rr.registerComponent("MediaLoader",Ys);class Js extends Rr{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=e=>this.handleMouseOver(e),this.handleMouseOut_=e=>this.handleMouseOut(e),this.handleClick_=e=>this.handleClick(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.emitTapEvents(),this.enable()}createEl(e="div",t={},n={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&An.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;const i=pi(e,t,n);return i.appendChild(pi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=pi("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const n=this.localize(e);this.controlText_=e,fi(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){h().isEventKey(e,"Space")||h().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Rr.registerComponent("ClickableComponent",Js);class Zs extends Js{constructor(e,t){super(e,t),this.update(),this.update_=e=>this.update(e),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){const e=pi("picture",{className:"vjs-poster",tabIndex:-1},{},pi("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}));return e}crossOrigin(e){if("undefined"===typeof e)return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.el_.querySelector("img").crossOrigin=e:this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){this.el_.querySelector("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Gr(this.player_.play()):this.player_.pause())}}Zs.prototype.crossorigin=Zs.prototype.crossOrigin,Rr.registerComponent("PosterImage",Zs);const eo="#222",to="#ccc",no={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function io(e,t){let n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ro(e,t,n){try{e.style[t]=n}catch(i){return}}class so extends Rr{constructor(e,t,n){super(e,t,n);const i=e=>this.updateDisplay(e);e.on("loadstart",(e=>this.toggleDisplay(e))),e.on("texttrackchange",i),e.on("loadedmetadata",(e=>this.preselectTrack(e))),e.ready(lr(this,(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",i),e.on("playerresize",i);const t=a().screen.orientation||a(),n=a().screen.orientation?"change":"orientationchange";t.addEventListener(n,i),e.on("dispose",(()=>t.removeEventListener(n,i)));const r=this.options_.playerOptions.tracks||[];for(let e=0;e<r.length;e++)this.player_.addRemoteTextTrack(r[e],!0);this.preselectTrack()})))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage;let i,r,s;for(let o=0;o<t.length;o++){const a=t[o];n&&n.enabled&&n.language&&n.language===a.language&&a.kind in e?a.kind===n.kind?s=a:s||(s=a):n&&!n.enabled?(s=null,i=null,r=null):a.default&&("descriptions"!==a.kind||i?a.kind in e&&!r&&(r=a):i=a)}s?s.mode="showing":r?r.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"===typeof a().WebVTT&&a().WebVTT.processCues(a(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const t=[];for(let n=0;n<e.length;++n){const i=e[n];"showing"===i.mode&&t.push(i)}return void this.updateForTrack(t)}let n=null,i=null,r=e.length;while(r--){const t=e[r];"showing"===t.mode&&("descriptions"===t.kind?n=t:i=t)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):n&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(n))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),n=e.activeCues;let i=n.length;while(i--){const e=n[i];if(!e)continue;const r=e.displayState;if(t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&ro(r.firstChild,"color",io(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ro(r.firstChild,"backgroundColor",io(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ro(r,"backgroundColor",io(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow=`2px 2px 3px ${eo}, 2px 2px 4px ${eo}, 2px 2px 5px ${eo}`:"raised"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${eo}, 2px 2px ${eo}, 3px 3px ${eo}`:"depressed"===t.edgeStyle?r.firstChild.style.textShadow=`1px 1px ${to}, 0 1px ${to}, -1px -1px ${eo}, 0 -1px ${eo}`:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow=`0 0 4px ${eo}, 0 0 4px ${eo}, 0 0 4px ${eo}, 0 0 4px ${eo}`)),t.fontPercent&&1!==t.fontPercent){const e=a().parseFloat(r.style.fontSize);r.style.fontSize=e*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=no[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!==typeof a().WebVTT||e.every((e=>!e.activeCues)))return;const t=[];for(let n=0;n<e.length;++n){const i=e[n];for(let e=0;e<i.activeCues.length;++e)t.push(i.activeCues[e])}a().WebVTT.processCues(a(),t,this.el_);for(let n=0;n<e.length;++n){const t=e[n];for(let e=0;e<t.activeCues.length;++e){const i=t.activeCues[e].displayState;yi(i,"vjs-text-track-cue","vjs-text-track-cue-"+(t.language?t.language:n)),t.language&&Ei(i,"lang",t.language)}this.player_.textTrackSettings&&this.updateDisplayState(t)}}}Rr.registerComponent("TextTrackDisplay",so);class oo extends Rr{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=pi("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i}}Rr.registerComponent("LoadingSpinner",oo);class ao extends Js{createEl(e,t={},n={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n);const i=pi(e,t,n);return i.appendChild(pi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){const n=this.constructor.name;return An.warn(`Adding an actionable (user controllable) child to a Button (${n}) is not supported; use a ClickableComponent instead.`),Rr.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){h().isEventKey(e,"Space")||h().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}Rr.registerComponent("Button",ao);class uo extends ao{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",(e=>this.handleMouseDown(e)))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Gr(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const r=()=>i.focus();zr(t)?t.then(r,(()=>{})):this.setTimeout(r,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}uo.prototype.controlText_="Play Video",Rr.registerComponent("BigPlayButton",uo);class co extends ao{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){h().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Rr.registerComponent("CloseButton",co);class lo extends ao{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.on(e,"play",(e=>this.handlePlay(e))),this.on(e,"pause",(e=>this.handlePause(e))),t.replay&&this.on(e,"ended",(e=>this.handleEnded(e)))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Gr(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(e=>this.handleSeeked(e)))}}lo.prototype.controlText_="Play",Rr.registerComponent("PlayToggle",lo);class ho extends Rr{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],(e=>this.updateContent(e))),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),n=pi("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(n),this.contentEl_=pi("span",{className:`${e}-display`},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=$r(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(()=>{if(!this.contentEl_)return;let e=this.textNode_;e&&this.contentEl_.firstChild!==e&&(e=null,An.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=c().createTextNode(this.formattedTime_),this.textNode_&&(e?this.contentEl_.replaceChild(this.textNode_,e):this.contentEl_.appendChild(this.textNode_))})))}updateContent(e){}}ho.prototype.labelText_="Time",ho.prototype.controlText_="Time",Rr.registerComponent("TimeDisplay",ho);class po extends ho{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}po.prototype.labelText_="Current Time",po.prototype.controlText_="Current Time",Rr.registerComponent("CurrentTimeDisplay",po);class fo extends ho{constructor(e,t){super(e,t);const n=e=>this.updateContent(e);this.on(e,"durationchange",n),this.on(e,"loadstart",n),this.on(e,"loadedmetadata",n)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}fo.prototype.labelText_="Duration",fo.prototype.controlText_="Duration",Rr.registerComponent("DurationDisplay",fo);class mo extends Rr{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),n=super.createEl("span",{textContent:"/"});return t.appendChild(n),e.appendChild(t),e}}Rr.registerComponent("TimeDivider",mo);class go extends ho{constructor(e,t){super(e,t),this.on(e,"durationchange",(e=>this.updateContent(e)))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(pi("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!==typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}go.prototype.labelText_="Remaining Time",go.prototype.controlText_="Remaining Time",Rr.registerComponent("RemainingTimeDisplay",go);class yo extends Rr{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",(e=>this.updateShowing(e)))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=pi("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(pi("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(c().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Rr.registerComponent("LiveDisplay",yo);class vo extends ao{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=e=>this.updateLiveEdgeStatus(e),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=pi("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function _o(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}vo.prototype.controlText_="Seek to live, currently playing live",Rr.registerComponent("SeekToLive",vo);var bo=Object.freeze({__proto__:null,clamp:_o});class To extends Rr{constructor(e,t){super(e,t),this.handleMouseDown_=e=>this.handleMouseDown(e),this.handleMouseUp_=e=>this.handleMouseUp(e),this.handleKeyDown_=e=>this.handleKeyDown(e),this.handleClick_=e=>this.handleClick(e),this.handleMouseMove_=e=>this.handleMouseMove(e),this.update_=e=>this.update(e),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},n={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),n=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},n),super.createEl(e,t,n)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||Qn||e.preventDefault(),ki(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;Ci(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"}))),e}getProgress(){return Number(_o(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=xi(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){h().isEventKey(e,"Left")||h().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):h().isEventKey(e,"Right")||h().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Rr.registerComponent("Slider",To);const wo=(e,t)=>_o(e/t*100,0,100).toFixed(2)+"%";class Eo extends Rr{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",(e=>this.update(e)))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=pi("span",{className:"vjs-control-text"}),n=pi("span",{textContent:this.localize("Loaded")}),i=c().createTextNode(": ");return this.percentageEl_=pi("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(n),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",(()=>{const e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,s=wo(i,n);this.percent_!==s&&(this.el_.style.width=s,fi(this.percentageEl_,s),this.percent_=s);for(let o=0;o<t.length;o++){const e=t.start(o),n=t.end(o);let s=r[o];s||(s=this.el_.appendChild(pi()),r[o]=s),s.dataset.start===e&&s.dataset.end===n||(s.dataset.start=e,s.dataset.end=n,s.style.left=wo(e,i),s.style.width=wo(n-e,i))}for(let o=r.length;o>t.length;o--)this.el_.removeChild(r[o-1]);r.length=t.length}))}}Rr.registerComponent("LoadProgressBar",Eo);class So extends Rr{constructor(e,t){super(e,t),this.update=hr(lr(this,this.update),cr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,n){const i=Oi(this.el_),r=Ii(this.player_.el()),s=e.width*t;if(!r||!i)return;const o=e.left-r.left+s,a=e.width-s+(r.right-e.right);let u=i.width/2;o<u?u+=u-o:a<u&&(u=a),u<0?u=0:u>i.width&&(u=i.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(n)}write(e){fi(this.el_,e)}updateTime(e,t,n,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",(()=>{let r;const s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const e=this.player_.liveTracker.liveWindow(),n=e-t*e;r=(n<1?"":"-")+$r(n,e)}else r=$r(n,s);this.update(e,t,r),i&&i()}))}}Rr.registerComponent("TimeTooltip",So);class ko extends Rr{constructor(e,t){super(e,t),this.update=hr(lr(this,this.update),cr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const n=this.getChild("timeTooltip");if(!n)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}}ko.prototype.options_={children:[]},ri||Hn||ko.prototype.options_.children.push("timeTooltip"),Rr.registerComponent("PlayProgressBar",ko);class Co extends Rr{constructor(e,t){super(e,t),this.update=hr(lr(this,this.update),cr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const n=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,n,(()=>{this.el_.style.left=e.width*t+"px"}))}}Co.prototype.options_={children:["timeTooltip"]},Rr.registerComponent("MouseTimeDisplay",Co);const Io=5,Oo=12;class xo extends To{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=lr(this,this.update),this.update=hr(this.update_,cr),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in c()&&"visibilityState"in c()&&this.on(c(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===c().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,cr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===c().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",(()=>{const e=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),this.currentTime_===e&&this.duration_===i||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[$r(e,i),$r(i,i)],"{1} of {2}")),this.currentTime_=e,this.duration_=i),this.bar&&this.bar.update(Ii(this.el()),this.getProgress())})),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Li(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Li(e))return;let n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);const i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();const e=r.seekableStart(),t=r.liveCurrentTime();if(n=e+i*r.liveWindow(),n>=t&&(n=t),n<=e&&(n=e+.1),n===1/0)return}else n=i*this.player_.duration(),n===this.player_.duration()&&(n-=.1);this.userSeek_(n)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Gr(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+Io)}stepBack(){this.userSeek_(this.player_.currentTime()-Io)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(h().isEventKey(e,"Space")||h().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(h().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(h().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(h()(e))){e.preventDefault(),e.stopPropagation();const n=10*(h().codes[h()(e)]-h().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*n):this.userSeek_(this.player_.duration()*n)}else h().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-Io*Oo)):h().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+Io*Oo)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in c()&&"visibilityState"in c()&&this.off(c(),"visibilitychange",this.toggleVisibility_),super.dispose()}}xo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ri||Hn||xo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Rr.registerComponent("SeekBar",xo);class Ao extends Rr{constructor(e,t){super(e,t),this.handleMouseMove=hr(lr(this,this.handleMouseMove),cr),this.throttledHandleMouseSeek=hr(lr(this,this.handleMouseSeek),cr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.handleMouseDownHandler_=e=>this.handleMouseDown(e),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!n&&!i)return;const r=t.el(),s=Oi(r);let o=xi(r,e).x;o=_o(o,0,1),i&&i.update(s,o),n&&n.update(s,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach((e=>e.disable&&e.disable())),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Gr(this.player_.play())}}enable(){this.children().forEach((e=>e.enable&&e.enable())),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}Ao.prototype.options_={children:["seekBar"]},Rr.registerComponent("ProgressControl",Ao);class Do extends ao{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],(e=>this.handlePictureInPictureChange(e))),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],(e=>this.handlePictureInPictureEnabledChange(e))),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(()=>{const t="audio"===e.currentType().substring(0,5);t||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()})),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){c().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}Do.prototype.controlText_="Picture-in-Picture",Rr.registerComponent("PictureInPictureToggle",Do);class Po extends ao{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",(e=>this.handleFullscreenChange(e))),!1===c()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}Po.prototype.controlText_="Fullscreen",Rr.registerComponent("FullscreenToggle",Po);const Ro=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))};class No extends Rr{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Rr.registerComponent("VolumeLevel",No);class Lo extends Rr{constructor(e,t){super(e,t),this.update=hr(lr(this,this.update),cr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,n,i){if(!n){const n=Ii(this.el_),i=Ii(this.player_.el()),r=e.width*t;if(!i||!n)return;const s=e.left-i.left+r,o=e.width-r+(i.right-e.right);let a=n.width/2;s<a?a+=a-s:o<a&&(a=o),a<0?a=0:a>n.width&&(a=n.width),this.el_.style.right=`-${a}px`}this.write(`${i}%`)}write(e){fi(this.el_,e)}updateVolume(e,t,n,i,r){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(()=>{this.update(e,t,n,i.toFixed(0)),r&&r()}))}}Rr.registerComponent("VolumeLevelTooltip",Lo);class Mo extends Rr{constructor(e,t){super(e,t),this.update=hr(lr(this,this.update),cr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,n){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(()=>{n?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"}))}}Mo.prototype.options_={children:["volumeLevelTooltip"]},Rr.registerComponent("MouseVolumeLevelDisplay",Mo);class Uo extends To{constructor(e,t){super(e,t),this.on("slideractive",(e=>this.updateLastVolume_(e))),this.on(e,"volumechange",(e=>this.updateARIAAttributes(e))),e.ready((()=>this.updateARIAAttributes()))}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Li(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const n=this.el(),i=Ii(n),r=this.vertical();let s=xi(n,e);s=r?s.y:s.x,s=_o(s,0,1),t.update(i,s,r)}Li(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",(()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)}))}}Uo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ri||Hn||Uo.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Uo.prototype.playerEvent="volumechange",Rr.registerComponent("VolumeBar",Uo);class jo extends Rr{constructor(e,t={}){t.vertical=t.vertical||!1,("undefined"===typeof t.volumeBar||Un(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),Ro(this,e),this.throttledHandleMouseMove=hr(lr(this,this.handleMouseMove),cr),this.handleMouseUpHandler_=e=>this.handleMouseUp(e),this.on("mousedown",(e=>this.handleMouseDown(e))),this.on("touchstart",(e=>this.handleMouseDown(e))),this.on("mousemove",(e=>this.handleMouseMove(e))),this.on(this.volumeBar,["focus","slideractive"],(()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}jo.prototype.options_={children:["volumeBar"]},Rr.registerComponent("VolumeControl",jo);const Fo=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))};class Bo extends ao{constructor(e,t){super(e,t),Fo(this,e),this.on(e,["loadstart","volumechange"],(e=>this.update(e)))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){const e=n<.1?.1:n;this.player_.volume(e),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;ri&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),vi(this.el_,[0,1,2,3].reduce(((e,t)=>e+`${t?" ":""}vjs-vol-${t}`),"")),yi(this.el_,`vjs-vol-${t}`)}updateControlText_(){const e=this.player_.muted()||0===this.player_.volume(),t=e?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}Bo.prototype.controlText_="Mute",Rr.registerComponent("MuteToggle",Bo);class Vo extends Rr{constructor(e,t={}){"undefined"!==typeof t.inline?t.inline=t.inline:t.inline=!0,("undefined"===typeof t.volumeControl||Un(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=e=>this.handleKeyPress(e),this.on(e,["loadstart"],(e=>this.volumePanelState_(e))),this.on(this.muteToggle,"keyup",(e=>this.handleKeyPress(e))),this.on(this.volumeControl,"keyup",(e=>this.handleVolumeControlKeyUp(e))),this.on("keydown",(e=>this.handleKeyPress(e))),this.on("mouseover",(e=>this.handleMouseOver(e))),this.on("mouseout",(e=>this.handleMouseOut(e))),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){h().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),ir(c(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),rr(c(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){h().isEventKey(e,"Esc")&&this.handleMouseOut()}}Vo.prototype.options_={children:["muteToggle","volumeControl"]},Rr.registerComponent("VolumePanel",Vo);class $o extends Rr{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",(e=>this.handleKeyDown(e))),this.boundHandleBlur_=e=>this.handleBlur(e),this.boundHandleTapClick_=e=>this.handleTapClick(e)}addEventListenerForItem(e){e instanceof Rr&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Rr&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"===typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=pi(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ir(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||c().activeElement;if(!this.children().some((e=>e.el()===t))){const e=this.menuButton_;e&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const n=t.filter((t=>t.el()===e.target))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}}handleKeyDown(e){h().isEventKey(e,"Left")||h().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(h().isEventKey(e,"Right")||h().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice(),n=t.length&&t[0].hasClass("vjs-menu-title");n&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}Rr.registerComponent("Menu",$o);class qo extends Rr{constructor(e,t={}){super(e,t),this.menuButton_=new ao(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const n=ao.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+n,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=e=>this.handleClick(e);this.handleMenuKeyUp_=e=>this.handleMenuKeyUp(e),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",(e=>this.handleKeyDown(e))),this.on(this.menuButton_,"mouseenter",(()=>{this.addClass("vjs-hover"),this.menu.show(),ir(c(),"keyup",this.handleMenuKeyUp_)})),this.on("mouseleave",(e=>this.handleMouseLeave(e))),this.on("keydown",(e=>this.handleSubmenuKeyDown(e)))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new $o(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=pi("li",{className:"vjs-menu-title",textContent:Ar(this.options_.title),tabIndex:-1}),n=new Rr(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";const t=ao.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),rr(c(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){h().isEventKey(e,"Esc")||h().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),h().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(h().isEventKey(e,"Up")||h().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(h().isEventKey(e,"Esc")||h().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(h().isEventKey(e,"Esc")||h().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),h().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ri&&hi())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Rr.registerComponent("MenuButton",qo);class Ho extends qo{constructor(e,t){const n=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!n)return;const i=lr(this,this.update);n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),n.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",(function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i),n.removeEventListener("labelchange",i)}))}}Rr.registerComponent("TrackButton",Ho);const Wo=["Tab","Esc","Up","Down","Right","Left"];class zo extends Js{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,n){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),n);return i.replaceChild(pi("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){Wo.some((t=>h().isEventKey(e,t)))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Rr.registerComponent("MenuItem",zo);class Go extends zo{constructor(e,t){const n=t.track,i=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,super(e,t),this.track=n,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const r=(...e)=>{this.handleTracksChange.apply(this,e)},s=(...e)=>{this.handleSelectedLanguageChange.apply(this,e)};if(e.on(["loadstart","texttrackchange"],r),i.addEventListener("change",r),i.addEventListener("selectedlanguagechange",s),this.on("dispose",(function(){e.off(["loadstart","texttrackchange"],r),i.removeEventListener("change",r),i.removeEventListener("selectedlanguagechange",s)})),void 0===i.onchange){let e;this.on(["tap","click"],(function(){if("object"!==typeof a().Event)try{e=new(a().Event)("change")}catch(t){}e||(e=c().createEvent("Event"),e.initEvent("change",!0,!0)),i.dispatchEvent(e)}))}this.handleTracksChange()}handleClick(e){const t=this.track,n=this.player_.textTracks();if(super.handleClick(e),n)for(let i=0;i<n.length;i++){const e=n[i];-1!==this.kinds.indexOf(e.kind)&&(e===t?"showing"!==e.mode&&(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Rr.registerComponent("TextTrackMenuItem",Go);class Qo extends Go{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(this.options_.kinds.indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let n=!0;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(["captions","descriptions","subtitles"].indexOf(e.kind)>-1&&"showing"===e.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})}}Rr.registerComponent("OffTextTrackMenuItem",Qo);class Ko extends Ho{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Go){let n;this.label_&&(n=`${this.label_} off`),e.push(new Qo(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let r=0;r<i.length;r++){const n=i[r];if(this.kinds_.indexOf(n.kind)>-1){const i=new t(this.player_,{track:n,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});i.addClass(`vjs-${n.kind}-menu-item`),e.push(i)}}return e}}Rr.registerComponent("TextTrackButton",Ko);class Xo extends zo{constructor(e,t){const n=t.track,i=t.cue,r=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,super(e,t),this.track=n,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Rr.registerComponent("ChaptersTrackMenuItem",Xo);class Yo extends Ko{constructor(e,t,n){super(e,t,n),this.selectCurrentItem_=()=>{this.items.forEach((e=>{e.selected(this.track_.activeCues[0]===e.cue)}))}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.kind===this.kind_)return n}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ar(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new Xo(this.player_,{track:this.track_,cue:i});e.push(r)}return e}}Yo.prototype.kind_="chapters",Yo.prototype.controlText_="Chapters",Rr.registerComponent("ChaptersButton",Yo);class Jo extends Ko{constructor(e,t,n){super(e,t,n);const i=e.textTracks(),r=lr(this,this.handleTracksChange);i.addEventListener("change",r),this.on("dispose",(function(){i.removeEventListener("change",r)}))}handleTracksChange(e){const t=this.player().textTracks();let n=!1;for(let i=0,r=t.length;i<r;i++){const e=t[i];if(e.kind!==this.kind_&&"showing"===e.mode){n=!0;break}}n?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Jo.prototype.kind_="descriptions",Jo.prototype.controlText_="Descriptions",Rr.registerComponent("DescriptionsButton",Jo);class Zo extends Ko{constructor(e,t,n){super(e,t,n)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Zo.prototype.kind_="subtitles",Zo.prototype.controlText_="Subtitles",Rr.registerComponent("SubtitlesButton",Zo);class ea extends Go{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}}Rr.registerComponent("CaptionSettingsMenuItem",ea);class ta extends Ko{constructor(e,t,n){super(e,t,n)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new ea(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}ta.prototype.kind_="captions",ta.prototype.controlText_="Captions",Rr.registerComponent("CaptionsButton",ta);class na extends Go{createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(r.appendChild(pi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(pi("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}Rr.registerComponent("SubsCapsMenuItem",na);class ia extends Ko{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(Ar(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new ea(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,na),e}}ia.prototype.kinds_=["captions","subtitles"],ia.prototype.controlText_="Subtitles",Rr.registerComponent("SubsCapsButton",ia);class ra extends zo{constructor(e,t){const n=t.track,i=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,super(e,t),this.track=n,this.addClass(`vjs-${n.kind}-menu-item`);const r=(...e)=>{this.handleTracksChange.apply(this,e)};i.addEventListener("change",r),this.on("dispose",(()=>{i.removeEventListener("change",r)}))}createEl(e,t,n){const i=super.createEl(e,t,n),r=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(r.appendChild(pi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),r.appendChild(pi("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const e=this.player_.audioTracks();for(let t=0;t<e.length;t++){const n=e[t];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Rr.registerComponent("AudioTrackMenuItem",ra);class sa extends Ho{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let n=0;n<t.length;n++){const i=t[n];e.push(new ra(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e}}sa.prototype.controlText_="Audio Track",Rr.registerComponent("AudioTrackButton",sa);class oa extends zo{constructor(e,t){const n=t.rate,i=parseFloat(n,10);t.label=n,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=n,this.rate=i,this.on(e,"ratechange",(e=>this.update(e)))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}oa.prototype.contentElType="button",Rr.registerComponent("PlaybackRateMenuItem",oa);class aa extends qo{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",(e=>this.updateVisibility(e))),this.on(e,"ratechange",(e=>this.updateLabel(e))),this.on(e,"playbackrateschange",(e=>this.handlePlaybackRateschange(e)))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=pi("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let n=e.length-1;n>=0;n--)t.push(new oa(this.player(),{rate:e[n]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}aa.prototype.controlText_="Playback Rate",Rr.registerComponent("PlaybackRateMenuButton",aa);class ua extends Rr{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},n={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,n)}}Rr.registerComponent("Spacer",ua);class ca extends ua{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Rr.registerComponent("CustomControlSpacer",ca);class la extends Rr{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}la.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in c()&&la.prototype.options_.children.splice(la.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Rr.registerComponent("ControlBar",la);class ha extends Zr{constructor(e,t){super(e,t),this.on(e,"error",(e=>this.open(e)))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}ha.prototype.options_=Object.assign({},Zr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Rr.registerComponent("ErrorDisplay",ha);const da="vjs-text-track-settings",pa=["#000","Black"],fa=["#00F","Blue"],ma=["#0FF","Cyan"],ga=["#0F0","Green"],ya=["#F0F","Magenta"],va=["#F00","Red"],_a=["#FFF","White"],ba=["#FF0","Yellow"],Ta=["1","Opaque"],wa=["0.5","Semi-Transparent"],Ea=["0","Transparent"],Sa={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[pa,_a,va,ga,fa,ba,ya,ma]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ta,wa,Ea]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[_a,pa,va,ga,fa,ba,ya,ma]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:e=>"1.00"===e?null:Number(e)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ta,wa]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ea,wa,Ta]}};function ka(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Ca(e,t){const n=e.options[e.options.selectedIndex].value;return ka(n,t)}function Ia(e,t,n){if(t)for(let i=0;i<e.options.length;i++)if(ka(e.options[i].value,n)===t){e.selectedIndex=i;break}}Sa.windowColor.options=Sa.backgroundColor.options;class Oa extends Zr{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=pi("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",(()=>{this.saveSettings(),this.close()})),this.on(this.$(".vjs-default-button"),"click",(()=>{this.setDefaults(),this.updateDisplay()})),Nn(Sa,(e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",n="label"){const i=Sa[e],r=i.id.replace("%s",this.id_),s=[t,r].join(" ").trim();return[`<${n} id="${r}" class="${"label"===n?"vjs-label":""}">`,this.localize(i.label),`</${n}>`,`<select aria-labelledby="${s}">`].concat(i.options.map((e=>{const t=r+"-"+e[1].replace(/\W+/g,"");return[`<option id="${t}" value="${e[0]}" `,`aria-labelledby="${s} ${t}">`,this.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return pi("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return pi("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return pi("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Ln(Sa,((e,t,n)=>{const i=Ca(this.$(t.selector),t.parser);return void 0!==i&&(e[n]=i),e}),{})}setValues(e){Nn(Sa,((t,n)=>{Ia(this.$(t.selector),e[n],t.parser)}))}setDefaults(){Nn(Sa,(e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t}))}restoreSettings(){let e;try{e=JSON.parse(a().localStorage.getItem(da))}catch(t){An.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?a().localStorage.setItem(da,JSON.stringify(e)):a().localStorage.removeItem(da)}catch(t){An.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()}}Rr.registerComponent("TextTrackSettings",Oa);class xa extends Rr{constructor(e,t){let n=t.ResizeObserver||a().ResizeObserver;null===t.ResizeObserver&&(n=!1);const i=jn({createEl:!n,reportTouchActivity:!1},t);super(e,i),this.ResizeObserver=t.ResizeObserver||a().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=dr((()=>{this.resizeHandler()}),100,!1,this),n?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const e=this.debouncedHandler_;let t=this.unloadListener_=function(){rr(this,"resize",e),rr(this,"unload",t),t=null};ir(this.el_.contentWindow,"unload",t),ir(this.el_.contentWindow,"resize",e)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Rr.registerComponent("ResizeManager",xa);const Aa={trackingThreshold:20,liveTolerance:15};class Da extends Rr{constructor(e,t){const n=jn(Aa,t,{createEl:!1});super(e,n),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=e=>this.handlePlay(e),this.handleFirstTimeupdate_=e=>this.handleFirstTimeupdate(e),this.handleSeeked_=e=>this.handleSeeked(e),this.seekToLiveEdge_=e=>this.seekToLiveEdge(e),this.reset_(),this.on(this.player_,"durationchange",(e=>this.handleDurationchange(e))),this.on(this.player_,"canplay",(()=>this.toggleTracking()))}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(a().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;const i=this.liveCurrentTime(),r=this.player_.currentTime();let s=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,cr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;while(n--)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let n=e?e.length:0;while(n--)t.push(e.start(n));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"===typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Rr.registerComponent("LiveTracker",Da);class Pa extends Rr{constructor(e,t){super(e,t),this.on("statechanged",(e=>this.updateDom_())),this.updateDom_()}createEl(){return this.els={title:pi("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Yi()}`}),description:pi("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Yi()}`})},pi("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,n={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((e=>{const i=this.state[e],r=this.els[e],s=n[e];Di(r),i&&fi(r,i),t&&(t.removeAttribute(s),i&&t.setAttribute(s,r.id))})),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Rr.registerComponent("TitleBar",Pa);const Ra=e=>{const t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;const n=e.$$("source"),i=[];let r="";if(!n.length)return!1;for(let s=0;s<n.length;s++){const e=n[s].src;e&&-1===i.indexOf(e)&&i.push(e)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},Na=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(e){const t=c().createElement(this.nodeName.toLowerCase());t.innerHTML=e;const n=c().createDocumentFragment();while(t.childNodes.length)n.appendChild(t.childNodes[0]);return this.innerText="",a().Element.prototype.appendChild.call(this,n),this.innerHTML}}),La=(e,t)=>{let n={};for(let i=0;i<e.length;i++)if(n=Object.getOwnPropertyDescriptor(e[i],t),n&&n.set&&n.get)break;return n.enumerable=!0,n.configurable=!0,n},Ma=e=>La([e.el(),a().HTMLMediaElement.prototype,a().Element.prototype,Na],"innerHTML"),Ua=function(e){const t=e.el();if(t.resetSourceWatch_)return;const n={},i=Ma(e),r=n=>(...i)=>{const r=n.apply(t,i);return Ra(e),r};["append","appendChild","insertAdjacentHTML"].forEach((e=>{t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",jn(i,{set:r(i.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach((e=>{t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)},ja=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?fs(a().Element.prototype.getAttribute.call(this,"src")):""},set(e){return a().Element.prototype.setAttribute.call(this,"src",e),e}}),Fa=e=>La([e.el(),a().HTMLMediaElement.prototype,ja],"src"),Ba=function(e){if(!e.featuresSourceset)return;const t=e.el();if(t.resetSourceset_)return;const n=Fa(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",jn(n,{set:i=>{const r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=(n,r)=>{const s=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),s},t.load=()=>{const n=r.call(t);return Ra(e)||(e.triggerSourceset(""),Ua(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):Ra(e)||Ua(e),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}};class Va extends Os{constructor(e,t){super(e,t);const n=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,n&&(this.el_.currentSrc!==n.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(n):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const e=this.el_.childNodes;let t=e.length;const n=[];while(t--){const r=e[t],s=r.nodeName.toLowerCase();"track"===s&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),this.textTracks().addTrack(r.track),i||this.el_.hasAttribute("crossorigin")||!gs(r.src)||(i=!0)):n.push(r))}for(let i=0;i<n.length;i++)this.el_.removeChild(n[i])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&An.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(ni||ti)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Va.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){Ba(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const n=()=>{t=[];for(let n=0;n<e.length;n++){const i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(()=>e.removeEventListener("change",n)));const i=()=>{for(let e=0;e<t.length;e++){const n=t[e];"disabled"===n.track.mode&&n.track.mode!==n.storedMode&&(n.track.mode=n.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",(()=>{e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)})),this.on("webkitendfullscreen",(()=>{e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)}))}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const n=e.toLowerCase();this[`${n}TracksListeners_`]&&Object.keys(this[`${n}TracksListeners_`]).forEach((e=>{const t=this.el()[`${n}Tracks`];t.removeEventListener(e,this[`${n}TracksListeners_`][e])})),this[`featuresNative${e}Tracks`]=!t,this[`${n}TracksListeners_`]=null,this.proxyNativeTracksForType_(n)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Ss[e],n=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!n||!n.addEventListener)return;const r={change:t=>{const n={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(n),"text"===e&&this[ks.remoteText.getterName]().trigger(n)},addtrack(e){i.addTrack(e.track)},removetrack(e){i.removeTrack(e.track)}},s=function(){const e=[];for(let t=0;t<i.length;t++){let r=!1;for(let e=0;e<n.length;e++)if(n[e]===i[t]){r=!0;break}r||e.push(i[t])}while(e.length)i.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=r,Object.keys(r).forEach((e=>{const t=r[e];n.addEventListener(e,t),this.on("dispose",(i=>n.removeEventListener(e,t)))})),this.on("loadstart",s),this.on("dispose",(e=>this.off("loadstart",s)))}proxyNativeTracks_(){Ss.names.forEach((e=>{this.proxyNativeTracksForType_(e)}))}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),Va.disposeMediaElement(e),e=t}else{e=c().createElement("video");const t=this.options_.tag&&Ti(this.options_.tag),n=jn({},t);ni&&!0===this.options_.nativeControlsForTouch||delete n.controls,bi(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&Ei(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let n=0;n<t.length;n++){const i=t[n],r=this.options_[i];"undefined"!==typeof r&&(r?Ei(e,i,i):Si(e,i),e[i]=r)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let e=!1;const t=function(){e=!0};this.on("loadstart",t);const n=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready((function(){this.off("loadstart",t),this.off("loadedmetadata",n),e||this.trigger("loadstart")}))}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready((function(){t.forEach((function(e){this.trigger(e)}),this)}))}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&si?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){An(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Hn&&Qn&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",(()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)}))}supportsFullScreen(){return"function"===typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Gr(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}),0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Va.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):super.addTextTrack(e,t,n)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=c().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const n=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let n=t.length;while(n--)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])}}getVideoPlaybackQuality(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),a().performance&&(e.creationTime=a().performance.now()),e}}Fn(Va,"TEST_VID",(function(){if(!ci())return;const e=c().createElement("video"),t=c().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e})),Va.isSupported=function(){try{Va.TEST_VID.volume=.5}catch(e){return!1}return!(!Va.TEST_VID||!Va.TEST_VID.canPlayType)},Va.canPlayType=function(e){return Va.TEST_VID.canPlayType(e)},Va.canPlaySource=function(e,t){return Va.canPlayType(e.type)},Va.canControlVolume=function(){try{const e=Va.TEST_VID.volume;Va.TEST_VID.volume=e/2+.1;const t=e!==Va.TEST_VID.volume;return t&&ri?(a().setTimeout((()=>{Va&&Va.prototype&&(Va.prototype.featuresVolumeControl=e!==Va.TEST_VID.volume)})),!1):t}catch(e){return!1}},Va.canMuteVolume=function(){try{const e=Va.TEST_VID.muted;return Va.TEST_VID.muted=!e,Va.TEST_VID.muted?Ei(Va.TEST_VID,"muted","muted"):Si(Va.TEST_VID,"muted","muted"),e!==Va.TEST_VID.muted}catch(e){return!1}},Va.canControlPlaybackRate=function(){if(Hn&&Qn&&Xn<58)return!1;try{const e=Va.TEST_VID.playbackRate;return Va.TEST_VID.playbackRate=e/2+.1,e!==Va.TEST_VID.playbackRate}catch(e){return!1}},Va.canOverrideAttributes=function(){try{const e=()=>{};Object.defineProperty(c().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(c().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(c().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(c().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Va.supportsNativeTextTracks=function(){return si||ri&&Qn},Va.supportsNativeVideoTracks=function(){return!(!Va.TEST_VID||!Va.TEST_VID.videoTracks)},Va.supportsNativeAudioTracks=function(){return!(!Va.TEST_VID||!Va.TEST_VID.audioTracks)},Va.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function([e,t]){Fn(Va.prototype,e,(()=>Va[t]()),!0)})),Va.prototype.featuresVolumeControl=Va.canControlVolume(),Va.prototype.movingMediaElementInDOM=!ri,Va.prototype.featuresFullscreenResize=!0,Va.prototype.featuresProgressEvents=!0,Va.prototype.featuresTimeupdateEvents=!0,Va.prototype.featuresVideoFrameCallback=!(!Va.TEST_VID||!Va.TEST_VID.requestVideoFrameCallback),Va.disposeMediaElement=function(e){if(e){e.parentNode&&e.parentNode.removeChild(e);while(e.hasChildNodes())e.removeChild(e.firstChild);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()}},Va.resetMediaElement=function(e){if(!e)return;const t=e.querySelectorAll("source");let n=t.length;while(n--)e.removeChild(t[n]);e.removeAttribute("src"),"function"===typeof e.load&&function(){try{e.load()}catch(t){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Va.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Va.prototype["set"+Ar(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Va.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Va.prototype["set"+Ar(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Va.prototype[e]=function(){return this.el_[e]()}})),Os.withSourceHandlers(Va),Va.nativeSourceHandler={},Va.nativeSourceHandler.canPlayType=function(e){try{return Va.TEST_VID.canPlayType(e)}catch(t){return""}},Va.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Va.nativeSourceHandler.canPlayType(e.type);if(e.src){const t=ms(e.src);return Va.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Va.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Va.nativeSourceHandler.dispose=function(){},Va.registerSourceHandler(Va.nativeSourceHandler),Os.registerTech("Html5",Va);const $a=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qa={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ha=["tiny","xsmall","small","medium","large","xlarge","huge"],Wa={};Ha.forEach((e=>{const t="x"===e.charAt(0)?`x-${e.substring(1)}`:e;Wa[e]=`vjs-layout-${t}`}));const za={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Ga extends Rr{constructor(e,t,n){if(e.id=e.id||t.id||`vjs_video_${Yi()}`,t=Object.assign(Ga.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const n=e.closest("[lang]");n&&(t.language=n.getAttribute("lang"))}if(super(null,t,n),this.boundDocumentFullscreenChange_=e=>this.documentFullscreenChange_(e),this.boundFullWindowOnEscKey_=e=>this.fullWindowOnEscKey(e),this.boundUpdateStyleEl_=e=>this.updateStyleEl_(e),this.boundApplyInitTime_=e=>this.applyInitTime_(e),this.boundUpdateCurrentBreakpoint_=e=>this.updateCurrentBreakpoint_(e),this.boundHandleTechClick_=e=>this.handleTechClick_(e),this.boundHandleTechDoubleClick_=e=>this.handleTechDoubleClick_(e),this.boundHandleTechTouchStart_=e=>this.handleTechTouchStart_(e),this.boundHandleTechTouchMove_=e=>this.handleTechTouchMove_(e),this.boundHandleTechTouchEnd_=e=>this.handleTechTouchEnd_(e),this.boundHandleTechTap_=e=>this.handleTechTap_(e),this.isFullscreen_=!1,this.log=Dn(this.id_),this.fsApi_=En,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Ti(e),this.language(this.options_.language),t.languages){const e={};Object.getOwnPropertyNames(t.languages).forEach((function(n){e[n.toLowerCase()]=t.languages[n]})),this.languages_=e}else this.languages_=Ga.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach((e=>{if("function"!==typeof this[e])throw new Error(`plugin "${e}" does not exist`)})),this.scrubbing_=!1,this.el_=this.createEl(),Cr(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(ir(c(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=jn(this.options_);t.plugins&&Object.keys(t.plugins).forEach((e=>{this[e](t.plugins[e])})),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),ni&&this.addClass("vjs-touch-enabled"),ri||this.addClass("vjs-workinghover"),Ga.players[this.id_]=this;const r=yn.split(".")[0];this.addClass(`vjs-v${r}`),this.userActive(!0),this.reportUserActivity(),this.one("play",(e=>this.listenForUserActivity_(e))),this.on("keydown",(e=>this.handleKeyDown(e))),this.on("languagechange",(e=>this.handleLanguagechange(e))),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",(()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)}))}dispose(){this.trigger("dispose"),this.off("dispose"),rr(c(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),rr(c(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ga.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),qs(this),Cs.names.forEach((e=>{const t=Cs[e],n=this[t.getterName]();n&&n.off&&n.off()})),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e,t=this.tag,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();n?e=this.el_=t.parentNode:i||(e=this.el_=super.createEl("div"));const r=Ti(t);if(i){e=this.el_=t,t=this.tag=c().createElement("video");while(e.children.length)t.appendChild(e.firstChild);gi(e,"video-js")||yi(e,"video-js"),e.appendChild(t),n=this.playerElIngest_=e,Object.keys(e).forEach((n=>{try{t[n]=e[n]}catch(i){}}))}if(t.setAttribute("tabindex","-1"),r.tabindex="-1",Qn&&Zn&&(t.setAttribute("role","application"),r.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach((function(n){i&&"class"===n||e.setAttribute(n,r[n]),i&&t.setAttribute(n,r[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==a().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Wi("vjs-styles-dimensions");const e=Mi(".vjs-styles-defaults"),t=Mi("head");t.insertBefore(this.styleEl_,e?e.nextSibling:t.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const s=t.getElementsByTagName("a");for(let o=0;o<s.length;o++){const e=s.item(o);yi(e,"vjs-hidden"),e.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(e,t),mi(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}crossOrigin(e){if("undefined"===typeof e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):An.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?An.error(`Improper value "${t}" supplied for for ${e}`):(this[n]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,yr(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),vr(this,(()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)}))):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===a().VIDEOJS_NO_DYNAMIC_STYLE){const e="number"===typeof this.width_?this.width_:this.options_.width,t="number"===typeof this.height_?this.height_:this.options_.height,n=this.tech_&&this.tech_.el();return void(n&&(e>=0&&(n.width=e),t>=0&&(n.height=t)))}let e,t,n,i;n=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const r=n.split(":"),s=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/s:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*s,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),zi(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*s}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const n=Ar(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==n&&this.tag&&(Os.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=n,this.isReady_=!1;let r=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(r=!1);const s={source:t,autoplay:r,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Cs.names.forEach((e=>{const t=Cs[e];s[t.getterName]=this[t.privateName]})),Object.assign(s,this.options_[n]),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);const o=Os.getTech(e);if(!o)throw new Error(`No Tech named '${n}' exists! '${n}' should be registered using videojs.registerTech()'`);this.tech_=new o(s),this.tech_.ready(lr(this,this.handleTechReady_),!0),Yr.jsonToTextTracks(this.textTracksJson_||[],this.tech_),$a.forEach((e=>{this.on(this.tech_,e,(t=>this[`handleTech${Ar(e)}_`](t)))})),Object.keys(qa).forEach((e=>{this.on(this.tech_,e,(t=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${qa[e]}_`].bind(this),event:t}):this[`handleTech${qa[e]}_`](t)}))})),this.on(this.tech_,"loadstart",(e=>this.handleTechLoadStart_(e))),this.on(this.tech_,"sourceset",(e=>this.handleTechSourceset_(e))),this.on(this.tech_,"waiting",(e=>this.handleTechWaiting_(e))),this.on(this.tech_,"ended",(e=>this.handleTechEnded_(e))),this.on(this.tech_,"seeking",(e=>this.handleTechSeeking_(e))),this.on(this.tech_,"play",(e=>this.handleTechPlay_(e))),this.on(this.tech_,"pause",(e=>this.handleTechPause_(e))),this.on(this.tech_,"durationchange",(e=>this.handleTechDurationChange_(e))),this.on(this.tech_,"fullscreenchange",((e,t)=>this.handleTechFullscreenChange_(e,t))),this.on(this.tech_,"fullscreenerror",((e,t)=>this.handleTechFullscreenError_(e,t))),this.on(this.tech_,"enterpictureinpicture",(e=>this.handleTechEnterPictureInPicture_(e))),this.on(this.tech_,"leavepictureinpicture",(e=>this.handleTechLeavePictureInPicture_(e))),this.on(this.tech_,"error",(e=>this.handleTechError_(e))),this.on(this.tech_,"posterchange",(e=>this.handleTechPosterChange_(e))),this.on(this.tech_,"textdata",(e=>this.handleTechTextData_(e))),this.on(this.tech_,"ratechange",(e=>this.handleTechRateChange_(e))),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===n&&this.tag||mi(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Cs.names.forEach((e=>{const t=Cs[e];this[t.privateName]=this[t.getterName]()})),this.textTracksJson_=Yr.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&An.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!==typeof e)return;const t=()=>{const e=this.muted();this.muted(!0);const t=()=>{this.muted(e)};this.playTerminatedQueue_.push(t);const n=this.play();if(zr(n))return n.catch((e=>{throw t(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${e||""}`)}))};let n;return"any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():t():(n=this.play(),zr(n)&&(n=n.catch(t))),zr(n)?n.then((()=>{this.trigger({type:"autoplay-success",autoplay:e})})).catch((()=>{this.trigger({type:"autoplay-failure",autoplay:e})})):void 0}updateSourceCaches_(e=""){let t=e,n="";"string"!==typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=Qs(this,t)),this.cache_.source=jn({},e,{src:t,type:n});const i=this.cache_.sources.filter((e=>e.src&&e.src===t)),r=[],s=this.$$("source"),o=[];for(let a=0;a<s.length;a++){const e=Ti(s[a]);r.push(e),e.src&&e.src===t&&o.push(e.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=e=>this.updateSourceCaches_(e);const n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==n)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],(e=>{if("sourceset"===e.type)return;const t=this.techGet("currentSrc");this.lastSource_.tech=t,this.updateSourceCaches_(t)}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((e=>e.callback(e.event))),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Gr(this.play()):this.pause()))}handleTechDoubleClick_(e){if(!this.controls_)return;const t=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(t=>t.contains(e.target)));t||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const n=this.el();let i=c()[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(()=>{this.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready((function(){if(e in Fs)return Ms(this.middleware_,this.tech_,e,t);if(e in Bs)return Us(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(n){throw An(n),n}}),!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in js)return Ls(this.middleware_,this.tech_,e);if(e in Bs)return Us(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw An(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t;if("TypeError"===t.name)throw An(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t;throw An(t),t}}}play(){return new Promise((e=>{this.play_(e)}))}play_(e=Gr){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=e=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(t||!si&&!ri||this.load());const n=this.techGet_("play");null===n?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Ur(0,0)}scrubbing(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return"undefined"!==typeof e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return e&&e.length||(e=Ur(0,0)),e}bufferedPercent(){return Hr(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let n=e.end(e.length-1);return n>t&&(n=t),n}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise(((n,i)=>{function r(){t.off("fullscreenerror",o),t.off("fullscreenchange",s)}function s(){r(),n()}function o(e,t){r(),i(t)}t.one("fullscreenchange",s),t.one("fullscreenerror",o);const a=t.requestFullscreenHelper_(e);a&&(a.then(r,r),a.then(n,i))}))}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const e=this.el_[this.fsApi_.requestFullscreen](t);return e&&e.then((()=>this.isFullscreen(!0)),(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise(((t,n)=>{function i(){e.off("fullscreenerror",s),e.off("fullscreenchange",r)}function r(){i(),t()}function s(e,t){i(),n(t)}e.one("fullscreenchange",r),e.one("fullscreenerror",s);const o=e.exitFullscreenHelper_();o&&(o.then(i,i),o.then(t,n))}))}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=c()[this.fsApi_.exitFullscreen]();return e&&Gr(e.then((()=>this.isFullscreen(!1)))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=c().documentElement.style.overflow,ir(c(),"keydown",this.boundFullWindowOnEscKey_),c().documentElement.style.overflow="hidden",yi(c().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){h().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,rr(c(),"keydown",this.boundFullWindowOnEscKey_),c().documentElement.style.overflow=this.docOrigOverflow,vi(c().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in c()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in c())return c().exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;if(!t||!t.hotkeys)return;const n=e=>{const t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;const n=["button","checkbox","hidden","radio","reset","submit"];if("input"===t)return-1===n.indexOf(e.type);const i=["textarea"];return-1!==i.indexOf(t)};n(this.el_.ownerDocument.activeElement)||("function"===typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:n=(e=>h().isEventKey(e,"f")),muteKey:i=(e=>h().isEventKey(e,"m")),playPauseKey:r=(e=>h().isEventKey(e,"k")||h().isEventKey(e,"Space"))}=t;if(n.call(this,e)){e.preventDefault(),e.stopPropagation();const t=Rr.getComponent("FullscreenToggle");!1!==c()[this.fsApi_.fullscreenEnabled]&&t.prototype.handleClick.call(this,e)}else if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const t=Rr.getComponent("MuteToggle");t.prototype.handleClick.call(this,e)}else if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const t=Rr.getComponent("PlayToggle");t.prototype.handleClick.call(this,e)}}canPlayType(e){let t;for(let n=0,i=this.options_.techOrder;n<i.length;n++){const r=i[n];let s=Os.getTech(r);if(s||(s=Rr.getComponent(r)),s){if(s.isSupported()&&(t=s.canPlayType(e),t))return t}else An.error(`The "${r}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map((e=>[e,Os.getTech(e)])).filter((([e,t])=>t?t.isSupported():(An.error(`The "${e}" tech is undefined. Skipped browser support check for that tech.`),!1))),n=function(e,t,n){let i;return e.some((e=>t.some((t=>{if(i=n(e,t),i)return!0})))),i};let i;const r=e=>(t,n)=>e(n,t),s=([e,t],n)=>{if(t.canPlaySource(n,this.options_[e.toLowerCase()]))return{source:n,tech:e}};return i=this.options_.sourceOrder?n(e,t,r(s)):n(t,e,s),i||!1}handleSrc_(e,t){if("undefined"===typeof e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const n=Ks(e);if(n.length){if(this.changingSrc_=!0,t||(this.cache_.sources=n),this.updateSourceCaches_(n[0]),Rs(this,n[0],((e,i)=>{this.middleware_=i,t||(this.cache_.sources=n),this.updateSourceCaches_(e);const r=this.src_(e);if(r)return n.length>1?this.handleSrc_(n.slice(1)):(this.changingSrc_=!1,this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void this.triggerReady());Ns(i,this.tech_)})),n.length>1){const e=()=>{this.error(null),this.handleSrc_(n.slice(1),!0)},t=()=>{this.off("error",e)};this.one("error",e),this.one("playing",t),this.resetRetryOnError_=()=>{this.off("error",e),this.off("playing",t)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(Dr(t.tech,this.techName_)?(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready((()=>{this.changingSrc_=!1})),!1))}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Gr(e.then((()=>this.doReset_())))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),yr(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{durationDisplay:e,remainingTimeDisplay:t}=this.controlBar||{};e&&e.updateContent(),t&&t.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"===typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"===typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t="undefined"===typeof t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(_n("beforeerror").forEach((t=>{const n=t(this,e);Mn(n)&&!Array.isArray(n)||"string"===typeof n||"number"===typeof n||null===n?e=n:this.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Wr(e),this.addClass("vjs-error"),An.error(`(CODE:${this.error_.code} ${Wr.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),_n("error").forEach((e=>e(this,this.error_)))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,n;const i=lr(this,this.reportUserActivity),r=function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())},s=function(){i(),this.clearInterval(e),e=this.setInterval(i,250)},o=function(t){i(),this.clearInterval(e)};this.on("mousedown",s),this.on("mousemove",r),this.on("mouseup",o),this.on("mouseleave",o);const a=this.getChild("controlBar");let u;!a||ri||Hn||(a.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const e=this.options_.inactivityTimeout;e<=0||(u=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}),250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),n=t&&t.currentHeight();e.forEach((e=>{e!==t&&e.el_&&!e.hasClass("vjs-hidden")&&(e.hide(),this.audioOnlyCache_.hiddenChildren.push(e))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(n),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((e=>e.show())),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!==typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const e=[];return this.isInPictureInPicture()&&e.push(this.exitPictureInPicture()),this.isFullscreen()&&e.push(this.exitFullscreen()),this.audioPosterMode()&&e.push(this.audioPosterMode(!1)),Promise.all(e).then((()=>this.enableAudioOnlyUI_()))}return Promise.resolve().then((()=>this.disableAudioOnlyUI_()))}enablePosterModeUI_(){const e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){const e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){if("boolean"!==typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;if(this.audioPosterMode_=e,e){if(this.audioOnlyMode()){const e=this.audioOnlyMode(!1);return e.then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.enablePosterModeUI_()}))}return Promise.resolve().then((()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),yr(this)&&this.trigger("languagechange"))}languages(){return jn(Ga.prototype.options_.languages,this.languages_)}toJSON(){const e=jn(this.options_),t=e.tracks;e.tracks=[];for(let n=0;n<t.length;n++){let i=t[n];i=jn(i),i.player=void 0,e.tracks[n]=i}return e}createModal(e,t){t=t||{},t.content=e||"";const n=new Zr(this,t);return this.addChild(n),n.on("dispose",(()=>{this.removeChild(n)})),n.open(),n}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let n=0;n<Ha.length;n++){const i=Ha[n],r=this.breakpoints_[i];if(t<=r){if(e===i)return;e&&this.removeClass(Wa[e]),this.addClass(Wa[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},za,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){if(void 0===e)return this.responsive_;e=Boolean(e);const t=this.responsive_;return e!==t?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Wa[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!==typeof e)return;this.reset(),this.cache_.media=jn(e);const{artist:n,artwork:i,description:r,poster:s,src:o,textTracks:a,title:u}=this.cache_.media;!i&&s&&(this.cache_.media.artwork=[{src:s,type:Gs(s)}]),o&&this.src(o),s&&this.poster(s),Array.isArray(a)&&a.forEach((e=>this.addRemoteTextTrack(e,!1))),this.titleBar&&this.titleBar.update({title:u,description:r||n||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),n=Array.prototype.map.call(this.remoteTextTracks(),(e=>({kind:e.kind,label:e.label,language:e.language,src:e.src}))),i={src:t,textTracks:n};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:Gs(i.poster)}]),i}return jn(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},n=Ti(e),i=n["data-setup"];if(gi(e,"vjs-fill")&&(n.fill=!0),gi(e,"vjs-fluid")&&(n.fluid=!0),null!==i){const[e,t]=p()(i||"{}");e&&An.error(e),Object.assign(n,t)}if(Object.assign(t,n),e.hasChildNodes()){const n=e.childNodes;for(let e=0,i=n.length;e<i;e++){const i=n[e],r=i.nodeName.toLowerCase();"source"===r?t.sources.push(Ti(i)):"track"===r&&t.tracks.push(Ti(i))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((e=>"number"===typeof e))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Cs.names.forEach((function(e){const t=Cs[e];Ga.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Ga.prototype.crossorigin=Ga.prototype.crossOrigin,Ga.players={};const Qa=a().navigator;Ga.prototype.options_={techOrder:Os.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Qa&&(Qa.languages&&Qa.languages[0]||Qa.userLanguage||Qa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Ga.prototype[e]=function(){return this.techGet_(e)}})),$a.forEach((function(e){Ga.prototype[`handleTech${Ar(e)}_`]=function(){return this.trigger(e)}})),Rr.registerComponent("Player",Ga);const Ka="plugin",Xa="activePlugins_",Ya={},Ja=e=>Ya.hasOwnProperty(e),Za=e=>Ja(e)?Ya[e]:void 0,eu=(e,t)=>{e[Xa]=e[Xa]||{},e[Xa][t]=!0},tu=(e,t,n)=>{const i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},nu=function(e,t){const n=function(){tu(this,{name:e,plugin:t,instance:null},!0);const n=t.apply(this,arguments);return eu(this,e),tu(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n},iu=(e,t)=>(t.prototype.name=e,function(...n){tu(this,{name:e,plugin:t,instance:null},!0);const i=new t(...[this,...n]);return this[e]=()=>i,tu(this,i.getEventHash()),i});class ru{constructor(e){if(this.constructor===ru)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Cr(this),delete this.trigger,Or(this,this.constructor.defaultState),eu(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return sr(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Xa][e]=!1,this.player=this.state=null,t[e]=iu(e,Ya[e])}static isBasic(e){const t="string"===typeof e?Za(e):e;return"function"===typeof t&&!ru.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if("string"!==typeof e)throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Ja(e))An.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Ga.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if("function"!==typeof t)throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return Ya[e]=t,e!==Ka&&(ru.isBasic(t)?Ga.prototype[e]=nu(e,t):Ga.prototype[e]=iu(e,t)),t}static deregisterPlugin(e){if(e===Ka)throw new Error("Cannot de-register base plugin.");Ja(e)&&(delete Ya[e],delete Ga.prototype[e])}static getPlugins(e=Object.keys(Ya)){let t;return e.forEach((e=>{const n=Za(e);n&&(t=t||{},t[e]=n)})),t}static getPluginVersion(e){const t=Za(e);return t&&t.VERSION||""}}function su(e,t){let n=!1;return function(...i){return n||An.warn(e),n=!0,t.apply(this,i)}}function ou(e,t,n,i){return su(`${t} is deprecated and will be removed in ${e}.0; please use ${n} instead.`,i)}ru.getPlugin=Za,ru.BASE_PLUGIN_NAME=Ka,ru.registerPlugin(Ka,ru),Ga.prototype.usingPlugin=function(e){return!!this[Xa]&&!0===this[Xa][e]},Ga.prototype.hasPlugin=function(e){return!!Ja(e)};const au=e=>0===e.indexOf("#")?e.slice(1):e;function uu(e,t,n){let i=uu.getPlayer(e);if(i)return t&&An.warn(`Player "${e}" is already initialised. Options will not be applied.`),n&&i.ready(n),i;const r="string"===typeof e?Mi("#"+au(e)):e;if(!li(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||An.warn("The element supplied is not included in the DOM"),t=t||{},!0===t.restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),_n("beforesetup").forEach((e=>{const n=e(r,jn(t));Mn(n)&&!Array.isArray(n)?t=jn(t,n):An.error("please return an object in beforesetup hooks")}));const s=Rr.getComponent("Player");return i=new s(r,t,n),_n("setup").forEach((e=>e(i))),i}if(uu.hooks_=vn,uu.hooks=_n,uu.hook=bn,uu.hookOnce=wn,uu.removeHook=Tn,!0!==a().VIDEOJS_NO_DYNAMIC_STYLE&&ci()){let e=Mi(".vjs-styles-defaults");if(!e){e=Wi("vjs-styles-defaults");const t=Mi("head");t&&t.insertBefore(e,t.firstChild),zi(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}qi(1,uu),uu.VERSION=yn,uu.options=Ga.prototype.options_,uu.getPlayers=()=>Ga.players,uu.getPlayer=e=>{const t=Ga.players;let n;if("string"===typeof e){const i=au(e),r=t[i];if(r)return r;n=Mi("#"+i)}else n=e;if(li(n)){const{player:e,playerId:i}=n;if(e||t[i])return e||t[i]}},uu.getAllPlayers=()=>Object.keys(Ga.players).map((e=>Ga.players[e])).filter(Boolean),uu.players=Ga.players,uu.getComponent=Rr.getComponent,uu.registerComponent=(e,t)=>{Os.isTech(t)&&An.warn(`The ${e} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Rr.registerComponent.call(Rr,e,t)},uu.getTech=Os.getTech,uu.registerTech=Os.registerTech,uu.use=Ps,Object.defineProperty(uu,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(uu.middleware,"TERMINATOR",{value:Ds,writeable:!1,enumerable:!0}),uu.browser=oi,uu.obj=Bn,uu.mergeOptions=ou(9,"videojs.mergeOptions","videojs.obj.merge",jn),uu.defineLazyProperty=ou(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Fn),uu.bind=ou(9,"videojs.bind","native Function.prototype.bind",lr),uu.registerPlugin=ru.registerPlugin,uu.deregisterPlugin=ru.deregisterPlugin,uu.plugin=(e,t)=>(An.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ru.registerPlugin(e,t)),uu.getPlugins=ru.getPlugins,uu.getPlugin=ru.getPlugin,uu.getPluginVersion=ru.getPluginVersion,uu.addLanguage=function(e,t){return e=(""+e).toLowerCase(),uu.options.languages=jn(uu.options.languages,{[e]:t}),uu.options.languages[e]},uu.log=An,uu.createLogger=Dn,uu.time=qr,uu.createTimeRange=ou(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ur),uu.createTimeRanges=ou(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ur),uu.formatTime=ou(9,"videojs.formatTime","videojs.time.formatTime",$r),uu.setFormatTime=ou(9,"videojs.setFormatTime","videojs.time.setFormatTime",Br),uu.resetFormatTime=ou(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Vr),uu.parseUrl=ou(9,"videojs.parseUrl","videojs.url.parseUrl",ps),uu.isCrossOrigin=ou(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",gs),uu.EventTarget=mr,uu.any=ar,uu.on=ir,uu.one=or,uu.off=rr,uu.trigger=sr,uu.xhr=m(),uu.TextTrack=bs,uu.AudioTrack=Ts,uu.VideoTrack=ws,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((e=>{uu[e]=function(){return An.warn(`videojs.${e}() is deprecated; use videojs.dom.${e}() instead`),Fi[e].apply(null,arguments)}})),uu.computedStyle=ou(9,"videojs.computedStyle","videojs.dom.computedStyle",ji),uu.dom=Fi,uu.fn=pr,uu.num=bo,uu.str=Pr,uu.url=ys;/*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 */
class cu{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(e){t.enabled_(e)}}),t}}class lu extends uu.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const n=this.levels_.length;return t=new cu(e),""+n in this||Object.defineProperty(this,n,{get(){return this.levels_[n]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let n=0,i=this.length;n<i;n++)if(this[n]===e){t=this.levels_.splice(n,1)[0],this.selectedIndex_===n?this.selectedIndex_=-1:this.selectedIndex_>n&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,n=this.length;t<n;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}lu.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const gp in lu.prototype.allowedEvents_)lu.prototype["on"+gp]=null;var hu="3.0.0";const du=uu.registerPlugin||uu.plugin,pu=function(e,t){const n=e.qualityLevels,i=new lu,r=function(){i.dispose(),e.qualityLevels=n,e.off("dispose",r)};return e.on("dispose",r),e.qualityLevels=()=>i,e.qualityLevels.VERSION=hu,i},fu=function(e){return pu(this,uu.mergeOptions({},e))};du("qualityLevels",fu),fu.VERSION=hu;/*! @name @videojs/http-streaming @version 3.0.0 @license Apache-2.0 */
const mu=w,gu=(e,t)=>t&&t.responseURL&&e!==t.responseURL?t.responseURL:e,yu=e=>uu.log.debug?uu.log.debug.bind(uu,"VHS:",`${e} >`):function(){};function vu(...e){const t=uu.obj||uu,n=t.merge||t.mergeOptions;return n.apply(t,e)}function _u(...e){const t=uu.time||uu,n=t.createTimeRanges||t.createTimeRanges;return n.apply(t,e)}const bu=1/30,Tu=3*bu,wu=function(e,t){const n=[];let i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return _u(n)},Eu=function(e,t){return wu(e,(function(e,n){return e-Tu<=t&&n+Tu>=t}))},Su=function(e,t){return wu(e,(function(e){return e-bu>=t}))},ku=function(e){if(e.length<2)return _u();const t=[];for(let n=1;n<e.length;n++){const i=e.end(n-1),r=e.start(n);t.push([i,r])}return _u(t)},Cu=function(e,t){let n=null,i=null,r=0;const s=[],o=[];if(!e||!e.length||!t||!t.length)return _u();let a=e.length;while(a--)s.push({time:e.start(a),type:"start"}),s.push({time:e.end(a),type:"end"});a=t.length;while(a--)s.push({time:t.start(a),type:"start"}),s.push({time:t.end(a),type:"end"});for(s.sort((function(e,t){return e.time-t.time})),a=0;a<s.length;a++)"start"===s[a].type?(r++,2===r&&(n=s[a].time)):"end"===s[a].type&&(r--,1===r&&(i=s[a].time)),null!==n&&null!==i&&(o.push([n,i]),n=null,i=null);return _u(o)},Iu=e=>{const t=[];if(!e||!e.length)return"";for(let n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Ou=function(e,t,n=1){const i=e.length?e.end(e.length-1):0;return(i-t)/n},xu=e=>{const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Au=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1},Du=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},Pu=function(e,t){let n=0;if(!e||!e.length)return n;for(let i=0;i<e.length;i++){const r=e.start(i),s=e.end(i);t>s||(n+=t>r&&t<=s?s-t:s-r)}return n},Ru=(e,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},Nu=e=>(e.segments||[]).reduce(((e,t,n)=>(t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e)),[]),Lu=e=>{const t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Mu=({preloadSegment:e})=>{if(!e)return;const{parts:t,preloadHints:n}=e;let i=(n||[]).reduce(((e,t)=>e+("PART"===t.type?1:0)),0);return i+=t&&t.length?t.length:0,i},Uu=(e,t)=>{if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;const n=Lu(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},ju=function(e,t){let n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}while(i--){if(r=e.segments[i],"undefined"!==typeof r.end)return{result:n+r.end,precise:!0};if(n+=Ru(e,r),"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},Fu=function(e,t){let n,i=0,r=t-e.mediaSequence;for(;r<e.segments.length;r++){if(n=e.segments[r],"undefined"!==typeof n.start)return{result:n.start-i,precise:!0};if(i+=Ru(e,n),"undefined"!==typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}},Bu=function(e,t,n){if("undefined"===typeof t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;const i=ju(e,t);if(i.precise)return i.result;const r=Fu(e,t);return r.precise?r.result:i.result+n},Vu=function(e,t,n){if(!e)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return a()[1/0]}return Bu(e,t,n)},$u=function({defaultDuration:e,durationList:t,startIndex:n,endIndex:i}){let r=0;if(n>i&&([n,i]=[i,n]),n<0){for(let t=n;t<Math.min(0,i);t++)r+=e;n=0}for(let s=n;s<i;s++)r+=t[s].duration;return r},qu=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return Vu(e);if(null===t)return null;t=t||0;let r=Bu(e,e.mediaSequence+e.segments.length,t);return n&&(i="number"===typeof i?i:Uu(null,e),r-=i),Math.max(0,r)},Hu=function(e,t,n){const i=!0,r=t||0,s=qu(e,t,i,n);return null===s?_u():_u(r,s)},Wu=function({playlist:e,currentTime:t,startingSegmentIndex:n,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let o=t-r;const a=Nu(e);let u=0;for(let c=0;c<a.length;c++){const e=a[c];if(n===e.segmentIndex&&("number"!==typeof i||"number"!==typeof e.partIndex||i===e.partIndex)){u=c;break}}if(o<0){if(u>0)for(let t=u-1;t>=0;t--){const n=a[t];if(o+=n.duration,s){if(o<0)continue}else if(o+bu<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:r-$u({defaultDuration:e.targetDuration,durationList:a,startIndex:u,endIndex:t})}}return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t}}if(u<0){for(let n=u;n<0;n++)if(o-=e.targetDuration,o<0)return{partIndex:a[0]&&a[0].partIndex||null,segmentIndex:a[0]&&a[0].segmentIndex||0,startTime:t};u=0}for(let c=u;c<a.length;c++){const t=a[c];if(o-=t.duration,s){if(o>0)continue}else if(o-bu>=0)continue;return{partIndex:t.partIndex,segmentIndex:t.segmentIndex,startTime:r+$u({defaultDuration:e.targetDuration,durationList:a,startIndex:u,endIndex:c})}}return{segmentIndex:a[a.length-1].segmentIndex,partIndex:a[a.length-1].partIndex,startTime:t}},zu=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Gu=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Qu=function(e){const t=zu(e);return!e.disabled&&!t},Ku=function(e){return e.disabled},Xu=function(e){for(let t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},Yu=function(e,t){return t.attributes&&t.attributes[e]},Ju=function(e,t,n,i=0){if(!Yu("BANDWIDTH",n))return NaN;const r=e*n.attributes.BANDWIDTH;return(r-8*i)/t},Zu=(e,t)=>{if(1===e.playlists.length)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((e=>!!Qu(e)&&(e.attributes.BANDWIDTH||0)<n)).length},ec=(e,t)=>!(!e&&!t||!e&&t||e&&!t)&&(e===t||(!(!e.id||!t.id||e.id!==t.id)||(!(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)||!(!e.uri||!t.uri||e.uri!==t.uri)))),tc=function(e,t){const n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{};let i=!1;for(const r in n){for(const e in n[r])if(i=t(n[r][e]),i)break;if(i)break}return!!i},nc=e=>{if(!e||!e.playlists||!e.playlists.length){const t=tc(e,(e=>e.playlists&&e.playlists.length||e.uri));return t}for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;if(i&&i.split(",").every((e=>q(e))))continue;const r=tc(e,(e=>ec(n,e)));if(!r)return!1}return!0};var ic={liveEdgeDelay:Uu,duration:Vu,seekable:Hu,getMediaInfoForTime:Wu,isEnabled:Qu,isDisabled:Ku,isExcluded:zu,isIncompatible:Gu,playlistEnd:qu,isAes:Xu,hasAttribute:Yu,estimateSegmentRequestTime:Ju,isLowestEnabledRendition:Zu,isAudioOnly:nc,playlistMatch:ec,segmentDurationWithParts:Ru};const{log:rc}=uu,sc=(e,t)=>`${e}-${t}`,oc=({onwarn:e,oninfo:t,manifestString:n,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const o=new M;e&&o.on("warn",e),t&&o.on("info",t),i.forEach((e=>o.addParser(e))),r.forEach((e=>o.addTagMapper(e))),o.push(n),o.end();const a=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){a.hasOwnProperty(e)&&delete a[e]})),a.segments&&a.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!a.targetDuration){let t=10;a.segments&&a.segments.length&&(t=a.segments.reduce(((e,t)=>Math.max(e,t.duration)),0)),e&&e(`manifest has no targetDuration defaulting to ${t}`),a.targetDuration=t}const u=Lu(a);if(u.length&&!a.partTargetDuration){const t=u.reduce(((e,t)=>Math.max(e,t.duration)),0);e&&(e(`manifest has no partTargetDuration defaulting to ${t}`),rc.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),a.partTargetDuration=t}return a},ac=(e,t)=>{e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((n=>{if(e.mediaGroups[n])for(const i in e.mediaGroups[n])for(const r in e.mediaGroups[n][i]){const s=e.mediaGroups[n][i][r];t(s,n,i,r)}}))},uc=({playlist:e,uri:t,id:n})=>{e.id=n,e.playlistErrors_=0,t&&(e.uri=t),e.attributes=e.attributes||{}},cc=e=>{let t=e.playlists.length;while(t--){const n=e.playlists[t];uc({playlist:n,id:sc(t,n.uri)}),n.resolvedUri=mu(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||rc.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},lc=e=>{ac(e,(t=>{t.uri&&(t.resolvedUri=mu(e.uri,t.uri))}))},hc=(e,t)=>{const n=sc(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:a().location.href,resolvedUri:a().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i},dc=(e,t)=>{e.uri=t;for(let i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){const t=`placeholder-uri-${i}`;e.playlists[i].uri=t}const n=nc(e);ac(e,((t,i,r,s)=>{const o=`placeholder-uri-${i}-${r}-${s}`;if(!t.playlists||!t.playlists.length){if(n&&"AUDIO"===i&&!t.uri)for(let t=0;t<e.playlists.length;t++){const n=e.playlists[t];if(n.attributes&&n.attributes.AUDIO&&n.attributes.AUDIO===r)return}t.playlists=[E({},t)]}t.playlists.forEach((function(t,n){const i=sc(n,o);t.uri?t.resolvedUri=t.resolvedUri||mu(e.uri,t.uri):(t.uri=0===n?o:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),cc(e),lc(e)},{EventTarget:pc}=uu,fc=(e,t)=>{if(t.endList||!t.serverControl)return e;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:e}=t;let i=t.mediaSequence+t.segments.length;if(e){const r=e.parts||[],s=Mu(t)-1;s>-1&&s!==r.length-1&&(n._HLS_part=s),(s>-1||r.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const t=new(a().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&t.searchParams.set(e,n[e])})),e=t.toString()}return e},mc=(e,t)=>{if(!e)return t;const n=vu(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(let i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=vu(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},gc=(e,t,n)=>{const i=e.slice(),r=t.slice();n=n||0;const s=[];let o;for(let a=0;a<r.length;a++){const e=i[a+n],t=r[a];e?(o=e.map||o,s.push(mc(e,t))):(o&&!t.map&&(t.map=o),s.push(t))}return s},yc=(e,t)=>{!e.resolvedUri&&e.uri&&(e.resolvedUri=mu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=mu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=mu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=mu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((e=>{e.resolvedUri||(e.resolvedUri=mu(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((e=>{e.resolvedUri||(e.resolvedUri=mu(t,e.uri))}))},vc=function(e){const t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(let e=0;e<n.preloadHints.length;e++)if("MAP"===n.preloadHints[e].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},_c=(e,t)=>e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment,bc=(e,t,n=_c)=>{const i=vu(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=vc(t);const s=vu(r,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(let e=0;e<t.skip.skippedSegments;e++)t.segments.unshift({skipped:!0})}s.segments=gc(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}s.segments.forEach((e=>{yc(e,s.resolvedUri)}));for(let o=0;o<i.playlists.length;o++)i.playlists[o].id===t.id&&(i.playlists[o]=s);return i.playlists[t.id]=s,i.playlists[t.uri]=s,ac(e,((e,n,i,r)=>{if(e.playlists)for(let o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=s)})),i},Tc=(e,t)=>{const n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return t&&s?1e3*s:500*(e.partTargetDuration||e.targetDuration||10)};class wc extends pc{constructor(e,t,n={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=yu("PlaylistLoader");const{withCredentials:i=!1}=n;this.src=e,this.vhs_=t,this.withCredentials=i;const r=t.options_;this.customTagParsers=r&&r.customTagParsers||[],this.customTagMappers=r&&r.customTagMappers||[],this.llhls=r&&r.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=mu(this.main.uri,e.uri);this.llhls&&(t=fc(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},((e,t)=>{if(this.request)return e?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}))}playlistRequestError(e,t,n){const{uri:i,id:r}=t;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return oc({onwarn:({message:t})=>this.logger_(`m3u8-parser warn for ${e}: ${t}`),oninfo:({message:t})=>this.logger_(`m3u8-parser info for ${e}: ${t}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:n,id:i}){this.request=null,this.state="HAVE_METADATA";const r=t||this.parseManifest_({url:n,manifestString:e});r.lastRequest=Date.now(),uc({playlist:r,uri:n,id:i});const s=bc(this.main,r);this.targetDuration=r.partTargetDuration||r.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Tc(this.media(),!!s)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),a().clearTimeout(this.mediaUpdateTimeout),a().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(a().clearTimeout(this.finalRenditionTimeout),t){const t=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=a().setTimeout(this.media.bind(this,e,!1),t))}const n=this.state,i=!this.media_||e.id!==this.media_.id,r=this.main.playlists[e.id];if(r&&r.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Tc(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},((t,i)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=gu(e.resolvedUri,i),t)return this.playlistRequestError(this.request,e,n);this.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===n?this.trigger("loadedmetadata"):this.trigger("mediachange")}}))}}pause(){this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const e=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=a().setTimeout((()=>{this.mediaUpdateTimeout=null,this.load()}),e)}else this.started?t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=a().setTimeout((()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)}),e))}start(){if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=a().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((()=>{this.setupInitialPlaylist(this.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},((e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=gu(this.src,t);const n=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(n)}))}srcUri(){return"string"===typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,dc(this.main,this.srcUri()),e.playlists.forEach((e=>{e.segments=vc(e),e.segments.forEach((t=>{yc(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||a().location.href;this.main=hc(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:Ec}=uu,Sc=function(e,t,n,i){const r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},kc=function(){const e=function e(t,n){t=vu({timeout:45e3},t);const i=e.beforeRequest||uu.Vhs.xhr.beforeRequest;if(i&&"function"===typeof i){const e=i(t);e&&(t=e)}const r=!0===uu.Vhs.xhr.original?Ec:uu.Vhs.xhr,s=r(t,(function(e,t){return Sc(s,e,t,n)})),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s};return e.original=!0,e},Cc=function(e){let t;const n=e.offset;return t="bigint"===typeof e.offset||"bigint"===typeof e.length?a().BigInt(e.offset)+a().BigInt(e.length)-a().BigInt(1):e.offset+e.length-1,"bytes="+n+"-"+t},Ic=function(e){const t={};return e.byterange&&(t.Range=Cc(e.byterange)),t},Oc=function(e,t){return e.start(t)+"-"+e.end(t)},xc=function(e,t){const n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Ac=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Dc=function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];te(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},Pc=function(e){const t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Rc=function(e){return e.resolvedUri},Nc=e=>{const t=Array.prototype.slice.call(e),n=16;let i,r,s="";for(let o=0;o<t.length/n;o++)i=t.slice(o*n,o*n+n).map(xc).join(""),r=t.slice(o*n,o*n+n).map(Ac).join(""),s+=i+" "+r+"\n";return s},Lc=({bytes:e})=>Nc(e),Mc=e=>{let t,n="";for(t=0;t<e.length;t++)n+=Oc(e,t)+" ";return n};var Uc=Object.freeze({__proto__:null,createTransferableMessage:Dc,initSegmentId:Pc,segmentKeyId:Rc,hexDump:Nc,tagDump:Lc,textRanges:Mc});const jc=.25,Fc=(e,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,i=t.videoTimingInfo.transmuxedPresentationStart,r=i+n,s=e-r;return new Date(t.dateTimeObject.getTime()+1e3*s)},Bc=e=>e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds,Vc=(e,t)=>{let n;try{n=new Date(e)}catch(u){return null}if(!t||!t.segments||0===t.segments.length)return null;let i=t.segments[0];if(n<i.dateTimeObject)return null;for(let c=0;c<t.segments.length-1;c++){i=t.segments[c];const e=t.segments[c+1].dateTimeObject;if(n<e)break}const r=t.segments[t.segments.length-1],s=r.dateTimeObject,o=r.videoTimingInfo?Bc(r.videoTimingInfo):r.duration+r.duration*jc,a=new Date(s.getTime()+1e3*o);return n>a?null:(n>s&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:ic.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},$c=(e,t)=>{if(!t||!t.segments||0===t.segments.length)return null;let n,i=0;for(let s=0;s<t.segments.length;s++)if(n=t.segments[s],i=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration,e<=i)break;const r=t.segments[t.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+r.duration*jc)return null;n=r}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}},qc=(e,t)=>{let n,i;try{n=new Date(e),i=new Date(t)}catch(o){}const r=n.getTime(),s=i.getTime();return(s-r)/1e3},Hc=e=>{if(!e.segments||0===e.segments.length)return!1;for(let t=0;t<e.segments.length;t++){const n=e.segments[t];if(!n.dateTimeObject)return!1}return!0},Wc=({playlist:e,time:t,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===t)return n({message:"getProgramTime: playlist and time must be provided"});const i=$c(t,e);if(!i)return n({message:"valid programTime was not found"});if("estimate"===i.type)return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:t},s=Fc(t,i.segment);return s&&(r.programDateTime=s.toISOString()),n(null,r)},zc=({programTime:e,playlist:t,retryCount:n=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof e||!t||!i)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!Hc(t))return o({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const a=Vc(e,t);if(!a)return o({message:`${e} was not found in the stream`});const u=a.segment,c=qc(u.dateTimeObject,e);if("estimate"===a.type)return 0===n?o({message:`${e} is not buffered yet. Try again`}):(i(a.estimatedStart+c),void s.one("seeked",(()=>{zc({programTime:e,playlist:t,retryCount:n-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:o})})));const l=u.start+c,h=()=>o(null,s.currentTime());s.one("seeked",h),r&&s.pause(),i(l)},Gc=(e,t)=>{if(4===e.readyState)return t()},Qc=(e,t,n)=>{let i,r=[],s=!1;const o=function(e,t,i,r){return t.abort(),s=!0,n(e,t,i,r)},a=function(e,t){if(s)return;if(e)return o(e,t,"",r);const n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=le(r,ce(n,!0)),i=i||qt(r),r.length<10||i&&r.length<i+2)return Gc(t,(()=>o(e,t,"",r)));const a=fn(r);return"ts"===a&&r.length<188||!a&&r.length<376?Gc(t,(()=>o(e,t,"",r))):o(null,t,a,r)},u={uri:e,beforeSend(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function({total:t,loaded:n}){return Sc(e,null,{statusCode:e.status},a)}))}},c=t(u,(function(e,t){return Sc(c,e,t,a)}));return c},{EventTarget:Kc}=uu,Xc=function(e,t){if(!_c(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(let n=0;n<e.segments.length;n++){const i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,o=r.byterange;if(s&&!o||!s&&o)return!1;if(s.offset!==o.offset||s.length!==o.length)return!1}return!0},Yc=({mainXml:e,srcUrl:t,clientOffset:n,sidxMapping:i,previousManifest:r})=>{const s=Mt(e,{manifestUri:t,clientOffset:n,sidxMapping:i,previousManifest:r});return dc(s,t),s},Jc=(e,t,n)=>{let i=!0,r=vu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let s=0;s<t.playlists.length;s++){const e=t.playlists[s];if(e.sidx){const t=He(e.sidx);n&&n[t]&&n[t].sidx&&Le(e,n[t].sidx,e.sidx.resolvedUri)}const o=bc(r,e,Xc);o&&(r=o,i=!1)}return ac(t,((e,t,n,s)=>{if(e.playlists&&e.playlists.length){const o=e.playlists[0].id,a=bc(r,e.playlists[0],Xc);a&&(r=a,r.mediaGroups[t][n][s].playlists[0]=r.playlists[o],i=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r},Zc=(e,t)=>{const n=Boolean(!e.map&&!t.map),i=n||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return i&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},el=(e,t)=>{const n={};for(const i in e){const r=e[i],s=r.sidx;if(s){const e=He(s);if(!t[e])break;const i=t[e].sidxInfo;Zc(i,s)&&(n[e]=t[e])}}return n},tl=(e,t)=>{const n=el(e.playlists,t);let i=n;return ac(e,((e,n,r,s)=>{if(e.playlists&&e.playlists.length){const n=e.playlists;i=vu(i,el(n,t))}})),i};class nl extends Kc{constructor(e,t,n={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:r=!1}=n;if(this.vhs_=t,this.withCredentials=r,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",(()=>{this.refreshXml_()})),this.on("mediaupdatetimeout",(()=>{this.refreshMedia_(this.media().id)})),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=yu("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!==typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,n){const i=e.sidx&&He(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=a().setTimeout((()=>n(!1)),0));const r=gu(e.sidx.resolvedUri),s=(r,s)=>{if(this.requestErrored_(r,s,t))return;const o=this.mainPlaylistLoader_.sidxMapping_;let a;try{a=Bt()(ie(s.response).subarray(8))}catch(u){return void this.requestErrored_(u,s,t)}return o[i]={sidxInfo:e.sidx,sidx:a},Le(e,a,e.sidx.resolvedUri),n(!0)};this.request=Qc(r,this.vhs_.xhr,((t,n,i,o)=>{if(t)return s(t,n);if(!i||"mp4"!==i)return s({status:n.status,message:`Unsupported ${i||"unknown"} container type for sidx segment at URL: ${r}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},n);const{offset:a,length:u}=e.sidx.byterange;if(o.length>=u+a)return s(t,{response:o.subarray(a,a+u),status:n.status,uri:n.uri});this.request=this.vhs_.xhr({uri:r,responseType:"arraybuffer",headers:Ic({byterange:e.sidx.byterange})},s)}))}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},a().clearTimeout(this.minimumUpdatePeriodTimeout_),a().clearTimeout(this.mediaRequest_),a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"===typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const n=!this.media_||e.id!==this.media_.id;if(n&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(n&&(this.trigger("mediachanging"),this.trigger("mediachange")));n&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,(n=>{this.haveMetadata({startingState:t,playlist:e})})))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),"HAVE_MAIN_MANIFEST"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(a().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const e=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=a().setTimeout((()=>this.load()),e)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_(((e,t)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})):this.mediaRequest_=a().setTimeout((()=>this.haveMain_()),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},((t,n)=>{if(this.requestErrored_(t,n))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=n.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=gu(this.mainPlaylistLoader_.srcUrl,n),i?(this.handleMain_(),void this.syncClientServerClock_((()=>e(n,i)))):e(n,i)}))}syncClientServerClock_(e){const t=Ut(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:mu(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},((n,i)=>{if(!this.request)return;if(n)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let r;r="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=r-Date.now(),e()})))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=Yc({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=Jc(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(a().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!==typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=a().setTimeout((()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)}refreshXml_(){this.requestMain_(((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=tl(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,(e=>{this.refreshMedia_(this.media().id)})))}))}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,n=!this.media_||this.media_!==t[e];if(n?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const e=()=>{this.media().endList||(this.mediaUpdateTimeout=a().setTimeout((()=>{this.trigger("mediaupdatetimeout"),e()}),Tc(this.media(),Boolean(n))))};e()}this.trigger("loadedplaylist")}}var il={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const rl=e=>{const t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer},sl=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},ol=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(t){const n=new BlobBuilder;return n.append(e),URL.createObjectURL(n.getBlob())}},al=function(e){return function(){const t=ol(e),n=sl(new Worker(t));n.objURL=t;const i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},ul=function(e){return`var browserWorkerPolyFill = ${sl.toString()};\nbrowserWorkerPolyFill(self);\n`+e},cl=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},ll=ul(cl((function(){var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},t=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,s;if(n=e[t],n)if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(s=[],i=arguments.length,i=1;i<arguments.length;++i)s.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,s)}},this.dispose=function(){e={}}}};t.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},t.prototype.push=function(e){this.trigger("data",e)},t.prototype.flush=function(e){this.trigger("done",e)},t.prototype.partialFlush=function(e){this.trigger("partialdone",e)},t.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},t.prototype.reset=function(e){this.trigger("reset",e)};var i,r,s,o,a,u,c,l,h,d,p,f,m,g,y,v,_,b,T,w,E,S,k,C,I,O,x,A,D,P,R,N,L,M,U,j,F=t,B=Math.pow(2,32),V=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):n.getUint32(0)*B+n.getUint32(4)},$={getUint64:V,MAX_UINT32:B},q=$.MAX_UINT32;(function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),O=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:x,audio:A},N=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),R=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),M=L,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),i=function(e){var t,n,i,r=[],s=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);t=r.length;while(t--)s+=r[t].byteLength;for(n=new Uint8Array(s+8),i=new DataView(n.buffer,n.byteOffset,n.byteLength),i.setUint32(0,n.byteLength),n.set(e,4),t=0,s=8;t<r.length;t++)n.set(r[t],s),s+=r[t].byteLength;return n},r=function(){return i(k.dinf,i(k.dref,N))},s=function(e){return i(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},o=function(){return i(k.ftyp,C,I,C,O)},v=function(e){return i(k.hdlr,D[e])},a=function(e){return i(k.mdat,e)},y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),i(k.mdhd,t)},g=function(e){return i(k.mdia,y(e),v(e.type),c(e))},u=function(e){return i(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},c=function(e){return i(k.minf,"video"===e.type?i(k.vmhd,P):i(k.smhd,R),r(),b(e))},l=function(e,t){var n=[],r=t.length;while(r--)n[r]=w(t[r]);return i.apply(null,[k.moof,u(e)].concat(n))},h=function(e){var t=e.length,n=[];while(t--)n[t]=f(e[t]);return i.apply(null,[k.moov,p(4294967295)].concat(n).concat(d(e)))},d=function(e){var t=e.length,n=[];while(t--)n[t]=E(e[t]);return i.apply(null,[k.mvex].concat(n))},p=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return i(k.mvhd,t)},_=function(e){var t,n,r=e.samples||[],s=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,s[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return i(k.sdtp,s)},b=function(e){return i(k.stbl,T(e),i(k.stts,j),i(k.stsc,M),i(k.stsz,U),i(k.stco,L))},function(){var e,t;T=function(n){return i(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n,r=e.sps||[],s=e.pps||[],o=[],a=[];for(t=0;t<r.length;t++)o.push((65280&r[t].byteLength)>>>8),o.push(255&r[t].byteLength),o=o.concat(Array.prototype.slice.call(r[t]));for(t=0;t<s.length;t++)a.push((65280&s[t].byteLength)>>>8),a.push(255&s[t].byteLength),a=a.concat(Array.prototype.slice.call(s[t]));if(n=[k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[s.length],a))),i(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var u=e.sarRatio[0],c=e.sarRatio[1];n.push(i(k.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&c)>>24,(16711680&c)>>16,(65280&c)>>8,255&c])))}return i.apply(null,n)},t=function(e){return i(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),s(e))}}(),m=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return i(k.tkhd,t)},w=function(e){var t,n,r,s,o,a,u;return t=i(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/q),u=Math.floor(e.baseMediaDecodeTime%q),n=i(k.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,u>>>24&255,u>>>16&255,u>>>8&255,255&u])),o=92,"audio"===e.type?(r=S(e,o),i(k.traf,t,n,r)):(s=_(e),r=S(e,s.length+o),i(k.traf,t,n,r,s))},f=function(e){return e.duration=e.duration||4294967295,i(k.trak,m(e),g(e))},E=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),i(k.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,s=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(s=8)),[0,0,n|i|r|s,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var r,s,o,a,u,c;for(a=e.samples||[],t+=20+16*a.length,o=n(a,t),s=new Uint8Array(o.length+16*a.length),s.set(o),r=o.length,c=0;c<a.length;c++)u=a[c],s[r++]=(4278190080&u.duration)>>>24,s[r++]=(16711680&u.duration)>>>16,s[r++]=(65280&u.duration)>>>8,s[r++]=255&u.duration,s[r++]=(4278190080&u.size)>>>24,s[r++]=(16711680&u.size)>>>16,s[r++]=(65280&u.size)>>>8,s[r++]=255&u.size,s[r++]=u.flags.isLeading<<2|u.flags.dependsOn,s[r++]=u.flags.isDependedOn<<6|u.flags.hasRedundancy<<4|u.flags.paddingValue<<1|u.flags.isNonSyncSample,s[r++]=61440&u.flags.degradationPriority,s[r++]=15&u.flags.degradationPriority,s[r++]=(4278190080&u.compositionTimeOffset)>>>24,s[r++]=(16711680&u.compositionTimeOffset)>>>16,s[r++]=(65280&u.compositionTimeOffset)>>>8,s[r++]=255&u.compositionTimeOffset;return i(k.trun,s)},e=function(e,t){var r,s,o,a,u,c;for(a=e.samples||[],t+=20+8*a.length,o=n(a,t),r=new Uint8Array(o.length+8*a.length),r.set(o),s=o.length,c=0;c<a.length;c++)u=a[c],r[s++]=(4278190080&u.duration)>>>24,r[s++]=(16711680&u.duration)>>>16,r[s++]=(65280&u.duration)>>>8,r[s++]=255&u.duration,r[s++]=(4278190080&u.size)>>>24,r[s++]=(16711680&u.size)>>>16,r[s++]=(65280&u.size)>>>8,r[s++]=255&u.size;return i(k.trun,r)},S=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}();var H,W,z,G,Q,K,X,Y,J={ftyp:o,mdat:a,moof:l,moov:h,initSegment:function(e){var t,n=o(),i=h(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}},Z=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),i=[n],i.byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},ee=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),i=[n],i.nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},te=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ne=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ie=function(e,t){var n=ne();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re=function(e,t){var n,i,r,s,o,a=t||0,u=[];for(n=0;n<e.length;n++)for(s=e[n],i=0;i<s.length;i++)o=s[i],r=ie(o,a),a+=r.size,u.push(r);return u},se=function(e){var t,n,i,r,s,o,a=0,u=e.byteLength,c=e.nalCount,l=u+4*c,h=new Uint8Array(l),d=new DataView(h.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(s=r[n],i=0;i<s.length;i++)o=s[i],d.setUint32(a,o.data.byteLength),a+=4,h.set(o.data,a),a+=o.data.byteLength;return h},oe=function(e,t){var n,i=t||0,r=[];return n=ie(e,i),r.push(n),r},ae=function(e){var t,n,i=0,r=e.byteLength,s=e.length,o=r+4*s,a=new Uint8Array(o),u=new DataView(a.buffer);for(t=0;t<e.length;t++)n=e[t],u.setUint32(i,n.data.byteLength),i+=4,a.set(n.data,i),i+=n.data.byteLength;return a},ue={groupNalsIntoFrames:Z,groupFramesIntoGops:ee,extendFirstKeyFrame:te,generateSampleTable:re,concatenateNalData:se,generateSampleTableForFrame:oe,concatenateNalDataForFrame:ae},ce=[33,16,5,32,164,27],le=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],he=function(e){var t=[];while(e--)t.push(0);return t},de=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=new Uint8Array(e[n].reduce((function(e,t){return e.concat(t)}),[])),t}),{})},pe=function(){if(!H){var e={96e3:[ce,[227,64],he(154),[56]],88200:[ce,[231],he(170),[56]],64e3:[ce,[248,192],he(240),[56]],48e3:[ce,[255,192],he(268),[55,148,128],he(54),[112]],44100:[ce,[255,192],he(268),[55,163,128],he(84),[112]],32e3:[ce,[255,192],he(268),[55,234],he(226),[112]],24e3:[ce,[255,192],he(268),[55,255,128],he(268),[111,112],he(126),[224]],16e3:[ce,[255,192],he(268),[55,255,128],he(268),[111,255],he(269),[223,108],he(195),[1,192]],12e3:[le,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,253,128],he(259),[56]],11025:[le,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,255,192],he(268),[55,175,128],he(108),[112]],8e3:[le,he(268),[3,121,16],he(47),[7]]};H=de(e)}return H},fe=9e4;W=function(e){return e*fe},z=function(e,t){return e*t},G=function(e){return e/fe},Q=function(e,t){return e/t},K=function(e,t){return W(Q(e,t))},X=function(e,t){return z(G(e),t)},Y=function(e,t,n){return G(n?e:e-t)};var me={ONE_SECOND_IN_TS:fe,secondsToVideoTs:W,secondsToAudioTs:z,videoTsToSeconds:G,audioTsToSeconds:Q,audioTsToVideoTs:K,videoTsToAudioTs:X,metadataTsToSeconds:Y},ge=pe,ye=me,ve=function(e){var t,n,i=0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return i},_e=function(e,t,n,i){var r,s,o,a,u=0,c=0,l=0,h=0;if(t.length&&(r=ye.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),u=Math.ceil(ye.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(c=r-Math.max(n,i),l=Math.floor(c/u),h=l*u),!(l<1||h>ye.ONE_SECOND_IN_TS/2))){for(s=ge()[e.samplerate],s||(s=t[0].data),o=0;o<l;o++)a=t[0],t.splice(0,0,{data:s,dts:a.dts-u,pts:a.pts-u});return e.baseMediaDecodeTime-=Math.floor(ye.videoTsToAudioTs(h,e.samplerate)),h}},be=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},Te=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},we=function(e){var t,n,i=0,r=new Uint8Array(ve(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},Ee={prefixWithSilence:_e,trimAdtsFramesByEarliestDts:be,generateSampleTable:Te,concatenateFrameData:we},Se=me.ONE_SECOND_IN_TS,ke=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ce=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Ie=function(e,t){var n,i,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(i=e.samplerate/Se,n*=i,n=Math.floor(n)),n},Oe={clearDtsInfo:Ce,calculateTrackBaseMediaDecodeTime:Ie,collectDtsInfo:ke},xe=4,Ae=128,De=function(e){var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;while(t<e.byteLength){if(e[t]===Ae)break;while(255===e[t])i+=255,t++;i+=e[t++];while(255===e[t])r+=255,t++;if(r+=e[t++],!n.payload&&i===xe){var s=String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6]);if("GA94"===s){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},Pe=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Re=function(e,t){var n,i,r,s,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)r=3*n,s={type:3&t[r+2],pts:e},4&t[r+2]&&(s.ccData=t[r+3]<<8|t[r+4],o.push(s));return o},Ne=function(e){var t,n,i=e.byteLength,r=[],s=1;while(s<i-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=e[o];return n},Le={parseSei:De,parseUserData:Pe,parseCaptionPackets:Re,discardEmulationPreventionBytes:Ne,USER_DATA_REGISTERED_ITU_T_T35:xe},Me=F,Ue=Le,je=function(e){e=e||{},je.prototype.init.call(this),this.parse708captions_="boolean"!==typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Xe(0,0),new Xe(0,1),new Xe(1,0),new Xe(1,1)],this.parse708captions_&&(this.cc708Stream_=new He({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};je.prototype=new Me,je.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Ue.parseSei(e.escapedRBSP),t.payload&&t.payloadType===Ue.USER_DATA_REGISTERED_ITU_T_T35&&(n=Ue.parseUserData(t),n)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ue.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},je.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},je.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},je.prototype.flush=function(){return this.flushStream("flush")},je.prototype.partialFlush=function(){return this.flushStream("partialFlush")},je.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},je.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},je.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},je.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},je.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},je.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var Fe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Be=function(e){var t=Fe[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)},Ve=function(e){return 32<=e&&e<=127||160<=e&&e<=255},$e=function(e){this.windowNum=e,this.reset()};$e.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},$e.prototype.getText=function(){return this.rows.join("\n")},$e.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},$e.prototype.newLine=function(e){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);while(this.rows.length>this.virtualRowCount)this.rows.shift(),this.rowIdx--},$e.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},$e.prototype.addText=function(e){this.rows[this.rowIdx]+=e},$e.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var qe=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new $e(-1),this.windows=[],this.stream=n,"string"===typeof t&&this.createTextDecoder(t)};qe.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new $e(n),"function"===typeof t&&(this.windows[n].beforeRowOverflow=t)},qe.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},qe.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var He=function(e){e=e||{},He.prototype.init.call(this);var t,n=this,i=e.captionServices||{},r={};Object.keys(i).forEach((e=>{t=i[e],/^SERVICE/.test(e)&&(r[e]=t.encoding)})),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(n.new708Packet(),n.add708Bytes(e)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(e))}};He.prototype=new Me,He.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},He.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},He.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,s=t[r++];for(e.seq=s>>6,e.sizeCode=63&s;r<t.length;r++)s=t[r++],n=s>>5,i=31&s,7===n&&i>0&&(s=t[r++],n=s),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},He.prototype.pushServiceBlock=function(e,t,n){var i,r=t,s=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<s.length;r++)i=s[r],Ve(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},He.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data,i=n[++e];return Ve(i)&&(e=this.handleText(e,t,{isExtended:!0})),e},He.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},He.prototype.initService=function(e,t){var n,i="SERVICE"+e,r=this;return i in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[e]=new qe(e,n,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},He.prototype.handleText=function(e,t,n){var i,r,s=n&&n.isExtended,o=n&&n.isMultiByte,a=this.current708Packet.data,u=s?4096:0,c=a[e],l=a[e+1],h=t.currentWindow;return t.textDecoder_&&!s?(o?(r=[c,l],e++):r=[c],i=t.textDecoder_.decode(new Uint8Array(r))):i=Be(u|c),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(i),e},He.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return Ve(i)&&Ve(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},He.prototype.setCurrentWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;return t.setCurrentWindow(r),e},He.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var s=t.currentWindow;return i=n[++e],s.visible=(32&i)>>5,s.rowLock=(16&i)>>4,s.columnLock=(8&i)>>3,s.priority=7&i,i=n[++e],s.relativePositioning=(128&i)>>7,s.anchorVertical=127&i,i=n[++e],s.anchorHorizontal=i,i=n[++e],s.anchorPoint=(240&i)>>4,s.rowCount=15&i,i=n[++e],s.columnCount=63&i,i=n[++e],s.windowStyle=(56&i)>>3,s.penStyle=7&i,s.virtualRowCount=s.rowCount+1,e},He.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},He.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},He.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},He.prototype.displayWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible=1);return e},He.prototype.hideWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible=0);return e},He.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&(t.windows[s].visible^=1);return e},He.prototype.clearWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&t.windows[s].clearText();return e},He.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var s=0;s<8;s++)i&1<<s&&t.windows[s].reset();return e},He.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},He.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},He.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},He.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var We={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ze=function(e){return null===e?"":(e=We[e]||e,String.fromCharCode(e))},Ge=14,Qe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ke=function(){var e=[],t=Ge+1;while(t--)e.push("");return e},Xe=function(e,t){Xe.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,s;if(t=32639&e.ccData,t!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ke();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ke();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ke()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))i=(3&i)<<8,s=ze(i|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=(3&i)<<8,s=ze(i|r),this[this.mode_](e.pts,s),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=Qe.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),s=ze(i),s+=ze(r),this[this.mode_](e.pts,s),this.column_+=s.length)}else this.lastControlCode_=null}};Xe.prototype=new Me,Xe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(n){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Xe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ke(),this.nonDisplayed_=Ke(),this.lastControlCode_=null,this.column_=0,this.row_=Ge,this.rollUpRows_=2,this.formatting_=[]},Xe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Xe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Xe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Xe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Xe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Xe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Xe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Xe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Xe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Ge,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ke(),this.displayed_=Ke()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Xe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Xe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Xe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Xe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Xe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Ge+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Xe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ye={CaptionStream:je,Cea608Stream:Xe,Cea708Stream:He},Je={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ze=F,et=8589934592,tt=4294967296,nt="shared",it=function(e,t){var n=1;e>t&&(n=-1);while(Math.abs(t-e)>tt)e+=n*et;return e},rt=function(e){var t,n;rt.prototype.init.call(this),this.type_=e||nt,this.push=function(e){this.type_!==nt&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=it(e.dts,n),e.pts=it(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};rt.prototype=new Ze;var st,ot={TimestampRolloverStream:rt,handleRollover:it},at=(e,t,n)=>{if(!e)return-1;for(var i=n;i<e.length;i++)if(e[i]===t)return i;return-1},ut={typedArrayIndexOf:at},ct=F,lt=Je,ht=ut.typedArrayIndexOf,dt={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},pt=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},ft=function(e,t,n){return decodeURIComponent(pt(e,t,n))},mt=function(e,t,n){return unescape(pt(e,t,n))},gt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},yt={APIC:function(e){var t,n,i=1,r="--\x3e";e.data[0]===dt.Utf8&&(t=ht(e.data,0,i),t<0||(e.mimeType=mt(e.data,i,t),i=t+1,e.pictureType=e.data[i],i++,n=ht(e.data,0,i),n<0||(e.description=ft(e.data,i,n),i=n+1,e.mimeType===r?e.url=mt(e.data,i,e.data.length):e.pictureData=e.data.subarray(i,e.data.length))))},"T*":function(e){e.data[0]===dt.Utf8&&(e.value=ft(e.data,1,e.data.length).replace(/\0*$/,""),e.values=e.value.split("\0"))},TXXX:function(e){var t;e.data[0]===dt.Utf8&&(t=ht(e.data,0,1),-1!==t&&(e.description=ft(e.data,1,t),e.value=ft(e.data,t+1,e.data.length).replace(/\0*$/,""),e.data=e.value))},"W*":function(e){e.url=mt(e.data,0,e.data.length).replace(/\0.*$/,"")},WXXX:function(e){var t;e.data[0]===dt.Utf8&&(t=ht(e.data,0,1),-1!==t&&(e.description=ft(e.data,1,t),e.url=mt(e.data,t+1,e.data.length).replace(/\0.*$/,"")))},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=mt(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};st=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],s=0;if(st.prototype.init.call(this),this.dispatchType=lt.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,a,u,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(s=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),s+=e.data.byteLength,1===r.length&&(i=gt(e.data.subarray(6,10)),i+=10),!(s<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<i;)t.data.set(r[0].data.subarray(0,i-u),u),u+=r[0].data.byteLength,s-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=gt(t.data.subarray(10,14)),i-=gt(t.data.subarray(16,20)));do{if(o=gt(t.data.subarray(n+4,n+8)),o<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(c=String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),a={id:c,data:t.data.subarray(n+10,n+o+10)},a.key=a.id,yt[a.id]?yt[a.id](a):"T"===a.id[0]?yt["T*"](a):"W"===a.id[0]&&yt["W*"](a),"com.apple.streaming.transportStreamTimestamp"===a.owner){var l=a.data,h=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;h*=4,h+=3&l[7],a.timeStamp=h,void 0===t.pts&&void 0===t.dts&&(t.pts=a.timeStamp,t.dts=a.timeStamp),this.trigger("timestamp",a)}t.frames.push(a),n+=10,n+=o}while(n<i);this.trigger("data",t)}}},st.prototype=new ct;var vt,_t,bt,Tt=st,wt=F,Et=Ye,St=Je,kt=ot.TimestampRolloverStream,Ct=188,It=71;vt=function(){var e=new Uint8Array(Ct),t=0;vt.prototype.init.call(this),this.push=function(n){var i,r=0,s=Ct;t?(i=new Uint8Array(n.byteLength+t),i.set(e.subarray(0,t)),i.set(n,t),t=0):i=n;while(s<i.byteLength)i[r]!==It||i[s]!==It?(r++,s++):(this.trigger("data",i.subarray(r,s)),r+=Ct,s+=Ct);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===Ct&&e[0]===It&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},vt.prototype=new wt,_t=function(){var e,t,n,i;_t.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r,s,o;if(1&e[5]){i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],r=3+n-4,s=(15&e[10])<<8|e[11],o=12+s;while(o<r){var a=e[o],u=(31&e[o+1])<<8|e[o+2];a===St.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=u:a===St.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=u:a===St.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][u]=a),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid){n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);while(this.packetsWaitingForPmt.length)this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=St.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=St.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},_t.prototype=new wt,_t.STREAM_TYPES={h264:27,adts:15},bt=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},s={data:[],size:0},o=function(e,t){var n;const i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))},a=function(e,n,i){var r,s=new Uint8Array(e.size),a={type:n},u=0,c=0,l=!1;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,u=0;u<e.data.length;u++)r=e.data[u],s.set(r.data,c),c+=r.data.byteLength;o(s,a),l="video"===n||a.packetLength<=e.size,(i||l)&&(e.size=0,e.data.length=0),l&&t.trigger("data",a)}};bt.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case St.H264_STREAM_TYPE:e=i,t="video";break;case St.ADTS_STREAM_TYPE:e=r,t="audio";break;case St.METADATA_STREAM_TYPE:e=s,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};e=o.programMapTable,null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[o.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(r,"audio"),a(s,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},bt.prototype=new wt;var Ot={PAT_PID:0,MP2T_PACKET_LENGTH:Ct,TransportPacketStream:vt,TransportParseStream:_t,ElementaryStream:bt,TimestampRolloverStream:kt,CaptionStream:Et.CaptionStream,Cea608Stream:Et.Cea608Stream,Cea708Stream:Et.Cea708Stream,MetadataStream:Tt};for(var xt in St)St.hasOwnProperty(xt)&&(Ot[xt]=St[xt]);var At,Dt=Ot,Pt=F,Rt=me.ONE_SECOND_IN_TS,Nt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];At=function(e){var t,n=0;At.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:`adts skiping bytes ${e} to ${t} in frame ${n} outside syncword`})},this.push=function(i){var r,s,o,a,u,c=0;if(e||(n=0),"audio"===i.type){var l;t&&t.length?(o=t,t=new Uint8Array(o.byteLength+i.data.byteLength),t.set(o),t.set(i.data,o.byteLength)):t=i.data;while(c+7<t.length)if(255===t[c]&&240===(246&t[c+1])){if("number"===typeof l&&(this.skipWarn_(l,c),l=null),s=2*(1&~t[c+1]),r=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,a=1024*(1+(3&t[c+6])),u=a*Rt/Nt[(60&t[c+2])>>>2],t.byteLength-c<r)break;this.trigger("data",{pts:i.pts+n*u,dts:i.dts+n*u,sampleCount:a,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:Nt[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+s,c+r)}),n++,c+=r}else"number"!==typeof l&&(l=c),c++;"number"===typeof l&&(this.skipWarn_(l,c),l=null),t=t.subarray(c)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},At.prototype=new Pt;var Lt,Mt=At;Lt=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,s=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");s.set(e.subarray(r,r+o)),n=new DataView(s.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),s=n>>>32-r;return i-=r,i>0?n<<=r:t>0&&this.loadWord(),r=e-r,r>0?s<<r|this.readBits(r):s},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Ut,jt,Ft,Bt=Lt,Vt=F,$t=Bt;jt=function(){var e,t,n=0;jt.prototype.init.call(this),this.push=function(i){var r;t?(r=new Uint8Array(t.byteLength+i.data.byteLength),r.set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var s=t.byteLength;n<s-3;n++)if(1===t[n+2]){e=n+5;break}while(e<s)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<s);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3;break}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},jt.prototype=new Vt,Ft={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ut=function(){var e,t,n,i,r,s,o,a=new jt;Ut.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,a.push(e))},a.on("data",(function(o){var a={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(a.nalUnitTypeCode){case 5:a.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:a.nalUnitType="sei_rbsp",a.escapedRBSP=r(o.subarray(1));break;case 7:a.nalUnitType="seq_parameter_set_rbsp",a.escapedRBSP=r(o.subarray(1)),a.config=s(a.escapedRBSP);break;case 8:a.nalUnitType="pic_parameter_set_rbsp";break;case 9:a.nalUnitType="access_unit_delimiter_rbsp";break}e.trigger("data",a)})),a.on("done",(function(){e.trigger("done")})),a.on("partialdone",(function(){e.trigger("partialdone")})),a.on("reset",(function(){e.trigger("reset")})),a.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},o=function(e,t){var n,i,r=8,s=8;for(n=0;n<e;n++)0!==s&&(i=t.readExpGolomb(),s=(r+i+256)%256),r=0===s?r:s},r=function(e){var t,n,i=e.byteLength,r=[],s=1;while(s<i-2)0===e[s]&&0===e[s+1]&&3===e[s+2]?(r.push(s+2),s+=2):s++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(s=0;s<t;o++,s++)o===r[0]&&(o++,r.shift()),n[s]=e[o];return n},s=function(e){var t,n,i,r,s,a,u,c,l,h,d,p,f,m=0,g=0,y=0,v=0,_=[1,1];if(t=new $t(e),n=t.readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),Ft[n]&&(s=t.readUnsignedExpGolomb(),3===s&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==s?8:12,f=0;f<d;f++)t.readBoolean()&&o(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),a=t.readUnsignedExpGolomb(),0===a)t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),f=0;f<u;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),c=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),h=t.readBits(1),0===h&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(p=t.readUnsignedByte(),p){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()];break}_&&(_[0],_[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(c+1)-2*m-2*g,height:(2-h)*(l+1)*16-2*y-2*v,sarRatio:_}}},Ut.prototype=new Vt;var qt,Ht={H264Stream:Ut,NalByteStream:jt},Wt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],zt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)>>4;return n=n>=0?n:0,r?n+20:n+10},Gt=function(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:(t+=zt(e,t),Gt(e,t))},Qt=function(e){var t=Gt(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},Kt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Xt=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Yt=function(e,t,n){return unescape(Xt(e,t,n))},Jt=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},Zt=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},en=function(e){var t=0;while(t+5<e.length){if(255===e[t]&&240===(246&e[t+1]))return Wt[(60&e[t+2])>>>2];t++}return null},tn=function(e){var t,n,i,r;t=10,64&e[5]&&(t+=4,t+=Kt(e.subarray(10,14)));do{if(n=Kt(e.subarray(t+4,t+8)),n<1)return null;if(r=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===r){i=e.subarray(t+10,t+n+10);for(var s=0;s<i.byteLength;s++)if(0===i[s]){var o=Yt(i,0,s);if("com.apple.streaming.transportStreamTimestamp"===o){var a=i.subarray(s+1),u=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return u*=4,u+=3&a[7],u}break}}t+=10,t+=n}while(t<e.byteLength);return null},nn={isLikelyAacData:Qt,parseId3TagSize:zt,parseAdtsSize:Jt,parseType:Zt,parseSampleRate:en,parseAacTimestamp:tn},rn=F,sn=nn;qt=function(){var e=new Uint8Array,t=0;qt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,s,o,a=0,u=0;e.length?(o=e.length,e=new Uint8Array(n.byteLength+o),e.set(e.subarray(0,o)),e.set(n,o)):e=n;while(e.length-u>=3)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!==(255&e[u])||240!==(240&e[u+1]))u++;else{if(e.length-u<7)break;if(a=sn.parseAdtsSize(e,u),u+a>e.length)break;s={type:"audio",data:e.subarray(u,u+a),pts:t,dts:t},this.trigger("data",s),u+=a}else{if(e.length-u<10)break;if(a=sn.parseId3TagSize(e,u),u+a>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+a)},this.trigger("data",r),u+=a}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}},qt.prototype=new rn;var on,an,un,cn,ln=qt,hn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],dn=hn,pn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],fn=pn,mn=F,gn=J,yn=ue,vn=Ee,_n=Oe,bn=Dt,Tn=me,wn=Mt,En=Ht.H264Stream,Sn=ln,kn=nn.isLikelyAacData,Cn=me.ONE_SECOND_IN_TS,In=dn,On=fn,xn=function(e,t){t.stream=e,this.trigger("log",t)},An=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",xn.bind(e,r))}},Dn=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Pn=function(e,t,n,i,r,s){var o=n-t,a=i-t,u=r-n;return{start:{dts:e,pts:e+o},end:{dts:e+a,pts:e+u},prependedContentDuration:s,baseMediaDecodeTime:e}};an=function(e,t){var n,i=[],r=0,s=0,o=1/0;t=t||{},n=t.firstSequenceNumber||0,an.prototype.init.call(this),this.push=function(t){_n.collectDtsInfo(e,t),e&&In.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){s=e},this.flush=function(){var a,u,c,l,h,d,p;0!==i.length?(a=vn.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=_n.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=vn.prefixWithSilence(e,a,s,o),e.samples=vn.generateSampleTable(a),c=gn.mdat(vn.concatenateFrameData(a)),i=[],u=gn.moof(n,[e]),l=new Uint8Array(u.byteLength+c.byteLength),n++,l.set(u),l.set(c,u.byteLength),_n.clearDtsInfo(e),h=Math.ceil(1024*Cn/e.samplerate),a.length&&(d=a.length*h,this.trigger("segmentTimingInfo",Pn(Tn.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+d,a[0].pts+d,p||0)),this.trigger("timingInfo",{start:a[0].pts,end:a[0].pts+d})),this.trigger("data",{track:e,boxes:l}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){_n.clearDtsInfo(e),i=[],this.trigger("reset")}},an.prototype=new mn,on=function(e,t){var n,i,r,s=[],o=[];t=t||{},n=t.firstSequenceNumber||0,on.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){_n.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],On.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),s.push(t)},this.flush=function(){var i,r,a,u,c,l,h,d,p=0;while(s.length){if("access_unit_delimiter_rbsp"===s[0].nalUnitType)break;s.shift()}if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=yn.groupNalsIntoFrames(s),a=yn.groupFramesIntoGops(i),a[0][0].keyFrame||(r=this.getGopForFusion_(s[0],e),r?(p=r.duration,a.unshift(r),a.byteLength+=r.byteLength,a.nalCount+=r.nalCount,a.pts=r.pts,a.dts=r.dts,a.duration+=r.duration):a=yn.extendFirstKeyFrame(a)),o.length){var f;if(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(a):this.alignGopsAtStart_(a),!f)return this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");_n.clearDtsInfo(e),a=f}_n.collectDtsInfo(e,a),e.samples=yn.generateSampleTable(a),c=gn.mdat(yn.concatenateNalData(a)),e.baseMediaDecodeTime=_n.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",a.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),h=a[0],d=a[a.length-1],this.trigger("segmentTimingInfo",Pn(e.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:a[0].pts,end:a[a.length-1].pts+a[a.length-1].duration}),this.gopCache_.unshift({gop:a.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=gn.moof(n,[e]),l=new Uint8Array(u.byteLength+c.byteLength),n++,l.set(u),l.set(c,u.byteLength),this.trigger("data",{track:e,boxes:l}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){_n.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,s,o,a=45e3,u=1e4,c=1/0;for(o=0;o<this.gopCache_.length;o++)s=this.gopCache_[o],r=s.gop,e.pps&&Dn(e.pps[0],s.pps[0])&&e.sps&&Dn(e.sps[0],s.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration,n>=-u&&n<=a&&(!i||c>n)&&(i=s,c=n)));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,s,a,u,c;s=e.byteLength,a=e.nalCount,u=e.duration,t=n=0;while(t<o.length&&n<e.length){if(i=o[t],r=e[n],i.pts===r.pts)break;r.pts>i.pts?t++:(n++,s-=r.byteLength,a-=r.nalCount,u-=r.duration)}return 0===n?e:n===e.length?null:(c=e.slice(n),c.byteLength=s,c.duration=u,c.nalCount=a,c.pts=c[0].pts,c.dts=c[0].dts,c)},this.alignGopsAtEnd_=function(e){var t,n,i,r,s,a,u;t=o.length-1,n=e.length-1,s=null,a=!1;while(t>=0&&n>=0){if(i=o[t],r=e[n],i.pts===r.pts){a=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(s=n),n--)}if(!a&&null===s)return null;if(u=a?n:s,0===u)return e;var c=e.slice(u),l=c.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return c.byteLength=l.byteLength,c.duration=l.duration,c.nalCount=l.nalCount,c.pts=c[0].pts,c.dts=c[0].dts,c},this.alignGopsWith=function(e){o=e}},on.prototype=new mn,cn=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},"undefined"!==typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,cn.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},cn.prototype=new mn,cn.prototype.flush=function(e){var t,n,i,r,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,On.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,In.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=gn.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],s),s+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)t=this.pendingCaptions[r],t.startTime=Tn.metadataTsToSeconds(t.startPts,a,this.keepOriginalTimestamps),t.endTime=Tn.metadataTsToSeconds(t.endPts,a,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)n=this.pendingMetadata[r],n.cueTime=Tn.metadataTsToSeconds(n.pts,a,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)t=o.captions[r],this.trigger("caption",t);for(r=0;r<o.metadata.length;r++)n=o.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},cn.prototype.setRemux=function(e){this.remuxTracks=e},un=function(e){var t,n,i=this,r=!0;un.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new bn.MetadataStream,r.aacStream=new Sn,r.audioTimestampRolloverStream=new bn.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new bn.TimestampRolloverStream("timed-metadata"),r.adtsStream=new wn,r.coalesceStream=new cn(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(s){"timed-metadata"!==s.type&&"audio"!==s.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new an(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),An(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new bn.MetadataStream,r.packetStream=new bn.TransportPacketStream,r.parseStream=new bn.TransportParseStream,r.elementaryStream=new bn.ElementaryStream,r.timestampRolloverStream=new bn.TimestampRolloverStream,r.adtsStream=new wn,r.h264Stream=new En,r.captionStream=new bn.CaptionStream(e),r.coalesceStream=new cn(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(s){var o;if("metadata"===s.type){o=s.tracks.length;while(o--)t||"video"!==s.tracks[o].type?n||"audio"!==s.tracks[o].type||(n=s.tracks[o],n.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=s.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new on(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new an(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),An(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,_n.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,_n.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=kn(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},un.prototype=new mn;var Rn,Nn={Transmuxer:un,VideoSegmentStream:on,AudioSegmentStream:an,AUDIO_PROPERTIES:In,VIDEO_PROPERTIES:On,generateSegmentTimingInfo:Pn},Ln=function(e){return e>>>0},Mn=function(e){return("00"+e.toString(16)).slice(-2)},Un={toUnsigned:Ln,toHexString:Mn},jn=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},Fn=jn,Bn=Un.toUnsigned,Vn=Fn,$n=function(e,t){var n,i,r,s,o,a=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=Bn(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=Vn(e.subarray(n+4,n+8)),s=i>1?n+i:e.byteLength,r===t[0]&&(1===t.length?a.push(e.subarray(n+8,s)):(o=$n(e.subarray(n+8,s),t.slice(1)),o.length&&(a=a.concat(o)))),n=s;return a},qn=$n,Hn=Un.toUnsigned,Wn=$.getUint64,zn=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Wn(e.subarray(4)):t.baseMediaDecodeTime=Hn(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t},Gn=zn,Qn=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Kn=Qn,Xn=Kn,Yn=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],s=4&n.flags[2],o=1&n.flags[1],a=2&n.flags[1],u=4&n.flags[1],c=8&n.flags[1],l=i.getUint32(4),h=8;r&&(n.dataOffset=i.getInt32(h),h+=4),s&&l&&(t={flags:Xn(e.subarray(h,h+4))},h+=4,o&&(t.duration=i.getUint32(h),h+=4),a&&(t.size=i.getUint32(h),h+=4),c&&(1===n.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t),l--);while(l--)t={},o&&(t.duration=i.getUint32(h),h+=4),a&&(t.size=i.getUint32(h),h+=4),u&&(t.flags=Xn(e.subarray(h,h+4)),h+=4),c&&(1===n.version?t.compositionTimeOffset=i.getInt32(h):t.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(t);return n},Jn=Yn,Zn=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],s=2&i.flags[2],o=8&i.flags[2],a=16&i.flags[2],u=32&i.flags[2],c=65536&i.flags[0],l=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),s&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),a&&(i.defaultSampleSize=n.getUint32(t),t+=4),u&&(i.defaultSampleFlags=n.getUint32(t)),c&&(i.durationIsEmpty=!0),!r&&l&&(i.baseDataOffsetIsMoof=!0),i},ei=Zn;Rn="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var ti,ni,ii,ri,si,oi,ai=Rn,ui=Le.discardEmulationPreventionBytes,ci=Ye.CaptionStream,li=qn,hi=Gn,di=Jn,pi=ei,fi=ai,mi=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},gi=function(e,t,n){var i,r,s,o,a=new DataView(e.buffer,e.byteOffset,e.byteLength),u={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=s)if(s=a.getUint32(r),r+=4,!(s<=0))switch(31&e[r]){case 6:var c=e.subarray(r+1,r+1+s),l=mi(r,t);if(i={nalUnitType:"sei_rbsp",size:s,data:c,escapedRBSP:ui(c),trackId:n},l)i.pts=l.pts,i.dts=l.dts,o=l;else{if(!o){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}u.seiNals.push(i);break}return u},yi=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,s=n.defaultSampleSize||0,o=n.trackId,a=[];return e.forEach((function(e){var t=di(e),n=t.samples;n.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=s),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"===typeof i?(e.pts=i+fi.BigInt(e.compositionTimeOffset),i+=fi.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),a=a.concat(n)})),a},vi=function(e,t){var n=li(e,["moof","traf"]),i=li(e,["mdat"]),r={},s=[];return i.forEach((function(e,t){var i=n[t];s.push({mdat:e,traf:i})})),s.forEach((function(e){var n,i,s=e.mdat,o=e.traf,a=li(o,["tfhd"]),u=pi(a[0]),c=u.trackId,l=li(o,["tfdt"]),h=l.length>0?hi(l[0]).baseMediaDecodeTime:0,d=li(o,["trun"]);t===c&&d.length>0&&(n=yi(d,h,u),i=gi(s,n,c),r[c]||(r[c]={seiNals:[],logs:[]}),r[c].seiNals=r[c].seiNals.concat(i.seiNals),r[c].logs=r[c].logs.concat(i.logs))})),r},_i=function(e,t,n){var i;if(null===t)return null;i=vi(e,t);var r=i[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}},bi=function(){var e,t,n,i,r,s,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new ci,o=!0,s=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,s,o){var a;if(!this.isInitialized())return null;if(!s||!o)return null;if(this.isNewInit(s,o))n=s[0],i=o[n];else if(null===n||!i)return t.push(e),null;while(t.length>0){var u=t.shift();this.parse(u,s,o)}return a=_i(e,n,i),a&&a.logs&&(r.logs=r.logs.concat(a.logs)),null!==a&&a.seiNals?(this.pushNals(a.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;s?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ti=bi,wi=Un.toUnsigned,Ei=Un.toHexString,Si=qn,ki=Fn,Ci=ei,Ii=Jn,Oi=Gn,xi=$.getUint64,Ai=ai;ti=function(e){var t={},n=Si(e,["moov","trak"]);return n.reduce((function(e,t){var n,i,r,s,o;return n=Si(t,["tkhd"])[0],n?(i=n[0],r=0===i?12:20,s=wi(n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),o=Si(t,["mdia","mdhd"])[0],o?(i=o[0],r=0===i?12:20,e[s]=wi(o[r]<<24|o[r+1]<<16|o[r+2]<<8|o[r+3]),e):null):null}),t)},ni=function(e,t){var n;n=Si(t,["moof","traf"]);var i=n.reduce((function(t,n){var i,r=Si(n,["tfhd"])[0],s=wi(r[4]<<24|r[5]<<16|r[6]<<8|r[7]),o=e[s]||9e4,a=Si(n,["tfdt"])[0],u=new DataView(a.buffer,a.byteOffset,a.byteLength);let c;return i=1===a[0]?xi(a.subarray(4,12)):u.getUint32(4),"bigint"===typeof i?c=i/Ai.BigInt(o):"number"!==typeof i||isNaN(i)||(c=i/o),c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),c<t&&(t=c),t}),1/0);return"bigint"===typeof i||isFinite(i)?i:0},ii=function(e,t){var n,i=Si(t,["moof","traf"]),r=0,s=0;if(i&&i.length){var o=Si(i[0],["tfhd"])[0],a=Si(i[0],["trun"])[0],u=Si(i[0],["tfdt"])[0];if(o){var c=Ci(o);n=c.trackId}if(u){var l=Oi(u);r=l.baseMediaDecodeTime}if(a){var h=Ii(a);h.samples&&h.samples.length&&(s=h.samples[0].compositionTimeOffset||0)}}var d=e[n]||9e4;"bigint"===typeof r&&(s=Ai.BigInt(s),d=Ai.BigInt(d));var p=(r+s)/d;return"bigint"===typeof p&&p<Number.MAX_SAFE_INTEGER&&(p=Number(p)),p},ri=function(e){var t=Si(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=Si(e,["mdia","hdlr"]),i=Si(e,["tkhd"]);t.forEach((function(e,t){var r,s,o,a=ki(e.subarray(8,12)),u=i[t];"vide"===a&&(r=new DataView(u.buffer,u.byteOffset,u.byteLength),s=r.getUint8(0),o=0===s?r.getUint32(12):r.getUint32(20),n.push(o))}))})),n},oi=function(e){var t=e[0],n=0===t?12:20;return wi(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])},si=function(e){var t=Si(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},s=Si(e,["tkhd"])[0];s&&(t=new DataView(s.buffer,s.byteOffset,s.byteLength),i=t.getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=Si(e,["mdia","hdlr"])[0];if(o){var a=ki(o.subarray(8,12));r.type="vide"===a?"video":"soun"===a?"audio":a}var u=Si(e,["mdia","minf","stbl","stsd"])[0];if(u){var c=u.subarray(8);r.codec=ki(c.subarray(4,8));var l,h,d=Si(c,[r.codec])[0];d&&(/^[asm]vc[1-9]$/i.test(r.codec)?(l=d.subarray(78),h=ki(l.subarray(4,8)),"avcC"===h&&l.length>11?(r.codec+=".",r.codec+=Ei(l[9]),r.codec+=Ei(l[10]),r.codec+=Ei(l[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(l=d.subarray(28),h=ki(l.subarray(4,8)),"esds"===h&&l.length>20&&0!==l[19]?(r.codec+="."+Ei(l[19]),r.codec+="."+Ei(l[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=Si(e,["mdia","mdhd"])[0];p&&(r.timescale=oi(p)),n.push(r)})),n};var Di={findBox:Si,parseType:ki,timescale:ti,startTime:ni,compositionStartTime:ii,videoTrackIds:ri,tracks:si,getTimescaleFromMediaHeader:oi},Pi=Je,Ri=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},Ni=function(e){return!!(64&e[1])},Li=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Mi=function(e,t){var n=Ri(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},Ui=function(e){var t=Ni(e),n=4+Li(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},ji=function(e){var t={},n=Ni(e),i=4+Li(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r,s,o;r=(15&e[i+1])<<8|e[i+2],s=3+r-4,o=(15&e[i+10])<<8|e[i+11];var a=12+o;while(a<s){var u=i+a;t[(31&e[u+1])<<8|e[u+2]]=e[u],a+=5+((15&e[u+3])<<8|e[u+4])}return t}},Fi=function(e,t){var n=Ri(e),i=t[n];switch(i){case Pi.H264_STREAM_TYPE:return"video";case Pi.ADTS_STREAM_TYPE:return"audio";case Pi.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Bi=function(e){var t=Ni(e);if(!t)return null;var n=4+Li(e);if(n>=e.byteLength)return null;var i,r=null;return i=e[n+7],192&i&&(r={},r.pts=(14&e[n+9])<<27|(255&e[n+10])<<20|(254&e[n+11])<<12|(255&e[n+12])<<5|(254&e[n+13])>>>3,r.pts*=4,r.pts+=(6&e[n+13])>>>1,r.dts=r.pts,64&i&&(r.dts=(14&e[n+14])<<27|(255&e[n+15])<<20|(254&e[n+16])<<12|(255&e[n+17])<<5|(254&e[n+18])>>>3,r.dts*=4,r.dts+=(6&e[n+18])>>>1)),r},Vi=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},$i=function(e){for(var t,n=4+Li(e),i=e.subarray(n),r=0,s=0,o=!1;s<i.byteLength-3;s++)if(1===i[s+2]){r=s+5;break}while(r<i.byteLength)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}s+3!==r-2&&(t=Vi(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0));do{r++}while(1!==i[r]&&r<i.length);s=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}t=Vi(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0),s=r-2,r+=3;break;default:r+=3;break}return i=i.subarray(s),r-=s,s=0,i&&i.byteLength>3&&(t=Vi(31&i[s+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0)),o},qi={parseType:Mi,parsePat:Ui,parsePmt:ji,parsePayloadUnitStartIndicator:Ni,parsePesType:Fi,parsePesTime:Bi,videoPacketContainsKeyFrame:$i},Hi=Je,Wi=ot.handleRollover,zi={};zi.ts=qi,zi.aac=nn;var Gi=me.ONE_SECOND_IN_TS,Qi=188,Ki=71,Xi=function(e,t){var n,i,r=0,s=Qi;while(s<e.byteLength)if(e[r]!==Ki||e[s]!==Ki)r++,s++;else{switch(n=e.subarray(r,s),i=zi.ts.parseType(n,t.pid),i){case"pat":t.pid=zi.ts.parsePat(n);break;case"pmt":var o=zi.ts.parsePmt(n);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}));break}r+=Qi,s+=Qi}},Yi=function(e,t,n){var i,r,s,o,a,u=0,c=Qi,l=!1;while(c<=e.byteLength)if(e[u]!==Ki||e[c]!==Ki&&c!==e.byteLength)u++,c++;else{switch(i=e.subarray(u,c),r=zi.ts.parseType(i,t.pid),r){case"pes":s=zi.ts.parsePesType(i,t.table),o=zi.ts.parsePayloadUnitStartIndicator(i),"audio"===s&&o&&(a=zi.ts.parsePesTime(i),a&&(a.type="audio",n.audio.push(a),l=!0));break}if(l)break;u+=Qi,c+=Qi}c=e.byteLength,u=c-Qi,l=!1;while(u>=0)if(e[u]!==Ki||e[c]!==Ki&&c!==e.byteLength)u--,c--;else{switch(i=e.subarray(u,c),r=zi.ts.parseType(i,t.pid),r){case"pes":s=zi.ts.parsePesType(i,t.table),o=zi.ts.parsePayloadUnitStartIndicator(i),"audio"===s&&o&&(a=zi.ts.parsePesTime(i),a&&(a.type="audio",n.audio.push(a),l=!0));break}if(l)break;u-=Qi,c-=Qi}},Ji=function(e,t,n){var i,r,s,o,a,u,c,l,h=0,d=Qi,p=!1,f={data:[],size:0};while(d<e.byteLength)if(e[h]!==Ki||e[d]!==Ki)h++,d++;else{switch(i=e.subarray(h,d),r=zi.ts.parseType(i,t.pid),r){case"pes":if(s=zi.ts.parsePesType(i,t.table),o=zi.ts.parsePayloadUnitStartIndicator(i),"video"===s&&(o&&!p&&(a=zi.ts.parsePesTime(i),a&&(a.type="video",n.video.push(a),p=!0)),!n.firstKeyFrame)){if(o&&0!==f.size){u=new Uint8Array(f.size),c=0;while(f.data.length)l=f.data.shift(),u.set(l,c),c+=l.byteLength;if(zi.ts.videoPacketContainsKeyFrame(u)){var m=zi.ts.parsePesTime(u);m?(n.firstKeyFrame=m,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(i),f.size+=i.byteLength}break}if(p&&n.firstKeyFrame)break;h+=Qi,d+=Qi}d=e.byteLength,h=d-Qi,p=!1;while(h>=0)if(e[h]!==Ki||e[d]!==Ki)h--,d--;else{switch(i=e.subarray(h,d),r=zi.ts.parseType(i,t.pid),r){case"pes":s=zi.ts.parsePesType(i,t.table),o=zi.ts.parsePayloadUnitStartIndicator(i),"video"===s&&o&&(a=zi.ts.parsePesTime(i),a&&(a.type="video",n.video.push(a),p=!0));break}if(p)break;h-=Qi,d-=Qi}},Zi=function(e,t){if(e.audio&&e.audio.length){var n=t;("undefined"===typeof n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Wi(e.dts,n),e.pts=Wi(e.pts,n),e.dtsTime=e.dts/Gi,e.ptsTime=e.pts/Gi}))}if(e.video&&e.video.length){var i=t;if(("undefined"===typeof i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Wi(e.dts,i),e.pts=Wi(e.pts,i),e.dtsTime=e.dts/Gi,e.ptsTime=e.pts/Gi})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Wi(r.dts,i),r.pts=Wi(r.pts,i),r.dtsTime=r.dts/Gi,r.ptsTime=r.pts/Gi}}},er=function(e){var t,n=!1,i=0,r=null,s=null,o=0,a=0;while(e.length-a>=3){var u=zi.aac.parseType(e,a);switch(u){case"timed-metadata":if(e.length-a<10){n=!0;break}if(o=zi.aac.parseId3TagSize(e,a),o>e.length){n=!0;break}null===s&&(t=e.subarray(a,a+o),s=zi.aac.parseAacTimestamp(t)),a+=o;break;case"audio":if(e.length-a<7){n=!0;break}if(o=zi.aac.parseAdtsSize(e,a),o>e.length){n=!0;break}null===r&&(t=e.subarray(a,a+o),r=zi.aac.parseSampleRate(t)),i++,a+=o;break;default:a++;break}if(n)return null}if(null===r||null===s)return null;var c=Gi/r,l={audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*i*c,pts:s+1024*i*c}]};return l},tr=function(e){var t={pid:null,table:null},n={};for(var i in Xi(e,t),t.table)if(t.table.hasOwnProperty(i)){var r=t.table[i];switch(r){case Hi.H264_STREAM_TYPE:n.video=[],Ji(e,t,n),0===n.video.length&&delete n.video;break;case Hi.ADTS_STREAM_TYPE:n.audio=[],Yi(e,t,n),0===n.audio.length&&delete n.audio;break}}return n},nr=function(e,t){var n,i=zi.aac.isLikelyAacData(e);return n=i?er(e):tr(e),n&&(n.audio||n.video)?(Zi(n,t),n):null},ir={inspect:nr,parseAudioPes_:Yi};const rr=function(e,t){t.on("data",(function(t){const n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};const i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){const n={start:{decode:me.videoTsToSeconds(t.start.dts),presentation:me.videoTsToSeconds(t.start.pts)},end:{decode:me.videoTsToSeconds(t.end.dts),presentation:me.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:me.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=me.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){const n={start:{decode:me.videoTsToSeconds(t.start.dts),presentation:me.videoTsToSeconds(t.start.pts)},end:{decode:me.videoTsToSeconds(t.end.dts),presentation:me.videoTsToSeconds(t.end.pts)},baseMediaDecodeTime:me.videoTsToSeconds(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=me.videoTsToSeconds(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:me.videoTsToSeconds(t.start),end:me.videoTsToSeconds(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:me.videoTsToSeconds(t.start),end:me.videoTsToSeconds(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))};class sr{constructor(e,t){this.options=t||{},this.self=e,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Nn.Transmuxer(this.options),rr(this.self,this.transmuxer)}pushMp4Captions(e){this.captionParser||(this.captionParser=new Ti,this.captionParser.init());const t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])}probeMp4StartTime({timescales:e,data:t}){const n=Di.startTime(e,t);this.self.postMessage({action:"probeMp4StartTime",startTime:n,data:t},[t.buffer])}probeMp4Tracks({data:e}){const t=Di.tracks(e);this.self.postMessage({action:"probeMp4Tracks",tracks:t,data:e},[e.buffer])}probeTs({data:e,baseStartTime:t}){const n="number"!==typeof t||isNaN(t)?void 0:t*me.ONE_SECOND_IN_TS,i=ir.inspect(e,n);let r=null;i&&(r={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1},r.hasVideo&&(r.videoStart=i.video[0].ptsTime),r.hasAudio&&(r.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:r,data:e},[e.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(e){const t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}reset(){this.transmuxer.reset()}setTimestampOffset(e){const t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(me.secondsToVideoTs(t)))}setAudioAppendStart(e){this.transmuxer.setAudioAppendStart(Math.ceil(me.secondsToVideoTs(e.appendStart)))}setRemux(e){this.transmuxer.setRemux(e.remux)}flush(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new sr(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new sr(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}})));var hl=al(ll);const dl=(e,t,n)=>{const{type:i,initSegment:r,captions:s,captionStreams:o,metadata:a,videoFrameDtsTime:u,videoFramePtsTime:c}=e.data.segment;t.buffer.push({captions:s,captionStreams:o,metadata:a});const l=e.data.segment.boxes||{data:e.data.segment.data},h={type:i,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};"undefined"!==typeof u&&(h.videoFrameDtsTime=u),"undefined"!==typeof c&&(h.videoFramePtsTime=c),n(h)},pl=({transmuxedData:e,callback:t})=>{e.buffer=[],t(e)},fl=(e,t)=>{t.gopInfo=e.data.gopInfo},ml=e=>{const{transmuxer:t,bytes:n,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:o,onTrackInfo:a,onAudioTimingInfo:u,onVideoTimingInfo:c,onVideoSegmentTimingInfo:l,onAudioSegmentTimingInfo:h,onId3:d,onCaptions:p,onDone:f,onEndedTimeline:m,onTransmuxerLog:g,isEndOfTimeline:y}=e,v={buffer:[]};let _=y;const b=n=>{t.currentTransmux===e&&("data"===n.data.action&&dl(n,v,o),"trackinfo"===n.data.action&&a(n.data.trackInfo),"gopInfo"===n.data.action&&fl(n,v),"audioTimingInfo"===n.data.action&&u(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&c(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&l(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&h(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&d([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,pl({transmuxedData:v,callback:f}),gl(t))))};if(t.onmessage=b,i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof s&&t.postMessage({action:"setRemux",remux:s}),n.byteLength){const e=n instanceof ArrayBuffer?n:n.buffer,i=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:e,byteOffset:i,byteLength:n.byteLength},[e])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},gl=e=>{e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"===typeof e.currentTransmux?e.currentTransmux():ml(e.currentTransmux))},yl=(e,t)=>{e.postMessage({action:t}),gl(e)},vl=(e,t)=>{if(!t.currentTransmux)return t.currentTransmux=e,void yl(t,e);t.transmuxQueue.push(yl.bind(null,t,e))},_l=e=>{vl("reset",e)},bl=e=>{vl("endTimeline",e)},Tl=e=>{if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void ml(e);e.transmuxer.transmuxQueue.push(e)},wl=e=>{const t=new hl;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:e}),t};var El={reset:_l,endTimeline:bl,transmux:Tl,createTransmuxer:wl};const Sl=function(e){const t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=E({},e,{endAction:null,transmuxer:null,callback:null}),s=r=>{r.data.action===n&&(t.removeEventListener("message",s),r.data.data&&(r.data.data=new Uint8Array(r.data.data,e.byteOffset||0,e.byteLength||r.data.data.byteLength),e.data&&(e.data=r.data.data)),i(r.data))};if(t.addEventListener("message",s),e.data){const n=e.data instanceof ArrayBuffer;r.byteOffset=n?0:e.data.byteOffset,r.byteLength=e.data.byteLength;const i=[n?e.data:e.data.buffer];t.postMessage(r,i)}else t.postMessage(r)},kl={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Cl=e=>{e.forEach((e=>{e.abort()}))},Il=e=>({bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}),Ol=e=>{const t=e.target,n=Date.now()-t.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},xl=(e,t)=>t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:kl.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:kl.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:kl.FAILURE,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:kl.FAILURE,xhr:t}:null,Al=(e,t,n)=>(i,r)=>{const s=r.response,o=xl(i,r);if(o)return n(o,e);if(16!==s.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:kl.FAILURE,xhr:r},e);const a=new DataView(s),u=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]);for(let e=0;e<t.length;e++)t[e].bytes=u;return n(null,e)},Dl=(e,t)=>{const n=fn(e.map.bytes);if("mp4"!==n){const i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:`Found unsupported ${n||"unknown"} container for initialization segment at URL: ${i}`,code:kl.FAILURE})}Sl({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:({tracks:n,data:i})=>(e.map.bytes=i,n.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"===typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null))})},Pl=({segment:e,finishProcessingFn:t})=>(n,i)=>{const r=xl(n,i);if(r)return t(r,e);const s=new Uint8Array(i.response);if(e.map.key)return e.map.encryptedBytes=s,t(null,e);e.map.bytes=s,Dl(e,(function(n){if(n)return n.xhr=i,n.status=i.status,t(n,e);t(null,e)}))},Rl=({segment:e,finishProcessingFn:t,responseType:n})=>(i,r)=>{const s=xl(i,r);if(s)return t(s,e);const o="arraybuffer"!==n&&r.responseText?rl(r.responseText.substring(e.lastReachedChar||0)):r.response;return e.stats=Il(r),e.key?e.encryptedBytes=new Uint8Array(o):e.bytes=new Uint8Array(o),t(null,e)},Nl=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})=>{const p=e.map&&e.map.tracks||{},f=Boolean(p.audio&&p.video);let m=i.bind(null,e,"audio","start");const g=i.bind(null,e,"audio","end");let y=i.bind(null,e,"video","start");const v=i.bind(null,e,"video","end"),_=()=>Tl({bytes:t,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:f,onData:t=>{t.type="combined"===t.type?"video":t.type,l(e,t)},onTrackInfo:t=>{n&&(f&&(t.isMuxed=!0),n(e,t))},onAudioTimingInfo:e=>{m&&"undefined"!==typeof e.start&&(m(e.start),m=null),g&&"undefined"!==typeof e.end&&g(e.end)},onVideoTimingInfo:e=>{y&&"undefined"!==typeof e.start&&(y(e.start),y=null),v&&"undefined"!==typeof e.end&&v(e.end)},onVideoSegmentTimingInfo:e=>{r(e)},onAudioSegmentTimingInfo:e=>{s(e)},onId3:(t,n)=>{o(e,t,n)},onCaptions:t=>{a(e,[t])},isEndOfTimeline:u,onEndedTimeline:()=>{c()},onTransmuxerLog:d,onDone:t=>{h&&(t.type="combined"===t.type?"video":t.type,h(null,e,t))}});Sl({action:"probeTs",transmuxer:e.transmuxer,data:t,baseStartTime:e.baseStartTime,callback:i=>{e.bytes=t=i.data;const r=i.result;r&&(n(e,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:f}),n=null,r.hasAudio&&!f&&m(r.audioStart),r.hasVideo&&y(r.videoStart),m=null,y=null),_()}})},Ll=({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})=>{let p=new Uint8Array(t);if(mn(p)){e.isFmp4=!0;const{tracks:r}=e.map,s={isFmp4:!0,hasVideo:!!r.video,hasAudio:!!r.audio};r.audio&&r.audio.codec&&"enca"!==r.audio.codec&&(s.audioCodec=r.audio.codec),r.video&&r.video.codec&&"encv"!==r.video.codec&&(s.videoCodec=r.video.codec),r.video&&r.audio&&(s.isMuxed=!0),n(e,s);const o=t=>{l(e,{data:p,type:s.hasAudio&&!s.isMuxed?"audio":"video"}),t&&t.length&&a(e,t),h(null,e,{})};Sl({action:"probeMp4StartTime",timescales:e.map.timescales,data:p,transmuxer:e.transmuxer,callback:({data:n,startTime:a})=>{t=n.buffer,e.bytes=p=n,s.hasAudio&&!s.isMuxed&&i(e,"audio","start",a),s.hasVideo&&i(e,"video","start",a),r.video&&n.byteLength&&e.transmuxer?Sl({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:p,timescales:e.map.timescales,trackIds:[r.video.id],callback:n=>{t=n.data.buffer,e.bytes=p=n.data,n.logs.forEach((function(e){d(vu(e,{stream:"mp4CaptionParser"}))})),o(n.captions)}}):o()}})}else if(e.transmuxer){if("undefined"===typeof e.container&&(e.container=fn(p)),"ts"!==e.container&&"aac"!==e.container)return n(e,{hasAudio:!1,hasVideo:!1}),void h(null,e,{});Nl({segment:e,bytes:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})}else h(null,e,{})},Ml=function({id:e,key:t,encryptedBytes:n,decryptionWorker:i},r){const s=t=>{if(t.data.source===e){i.removeEventListener("message",s);const e=t.data.decrypted;r(new Uint8Array(e.bytes,e.byteOffset,e.byteLength))}};let o;i.addEventListener("message",s),o=t.bytes.slice?t.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.bytes)),i.postMessage(Dc({source:e,encrypted:n,key:o,iv:t.iv}),[n.buffer,o.buffer])},Ul=({decryptionWorker:e,segment:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})=>{Ml({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:e},(e=>{t.bytes=e,Ll({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})}))},jl=({activeXhrs:e,decryptionWorker:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})=>{let p=0,f=!1;return(m,g)=>{if(!f){if(m)return f=!0,Cl(e),h(m,g);if(p+=1,p===e.length){const p=function(){if(g.encryptedBytes)return Ul({decryptionWorker:t,segment:g,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d});Ll({segment:g,bytes:g.bytes,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l,doneFn:h,onTransmuxerLog:d})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Ml({decryptionWorker:t,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(t=>{g.map.bytes=t,Dl(g,(t=>{if(t)return Cl(e),h(t,g);p()}))}));p()}}}},Fl=({loadendState:e,abortFn:t})=>n=>{const i=n.target;i.aborted&&t&&!e.calledAbortFn&&(t(),e.calledAbortFn=!0)},Bl=({segment:e,progressFn:t,trackInfoFn:n,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:a,isEndOfTimeline:u,endedTimelineFn:c,dataFn:l})=>n=>{const i=n.target;if(!i.aborted)return e.stats=vu(e.stats,Ol(n)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)},Vl=({xhr:e,xhrOptions:t,decryptionWorker:n,segment:i,abortFn:r,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:l,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g})=>{const y=[],v=jl({activeXhrs:y,decryptionWorker:n,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:l,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f,doneFn:m,onTransmuxerLog:g});if(i.key&&!i.key.bytes){const n=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&n.push(i.map.key);const r=vu(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),s=Al(i,n,v),o=e(r,s);y.push(o)}if(i.map&&!i.map.bytes){const n=i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri);if(n){const n=vu(t,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),r=Al(i,[i.map.key],v),s=e(n,r);y.push(s)}const r=vu(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Ic(i.map)}),s=Pl({segment:i,finishProcessingFn:v}),o=e(r,s);y.push(o)}const _=vu(t,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Ic(i)}),b=Rl({segment:i,finishProcessingFn:v,responseType:_.responseType}),T=e(_,b);T.addEventListener("progress",Bl({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:a,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:l,captionsFn:h,isEndOfTimeline:d,endedTimelineFn:p,dataFn:f})),y.push(T);const w={};return y.forEach((e=>{e.addEventListener("loadend",Fl({loadendState:w,abortFn:r}))})),()=>Cl(y)},$l=yu("CodecUtils"),ql=function(e){const t=e.attributes||{};if(t.CODECS)return V(t.CODECS)},Hl=(e,t)=>{const n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Wl=(e,t)=>{if(!Hl(e,t))return!0;const n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},zl=function(e){const t={};return e.forEach((({mediaType:e,type:n,details:i})=>{t[e]=t[e]||[],t[e].push(B(`${n}${i}`))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return $l(`multiple ${e} codecs found as attributes: ${t[e].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(t[e]=null);t[e]=t[e][0]})),t},Gl=function(e){let t=0;return e.audio&&t++,e.video&&t++,t},Ql=function(e,t){const n=t.attributes||{},i=zl(ql(t)||[]);if(Hl(e,t)&&!i.audio&&!Wl(e,t)){const t=zl($(e,n.AUDIO)||[]);t.audio&&(i.audio=t.audio)}return i},Kl=yu("PlaylistSelector"),Xl=function(e){if(!e||!e.playlist)return;const t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})},Yl=function(e,t){if(!e)return"";const n=a().getComputedStyle(e);return n?n[t]:""},Jl=function(e,t){const n=e.slice();e.sort((function(e,i){const r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},Zl=function(e,t){let n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||a().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||a().Number.MAX_VALUE,n-i},eh=function(e,t){let n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||a().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||a().Number.MAX_VALUE,n===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i};let th=function(e,t,n,i,r,s){if(!e)return;const o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r};let u=e.playlists;ic.isAudioOnly(e)&&(u=s.getAudioTrackPlaylists_(),o.audioOnly=!0);let c=u.map((e=>{let t;const n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return t=e.attributes&&e.attributes.BANDWIDTH,t=t||a().Number.MAX_VALUE,{bandwidth:t,width:n,height:i,playlist:e}}));Jl(c,((e,t)=>e.bandwidth-t.bandwidth)),c=c.filter((e=>!ic.isIncompatible(e.playlist)));let l=c.filter((e=>ic.isEnabled(e.playlist)));l.length||(l=c.filter((e=>!ic.isDisabled(e.playlist))));const h=l.filter((e=>e.bandwidth*il.BANDWIDTH_VARIANCE<t));let d=h[h.length-1];const p=h.filter((e=>e.bandwidth===d.bandwidth))[0];if(!1===r){const e=p||l[0]||c[0];if(e&&e.playlist){let t="sortedPlaylistReps";return p&&(t="bandwidthBestRep"),l[0]&&(t="enabledPlaylistReps"),Kl(`choosing ${Xl(e)} using ${t} with options`,o),e.playlist}return Kl("could not choose a playlist with options",o),null}const f=h.filter((e=>e.width&&e.height));Jl(f,((e,t)=>e.width-t.width));const m=f.filter((e=>e.width===n&&e.height===i));d=m[m.length-1];const g=m.filter((e=>e.bandwidth===d.bandwidth))[0];let y,v,_,b;if(g||(y=f.filter((e=>e.width>n||e.height>i)),v=y.filter((e=>e.width===y[0].width&&e.height===y[0].height)),d=v[v.length-1],_=v.filter((e=>e.bandwidth===d.bandwidth))[0]),s.leastPixelDiffSelector){const e=f.map((e=>(e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e)));Jl(e,((e,t)=>e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff)),b=e[0]}const T=b||_||g||p||l[0]||c[0];if(T&&T.playlist){let e="sortedPlaylistReps";return b?e="leastPixelDiffRep":_?e="resolutionPlusOneRep":g?e="resolutionBestRep":p?e="bandwidthBestRep":l[0]&&(e="enabledPlaylistReps"),Kl(`choosing ${Xl(T)} using ${e} with options`,o),T.playlist}return Kl("could not choose a playlist with options",o),null};const nh=function(){const e=this.useDevicePixelRatio&&a().devicePixelRatio||1;return th(this.playlists.main,this.systemBandwidth,parseInt(Yl(this.tech_.el(),"width"),10)*e,parseInt(Yl(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},ih=function(e){let t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const i=this.useDevicePixelRatio&&a().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),th(this.playlists.main,t,parseInt(Yl(this.tech_.el(),"width"),10)*i,parseInt(Yl(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},rh=function(e){const{main:t,currentTime:n,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:a,syncController:u}=e,c=t.playlists.filter((e=>!ic.isIncompatible(e)));let l=c.filter(ic.isEnabled);l.length||(l=c.filter((e=>!ic.isDisabled(e))));const h=l.filter(ic.hasAttribute.bind(null,"BANDWIDTH")),d=h.map((e=>{const t=u.getSyncPoint(e,r,a,n),c=t?1:2,l=ic.estimateSegmentRequestTime(s,i,e),h=l*c-o;return{playlist:e,rebufferingImpact:h}})),p=d.filter((e=>e.rebufferingImpact<=0));return Jl(p,((e,t)=>Zl(t.playlist,e.playlist))),p.length?p[0]:(Jl(d,((e,t)=>e.rebufferingImpact-t.rebufferingImpact)),d[0]||null)},sh=function(){const e=this.playlists.main.playlists.filter(ic.isEnabled);Jl(e,((e,t)=>Zl(e,t)));const t=e.filter((e=>!!Ql(this.playlists.main,e).video));return t[0]||null},oh=e=>{let t,n=0;return e.bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach((e=>{t.set(e,n),n+=e.byteLength}))),t},ah=function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"});let i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);const r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{const r=t.options_.vhs&&t.options_.vhs.captionServices||{};let s=n,o=n,a=!1;const u=r[i];u&&(s=u.label,o=u.language,a=u.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:a,label:s,language:o},!1).track}}},uh=function({inbandTextTracks:e,captionArray:t,timestampOffset:n}){if(!t)return;const i=a().WebKitDataCue||a().VTTCue;t.forEach((t=>{const r=t.stream;e[r].addCue(new i(t.startTime+n,t.endTime+n,t.text))}))},ch=function(e){Object.defineProperties(e.frame,{id:{get(){return uu.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get(){return uu.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get(){return uu.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},lh=({inbandTextTracks:e,metadataArray:t,timestampOffset:n,videoDuration:i})=>{if(!t)return;const r=a().WebKitDataCue||a().VTTCue,s=e.metadataTrack_;if(!s)return;if(t.forEach((e=>{const t=e.cueTime+n;!("number"!==typeof t||a().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((e=>{const n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,ch(n),s.addCue(n)}))})),!s.cues||!s.cues.length)return;const o=s.cues,u=[];for(let a=0;a<o.length;a++)o[a]&&u.push(o[a]);const c=u.reduce(((e,t)=>{const n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),l=Object.keys(c).sort(((e,t)=>Number(e)-Number(t)));l.forEach(((e,t)=>{const n=c[e],r=Number(l[t+1])||i;n.forEach((e=>{e.endTime=r}))}))},hh=(e,t,n)=>{e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},dh=function(e,t,n){let i,r;if(n&&n.cues){i=n.cues.length;while(i--)r=n.cues[i],r.startTime>=e&&r.endTime<=t&&n.removeCue(r)}},ph=function(e){const t=e.cues;if(t)for(let n=0;n<t.length;n++){const i=[];let r=0;for(let e=0;e<t.length;e++)t[n].startTime===t[e].startTime&&t[n].endTime===t[e].endTime&&t[n].text===t[e].text&&(r++,r>1&&i.push(t[e]));i.length&&i.forEach((t=>e.removeCue(t)))}},fh=(e,t,n)=>{if("undefined"===typeof t||null===t||!e.length)return[];const i=Math.ceil((t-n+3)*gn.ONE_SECOND_IN_TS);let r;for(r=0;r<e.length;r++)if(e[r].pts>i)break;return e.slice(r)},mh=(e,t,n)=>{if(!t.length)return e;if(n)return t.slice();const i=t[0].pts;let r=0;for(r;r<e.length;r++)if(e[r].pts>=i)break;return e.slice(0,r).concat(t)},gh=(e,t,n,i)=>{const r=Math.ceil((t-i)*gn.ONE_SECOND_IN_TS),s=Math.ceil((n-i)*gn.ONE_SECOND_IN_TS),o=e.slice();let a=e.length;while(a--)if(e[a].pts<=s)break;if(-1===a)return o;let u=a+1;while(u--)if(e[u].pts<=r)break;return u=Math.max(u,0),o.splice(u,a-u+1),o},yh=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;const n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(s!==i[r])return!1;if(e[s]!==t[s])return!1}return!0},vh=22,_h=function(e,t,n){t=t||[];const i=[];let r=0;for(let s=0;s<t.length;s++){const o=t[s];if(e===o.timeline&&(i.push(s),r+=o.duration,r>n))return s}return 0===i.length?0:i[i.length-1]},bh=1,Th=500,wh=e=>"number"===typeof e&&isFinite(e),Eh=1/60,Sh=(e,t,n)=>"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null,kh=(e,t,n)=>{let i=t-il.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));const r=t-n;return Math.min(r,i)},Ch=e=>{const{startOfSegment:t,duration:n,segment:i,part:r,playlist:{mediaSequence:s,id:o,segments:a=[]},mediaIndex:u,partIndex:c,timeline:l}=e,h=a.length-1;let d="mediaIndex/partIndex increment";e.getMediaInfoForTime?d=`getMediaInfoForTime (${e.getMediaInfoForTime})`:e.isSyncRequest&&(d="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(d+=` with independent ${e.independent}`);const p="number"===typeof c,f=e.segment.uri?"segment":"pre-segment",m=p?Mu({preloadSegment:i})-1:0;return`${f} [${s+u}/${s+h}]`+(p?` part [${c}/${m}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(p?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${t}]`+` duration [${n}]`+` timeline [${l}]`+` selected by [${d}]`+` playlist [${o}]`},Ih=e=>`${e}TimingInfo`,Oh=({segmentTimeline:e,currentTimeline:t,startOfSegment:n,buffered:i,overrideCheck:r})=>r||e!==t?e<t?n:i.length?i.end(i.length-1):n:null,xh=({timelineChangeController:e,currentTimeline:t,segmentTimeline:n,loaderType:i,audioDisabled:r})=>{if(t===n)return!1;if("audio"===i){const t=e.lastTimelineChange({type:"main"});return!t||t.to!==n}if("main"===i&&r){const t=e.pendingTimelineChange({type:"audio"});return!t||t.to!==n}return!1},Ah=e=>{let t=0;return["video","audio"].forEach((function(n){const i=e[`${n}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let o;"bigint"===typeof r||"bigint"===typeof s?o=a().BigInt(s)-a().BigInt(r):"number"===typeof r&&"number"===typeof s&&(o=s-r),"undefined"!==typeof o&&o>t&&(t=o)})),"bigint"===typeof t&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},Dh=({segmentDuration:e,maxDuration:t})=>!!e&&Math.round(e)>t+bu,Ph=(e,t)=>{if("hls"!==t)return null;const n=Ah({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!n)return null;const i=e.playlist.targetDuration,r=Dh({segmentDuration:n,maxDuration:2*i}),s=Dh({segmentDuration:n,maxDuration:i}),o=`Segment with index ${e.mediaIndex} from playlist ${e.playlist.id} has a duration of ${n} when the reported duration is ${e.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:o}:null};class Rh extends uu.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!==typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=uu.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",(()=>{this.isEndOfStream_()||(this.ended_=!1)})),this.fetchAtBuffer_=!1,this.logger_=yu(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(e){e!==this.state_&&(this.logger_(`${this.state_} -> ${e}`),this.state_=e,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",(()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",(()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}))}createTransmuxer_(){return El.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,a().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return"undefined"!==typeof e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&El.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return _u();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:n,isMuxed:i}=e;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const n=Pc(e);let i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const n=Rc(e);let i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_(`playlist update [${r} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const s=e.mediaSequence-n.mediaSequence;if(this.logger_(`live window shift [${s}]`),null!==this.mediaIndex)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const e=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!e.parts||!e.parts.length||!e.parts[this.partIndex])){const e=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e}}i&&(i.mediaIndex-=s,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}pause(){this.checkBufferTimeout_&&(a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&El.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,n=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let r=1;const s=()=>{r--,0===r&&n()};!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,s)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=gh(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,s));for(const o in this.inbandTextTracks_)dh(e,t,this.inbandTextTracks_[o]);dh(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a().setTimeout(this.monitorBufferTick_.bind(this),Th)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"===typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,n=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"===typeof e&&t.segments[e],r=e+1===t.segments.length,s=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&s}chooseNextRequest_(){const e=this.buffered_(),t=Du(e)||0,n=Pu(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=_h(this.currentTimeline_,s,t);else if(null!==this.mediaIndex){const e=s[this.mediaIndex],n="number"===typeof this.partIndex?this.partIndex:-1;o.startOfSegment=e.end?e.end:t,e.parts&&e.parts[n+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=n+1):o.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:e,startTime:n,partIndex:i}=ic.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=e,o.startOfSegment=n,o.partIndex=i}const a=s[o.mediaIndex];let u=a&&"number"===typeof o.partIndex&&a.parts&&a.parts[o.partIndex];if(!a||"number"===typeof o.partIndex&&!u)return null;if("number"!==typeof o.partIndex&&a.parts&&(o.partIndex=0,u=a.parts[0]),!n&&u&&!u.independent)if(0===o.partIndex){const e=s[o.mediaIndex-1],t=e.parts&&e.parts.length&&e.parts[e.parts.length-1];t&&t.independent&&(o.mediaIndex-=1,o.partIndex=e.parts.length-1,o.independent="previous segment")}else a.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=s.length-1&&c&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){const{independent:t,playlist:n,mediaIndex:i,startOfSegment:r,isSyncRequest:s,partIndex:o,forceTimestampOffset:a,getMediaInfoForTime:u}=e,c=n.segments[i],l="number"===typeof o&&c.parts[o],h={requestId:"segment-loader-"+Math.random(),uri:l&&l.resolvedUri||c.resolvedUri,mediaIndex:i,partIndex:l?o:null,isSyncRequest:s,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:l&&l.duration||c.duration,segment:c,part:l,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},d="undefined"!==typeof a?a:this.isPendingTimestampOffset_;h.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:d});const p=Du(this.sourceUpdater_.audioBuffered());return"number"===typeof p&&(h.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(h.gopsToAlignWith=fh(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),h}timestampOffsetForSegment_(e){return Oh(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=ic.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),s=Ou(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(r<=s)return;const o=rh({main:this.vhs_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const a=r-s,u=a-o.rebufferingImpact;let c=.5;s<=bu&&(c=1),!o.playlist||o.playlist.uri===this.playlist_.uri||u<c||(this.bandwidth=o.playlist.attributes.BANDWIDTH*il.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Ch(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},yh(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))}handleTimingInfo_(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const r=this.pendingSegment_,s=Ih(t);r[s]=r[s]||{},r[s][n]=i,this.logger_(`timinginfo: ${t} - ${n} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");const n=this.pendingSegment_;if(!n.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((e=>{r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};const t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)})),Object.keys(r).forEach((e=>{const{startTime:t,endTime:n,captions:s}=r[e],o=this.inbandTextTracks_;this.logger_(`adding cues from ${t} -> ${n} for ${e}`),ah(o,this.vhs_.tech_,e),dh(t,n,o[e]),uh({captionArray:s,inbandTextTracks:o,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const i=this.pendingSegment_;if(!i.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n));const r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();hh(this.inbandTextTracks_,n,this.vhs_.tech_),lh({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach((e=>e())),this.metadataQueue_.caption.forEach((e=>e())),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach((e=>e()))}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach((e=>e()))}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!xh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:n,hasVideo:i,isMuxed:r}=t;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!xh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Ih(t.type)].start;else{const e=this.getCurrentMediaInfo_(),t="main"===this.loaderType_&&e&&e.hasVideo;let i;t&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:t,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});const e=this.chooseNextRequest_();if(e.mediaIndex!==n.mediaIndex||e.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}updateAppendInitSegmentStatus(e,t){"main"!==this.loaderType_||"number"!==typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:n,playlist:i}){if(n){const e=Pc(n);if(this.activeInitSegmentId_===e)return null;t=this.initSegmentForMap(n,!0).bytes,this.activeInitSegmentId_=e}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n},i){const r=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();r.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+xu(r).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+xu(s).join(", "));const o=r.length?r.start(0):0,u=r.length?r.end(r.length-1):0,c=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0;if(u-o<=bh&&l-c<=bh)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${n.byteLength}, audio buffer: ${xu(r).join(", ")}, video buffer: ${xu(s).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:n}));const h=this.currentTime_(),d=h-bh;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${d}`),this.remove(0,d,(()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${bh}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=a().setTimeout((()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()}),1e3*bh)}),!0)}handleAppendError_({segmentInfo:e,type:t,bytes:n},i){i&&(i.code!==vh?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${n.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:n}))}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:n,data:i,bytes:r}){if(!r){const e=[i];let t=i.byteLength;n&&(e.unshift(n),t+=n.byteLength),r=oh({bytes:t,segments:e})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:r},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:r}))}handleSegmentTimingInfo_(e,t,n){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,r=`${e}TimingInfo`;i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}appendData_(e,t){const{type:n,data:i}=t;if(!i||!i.byteLength)return;if("audio"===n&&this.audioDisabled_)return;const r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"===typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((()=>{const t=E({},e,{forceTimestampOffset:!0});E(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)}))}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),n=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,r=e.timeline!==this.currentTimeline_&&e.timeline>0,s=n||i&&r;this.logger_(`Requesting ${Ch(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Vl({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:t,level:n,stream:i})=>{this.logger_(`${Ch(e)} logged from transmuxer stream ${i} as a ${n}: ${t}`)}})}trimBackBuffer_(e){const t=kh(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){const n=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=n}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Eh?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Eh}`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,n){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return;if(t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===kl.ABORTED)return;return this.pause(),e.code===kl.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=mh(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){"number"===typeof e.start&&"number"===typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:n,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:r,useVideoTimingInfo:s,videoTimingInfo:o,audioTimingInfo:a}){if("undefined"!==typeof e)return e;if(!s)return a.start;const u=t.segments[n-1];return 0!==n&&u&&"undefined"!==typeof u.start&&u.end===i+r?o.start:i}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:n,hasVideo:i,isMuxed:r}=t,s="main"===this.loaderType_&&i,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!==typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);s&&e.waitingOnAppends++,o&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Sh(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!==typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:n}){return this.useDtsForTimestampOffset_?e&&"number"===typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"===typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n.start:n.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo,i=n&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"===typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=Ph(e,this.sourceType_);if(t&&("warn"===t.severity?uu.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${Ch(e)}`);this.logger_(`Appended ${Ch(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,s=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||s)return this.logger_(`bad ${r?"segment":"part"} ${Ch(e)}`),void this.resetEverything();const o=null!==this.mediaIndex;o&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Eh)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Eh}`);const t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,n=t.start,i=t.end;if(!wh(n)||!wh(i))return;dh(n,i,this.segmentMetadataTrack_);const r=a().WebKitDataCue||a().VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=JSON.stringify(s),u=new r(n,i,o);u.value=s,this.segmentMetadataTrack_.addCue(u)}}function Nh(){}const Lh=function(e){return"string"!==typeof e?e:e.replace(/./,(e=>e.toUpperCase()))},Mh=["video","audio"],Uh=(e,t)=>{const n=t[`${e}Buffer`];return n&&n.updating||t.queuePending[e]},jh=(e,t)=>{for(let n=0;n<t.length;n++){const i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null},Fh=(e,t)=>{if(0===t.queue.length)return;let n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!Uh(e,t)){if(i.type!==e){if(n=jh(e,t.queue),null===n)return;i=t.queue[n]}return t.queue.splice(n,1),t.queuePending[e]=i,i.action(e,t),i.doneFn?void 0:(t.queuePending[e]=null,void Fh(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),Fh("audio",t),Fh("video",t))},Bh=(e,t)=>{const n=t[`${e}Buffer`],i=Lh(e);n&&(n.removeEventListener("updateend",t[`on${i}UpdateEnd_`]),n.removeEventListener("error",t[`on${i}Error_`]),t.codecs[e]=null,t[`${e}Buffer`]=null)},Vh=(e,t)=>e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t),$h={appendBuffer:(e,t,n)=>(i,r)=>{const s=r[`${i}Buffer`];if(Vh(r.mediaSource,s)){r.logger_(`Appending segment ${t.mediaIndex}'s ${e.length} bytes to ${i}Buffer`);try{s.appendBuffer(e)}catch(o){r.logger_(`Error with code ${o.code} `+(o.code===vh?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,n(o)}}},remove:(e,t)=>(n,i)=>{const r=i[`${n}Buffer`];if(Vh(i.mediaSource,r)){i.logger_(`Removing ${e} to ${t} from ${n}Buffer`);try{r.remove(e,t)}catch(s){i.logger_(`Remove ${e} to ${t} from ${n}Buffer failed`)}}},timestampOffset:e=>(t,n)=>{const i=n[`${t}Buffer`];Vh(n.mediaSource,i)&&(n.logger_(`Setting ${t}timestampOffset to ${e}`),i.timestampOffset=e)},callback:e=>(t,n)=>{e()},endOfStream:e=>t=>{if("open"===t.mediaSource.readyState){t.logger_(`Calling mediaSource endOfStream(${e||""})`);try{t.mediaSource.endOfStream(e)}catch(n){uu.log.warn("Failed to call media source endOfStream",n)}}},duration:e=>t=>{t.logger_(`Setting mediaSource duration to ${e}`);try{t.mediaSource.duration=e}catch(n){uu.log.warn("Failed to set media source duration",n)}},abort:()=>(e,t)=>{if("open"!==t.mediaSource.readyState)return;const n=t[`${e}Buffer`];if(Vh(t.mediaSource,n)){t.logger_(`calling abort on ${e}Buffer`);try{n.abort()}catch(i){uu.log.warn(`Failed to abort on ${e}Buffer`,i)}}},addSourceBuffer:(e,t)=>n=>{const i=Lh(e),r=W(t);n.logger_(`Adding ${e}Buffer with codec ${t} to mediaSource`);const s=n.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",n[`on${i}UpdateEnd_`]),s.addEventListener("error",n[`on${i}Error_`]),n.codecs[e]=t,n[`${e}Buffer`]=s},removeSourceBuffer:e=>t=>{const n=t[`${e}Buffer`];if(Bh(e,t),Vh(t.mediaSource,n)){t.logger_(`Removing ${e}Buffer with codec ${t.codecs[e]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(i){uu.log.warn(`Failed to removeSourceBuffer ${e}Buffer`,i)}}},changeType:e=>(t,n)=>{const i=n[`${t}Buffer`],r=W(e);Vh(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_(`changing ${t}Buffer codec from ${n.codecs[t]} to ${e}`),i.changeType(r),n.codecs[t]=e)}},qh=({type:e,sourceUpdater:t,action:n,doneFn:i,name:r})=>{t.queue.push({type:e,action:n,doneFn:i,name:r}),Fh(e,t)},Hh=(e,t)=>n=>{if(t.queuePending[e]){const n=t.queuePending[e].doneFn;t.queuePending[e]=null,n&&n(t[`${e}Error_`])}Fh(e,t)};class Wh extends uu.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Fh("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=yu("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Hh("video",this),this.onAudioUpdateEnd_=Hh("audio",this),this.onVideoError_=e=>{this.videoError_=e},this.onAudioError_=e=>{this.audioError_=e},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){qh({type:"mediaSource",sourceUpdater:this,action:$h.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){qh({type:e,sourceUpdater:this,action:$h.abort(e),name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?qh({type:"mediaSource",sourceUpdater:this,action:$h.removeSourceBuffer(e),name:"removeSourceBuffer"}):uu.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!uu.browser.IE_VERSION&&!uu.browser.IS_FIREFOX&&a().MediaSource&&a().MediaSource.prototype&&"function"===typeof a().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return a().SourceBuffer&&a().SourceBuffer.prototype&&"function"===typeof a().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?qh({type:e,sourceUpdater:this,action:$h.changeType(t),name:"changeType"}):uu.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!==typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((t=>{const n=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,n);this.canChangeType()&&this.changeType(t,n)}))}appendBuffer(e,t){const{segmentInfo:n,type:i,bytes:r}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${r.length} until video append`);const s=t;if(qh({type:i,sourceUpdater:this,action:$h.appendBuffer(r,n||{mediaIndex:-1},s),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const e=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${e.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,e.forEach((e=>{this.appendBuffer.apply(this,e)}))}}audioBuffered(){return Vh(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:_u()}videoBuffered(){return Vh(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:_u()}buffered(){const e=Vh(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Vh(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():Cu(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Nh){qh({type:"mediaSource",sourceUpdater:this,action:$h.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Nh){"string"!==typeof e&&(e=void 0),qh({type:"mediaSource",sourceUpdater:this,action:$h.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,n=Nh){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?qh({type:"audio",sourceUpdater:this,action:$h.remove(e,t),doneFn:n,name:"remove"}):n()}removeVideo(e,t,n=Nh){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?qh({type:"video",sourceUpdater:this,action:$h.remove(e,t),doneFn:n,name:"remove"}):n()}updating(){return!(!Uh("audio",this)&&!Uh("video",this))}audioTimestampOffset(e){return"undefined"!==typeof e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(qh({type:"audio",sourceUpdater:this,action:$h.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return"undefined"!==typeof e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(qh({type:"video",sourceUpdater:this,action:$h.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&qh({type:"audio",sourceUpdater:this,action:$h.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&qh({type:"video",sourceUpdater:this,action:$h.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),Mh.forEach((e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`]((()=>Bh(e,this)))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const zh=e=>decodeURIComponent(escape(String.fromCharCode.apply(null,e))),Gh=new Uint8Array("\n\n".split("").map((e=>e.charCodeAt(0))));class Qh extends Rh{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return _u();const e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return _u([[t,n]])}initSegmentForMap(e,t=!1){if(!e)return null;const n=Pc(e);let i=this.initSegments_[n];if(t&&!i&&e.bytes){const t=Gh.byteLength+e.bytes.byteLength,r=new Uint8Array(t);r.set(e.bytes),r.set(Gh,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:r}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return"undefined"===typeof e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){dh(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){const e=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};return this.syncController_.one("timestampoffset",e),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){while(e&&e.segment.empty){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,n){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===kl.TIMEOUT&&this.handleTimeout_(),e.code===kl.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const r=i.segment;if(r.map&&(r.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!==typeof a().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let i;const r=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",i),this.stopForError({message:"Error loading vtt.js"})};return i=()=>{this.subtitlesTrack_.tech_.off("vttjserror",r),this.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",r)}r.requested=!0;try{this.parseVTTCues_(i)}catch(s){return void this.stopForError({message:s.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,i.cues.forEach((e=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(a().VTTCue)(e.startTime,e.endTime,e.text):e)})),ph(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,n=!1;"function"===typeof a().TextDecoder?t=new(a().TextDecoder)("utf8"):(t=a().WebVTT.StringDecoder(),n=!0);const i=new(a().WebVTT.Parser)(a(),a().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=t=>{e.timestampmap=t},i.onparsingerror=e=>{uu.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){let t=e.segment.map.bytes;n&&(t=zh(t)),i.parse(t)}let r=e.bytes;n&&(r=zh(r)),i.parse(r),i.flush()}updateTimeMapping_(e,t,n){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const r=e.timestampmap,s=r.MPEGTS/gn.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((e=>{e.startTime+=s,e.endTime+=s})),!n.syncInfo){const t=e.cues[0].startTime,r=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(t,r-i.duration)}}}}const Kh=function(e,t){const n=e.cues;for(let i=0;i<n.length;i++){const e=n[i];if(t>=e.adStartTime&&t<=e.adEndTime)return e}return null},Xh=function(e,t,n=0){if(!e.segments)return;let i,r=n;for(let s=0;s<e.segments.length;s++){const n=e.segments[s];if(i||(i=Kh(t,r+n.duration/2)),i){if("cueIn"in n){i.endTime=r,i.adEndTime=r,r+=n.duration,i=null;continue}if(r<i.endTime){r+=n.duration;continue}i.endTime+=n.duration}else if("cueOut"in n&&(i=new(a().VTTCue)(r,r+n.duration,n.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(n.cueOut),t.addCue(i)),"cueOutCont"in n){const[e,s]=n.cueOutCont.split("/").map(parseFloat);i=new(a().VTTCue)(r,r+n.duration,""),i.adStartTime=r-e,i.adEndTime=i.adStartTime+s,t.addCue(i)}r+=n.duration}},Yh=86400,Jh=[{name:"VOD",run:(e,t,n,i,r)=>{if(n!==1/0){const e={time:0,segmentIndex:0,partIndex:null};return e}return null}},{name:"ProgramDateTime",run:(e,t,n,i,r)=>{if(!Object.keys(e.timelineToDatetimeMappings).length)return null;let s=null,o=null;const a=Nu(t);r=r||0;for(let u=0;u<a.length;u++){const n=t.endList||0===r?u:a.length-(u+1),i=a[n],c=i.segment,l=e.timelineToDatetimeMappings[c.timeline];if(!l||!c.dateTimeObject)continue;const h=c.dateTimeObject.getTime()/1e3;let d=h+l;if(c.parts&&"number"===typeof i.partIndex)for(let e=0;e<i.partIndex;e++)d+=c.parts[e].duration;const p=Math.abs(r-d);if(null!==o&&(0===p||o<p))break;o=p,s={time:d,segmentIndex:i.segmentIndex,partIndex:i.partIndex}}return s}},{name:"Segment",run:(e,t,n,i,r)=>{let s=null,o=null;r=r||0;const a=Nu(t);for(let u=0;u<a.length;u++){const e=t.endList||0===r?u:a.length-(u+1),n=a[e],c=n.segment,l=n.part&&n.part.start||c&&c.start;if(c.timeline===i&&"undefined"!==typeof l){const e=Math.abs(r-l);if(null!==o&&o<e)break;(!s||null===o||o>=e)&&(o=e,s={time:l,segmentIndex:n.segmentIndex,partIndex:n.partIndex})}}return s}},{name:"Discontinuity",run:(e,t,n,i,r)=>{let s=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length){let n=null;for(let i=0;i<t.discontinuityStarts.length;i++){const o=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,u=e.discontinuities[a];if(u){const e=Math.abs(r-u.time);if(null!==n&&n<e)break;(!s||null===n||n>=e)&&(n=e,s={time:u.time,segmentIndex:o,partIndex:null})}}}return s}},{name:"Playlist",run:(e,t,n,i,r)=>{if(t.syncInfo){const e={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return e}return null}}];class Zh extends uu.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=yu("SyncController")}getSyncPoint(e,t,n,i){const r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;const i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+$u({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,n,i){const r=[];for(let s=0;s<Jh.length;s++){const o=Jh[s],a=o.run(this,e,t,n,i);a&&(a.strategy=o.name,r.push({strategy:o.name,syncPoint:a}))}return r}selectSyncPoint_(e,t){let n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy;for(let s=1;s<e.length;s++){const o=Math.abs(e[s].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[s].syncPoint,r=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${r}]: [time:${n.time}, segmentIndex:${n.segmentIndex}`+("number"===typeof n.partIndex?`,partIndex:${n.partIndex}`:"")+"]"),n}saveExpiredSegmentInfo(e,t){const n=t.mediaSequence-e.mediaSequence;if(n>Yh)uu.log.warn(`Not saving expired segment info. Media sequence gap ${n} is too large.`);else for(let i=n-1;i>=0;i--){const n=e.segments[i];if(n&&"undefined"!==typeof n.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const n=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;n&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const r=i.dateTimeObject;i.discontinuity&&t&&r&&(this.timelineToDatetimeMappings[i.timeline]=-r.getTime()/1e3)}timestampOffsetForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].time}mappingForTimeline(e){return"undefined"===typeof this.timelines[e]?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,n){const i=e.segment,r=e.part;let s,o,a=this.timelines[e.timeline];if("number"===typeof e.timestampOffset)a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),s=e.startOfSegment,o=t.end+a.mapping;else{if(!a)return!1;s=t.start+a.mapping,o=t.end+a.mapping}return r&&(r.start=s,r.end=o),(!i.start||s<i.start)&&(i.start=s),i.end=o,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const r=t.discontinuityStarts[i],s=t.discontinuitySequence+i+1,o=r-e.mediaIndex,a=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>a){let i;i=o<0?n.start-$u({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+$u({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[s]={time:i,accuracy:a}}}}dispose(){this.trigger("dispose"),this.off()}}class ed extends uu.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:n}){return"number"===typeof t&&"number"===typeof n&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:n},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:n}){return"number"===typeof t&&"number"===typeof n&&(this.lastTimelineChanges_[e]={type:e,from:t,to:n},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const td=ul(cl((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),s=t.length,o=0;o<s;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function t(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */const i=function(){const e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4];let s,o,a;const u=[],c=[];let l,h,d,p,f,m;for(s=0;s<256;s++)c[(u[s]=s<<1^283*(s>>7))^s]=s;for(o=a=0;!i[o];o^=l||1,a=c[a]||1)for(p=a^a<<1^a<<2^a<<3^a<<4,p=p>>8^255&p^99,i[o]=p,r[p]=o,d=u[h=u[l=u[o]]],m=16843009*d^65537*h^257*l^16843008*o,f=257*u[p]^16843008*p,s=0;s<4;s++)t[s][o]=f=f<<24^f>>>8,n[s][p]=m=m<<24^m>>>8;for(s=0;s<5;s++)t[s]=t[s].slice(0),n[s]=n[s].slice(0);return e};let r=null;class s{constructor(e){let t,n,s;r||(r=i()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const o=this._tables[0][4],a=this._tables[1],u=e.length;let c=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");const l=e.slice(0),h=[];for(this._key=[l,h],t=u;t<4*u+28;t++)s=l[t-1],(t%u===0||8===u&&t%u===4)&&(s=o[s>>>24]<<24^o[s>>16&255]<<16^o[s>>8&255]<<8^o[255&s],t%u===0&&(s=s<<8^s>>>24^c<<24,c=c<<1^283*(c>>7))),l[t]=l[t-u]^s;for(n=0;t;n++,t--)s=l[3&n?t:t-4],h[n]=t<=4||n<4?s:a[0][o[s>>>24]]^a[1][o[s>>16&255]]^a[2][o[s>>8&255]]^a[3][o[255&s]]}decrypt(e,t,n,i,r,s){const o=this._key[1];let a,u,c,l=e^o[0],h=i^o[1],d=n^o[2],p=t^o[3];const f=o.length/4-2;let m,g=4;const y=this._tables[1],v=y[0],_=y[1],b=y[2],T=y[3],w=y[4];for(m=0;m<f;m++)a=v[l>>>24]^_[h>>16&255]^b[d>>8&255]^T[255&p]^o[g],u=v[h>>>24]^_[d>>16&255]^b[p>>8&255]^T[255&l]^o[g+1],c=v[d>>>24]^_[p>>16&255]^b[l>>8&255]^T[255&h]^o[g+2],p=v[p>>>24]^_[l>>16&255]^b[h>>8&255]^T[255&d]^o[g+3],g+=4,l=a,h=u,d=c;for(m=0;m<4;m++)r[(3&-m)+s]=w[l>>>24]<<24^w[h>>16&255]<<16^w[d>>8&255]<<8^w[255&p]^o[g++],a=l,l=h,h=d,d=p,p=a}}class o extends e{constructor(){super(e),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},u=function(e,t,n){const i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new s(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),u=new Int32Array(o.buffer);let c,l,h,d,p,f,m,g,y;for(c=n[0],l=n[1],h=n[2],d=n[3],y=0;y<i.length;y+=4)p=a(i[y]),f=a(i[y+1]),m=a(i[y+2]),g=a(i[y+3]),r.decrypt(p,f,m,g,u,y),u[y]=a(u[y]^c),u[y+1]=a(u[y+1]^l),u[y+2]=a(u[y+2]^h),u[y+3]=a(u[y+3]^d),c=p,l=f,h=m,d=g;return o};class c{constructor(e,n,i,r){const s=c.STEP,u=new Int32Array(e.buffer),l=new Uint8Array(e.byteLength);let h=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(u.subarray(h,h+s),n,i,l)),h=s;h<u.length;h+=s)i=new Uint32Array([a(u[h-4]),a(u[h-3]),a(u[h-2]),a(u[h-1])]),this.asyncStream_.push(this.decryptChunk_(u.subarray(h,h+s),n,i,l));this.asyncStream_.push((function(){r(null,t(l))}))}static get STEP(){return 32e3}decryptChunk_(e,t,n,i){return function(){const r=u(e,t,n);i.set(r,e.byteOffset)}}}var l,h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};l="undefined"!==typeof window?window:"undefined"!==typeof h?h:"undefined"!==typeof self?self:{};var d=l,p=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},f=d.BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();const m=function(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];p(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t};self.onmessage=function(e){const t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new c(n,i,r,(function(e,n){self.postMessage(m({source:t.source,decrypted:n}),[n.buffer])}))}})));var nd=al(td);const id=e=>{let t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},rd=(e,t)=>{e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},sd=(e,t)=>{t.activePlaylistLoader=e,e.load()},od=(e,t)=>()=>{const{segmentLoaders:{[e]:n,main:i},mediaTypes:{[e]:r}}=t,s=r.activeTrack(),o=r.getActiveGroup(),a=r.activePlaylistLoader,u=r.lastGroup_;o&&u&&o.id===u.id||(r.lastGroup_=o,r.lastTrack_=s,rd(n,r),o&&!o.isMainPlaylist&&(o.playlistLoader?(n.resyncLoader(),sd(o.playlistLoader,r)):a&&i.resetEverything()))},ad=(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;i.lastGroup_=null,n.abort(),n.pause()},ud=(e,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[e]:i,main:r},mediaTypes:{[e]:s}}=t,o=s.activeTrack(),a=s.getActiveGroup(),u=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!o||c.id!==o.id)&&(s.lastGroup_=a,s.lastTrack_=o,rd(i,s),a)){if(a.isMainPlaylist){if(!o||!c||o.id===c.id)return;const e=t.vhs.playlistController_,i=e.selectPlaylist();if(e.media()===i)return;return s.logger_(`track change. Switching main audio from ${c.id} to ${o.id}`),n.pause(),r.resetEverything(),void e.fastQualityChange_(i)}if("AUDIO"===e){if(!a.playlistLoader)return r.setAudio(!0),void r.resetEverything();i.setAudio(!0),r.setAudio(!1)}u!==a.playlistLoader?(i.track&&i.track(o),i.resetEverything(),sd(a.playlistLoader,s)):sd(a.playlistLoader,s)}},cd={AUDIO:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i},excludePlaylist:r}=t;rd(n,i);const s=i.activeTrack(),o=i.activeGroup(),a=(o.filter((e=>e.default))[0]||o[0]).id,u=i.tracks[a];if(s!==u){uu.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const e in i.tracks)i.tracks[e].enabled=i.tracks[e]===u;i.onTrackChanged()}else r({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(e,t)=>()=>{const{segmentLoaders:{[e]:n},mediaTypes:{[e]:i}}=t;uu.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),rd(n,i);const r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}},ld={AUDIO:(e,t,n)=>{if(!t)return;const{tech:i,requestOptions:r,segmentLoaders:{[e]:s}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",cd[e](e,n))},SUBTITLES:(e,t,n)=>{const{tech:i,requestOptions:r,segmentLoaders:{[e]:s},mediaTypes:{[e]:o}}=n;t.on("loadedmetadata",(()=>{const e=t.media();s.playlist(e,r),s.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&s.load()})),t.on("loadedplaylist",(()=>{s.playlist(t.media(),r),i.paused()||s.load()})),t.on("error",cd[e](e,n))}},hd={AUDIO:(e,t)=>{const{vhs:n,sourceType:i,segmentLoaders:{[e]:r},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[e]:{groups:a,tracks:u,logger_:c}},mainPlaylistLoader:l}=t,h=nc(l.main);o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},h&&(o[e].main.default.playlists=l.main.playlists));for(const d in o[e]){a[d]||(a[d]=[]);for(const r in o[e][d]){let p,f=o[e][d][r];if(h?(c(`AUDIO group '${d}' label '${r}' is a main playlist`),f.isMainPlaylist=!0,p=null):p="vhs-json"===i&&f.playlists?new wc(f.playlists[0],n,s):f.resolvedUri?new wc(f.resolvedUri,n,s):f.playlists&&"dash"===i?new nl(f.playlists[0],n,s,l):null,f=vu({id:r,playlistLoader:p},f),ld[e](e,f.playlistLoader,t),a[d].push(f),"undefined"===typeof u[r]){const e=new uu.AudioTrack({id:r,kind:id(f),enabled:!1,language:f.language,default:f.default,label:r});u[r]=e}}}r.on("error",cd[e](e,t))},SUBTITLES:(e,t)=>{const{tech:n,vhs:i,sourceType:r,segmentLoaders:{[e]:s},requestOptions:o,main:{mediaGroups:a},mediaTypes:{[e]:{groups:u,tracks:c}},mainPlaylistLoader:l}=t;for(const h in a[e]){u[h]||(u[h]=[]);for(const s in a[e][h]){if(a[e][h][s].forced)continue;let d,p=a[e][h][s];if("hls"===r)d=new wc(p.resolvedUri,i,o);else if("dash"===r){const e=p.playlists.filter((e=>e.excludeUntil!==1/0));if(!e.length)return;d=new nl(p.playlists[0],i,o,l)}else"vhs-json"===r&&(d=new wc(p.playlists?p.playlists[0]:p.resolvedUri,i,o));if(p=vu({id:s,playlistLoader:d},p),ld[e](e,p.playlistLoader,t),u[h].push(p),"undefined"===typeof c[s]){const e=n.addRemoteTextTrack({id:s,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:s},!1).track;c[s]=e}}}s.on("error",cd[e](e,t))},"CLOSED-CAPTIONS":(e,t)=>{const{tech:n,main:{mediaGroups:i},mediaTypes:{[e]:{groups:r,tracks:s}}}=t;for(const o in i[e]){r[o]||(r[o]=[]);for(const t in i[e][o]){const a=i[e][o][t];if(!/^(?:CC|SERVICE)/.test(a.instreamId))continue;const u=n.options_.vhs&&n.options_.vhs.captionServices||{};let c={label:t,language:a.language,instreamId:a.instreamId,default:a.default&&a.autoselect};if(u[c.instreamId]&&(c=vu(c,u[c.instreamId])),void 0===c.default&&delete c.default,r[o].push(vu({id:t},a)),"undefined"===typeof s[t]){const e=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[t]=e}}}}},dd=(e,t)=>{for(let n=0;n<e.length;n++){if(ec(t,e[n]))return!0;if(e[n].playlists&&dd(e[n].playlists,t))return!0}return!1},pd=(e,t)=>n=>{const{mainPlaylistLoader:i,mediaTypes:{[e]:{groups:r}}}=t,s=i.media();if(!s)return null;let o=null;s.attributes[e]&&(o=r[s.attributes[e]]);const a=Object.keys(r);if(!o)if("AUDIO"===e&&a.length>1&&nc(t.main))for(let e=0;e<a.length;e++){const t=r[a[e]];if(dd(t,s)){o=t;break}}else r.main?o=r.main:1===a.length&&(o=r[a[0]]);return"undefined"===typeof n?o:null!==n&&o&&o.filter((e=>e.id===n.id))[0]||null},fd={AUDIO:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if(n[e].enabled)return n[e];return null},SUBTITLES:(e,t)=>()=>{const{mediaTypes:{[e]:{tracks:n}}}=t;for(const e in n)if("showing"===n[e].mode||"hidden"===n[e].mode)return n[e];return null}},md=(e,{mediaTypes:t})=>()=>{const n=t[e].activeTrack();return n?t[e].activeGroup(n):null},gd=e=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{hd[t](t,e)}));const{mediaTypes:t,mainPlaylistLoader:n,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:o}}=e;["AUDIO","SUBTITLES"].forEach((n=>{t[n].activeGroup=pd(n,e),t[n].activeTrack=fd[n](n,e),t[n].onGroupChanged=od(n,e),t[n].onGroupChanging=ad(n,e),t[n].onTrackChanged=ud(n,e),t[n].getActiveGroup=md(n,e)}));const a=t.AUDIO.activeGroup();if(a){const e=(a.filter((e=>e.default))[0]||a[0]).id;t.AUDIO.tracks[e].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();const n=t.AUDIO.getActiveGroup();n.playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanged()))})),n.on("mediachanging",(()=>{["AUDIO","SUBTITLES"].forEach((e=>t[e].onGroupChanging()))}));const u=()=>{t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(()=>{i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio");for(const c in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[c])},yd=()=>{const e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((t=>{e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Nh,activeTrack:Nh,getActiveGroup:Nh,onGroupChanged:Nh,onTrackChanged:Nh,lastTrack_:null,logger_:yu(`MediaGroups[${t}]`)}})),e},vd=120;let _d;const bd=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Td=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},wd=function({currentPlaylist:e,buffered:t,currentTime:n,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:o,bufferBasedABR:a,log:u}){if(!i)return uu.log.warn("We received no playlist to switch to. Please check your stream."),!1;const c=`allowing switch ${e&&e.id||"null"} -> ${i.id}`;if(!e)return u(`${c} as current playlist is not set`),!0;if(i.id===e.id)return!1;const l=Boolean(Eu(t,n).length);if(!e.endList)return l||"number"!==typeof e.partTargetDuration?(u(`${c} as current playlist is live`),!0):(u(`not ${c} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const h=Pu(t,n),d=a?il.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:il.MAX_BUFFER_LOW_WATER_LINE;if(o<d)return u(`${c} as duration < max low water line (${o} < ${d})`),!0;const p=i.attributes.BANDWIDTH,f=e.attributes.BANDWIDTH;if(p<f&&(!a||h<s)){let e=`${c} as next bandwidth < current bandwidth (${p} < ${f})`;return a&&(e+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),u(e),!0}if((!a||p>f)&&h>=r){let e=`${c} as forwardBuffer >= bufferLowWaterLine (${h} >= ${r})`;return a&&(e+=` and next bandwidth > current bandwidth (${p} > ${f})`),u(e),!0}return u(`not ${c} as no switching criteria met`),!1};class Ed extends uu.EventTarget{constructor(e){super();const{src:t,withCredentials:n,tech:i,bandwidth:r,externVhs:s,useCueTags:o,playlistExclusionDuration:u,enableLowInitialPlaylist:c,sourceType:l,cacheEncryptionKeys:h,bufferBasedABR:d,leastPixelDiffSelector:p,captionServices:f}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:m}=e;null!==m&&"undefined"!==typeof m||(m=1/0),_d=s,this.bufferBasedABR=Boolean(d),this.leastPixelDiffSelector=Boolean(p),this.withCredentials=n,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=l,this.useCueTags_=o,this.playlistExclusionDuration=u,this.maxPlaylistRetries=m,this.enableLowInitialPlaylist=c,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:n,maxPlaylistRetries:m,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=yd(),this.mediaSource=new(a().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=_u(),this.hasPlayed_=!1,this.syncController_=new Zh(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new nd,this.sourceUpdater_=new Wh(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new ed;const g={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:f,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:r,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new nl(t,this.vhs_,this.requestOptions_):new wc(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Rh(vu(g,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Rh(vu(g,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new Qh(vu(g,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",(()=>this.startABRTimer_())),this.tech_.on("pause",(()=>this.stopABRTimer_())),this.tech_.on("play",(()=>this.startABRTimer_()))),bd.forEach((e=>{this[e+"_"]=Td.bind(this,e)})),this.logger_=yu("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const y="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(y,(()=>{const e=Date.now();this.tech_.one("loadeddata",(()=>{this.timeToLoadedData__=Date.now()-e,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends}))}))}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,n){const i=this.media(),r=i&&(i.id||i.uri),s=e.id||e.uri;r&&r!==s&&(this.logger_(`switch media ${r} -> ${s} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,n)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=a().setInterval((()=>this.checkABR_()),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(a().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const n=e.mediaGroups.AUDIO,i=Object.keys(n);let r;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)r=this.mediaTypes_.AUDIO.activeTrack();else{const e=n.main||i.length&&n[i[0]];for(const t in e)if(e[t].default){r={label:t};break}}if(!r)return t;const s=[];for(const o in n)if(n[o][r.label]){const t=n[o][r.label];if(t.playlists&&t.playlists.length)s.push.apply(s,t.playlists);else if(t.uri)s.push(t);else if(e.playlists.length)for(let n=0;n<e.playlists.length;n++){const t=e.playlists[n];t.attributes&&t.attributes.AUDIO&&t.attributes.AUDIO===o&&s.push(t)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Zu(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),gd({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(()=>{this.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t))return;this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial");const n="vhs-json"===this.sourceType_&&this.initialMedia_.segments;if(!n)return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)})),this.mainPlaylistLoader_.on("error",(()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainPlaylistLoader_.on("mediachanging",(()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Zu(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})})),this.mainPlaylistLoader_.on("playlistunchanged",(()=>{const e=this.mainPlaylistLoader_.media();if("playlist-unchanged"===e.lastExcludeReason_)return;const t=this.stuckAtPlaylistEnd_(e);t&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))})),this.mainPlaylistLoader_.on("renditiondisabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const n=e.mediaGroups||{};let i=!0;const r=Object.keys(n.AUDIO);for(const s in n.AUDIO)for(const e in n.AUDIO[s]){const t=n.AUDIO[s][e];t.uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),_d.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine(),s=this.tech_.buffered();return wd({buffered:s,currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",(()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()})),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",(()=>{this.trigger("progress")})),this.mainSegmentLoader_.on("error",(()=>{const e=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:e.playlist,error:e})})),this.mainSegmentLoader_.on("appenderror",(()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(()=>{this.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")})),this.mainSegmentLoader_.on("ended",(()=>{this.logger_("main segment loader ended"),this.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(e=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:vd}))}));const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const e=this.getCodecsOrExclude_();e&&this.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}))}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((()=>{uu.browser.IE_VERSION||uu.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const e=this.seekable();if(!e.length)return!1;if(uu.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0)),this.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(e.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();"undefined"!==typeof e&&"function"===typeof e.then&&e.then(null,(e=>{}))}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){const t=this.seekable();if(!t.length)return!1;const n=this.syncController_.getExpiredTime(e,this.duration());if(null===n)return!1;const i=_d.Playlist.playlistEnd(e,n),r=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return i-r<=Tu;const o=s.end(s.length-1);return o-r<=Tu&&i-o<=Tu}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:n}){if(e=e||this.mainPlaylistLoader_.media(),n=n||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,r=i.filter(Qu),s=1===r.length&&r[0]===e;if(1===i.length&&n!==1/0)return uu.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){let t=!1;i.forEach((n=>{if(n===e)return;const i=n.excludeUntil;"undefined"!==typeof i&&i!==1/0&&(t=!0,delete n.excludeUntil)})),t&&(uu.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;o=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*n,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const a=this.selectPlaylist();if(!a)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const u=t.internal?this.logger_:uu.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${a.id}.`),a.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),a.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const l=a.targetDuration/2*1e3||5e3,h="number"===typeof a.lastRequest&&Date.now()-a.lastRequest<=l;return this.switchMedia_(a,"exclude",s||h)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const n=[],i="all"===e;(i||"main"===e)&&n.push(this.mainPlaylistLoader_);const r=[];(i||"audio"===e)&&r.push("AUDIO"),(i||"subtitle"===e)&&(r.push("CLOSED-CAPTIONS"),r.push("SUBTITLES")),r.forEach((e=>{const t=this.mediaTypes_[e]&&this.mediaTypes_[e].activePlaylistLoader;t&&n.push(t)})),["main","audio","subtitle"].forEach((t=>{const i=this[`${t}SegmentLoader_`];!i||e!==t&&"all"!==e||n.push(i)})),n.forEach((e=>t.forEach((t=>{"function"===typeof e[t]&&e[t]()}))))}setCurrentTime(e){const t=Eu(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:_d.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let n=this.syncController_.getExpiredTime(t,this.duration());if(null===n)return;const i=this.mainPlaylistLoader_.main,r=_d.Playlist.seekable(t,n,_d.Playlist.liveEdgeDelay(i,t));if(0===r.length)return;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),n=this.syncController_.getExpiredTime(t,this.duration()),null===n)return;if(e=_d.Playlist.seekable(t,n,_d.Playlist.liveEdgeDelay(i,t)),0===e.length)return}let s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=_u([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o||(this.logger_(`seekable updated [${Iu(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const e=this.seekable();if(!e.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1)))}const t=this.tech_.buffered();let n=_d.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(n=Math.max(n,t.end(t.length-1))),this.mediaSource.duration!==n&&this.sourceUpdater_.setDuration(n)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((e=>{const t=this.mediaTypes_[e].groups;for(const n in t)t[n].forEach((e=>{e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;const t=Ql(this.main(),this.media()),n={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=t.video||e.main.videoCodec||K),e.main.isMuxed&&(n.video+=`,${t.audio||e.main.audioCodec||Q}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(n.audio=t.audio||e.main.audioCodec||e.audio.audioCodec||Q,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const r=(e,t)=>e?z(t):G(t),s={};let o;if(["video","audio"].forEach((function(t){if(n.hasOwnProperty(t)&&!r(e[t].isFmp4,n[t])){const i=e[t].isFmp4?"browser":"muxer";s[i]=s[i]||[],s[i].push(n[t]),"audio"===t&&(o=i)}})),i&&o&&this.media().attributes.AUDIO){const e=this.media().attributes.AUDIO;this.main().playlists.forEach((t=>{const n=t.attributes&&t.attributes.AUDIO;n===e&&t!==this.media()&&(t.excludeUntil=1/0)})),this.logger_(`excluding audio group ${e} as ${o} does not support codec(s): "${n.audio}"`)}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const e=[];if(["video","audio"].forEach((t=>{const i=(V(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(V(n[t]||"")[0]||{}).type;i&&r&&i.toLowerCase()!==r.toLowerCase()&&e.push(`"${this.sourceUpdater_.codecs[t]}" -> "${n[t]}"`)})),e.length)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${e.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return n}{const e=Object.keys(s).reduce(((e,t)=>(e&&(e+=", "),e+=`${t} does not support codec(s): "${s[t].join(",")}"`,e)),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:e},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach((n=>{const i=e[n];if(-1!==t.indexOf(i.id))return;t.push(i.id);const r=Ql(this.main,i),s=[];!r.audio||G(r.audio)||z(r.audio)||s.push(`audio codec ${r.audio}`),!r.video||G(r.video)||z(r.video)||s.push(`video codec ${r.video}`),r.text&&"stpp.ttml.im1t"===r.text&&s.push(`text codec ${r.text}`),s.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${s.join(", ")}`))}))}excludeIncompatibleVariants_(e){const t=[],n=this.main().playlists,i=zl(V(e)),r=Gl(i),s=i.video&&V(i.video)[0]||null,o=i.audio&&V(i.audio)[0]||null;Object.keys(n).forEach((e=>{const i=n[e];if(-1!==t.indexOf(i.id)||i.excludeUntil===1/0)return;t.push(i.id);const a=[],u=Ql(this.mainPlaylistLoader_.main,i),c=Gl(u);if(u.audio||u.video){if(c!==r&&a.push(`codec count "${c}" !== "${r}"`),!this.sourceUpdater_.canChangeType()){const e=u.video&&V(u.video)[0]||null,t=u.audio&&V(u.audio)[0]||null;e&&s&&e.type.toLowerCase()!==s.type.toLowerCase()&&a.push(`video codec "${e.type}" !== "${s.type}"`),t&&o&&t.type.toLowerCase()!==o.type.toLowerCase()&&a.push(`audio codec "${t.type}" !== "${o.type}"`)}a.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id}: ${a.join(" && ")}`))}}))}updateAdCues_(e){let t=0;const n=this.seekable();n.length&&(t=n.start(0)),Xh(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=il.GOAL_BUFFER_LENGTH,n=il.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,il.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=il.BUFFER_LOW_WATER_LINE,n=il.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,il.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,il.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}bufferHighWaterLine(){return il.BUFFER_HIGH_WATER_LINE}}const Sd=(e,t,n)=>i=>{const r=e.main.playlists[t],s=Gu(r),o=Qu(r);return"undefined"===typeof i?o:(i?delete r.disabled:r.disabled=!0,i===o||s||(n(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)};class kd{constructor(e,t,n){const{playlistController_:i}=e,r=i.fastQualityChange_.bind(i);if(t.attributes){const e=t.attributes.RESOLUTION;this.width=e&&e.width,this.height=e&&e.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Ql(i.main(),t),this.playlist=t,this.id=n,this.enabled=Sd(e.playlists,t.id,r)}}const Cd=function(e){e.representations=()=>{const t=e.playlistController_.main(),n=nc(t)?e.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((e=>!Gu(e))).map(((t,n)=>new kd(e,t,t.id))):[]}},Id=["seeking","seeked","pause","playing","error"];class Od{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=yu("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),n=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),r=()=>this.resetTimeUpdate_(),s=this.playlistController_,o=["main","subtitle","audio"],u={};o.forEach((e=>{u[e]={reset:()=>this.resetSegmentDownloads_(e),updateend:()=>this.checkSegmentDownloads_(e)},s[`${e}SegmentLoader_`].on("appendsdone",u[e].updateend),s[`${e}SegmentLoader_`].on("playlistupdate",u[e].reset),this.tech_.on(["seeked","seeking"],u[e].reset)}));const c=e=>{["main","audio"].forEach((t=>{s[`${t}SegmentLoader_`][e]("appended",this.seekingAppendCheck_)}))};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=()=>c("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(Id,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(Id,r),this.tech_.off("canplay",n),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach((e=>{s[`${e}SegmentLoader_`].off("appendsdone",u[e].updateend),s[`${e}SegmentLoader_`].off("playlistupdate",u[e].reset),this.tech_.off(["seeked","seeking"],u[e].reset)})),this.checkCurrentTimeTimeout_&&a().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&a().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=a().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,n=t[`${e}SegmentLoader_`],i=n.buffered_(),r=Au(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,r?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:n.playlist_&&n.playlist_.id,buffered:xu(i)}),this[`${e}StalledDownloads_`]<10||(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Tu>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){const e=this.tech_.seeking();if(!e)return!1;const t=this.seekable(),n=this.tech_.currentTime(),i=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let r;if(i){const e=t.end(t.length-1);r=e}if(this.beforeSeekableWindow_(t,n)){const e=t.start(0);r=e+(e===t.end(0)?0:Tu)}if("undefined"!==typeof r)return this.logger_(`Trying to seek outside of seekable at time ${n} with seekable range ${Iu(t)}. Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0;const s=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),a=s.audioBuffer?s.audioBuffered():null,u=s.videoBuffer?s.videoBuffered():null,c=this.media(),l=c.partTargetDuration?c.partTargetDuration:2*(c.targetDuration-bu),h=[a,u];for(let p=0;p<h.length;p++){if(!h[p])continue;const e=Pu(h[p],n);if(e<l)return!1}const d=Su(o,n);return 0!==d.length&&(r=d.start(0)+Tu,this.logger_(`Buffered region starts (${d.start(0)})  just beyond seek point (${n}). Seeking to ${r}.`),this.tech_.setCurrentTime(r),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Eu(t,e);return n.length&&e+3<=n.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${n.start(0)} -> ${n.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const n=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${n}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const n=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered(),r=this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:t});if(r)return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const s=Su(i,t);return s.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${s.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,n,i=!1){if(!e.length)return!1;let r=e.end(e.length-1)+Tu;const s=!n.endList;return s&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:n}){if(!e)return;let i;if(e.length&&t.length){const r=Eu(e,n-3),s=Eu(e,n),o=Eu(t,n);o.length&&!s.length&&r.length&&(i={start:r.end(0),end:o.end(0)})}else{const t=Su(e,n);t.length||(i=this.gapFromVideoUnderflow_(e,n))}return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${n}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),n=this.tech_.currentTime(),i=Su(t,n);this.resetTimeUpdate_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+bu),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const n=ku(e);for(let i=0;i<n.length;i++){const e=n.start(i),r=n.end(i);if(t-e<4&&t-e>2)return{start:e,end:r}}return null}}const xd={errorInterval:30,getSource(e){const t=this.tech({IWillNotUseThisInPlugins:!0}),n=t.currentSource_||this.currentSource();return e(n)}},Ad=function(e,t){let n=0,i=0;const r=vu(xd,t);e.ready((()=>{e.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));const s=function(){i&&e.currentTime(i)},o=function(t){null!==t&&void 0!==t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.play())},a=function(){if(Date.now()-n<1e3*r.errorInterval)e.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(r.getSource&&"function"===typeof r.getSource)return n=Date.now(),r.getSource.call(e,o);uu.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function(){e.off("loadedmetadata",s),e.off("error",a),e.off("dispose",u)},c=function(t){u(),Ad(e,t)};e.on("error",a),e.on("dispose",u),e.reloadSourceOnError=c},Dd=function(e){Ad(this,e)};var Pd="3.0.0",Rd="6.2.0",Nd="1.0.1",Ld="6.0.0",Md="4.0.1";const Ud={PlaylistLoader:wc,Playlist:ic,utils:Uc,STANDARD_PLAYLIST_SELECTOR:nh,INITIAL_PLAYLIST_SELECTOR:sh,lastBandwidthSelector:nh,movingAverageBandwidthSelector:ih,comparePlaylistBandwidth:Zl,comparePlaylistResolution:eh,xhr:kc()};Object.keys(il).forEach((e=>{Object.defineProperty(Ud,e,{get(){return uu.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),il[e]},set(t){uu.log.warn(`using Vhs.${e} is UNSAFE be sure you know what you are doing`),"number"!==typeof t||t<0?uu.log.warn(`value of Vhs.${e} must be greater than or equal to 0`):il[e]=t}})}));const jd="videojs-vhs",Fd=function(e,t){const n=t.media();let i=-1;for(let r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},Bd=function(e,t){t.representations().forEach((t=>{e.addQualityLevel(t)})),Fd(e,t.playlists)};Ud.canPlaySource=function(){return uu.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Vd=(e,t,n)=>{if(!e)return e;let i={};t&&t.attributes&&t.attributes.CODECS&&(i=zl(V(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);const r=W(i.video),s=W(i.audio),o={};for(const a in e)o[a]={},s&&(o[a].audioContentType=s),r&&(o[a].videoContentType=r),t.contentProtection&&t.contentProtection[a]&&t.contentProtection[a].pssh&&(o[a].pssh=t.contentProtection[a].pssh),"string"===typeof e[a]&&(o[a].url=e[a]);return vu(e,o)},$d=(e,t)=>e.reduce(((e,n)=>{if(!n.contentProtection)return e;const i=t.reduce(((e,t)=>{const i=n.contentProtection[t];return i&&i.pssh&&(e[t]={pssh:i.pssh}),e}),{});return Object.keys(i).length&&e.push(i),e}),[]),qd=({player:e,sourceKeySystems:t,audioMedia:n,mainPlaylists:i})=>{if(!e.eme.initializeMediaKeys)return Promise.resolve();const r=n?i.concat([n]):i,s=$d(r,Object.keys(t)),o=[],a=[];return s.forEach((t=>{a.push(new Promise(((t,n)=>{e.tech_.one("keysessioncreated",t)}))),o.push(new Promise(((n,i)=>{e.eme.initializeMediaKeys({keySystems:t},(e=>{e?i(e):n()}))})))})),Promise.race([Promise.all(o),Promise.race(a)])},Hd=({player:e,sourceKeySystems:t,media:n,audioMedia:i})=>{const r=Vd(t,n,i);return!!r&&(e.currentSource().keySystems=r,!(r&&!e.eme)||(uu.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},Wd=()=>{if(!a().localStorage)return null;const e=a().localStorage.getItem(jd);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},zd=e=>{if(!a().localStorage)return!1;let t=Wd();t=t?vu(t,e):e;try{a().localStorage.setItem(jd,JSON.stringify(t))}catch(n){return!1}return t},Gd=e=>0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e;Ud.supportsNativeHls=function(){if(!c()||!c().createElement)return!1;const e=c().createElement("video");if(!uu.getTech("Html5").isSupported())return!1;const t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),Ud.supportsNativeDash=function(){return!!(c()&&c().createElement&&uu.getTech("Html5").isSupported())&&/maybe|probably/i.test(c().createElement("video").canPlayType("application/dash+xml"))}(),Ud.supportsTypeNatively=e=>"hls"===e?Ud.supportsNativeHls:"dash"===e&&Ud.supportsNativeDash,Ud.isSupported=function(){return uu.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Qd=uu.getComponent("Component");class Kd extends Qd{constructor(e,t,n){if(super(t,n.vhs),"number"===typeof n.initialBandwidth&&(this.options_.bandwidth=n.initialBandwidth),this.logger_=yu("VhsHandler"),t.options_&&t.options_.playerId){const e=uu.getPlayer(t.options_.playerId);this.player_=e}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(c(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(e=>{const t=c().fullscreenElement||c().webkitFullscreenElement||c().mozFullScreenElement||c().msFullscreenElement;t&&t.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()})),this.on(this.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()})),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=Wd();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=il.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===il.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach((e=>{"undefined"!==typeof this.source_[e]&&(this.options_[e]=this.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=Gd(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ud,this.options_.sourceType=J(t),this.options_.seekTo=e=>{this.tech_.setCurrentTime(e)},this.playlistController_=new Ed(this.options_);const n=vu({liveRangeSafeTimeDelta:Tu},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Od(n),this.playlistController_.on("error",(()=>{const e=uu.players[this.tech_.options_.playerId];let t=this.playlistController_.error;"object"!==typeof t||t.code?"string"===typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));const i=this.options_.bufferBasedABR?Ud.movingAverageBandwidthSelector(.55):Ud.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=Ud.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(e){this.playlistController_.selectPlaylist=e.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let e=this.playlistController_.mainSegmentLoader_.bandwidth;const t=a().navigator.connection||a().navigator.mozConnection||a().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){const i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set(e){this.playlistController_.mainSegmentLoader_.bandwidth=e,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const e=1/(this.bandwidth||1);let t;t=this.throughput>0?1/this.throughput:0;const n=Math.floor(1/(e+t));return n},set(){uu.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>xu(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>xu(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(()=>{this.options_.useBandwidthFromLocalStorage&&zd({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})})),this.playlistController_.on("selectedinitialmedia",(()=>{Cd(this)})),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",(()=>{this.setupEme_()})),this.on(this.playlistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=a().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),qd({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then((()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()})).catch((e=>{this.logger_("error while creating EME key session",e),this.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Hd({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(e=>{if("output-restricted"!==e.status)return;const t=this.playlistController_.main();if(!t||!t.playlists)return;const n=[];t.playlists.forEach((e=>{e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,n.push(e))})),n.length&&(uu.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...n),this.playlistController_.fastQualityChange_())})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==uu.browser.IE_VERSION&&t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=uu.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",(()=>{Bd(this.qualityLevels_,this)})),this.playlists.on("mediachange",(()=>{Fd(this.qualityLevels_,this.playlists)})))}static version(){return{"@videojs/http-streaming":Pd,"mux.js":Rd,"mpd-parser":Nd,"m3u8-parser":Ld,"aes-decrypter":Md}}version(){return this.constructor.version()}canChangeType(){return Wh.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&a().URL.revokeObjectURL&&(a().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return Wc({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,n=!0,i=2){return zc({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}const Xd={name:"videojs-http-streaming",VERSION:Pd,canHandleSource(e,t={}){const n=vu(uu.options,t);return Xd.canPlayType(e.type,n)},handleSource(e,t,n={}){const i=vu(uu.options,n);return t.vhs=new Kd(e,t,i),t.vhs.xhr=kc(),t.vhs.src(e.src,e.type),t.vhs},canPlayType(e,t={}){const{vhs:{overrideNative:n=!uu.browser.IS_ANY_SAFARI}={}}=vu(uu.options,t),i=J(e),r=i&&(!Ud.supportsTypeNatively(i)||n);return r?"maybe":""}},Yd=()=>z("avc1.4d400d,mp4a.40.2");function Jd(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Yd()&&uu.getTech("Html5").registerSourceHandler(Xd,0),uu.VhsHandler=Kd,uu.VhsSourceHandler=Xd,uu.Vhs=Ud,uu.use||uu.registerComponent("Vhs",Ud),uu.options.vhs=uu.options.vhs||{},uu.getPlugin&&uu.getPlugin("reloadSourceOnError")||uu.registerPlugin("reloadSourceOnError",Dd);var Zd={src:{type:String,onChange:function(e,t){return e.src(t)}},width:{type:Number,onChange:function(e,t){return e.width(t)},onEvent:function(e,t){e.on(["playerresize","resize"],(function(){return t(e.width())}))}},height:{type:Number,onChange:function(e,t){return e.height(t)},onEvent:function(e,t){e.on(["playerresize","resize"],(function(){return t(e.height())}))}},preload:{type:String,onChange:function(e,t){return e.preload(t)}},loop:{type:Boolean,onChange:function(e,t){return e.loop(t)}},muted:{type:Boolean,onChange:function(e,t){return e.muted(t)},onEvent:function(e,t){return e.on("volumechange",(function(){return t(e.muted())}))}},poster:{type:String,onChange:function(e,t){return e.poster(t)},onEvent:function(e,t){return e.on("posterchange",(function(){return t(e.poster())}))}},controls:{type:Boolean,onChange:function(e,t){return e.controls(t)},onEvent:function(e,t){e.on("controlsenabled",(function(){return t(!0)})),e.on("controlsdisabled",(function(){return t(!1)}))}},autoplay:{type:[Boolean,String],onChange:function(e,t){return e.autoplay(t)}},crossorigin:{type:String,onChange:function(e,t){return e.crossOrigin(t)}},crossOrigin:{type:String,onChange:function(e,t){return e.crossOrigin(t)}},playsinline:{type:Boolean,onChange:function(e,t){return e.playsinline(t)}},playsInline:{type:Boolean,onChange:function(e,t){return e.playsinline(t)}}},ep={id:{type:String},sources:{type:Array,onChange:function(e,t){return e.src(t)}},tracks:{type:Array,onChange:function(e,t){for(var n=e.remoteTextTracks(),i=(null==n?void 0:n.length)||0;i--;)e.removeRemoteTextTrack(n[i]);e.ready((function(){t.forEach((function(t){return e.addRemoteTextTrack(t,!1)}))}))}},textTrackSettings:{type:Object,onChange:function(e,t){return e.textTrackSettings.options(t)}},language:{type:String,onChange:function(e,t){return e.language(t)},onEvent:function(e,t){return e.on("languagechange",(function(){return t(e.language())}))}},languages:{type:Object},playbackRates:{type:Array,onChange:function(e,t){return e.playbackRates(null!=t?t:[])},onEvent:function(e,t){e.on("playbackrateschange",(function(){return t(e.playbackRates())}))}},audioOnlyMode:{type:Boolean,onChange:function(e,t){return e.audioOnlyMode(t)}},audioPosterMode:{type:Boolean,onChange:function(e,t){return e.audioPosterMode(t)}},responsive:{type:Boolean,onChange:function(e,t){return e.responsive(t)}},breakpoints:{type:Object,onChange:function(e,t){return e.breakpoints(t)}},fluid:{type:Boolean,onChange:function(e,t){return e.fluid(t)}},fill:{type:Boolean,onChange:function(e,t){return e.fill(t)}},aspectRatio:{type:String,onChange:function(e,t){return e.aspectRatio(t)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(e,t){return e.disablePictureInPicture(t)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},tp={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(e,t){return e.controlBar.options(t)}}},np={html5:{type:Object}},ip={volume:{type:Number,onChange:function(e,t){return e.volume(t)},onEvent:function(e,t){return e.on("volumechange",(function(){return t(e.volume())}))}},playbackRate:{type:Number,onChange:function(e,t){e.playbackRate(t),e.defaultPlaybackRate(t)},onEvent:function(e,t){e.on("ratechange",(function(){t(e.playbackRate())}))}},options:{type:Object}},rp=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zd),ep),tp),np),ip),sp=Object.keys(rp),op=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),ap=Object.keys(op);Object.values(op);var up=function(e){var t,n=null==e?void 0:e.trim().replace(/\s+/g," ");return n&&null!==(t=n.split(" "))&&void 0!==t?t:[]},cp={src:{getter:function(e){return e.src()}},currentSrc:{getter:function(e){return e.currentSrc()}},currentSource:{getter:function(e){return e.currentSource()}},width:{events:["resize","playerresize"],getter:function(e){return e.width()}},height:{events:["resize","playerresize"],getter:function(e){return e.height()}},currentWidth:{events:["resize","playerresize"],getter:function(e){return e.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(e){return e.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(e){return e.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(e){return e.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(e){return e.controls()}},volume:{events:["volumechange"],getter:function(e){return e.volume()}},muted:{events:["volumechange"],getter:function(e){return e.muted()}},poster:{events:["posterchange"],getter:function(e){return e.poster()}},seeking:{events:["seeking"],getter:function(e){return e.seeking()}},paused:{events:["pause","play","playing"],getter:function(e){return e.paused()}},ended:{events:["ended","play"],getter:function(e){return e.ended()}},currentTime:{events:["timeupdate"],getter:function(e){return e.currentTime()}},duration:{events:["durationchange"],getter:function(e){return e.duration()}},playbackRate:{events:["ratechange"],getter:function(e){return e.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(e){return e.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(e){return e.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(e){return e.isInPictureInPicture()}},isLive:{getter:function(e){var t;return null===(t=e.liveTracker)||void 0===t?void 0:t.isLive()}},language:{events:["languagechange"],getter:function(e){return e.language()}},userActive:{events:["useractive","userinactive"],getter:function(e){return e.userActive()}},readyState:{events:["loadeddata"],getter:function(e){return e.readyState()}},networkState:{events:["loadeddata","error"],getter:function(e){return e.networkState()}},error:{events:["loadeddata","error"],getter:function(e){return e.error()}},buffered:{events:["progress"],getter:function(e){return e.buffered()}},bufferedPercent:{events:["progress"],getter:function(e){return e.bufferedPercent()}},played:{events:["timeupdate"],getter:function(e){return e.played()}},seekable:{events:["progress","seeked"],getter:function(e){return e.seekable()}},audioTracks:{getter:function(e){var t;return null===(t=e.audioTracks)||void 0===t?void 0:t.call(e)}},videoTracks:{getter:function(e){var t;return null===(t=e.videoTracks)||void 0===t?void 0:t.call(e)}},textTracks:{getter:function(e){var t;return null===(t=e.textTracks)||void 0===t?void 0:t.call(e)}}},lp=sp.filter((function(e){return Boolean(rp[e].onEvent)})),hp=function(e){return"update:"+e},dp=ap.concat(lp.map(hp)),pp=sp.reduce((function(e,t){var n,i=rp[t],r=Array.isArray(i.type)?i.type:[i.type],s=Object.assign({},i);return r.includes(Boolean)&&(s.default=void 0),Object.assign(Object.assign({},e),((n={})[t]=s,n))}),{}),fp=(0,i.aZ)({name:"VueVideoPlayer",props:Object.assign(Object.assign({},pp),{class:[String,Object,Array]}),emits:dp.concat(["mounted"],["unmounted"]),setup:function(e,t){var n=(0,r.IU)(e),o=n.class,a=Jd(n,["class"]),u=(0,r.XI)(!1),c=(0,r.XI)(null),l=(0,r.XI)(null),h=(0,i.Fl)((function(){return l.value?l.value.player:null})),d=(0,r.iH)(null),p=(0,i.Fl)((function(){return d.value?(0,r.OT)(d.value):null}));return(0,i.bv)((function(){var n,r=function(e){var t,n=e.props,i=e.element,r=e.className,s=e.onEvent,o=n.options;void 0===o&&(o={});var a=Jd(n,["options"]),u={};Object.keys(a).forEach((function(e){var t=a[e];void 0!==t&&(u[e]=t)}));var c=Object.assign(Object.assign({},u),o),l=c.volume,h=c.playbackRate,d=Jd(c,["volume","playbackRate"]),p=Object.assign(Object.assign({},d),{playsinline:null!==(t=d.playsinline)&&void 0!==t?t:d.playsInline}),f=uu(i,p,(function(){var e=this;ap.forEach((function(t){e.on(t,(function(e){s(t,e)}))})),d.src&&!d.sources&&this.src(d.src),l&&Number.isFinite(l)&&this.volume(l),h&&Number.isFinite(h)&&(this.defaultPlaybackRate(h),setTimeout((function(){e.playbackRate(h)}),0))}));r&&up(r).map((function(e){return f.addClass(e)}));var m=function(e){var t;null===(t=f.options)||void 0===t||t.call(f,null!=e?e:{})};return{player:f,dispose:function(){return f.dispose()},updateClassNames:function(e,t){up(e).map((function(e){return f.removeClass(e)})),up(t).map((function(e){return f.addClass(e)}))},updateOptions:m,updatePropOption:function(e,t){var n,i,r;m(((n={})[e]=t,n)),null===(r=null===(i=rp[e])||void 0===i?void 0:i.onChange)||void 0===r||r.call(i,f,t)}}}({element:c.value,props:a,onEvent:t.emit});n={player:r.player,onEvent:t.emit},lp.forEach((function(e){var t,i;null===(i=null===(t=rp[e])||void 0===t?void 0:t.onEvent)||void 0===i||i.call(t,n.player,(function(t){n.onEvent(hp(e),t)}))})),(0,i.YP)((function(){return e.class}),(function(e,t){var n=(0,s.C_)(t),i=(0,s.C_)(e);r.updateClassNames(n,i)}),{immediate:!0}),(0,i.YP)((function(){return e.options}),(function(e){return r.updateOptions(null!=e?e:{})}),{deep:!0}),sp.filter((function(e){return"options"!==e})).forEach((function(t){(0,i.YP)((function(){return e[t]}),(function(e){return r.updatePropOption(t,e)}),{deep:!0})})),function(e,t){var n=Object.keys(cp),i=n.reduce((function(t,n){var i;return Object.assign(Object.assign({},t),((i={})[n]=cp[n].getter(e),i))}),{playing:!1,waiting:!1}),r=function(e,n){i[e]=n,t.onUpdate(e,n,Object.assign({},i))};e.on(["pause","ended"],(function(){r("playing",!1)})),e.on(["play","playing"],(function(){r("playing",!0)})),e.on("waiting",(function(){r("waiting",!0);var t=e.currentTime(),n=function(){t!==e.currentTime()&&(r("waiting",!1),e.off("timeupdate",n))};e.on("timeupdate",n)})),n.forEach((function(t){var n,i=cp[t];e.on(["loadstart","loadedmetadata"].concat(null!==(n=i.events)&&void 0!==n?n:[]),(function(){r(t,i.getter(e))}))})),t.onInit(Object.assign({},i))}(r.player,{onInit:function(e){d.value=e},onUpdate:function(e,t){d.value&&(d.value[e]=t)}}),l.value=r,u.value=!0,t.emit("mounted",{video:c.value,player:h.value,state:p.value})})),(0,i.Jd)((function(){l.value&&(l.value.dispose(),l.value=null,d.value=null,t.emit("unmounted"))})),function(){var e,n;return(0,i.h)("div",{"data-vjs-player":"",class:(0,s.C_)(o)},[(0,i.h)("video",{class:["video-js","v-video-player"],ref:c}),u.value&&(null===(n=(e=t.slots).default)||void 0===n?void 0:n.call(e,{video:c.value,player:h.value,state:p.value}))])}}}),mp=fp},5388:function(e,t,n){"use strict";n(3767),n(8585),n(8696);var i=n(5743),r=function(e,t){return void 0===t&&(t=!1),function(n,r,o){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var a=o;if(t)if(i.TextDecoder){var u=s(r.headers&&r.headers["content-type"]);try{a=new TextDecoder(u).decode(o)}catch(c){}}else a=String.fromCharCode.apply(null,new Uint8Array(o));e({cause:a})}else e(null,o)}};function s(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8")}e.exports=r},3470:function(e,t,n){"use strict";n(7658);var i=n(5743),r=n(9675),s=n(3940);l.httpHandler=n(5388);
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
var o=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();"undefined"===typeof t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t};function a(e,t){for(var n=0;n<e.length;n++)t(e[n])}function u(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function c(e,t,n){var i=e;return s(t)?(n=t,"string"===typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function l(e,t,n){return t=c(e,t,n),h(t)}function h(e){if("undefined"===typeof e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){4===p.readyState&&setTimeout(a,0)}function r(){var e=void 0;if(e=p.response?p.response:p.responseText||d(p),b)try{e=JSON.parse(e)}catch(t){}return e}function s(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,T)}function a(){if(!h){var t;clearTimeout(f),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var i=T,s=null;return 0!==t?(i={body:r(),statusCode:t,method:g,headers:{},url:m,rawRequest:p},p.getAllResponseHeaders&&(i.headers=o(p.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),n(s,i,i.body)}}var c,h,p=e.xhr||null;p||(p=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var f,m=p.url=e.uri||e.url,g=p.method=e.method||"GET",y=e.body||e.data,v=p.headers=e.headers||{},_=!!e.sync,b=!1,T={body:void 0,headers:{},statusCode:0,method:g,url:m,rawRequest:p};if("json"in e&&!1!==e.json&&(b=!0,v["accept"]||v["Accept"]||(v["Accept"]="application/json"),"GET"!==g&&"HEAD"!==g&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),y=JSON.stringify(!0===e.json?y:e.json))),p.onreadystatechange=i,p.onload=a,p.onerror=s,p.onprogress=function(){},p.onabort=function(){h=!0},p.ontimeout=s,p.open(g,m,!_,e.username,e.password),_||(p.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(f=setTimeout((function(){if(!h){h=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",s(e)}}),e.timeout)),p.setRequestHeader)for(c in v)v.hasOwnProperty(c)&&p.setRequestHeader(c,v[c]);else if(e.headers&&!u(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"===typeof e.beforeSend&&e.beforeSend(p),p.send(y||null),p}function d(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}function p(){}e.exports=l,e.exports["default"]=l,l.XMLHttpRequest=i.XMLHttpRequest||p,l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,a(["get","put","post","patch","head","delete"],(function(e){l["delete"===e?"del":e]=function(t,n,i){return n=c(t,n,i),n.method=e.toUpperCase(),h(n)}}))},1393:function(e,t,n){"use strict";n.d(t,{r:function(){return te}});n(7658);function i(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,o,a=[],u=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=s.call(n)).done)&&(a.push(i.value),a.length!==t);u=!0);}catch(l){c=!0,r=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return a}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,A(i.key),i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t=A(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function y(e){var t=f();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g(this,n)}}function v(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=d(e),null===e)break;return e}function _(){return _="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=v(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},_.apply(this,arguments)}function b(e,t){return E(e)||i(e,t)||k(e,t)||O()}function T(e){return w(e)||S(e)||k(e)||I()}function w(e){if(Array.isArray(e))return C(e)}function E(e){if(Array.isArray(e))return e}function S(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function A(e){var t=x(e,"string");return"symbol"===typeof t?t:String(t)}function D(e,t,n,i){var r,s=!1,o=0;function a(){r&&clearTimeout(r)}function u(){a(),s=!0}function c(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];var h=this,d=Date.now()-o;function p(){o=Date.now(),n.apply(h,c)}function f(){r=void 0}s||(i&&!r&&p(),a(),void 0===i&&d>e?p():!0!==t&&(r=setTimeout(i?f:p,void 0===i?e-d:e)))}return"boolean"!==typeof t&&(i=n,n=t,t=void 0),c.cancel=u,c}function P(e,t,n){return void 0===n?D(e,t,!1):D(e,n,!1!==t)}var R=Object.freeze({__proto__:null,debounce:P,throttle:D});function N(e){return function(t,n){return e(n,t)}}var L=N(R.throttle),M=N(R.debounce),U=function(e,t){while("function"===typeof e)e=e.call(t);return e},j=function(e,t){return Object.entries(e).filter((function(e){var n=b(e,1),i=n[0];return!t.includes(i)})).reduce((function(e,t){var n=b(t,2),i=n[0],r=n[1];return e[i]=r,e}),{})},F=function(e){e.graphQLErrors&&e.graphQLErrors.length&&(e.gqlError=e.graphQLErrors[0])},B="undefined"===typeof window,V={query:"_skipAllQueries",subscription:"_skipAllSubscriptions"},$=function(){function e(t,n,i){a(this,e),l(this,"type",null),l(this,"vueApolloSpecialKeys",[]),this.vm=t,this.key=n,this.initialOptions=i,this.options=Object.assign({},i),this._skip=!1,this._pollInterval=null,this._watchers=[],this._destroyed=!1,this.lastApolloOptions=null}return c(e,[{key:"autostart",value:function(){var e=this;"function"===typeof this.options.skip?this._skipWatcher=this.vm.$watch((function(){return e.options.skip.call(e.vm,e.vm,e.key)}),this.skipChanged.bind(this),{immediate:!0,deep:this.options.deep}):this.options.skip||this.allSkip?this._skip=!0:this.start(),"function"===typeof this.options.pollInterval&&(this._pollWatcher=this.vm.$watch(this.options.pollInterval.bind(this.vm),this.pollIntervalChanged.bind(this),{immediate:!0}))}},{key:"pollIntervalChanged",value:function(e,t){e!==t&&(this.pollInterval=e,null==e?this.stopPolling():this.startPolling(e))}},{key:"skipChanged",value:function(e,t){e!==t&&(this.skip=e)}},{key:"pollInterval",get:function(){return this._pollInterval},set:function(e){this._pollInterval=e}},{key:"skip",get:function(){return this._skip},set:function(e){e||this.allSkip?this.stop():this.start(),this._skip=e}},{key:"allSkip",get:function(){return this.vm.$apollo[V[this.type]]}},{key:"refresh",value:function(){this._skip||(this.stop(),this.start())}},{key:"start",value:function(){var e=this;this.starting=!0;for(var t=function(){var t=i[n];if("function"===typeof e.initialOptions[t]){var r=e.initialOptions[t].bind(e.vm);e.options[t]=r();var s=function(n){e._destroyed||(e.options[t]=n,e.refresh())};B||(s=e.options.throttle?L(s,e.options.throttle):s,s=e.options.debounce?M(s,e.options.debounce):s),e._watchers.push(e.vm.$watch(r,s,{deep:e.options.deep}))}},n=0,i=["query","document","context"];n<i.length;n++)t();if("function"===typeof this.options.variables){var r=this.executeApollo.bind(this);B||(r=this.options.throttle?L(r,this.options.throttle):r,r=this.options.debounce?M(r,this.options.debounce):r),this._watchers.push(this.vm.$watch((function(){return"function"===typeof e.options.variables?e.options.variables.call(e.vm):e.options.variables}),r,{immediate:!0,deep:this.options.deep}))}else this.executeApollo(this.options.variables)}},{key:"stop",value:function(){for(var e=0,t=this._watchers;e<t.length;e++){var n=t[e];n()}this.sub&&(this.sub.unsubscribe(),this.sub=null)}},{key:"generateApolloOptions",value:function(e){var t=j(this.options,this.vueApolloSpecialKeys);return t.variables=e,this.lastApolloOptions=t,t}},{key:"executeApollo",value:function(e){this.starting=!1}},{key:"nextResult",value:function(e){var t=e.error;t&&F(t)}},{key:"callHandlers",value:function(e){for(var t=!1,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s=0;s<e.length;s++){var o=e[s];if(o){t=!0;var a=o.apply(this.vm,i);if("undefined"!==typeof a&&!a)break}}return t}},{key:"errorHandler",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.callHandlers.apply(this,[[this.options.error,this.vm.$apollo.error,this.vm.$apollo.provider.errorHandler]].concat(t))}},{key:"catchError",value:function(e){F(e);var t=this.errorHandler(e,this.vm,this.key,this.type,this.lastApolloOptions);if(!t)if(e.graphQLErrors&&0!==e.graphQLErrors.length){console.error("GraphQL execution errors for ".concat(this.type," '").concat(this.key,"'"));for(var n=0,i=e.graphQLErrors;n<i.length;n++){var r=i[n];console.error(r)}}else if(e.networkError)console.error("Error sending the ".concat(this.type," '").concat(this.key,"'"),e.networkError);else{var s;if(console.error("[vue-apollo] An error has occurred for ".concat(this.type," '").concat(this.key,"'")),Array.isArray(e))(s=console).error.apply(s,T(e));else console.error(e)}}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.stop(),this._skipWatcher&&this._skipWatcher())}}]),e}(),q=["variables","watch","update","result","error","loadingKey","watchLoading","skip","throttle","debounce","subscribeToMore","prefetch","manual"],H=function(e){h(n,e);var t=y(n);function n(e,i,r){var s,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return a(this,n),e.$data.$apolloData&&!e.$data.$apolloData.queries[i]&&(e.$data.$apolloData.queries[i]={loading:!1}),s=t.call(this,e,i,r),l(m(s),"type","query"),l(m(s),"vueApolloSpecialKeys",q),l(m(s),"_loading",!1),l(m(s),"_linkedSubscriptions",[]),B&&(s.firstRun=new Promise((function(e,t){s._firstRunResolve=e,s._firstRunReject=t}))),B&&(s.options.fetchPolicy="network-only"),r.manual||(s.hasDataField=Object.prototype.hasOwnProperty.call(s.vm.$data,i),s.hasDataField?Object.defineProperty(s.vm.$data.$apolloData.data,i,{get:function(){return s.vm.$data[i]},enumerable:!0,configurable:!0}):Object.defineProperty(s.vm.$data,i,{get:function(){return s.vm.$data.$apolloData.data[i]},enumerable:!0,configurable:!0})),o&&s.autostart(),s}return c(n,[{key:"client",get:function(){return this.vm.$apollo.getClient(this.options)}},{key:"loading",get:function(){return this.vm.$data.$apolloData&&this.vm.$data.$apolloData.queries[this.key]?this.vm.$data.$apolloData.queries[this.key].loading:this._loading},set:function(e){this._loading!==e&&(this._loading=e,this.vm.$data.$apolloData&&this.vm.$data.$apolloData.queries[this.key]&&(this.vm.$data.$apolloData.queries[this.key].loading=e,this.vm.$data.$apolloData.loading+=e?1:-1))}},{key:"stop",value:function(){_(d(n.prototype),"stop",this).call(this),this.loadingDone(),this.observer&&(this.observer.stopPolling(),this.observer=null)}},{key:"generateApolloOptions",value:function(e){var t=_(d(n.prototype),"generateApolloOptions",this).call(this,e);return this.vm.$isServer&&delete t.pollInterval,t}},{key:"executeApollo",value:function(e){if(!this._destroyed){var t=JSON.stringify(e);if(this.sub){if(t===this.previousVariablesJson)return;this.sub.unsubscribe();for(var i=0,r=this._linkedSubscriptions;i<r.length;i++){var s=r[i];s.stop()}}if(this.previousVariablesJson=t,this.observer=this.vm.$apollo.watchQuery(this.generateApolloOptions(e)),this.startQuerySubscription(),"no-cache"!==this.options.fetchPolicy||this.options.notifyOnNetworkStatusChange){var o=this.retrieveCurrentResult();(this.options.notifyOnNetworkStatusChange||this.observer.getCurrentResult&&!o.loading)&&this.nextResult(o)}_(d(n.prototype),"executeApollo",this).call(this,e);for(var a=0,u=this._linkedSubscriptions;a<u.length;a++){var c=u[a];c.start()}}}},{key:"startQuerySubscription",value:function(){this.sub&&!this.sub.closed||(this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)}))}},{key:"retrieveCurrentResult",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.observer.getCurrentResult?this.observer.getCurrentResult():this.observer.currentResult();return(e||t.loading)&&(this.loading||this.applyLoadingModifier(1),this.loading=!0),t}},{key:"nextResult",value:function(e){_(d(n.prototype),"nextResult",this).call(this,e);var t=e.data,i=e.loading,r=e.error,s=e.errors,o=s&&s.length;if((r||o)&&this.firstRunReject(r),i||this.loadingDone(),!r&&o){var a=new Error("GraphQL error: ".concat(s.map((function(e){return e.message})).join(" | ")));Object.assign(a,{graphQLErrors:s,networkError:null}),_(d(n.prototype),"catchError",this).call(this,a)}if("none"!==this.observer.options.errorPolicy||!r&&!o){var u="function"===typeof this.options.result;null==t||(this.options.manual?u||console.error("".concat(this.key," query must have a 'result' hook in manual mode")):"function"===typeof this.options.update?this.setData(this.options.update.call(this.vm,t)):"undefined"===typeof t[this.key]&&Object.keys(t).length?console.error("Missing ".concat(this.key," attribute on result"),t):this.setData(t[this.key])),u&&this.options.result.call(this.vm,e,this.key)}}},{key:"setData",value:function(e){var t=this.hasDataField?this.vm.$data:this.vm.$data.$apolloData.data;t[this.key]=e}},{key:"catchError",value:function(e){_(d(n.prototype),"catchError",this).call(this,e),this.firstRunReject(e),this.loadingDone(e),this.nextResult(this.observer.getCurrentResult?this.observer.getCurrentResult():this.observer.currentResult()),this.resubscribeToQuery()}},{key:"resubscribeToQuery",value:function(){var e=this.observer.getLastError(),t=this.observer.getLastResult();this.observer.resetLastResults(),this.startQuerySubscription(),Object.assign(this.observer,{lastError:e,lastResult:t})}},{key:"loadingKey",get:function(){return this.options.loadingKey||this.vm.$apollo.loadingKey}},{key:"watchLoading",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.callHandlers.apply(this,[[this.options.watchLoading,this.vm.$apollo.watchLoading,this.vm.$apollo.provider.watchLoading]].concat(t,[this]))}},{key:"applyLoadingModifier",value:function(e){var t=this.loadingKey;t&&"number"===typeof this.vm[t]&&(this.vm[t]+=e),this.watchLoading(1===e,e)}},{key:"loadingDone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading&&this.applyLoadingModifier(-1),this.loading=!1,e||this.firstRunResolve()}},{key:"fetchMore",value:function(){var e,t=this;if(this.observer)return this.retrieveCurrentResult(!0),(e=this.observer).fetchMore.apply(e,arguments).then((function(e){return e.loading||t.loadingDone(),e}))}},{key:"subscribeToMore",value:function(){var e;if(this.observer)return{unsubscribe:(e=this.observer).subscribeToMore.apply(e,arguments)}}},{key:"refetch",value:function(e){var t=this;if(e&&(this.options.variables=e),this.observer){var n=this.observer.refetch(e).then((function(e){return e.loading||t.loadingDone(),e}));return this.retrieveCurrentResult(),n}}},{key:"setVariables",value:function(e,t){if(this.options.variables=e,this.observer){var n=this.observer.setVariables(e,t);return this.retrieveCurrentResult(),n}}},{key:"setOptions",value:function(e){if(Object.assign(this.options,e),this.observer){var t=this.observer.setOptions(e);return this.retrieveCurrentResult(),t}}},{key:"startPolling",value:function(){var e;if(this.observer)return(e=this.observer).startPolling.apply(e,arguments)}},{key:"stopPolling",value:function(){var e;if(this.observer)return(e=this.observer).stopPolling.apply(e,arguments)}},{key:"firstRunResolve",value:function(){this._firstRunResolve&&(this._firstRunResolve(),this._firstRunResolve=null)}},{key:"firstRunReject",value:function(e){this._firstRunReject&&(this._firstRunReject(e),this._firstRunReject=null)}},{key:"destroy",value:function(){_(d(n.prototype),"destroy",this).call(this),this.loading&&this.watchLoading(!1,-1),this.loading=!1}}]),n}($),W=function(e){h(n,e);var t=y(n);function n(e,i,r){var s,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return a(this,n),s=t.call(this,e,i,r),l(m(s),"type","subscription"),l(m(s),"vueApolloSpecialKeys",["variables","result","error","throttle","debounce","linkedQuery"]),o&&s.autostart(),s}return c(n,[{key:"generateApolloOptions",value:function(e){var t=_(d(n.prototype),"generateApolloOptions",this).call(this,e);return t.onError=this.catchError.bind(this),t}},{key:"executeApollo",value:function(e){if(!this._destroyed){var t=JSON.stringify(e);if(this.sub){if(t===this.previousVariablesJson)return;this.sub.unsubscribe()}this.previousVariablesJson=t;var i=this.generateApolloOptions(e);if("function"===typeof i.updateQuery&&(i.updateQuery=i.updateQuery.bind(this.vm)),this.options.linkedQuery){if("function"===typeof this.options.result){var r=this.options.result.bind(this.vm),s=i.updateQuery&&i.updateQuery.bind(this.vm);i.updateQuery=function(){return r.apply(void 0,arguments),s&&s.apply(void 0,arguments)}}this.sub=this.options.linkedQuery.subscribeToMore(i)}else this.observer=this.vm.$apollo.subscribe(i),this.sub=this.observer.subscribe({next:this.nextResult.bind(this),error:this.catchError.bind(this)});_(d(n.prototype),"executeApollo",this).call(this,e)}}},{key:"nextResult",value:function(e){_(d(n.prototype),"nextResult",this).call(this,e),"function"===typeof this.options.result&&this.options.result.call(this.vm,e,this.key)}},{key:"catchError",value:function(e){_(d(n.prototype),"catchError",this).call(this,e),this.skip||(this.stop(),this.start())}}]),n}($),z=function(){function e(t,n){a(this,e),this._apolloSubscriptions=[],this._watchers=[],this.vm=t,this.provider=n,this.queries={},this.subscriptions={},this.client=void 0,this.loadingKey=void 0,this.error=void 0}return c(e,[{key:"getClient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||!e.client){if("object"===o(this.client))return this.client;if(this.client){if(this.provider.clients){var t=this.provider.clients[this.client];if(!t)throw new Error("[vue-apollo] Missing client '".concat(this.client,"' in 'apolloProvider'"));return t}throw new Error("[vue-apollo] Missing 'clients' options in 'apolloProvider'")}return this.provider.defaultClient}var n=this.provider.clients[e.client];if(!n)throw new Error("[vue-apollo] Missing client '".concat(e.client,"' in 'apolloProvider'"));return n}},{key:"query",value:function(e){return this.getClient(e).query(e)}},{key:"watchQuery",value:function(e){var t=this,n=this.getClient(e).watchQuery(e),i=n.subscribe.bind(n);return n.subscribe=function(e){var n=i(e);return t._apolloSubscriptions.push(n),n},n}},{key:"mutate",value:function(e){return this.getClient(e).mutate(e)}},{key:"subscribe",value:function(e){var t=this;if(!B){var n=this.getClient(e).subscribe(e),i=n.subscribe.bind(n);return n.subscribe=function(e){var n=i(e);return t._apolloSubscriptions.push(n),n},n}}},{key:"loading",get:function(){return 0!==this.vm.$data.$apolloData.loading}},{key:"data",get:function(){return this.vm.$data.$apolloData.data}},{key:"addSmartQuery",value:function(e,t){var n=this,i=U(t,this.vm);if(!i.query){var r=i;i={query:r}}var o,a=this.vm.$options.apollo,u=this.provider.defaultOptions;if(u&&u.$query&&(o=u.$query),a&&a.$query&&(o=s(s({},o||{}),a.$query)),o)for(var c in o)"undefined"===typeof i[c]&&(i[c]=o[c]);var l=this.queries[e]=new H(this.vm,e,i,!1);if(B&&!1===i.prefetch||l.autostart(),!B){var h=i.subscribeToMore;h&&(Array.isArray(h)?h.forEach((function(t,i){n.addSmartSubscription("".concat(e).concat(i),s(s({},t),{},{linkedQuery:l}))})):this.addSmartSubscription(e,s(s({},h),{},{linkedQuery:l})))}return l}},{key:"addSmartSubscription",value:function(e,t){if(!B){t=U(t,this.vm);var n=this.subscriptions[e]=new W(this.vm,e,t,!1);if(n.autostart(),t.linkedQuery){var i=t.linkedQuery._linkedSubscriptions.findIndex((function(t){return t.key===e}));-1!==i?t.linkedQuery._linkedSubscriptions[i]=n:t.linkedQuery._linkedSubscriptions.push(n)}return n}}},{key:"defineReactiveSetter",value:function(e,t,n){var i=this;this._watchers.push(this.vm.$watch(t,(function(t){i[e]=t}),{immediate:!0,deep:n}))}},{key:"skipAllQueries",set:function(e){for(var t in this._skipAllQueries=e,this.queries)this.queries[t].skip=e}},{key:"skipAllSubscriptions",set:function(e){for(var t in this._skipAllSubscriptions=e,this.subscriptions)this.subscriptions[t].skip=e}},{key:"skipAll",set:function(e){this.skipAllQueries=e,this.skipAllSubscriptions=e}},{key:"destroy",value:function(){for(var e=0,t=this._watchers;e<t.length;e++){var n=t[e];n()}for(var i in this.queries)this.queries[i].destroy();for(var r in this.subscriptions)this.subscriptions[r].destroy();this._apolloSubscriptions.forEach((function(e){e.unsubscribe()})),this._apolloSubscriptions=null,this.vm=null}}]),e}();function G(e,t){return"undefined"!==typeof e&&Object.prototype.hasOwnProperty.call(e,t)}function Q(){var e=this,t=this.$apolloProvider;if(!this._apolloLaunched&&t){this._apolloLaunched=!0;var n=this.$options.apollo;if(n){for(var i in this.$_apolloPromises=[],n.$init||(n.$init=!0,t.defaultOptions&&(n=this.$options.apollo=Object.assign({},t.defaultOptions,n))),K(this.$apollo,"skipAll",n.$skipAll,n.$deep),K(this.$apollo,"skipAllQueries",n.$skipAllQueries,n.$deep),K(this.$apollo,"skipAllSubscriptions",n.$skipAllSubscriptions,n.$deep),K(this.$apollo,"client",n.$client,n.$deep),K(this.$apollo,"loadingKey",n.$loadingKey,n.$deep),K(this.$apollo,"error",n.$error,n.$deep),K(this.$apollo,"watchLoading",n.$watchLoading,n.$deep),Object.defineProperty(this,"$apolloData",{get:function(){return e.$data.$apolloData},enumerable:!0,configurable:!0}),n)if("$"!==i.charAt(0)){var r=n[i],s=this.$apollo.addSmartQuery(i,r);B&&(r=U(r,this),!1===t.prefetch||!1===r.prefetch||!1===n.$prefetch||s.skip||this.$_apolloPromises.push(s.firstRun))}if(n.subscribe&&console.warn("vue-apollo -> `subscribe` option is deprecated. Use the `$subscribe` option instead."),n.$subscribe)for(var o in n.$subscribe)this.$apollo.addSmartSubscription(o,n.$subscribe[o])}}}function K(e,t,n,i){"undefined"!==typeof n&&("function"===typeof n?e.defineReactiveSetter(t,n,i):e[t]=n)}function X(){this.$apollo&&(this.$apollo.destroy(),this.$apollo=null)}function Y(e,t){e.mixin({data:function(){var e={$apolloData:{queries:{},loading:0,data:{}}},t=this.$options.apollo;if(t)for(var n in t)if("$"!==n.charAt(0)){var i=t[n];i.manual||G(this.$options.props,n)||G(this.$options.computed,n)||G(this.$options.methods,n)||(e[n]=null)}return e},beforeCreate:function(){var e=this;if(this.$apollo=new z(this,t),B){var n=this.$options.ssrRender;this.$options.ssrRender=function(t){var i=n.call(e,t);return X.call(e),i}}},serverPrefetch:function(){var e=this;if(this.$_apolloPromises)return Promise.all(this.$_apolloPromises).then((function(){var t={vm:e,provider:e.$apollo.provider,loading:!1,queries:{},subscriptions:{}};X.call(e),e.$apollo=t}))["catch"]((function(t){return X.call(e),Promise.reject(t)}))},created:Q,unmounted:X})}var J=["$subscribe"],Z=function(){function e(t){if(a(this,e),!t)throw new Error("Options argument required");this.clients=t.clients||{},t.defaultClient&&(this.clients.defaultClient=this.defaultClient=t.defaultClient),this.defaultOptions=t.defaultOptions,this.watchLoading=t.watchLoading,this.errorHandler=t.errorHandler,this.prefetch=t.prefetch}return c(e,[{key:"install",value:function(e){e.config.optionMergeStrategies.apollo=function(e,t,n){if(!e)return t;if(!t)return e;for(var i=Object.assign({},j(e,J),e.data),r=Object.assign({},j(t,J),t.data),s={},o=0;o<J.length;o++){var a=J[o];s[a]=ee(e[a],t[a])}return Object.assign(s,ee(i,r))},e.config.globalProperties.$apolloProvider=this,Y(e,this)}}]),e}();function ee(e,t){return e?Object.assign(Object.assign(Object.create(null),e),t):t}function te(e){return new Z(e)}},4870:function(e,t,n){"use strict";n.d(t,{$y:function(){return Me},B:function(){return o},BK:function(){return nt},Bj:function(){return s},EB:function(){return c},Fl:function(){return at},IU:function(){return Fe},Jd:function(){return O},OT:function(){return Pe},PG:function(){return Le},SU:function(){return Ye},Um:function(){return De},Vh:function(){return rt},WL:function(){return Ze},X$:function(){return P},X3:function(){return je},XI:function(){return Ge},Xl:function(){return Be},YS:function(){return Re},ZM:function(){return tt},cE:function(){return S},dq:function(){return We},iH:function(){return ze},j:function(){return A},lk:function(){return x},nZ:function(){return u},oR:function(){return Xe},qj:function(){return Ae},qq:function(){return w},sT:function(){return k},yT:function(){return Ue}});n(7658);var i=n(7139);let r;class s{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!e&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=r;try{return r=this,e()}finally{r=t}}else 0}on(){r=this}off(){r=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function o(e){return new s(e)}function a(e,t=r){t&&t.active&&t.effects.push(e)}function u(){return r}function c(e){r&&r.cleanups.push(e)}const l=e=>{const t=new Set(e);return t.w=0,t.n=0,t},h=e=>(e.w&y)>0,d=e=>(e.n&y)>0,p=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=y},f=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];h(r)&&!d(r)?r.delete(e):t[n++]=r,r.w&=~y,r.n&=~y}t.length=n}},m=new WeakMap;let g=0,y=1;const v=30;let _;const b=Symbol(""),T=Symbol("");class w{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let e=_,t=C;while(e){if(e===this)return;e=e.parent}try{return this.parent=_,_=this,C=!0,y=1<<++g,g<=v?p(this):E(this),this.fn()}finally{g<=v&&f(this),y=1<<--g,_=this.parent,C=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function S(e,t){e.effect&&(e=e.effect.fn);const n=new w(e);t&&((0,i.l7)(n,t),t.scope&&a(n,t.scope)),t&&t.lazy||n.run();const r=n.run.bind(n);return r.effect=n,r}function k(e){e.effect.stop()}let C=!0;const I=[];function O(){I.push(C),C=!1}function x(){const e=I.pop();C=void 0===e||e}function A(e,t,n){if(C&&_){let t=m.get(e);t||m.set(e,t=new Map);let i=t.get(n);i||t.set(n,i=l());const r=void 0;D(i,r)}}function D(e,t){let n=!1;g<=v?d(e)||(e.n|=y,n=!h(e)):n=!e.has(_),n&&(e.add(_),_.deps.push(e))}function P(e,t,n,r,s,o){const a=m.get(e);if(!a)return;let u=[];if("clear"===t)u=[...a.values()];else if("length"===n&&(0,i.kJ)(e)){const e=Number(r);a.forEach(((t,n)=>{("length"===n||n>=e)&&u.push(t)}))}else switch(void 0!==n&&u.push(a.get(n)),t){case"add":(0,i.kJ)(e)?(0,i.S0)(n)&&u.push(a.get("length")):(u.push(a.get(b)),(0,i._N)(e)&&u.push(a.get(T)));break;case"delete":(0,i.kJ)(e)||(u.push(a.get(b)),(0,i._N)(e)&&u.push(a.get(T)));break;case"set":(0,i._N)(e)&&u.push(a.get(b));break}if(1===u.length)u[0]&&R(u[0]);else{const e=[];for(const t of u)t&&e.push(...t);R(l(e))}}function R(e,t){const n=(0,i.kJ)(e)?e:[...e];for(const i of n)i.computed&&N(i,t);for(const i of n)i.computed||N(i,t)}function N(e,t){(e!==_||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function L(e,t){var n;return null===(n=m.get(e))||void 0===n?void 0:n.get(t)}const M=(0,i.fY)("__proto__,__v_isRef,__isVue"),U=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(i.yk)),j=W(),F=W(!1,!0),B=W(!0),V=W(!0,!0),$=q();function q(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Fe(this);for(let t=0,r=this.length;t<r;t++)A(n,"get",t+"");const i=n[t](...e);return-1===i||!1===i?n[t](...e.map(Fe)):i}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){O();const n=Fe(this)[t].apply(this,e);return x(),n}})),e}function H(e){const t=Fe(this);return A(t,"has",e),t.hasOwnProperty(e)}function W(e=!1,t=!1){return function(n,r,s){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&s===(e?t?Ie:Ce:t?ke:Se).get(n))return n;const o=(0,i.kJ)(n);if(!e){if(o&&(0,i.RI)($,r))return Reflect.get($,r,s);if("hasOwnProperty"===r)return H}const a=Reflect.get(n,r,s);return((0,i.yk)(r)?U.has(r):M(r))?a:(e||A(n,"get",r),t?a:We(a)?o&&(0,i.S0)(r)?a:a.value:(0,i.Kn)(a)?e?Pe(a):Ae(a):a)}}const z=Q(),G=Q(!0);function Q(e=!1){return function(t,n,r,s){let o=t[n];if(Me(o)&&We(o)&&!We(r))return!1;if(!e&&(Ue(r)||Me(r)||(o=Fe(o),r=Fe(r)),!(0,i.kJ)(t)&&We(o)&&!We(r)))return o.value=r,!0;const a=(0,i.kJ)(t)&&(0,i.S0)(n)?Number(n)<t.length:(0,i.RI)(t,n),u=Reflect.set(t,n,r,s);return t===Fe(s)&&(a?(0,i.aU)(r,o)&&P(t,"set",n,r,o):P(t,"add",n,r)),u}}function K(e,t){const n=(0,i.RI)(e,t),r=e[t],s=Reflect.deleteProperty(e,t);return s&&n&&P(e,"delete",t,void 0,r),s}function X(e,t){const n=Reflect.has(e,t);return(0,i.yk)(t)&&U.has(t)||A(e,"has",t),n}function Y(e){return A(e,"iterate",(0,i.kJ)(e)?"length":b),Reflect.ownKeys(e)}const J={get:j,set:z,deleteProperty:K,has:X,ownKeys:Y},Z={get:B,set(e,t){return!0},deleteProperty(e,t){return!0}},ee=(0,i.l7)({},J,{get:F,set:G}),te=(0,i.l7)({},Z,{get:V}),ne=e=>e,ie=e=>Reflect.getPrototypeOf(e);function re(e,t,n=!1,i=!1){e=e["__v_raw"];const r=Fe(e),s=Fe(t);n||(t!==s&&A(r,"get",t),A(r,"get",s));const{has:o}=ie(r),a=i?ne:n?$e:Ve;return o.call(r,t)?a(e.get(t)):o.call(r,s)?a(e.get(s)):void(e!==r&&e.get(t))}function se(e,t=!1){const n=this["__v_raw"],i=Fe(n),r=Fe(e);return t||(e!==r&&A(i,"has",e),A(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function oe(e,t=!1){return e=e["__v_raw"],!t&&A(Fe(e),"iterate",b),Reflect.get(e,"size",e)}function ae(e){e=Fe(e);const t=Fe(this),n=ie(t),i=n.has.call(t,e);return i||(t.add(e),P(t,"add",e,e)),this}function ue(e,t){t=Fe(t);const n=Fe(this),{has:r,get:s}=ie(n);let o=r.call(n,e);o||(e=Fe(e),o=r.call(n,e));const a=s.call(n,e);return n.set(e,t),o?(0,i.aU)(t,a)&&P(n,"set",e,t,a):P(n,"add",e,t),this}function ce(e){const t=Fe(this),{has:n,get:i}=ie(t);let r=n.call(t,e);r||(e=Fe(e),r=n.call(t,e));const s=i?i.call(t,e):void 0,o=t.delete(e);return r&&P(t,"delete",e,void 0,s),o}function le(){const e=Fe(this),t=0!==e.size,n=void 0,i=e.clear();return t&&P(e,"clear",void 0,void 0,n),i}function he(e,t){return function(n,i){const r=this,s=r["__v_raw"],o=Fe(s),a=t?ne:e?$e:Ve;return!e&&A(o,"iterate",b),s.forEach(((e,t)=>n.call(i,a(e),a(t),r)))}}function de(e,t,n){return function(...r){const s=this["__v_raw"],o=Fe(s),a=(0,i._N)(o),u="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,l=s[e](...r),h=n?ne:t?$e:Ve;return!t&&A(o,"iterate",c?T:b),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:u?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function pe(e){return function(...t){return"delete"!==e&&this}}function fe(){const e={get(e){return re(this,e)},get size(){return oe(this)},has:se,add:ae,set:ue,delete:ce,clear:le,forEach:he(!1,!1)},t={get(e){return re(this,e,!1,!0)},get size(){return oe(this)},has:se,add:ae,set:ue,delete:ce,clear:le,forEach:he(!1,!0)},n={get(e){return re(this,e,!0)},get size(){return oe(this,!0)},has(e){return se.call(this,e,!0)},add:pe("add"),set:pe("set"),delete:pe("delete"),clear:pe("clear"),forEach:he(!0,!1)},i={get(e){return re(this,e,!0,!0)},get size(){return oe(this,!0)},has(e){return se.call(this,e,!0)},add:pe("add"),set:pe("set"),delete:pe("delete"),clear:pe("clear"),forEach:he(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{e[r]=de(r,!1,!1),n[r]=de(r,!0,!1),t[r]=de(r,!1,!0),i[r]=de(r,!0,!0)})),[e,n,t,i]}const[me,ge,ye,ve]=fe();function _e(e,t){const n=t?e?ve:ye:e?ge:me;return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get((0,i.RI)(n,r)&&r in t?n:t,r,s)}const be={get:_e(!1,!1)},Te={get:_e(!1,!0)},we={get:_e(!0,!1)},Ee={get:_e(!0,!0)};const Se=new WeakMap,ke=new WeakMap,Ce=new WeakMap,Ie=new WeakMap;function Oe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xe(e){return e["__v_skip"]||!Object.isExtensible(e)?0:Oe((0,i.W7)(e))}function Ae(e){return Me(e)?e:Ne(e,!1,J,be,Se)}function De(e){return Ne(e,!1,ee,Te,ke)}function Pe(e){return Ne(e,!0,Z,we,Ce)}function Re(e){return Ne(e,!0,te,Ee,Ie)}function Ne(e,t,n,r,s){if(!(0,i.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=s.get(e);if(o)return o;const a=xe(e);if(0===a)return e;const u=new Proxy(e,2===a?r:n);return s.set(e,u),u}function Le(e){return Me(e)?Le(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Me(e){return!(!e||!e["__v_isReadonly"])}function Ue(e){return!(!e||!e["__v_isShallow"])}function je(e){return Le(e)||Me(e)}function Fe(e){const t=e&&e["__v_raw"];return t?Fe(t):e}function Be(e){return(0,i.Nj)(e,"__v_skip",!0),e}const Ve=e=>(0,i.Kn)(e)?Ae(e):e,$e=e=>(0,i.Kn)(e)?Pe(e):e;function qe(e){C&&_&&(e=Fe(e),D(e.dep||(e.dep=l())))}function He(e,t){e=Fe(e);const n=e.dep;n&&R(n)}function We(e){return!(!e||!0!==e.__v_isRef)}function ze(e){return Qe(e,!1)}function Ge(e){return Qe(e,!0)}function Qe(e,t){return We(e)?e:new Ke(e,t)}class Ke{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Fe(e),this._value=t?e:Ve(e)}get value(){return qe(this),this._value}set value(e){const t=this.__v_isShallow||Ue(e)||Me(e);e=t?e:Fe(e),(0,i.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ve(e),He(this,e))}}function Xe(e){He(e,void 0)}function Ye(e){return We(e)?e.value:e}const Je={get:(e,t,n)=>Ye(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return We(r)&&!We(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Ze(e){return Le(e)?e:new Proxy(e,Je)}class et{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>qe(this)),(()=>He(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function tt(e){return new et(e)}function nt(e){const t=(0,i.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=rt(e,n);return t}class it{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return L(Fe(this._object),this._key)}}function rt(e,t,n){const i=e[t];return We(i)?i:new it(e,t,n)}var st;class ot{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[st]=!1,this._dirty=!0,this.effect=new w(e,(()=>{this._dirty||(this._dirty=!0,He(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const e=Fe(this);return qe(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function at(e,t,n=!1){let r,s;const o=(0,i.mf)(e);o?(r=e,s=i.dG):(r=e.get,s=e.set);const a=new ot(r,s,o||!s,n);return a}st="__v_isReadonly"},3396:function(e,t,n){"use strict";n.d(t,{$d:function(){return u},$y:function(){return i.$y},Ah:function(){return Je},B:function(){return i.B},BK:function(){return i.BK},Bj:function(){return i.Bj},Bz:function(){return Oi},C3:function(){return Vn},C_:function(){return r.C_},Cn:function(){return $},EB:function(){return i.EB},Eo:function(){return hn},F4:function(){return Qn},FN:function(){return ui},Fl:function(){return Ci},G:function(){return Wi},HX:function(){return q},HY:function(){return kn},Ho:function(){return Kn},IU:function(){return i.IU},JJ:function(){return le},Jd:function(){return Ye},KU:function(){return a},Ko:function(){return pt},LL:function(){return ct},MW:function(){return Ii},MX:function(){return Vi},Mr:function(){return Bi},Nv:function(){return ft},OT:function(){return i.OT},Ob:function(){return Ue},P$:function(){return Se},PG:function(){return i.PG},Q2:function(){return lt},Q6:function(){return Ae},RC:function(){return Re},Rh:function(){return pe},Rr:function(){return Di},S3:function(){return c},SU:function(){return i.SU},U2:function(){return Ce},Uc:function(){return ji},Uk:function(){return Xn},Um:function(){return i.Um},Us:function(){return ln},Vh:function(){return i.Vh},WI:function(){return mt},WL:function(){return i.WL},WY:function(){return xi},Wm:function(){return zn},Wu:function(){return o},X3:function(){return i.X3},XI:function(){return i.XI},Xl:function(){return i.Xl},Xn:function(){return Ke},Y1:function(){return vi},Y3:function(){return b},Y8:function(){return Te},YP:function(){return ge},YS:function(){return i.YS},Yq:function(){return et},ZK:function(){return s},ZM:function(){return i.ZM},Zq:function(){return Fi},_:function(){return Wn},_A:function(){return r._A},aZ:function(){return De},b9:function(){return Ai},bT:function(){return tt},bv:function(){return Qe},cE:function(){return i.cE},d1:function(){return nt},dD:function(){return V},dG:function(){return ni},dl:function(){return Fe},dq:function(){return i.dq},ec:function(){return N},eq:function(){return zi},f3:function(){return he},h:function(){return Ui},hR:function(){return r.hR},i8:function(){return qi},iD:function(){return Un},iH:function(){return i.iH},ic:function(){return Xe},j4:function(){return jn},j5:function(){return r.j5},kC:function(){return r.kC},kq:function(){return Jn},l1:function(){return Pi},lA:function(){return Fn},lR:function(){return En},m0:function(){return de},mW:function(){return D},mv:function(){return Mi},mx:function(){return yt},n4:function(){return ee},nK:function(){return xe},nQ:function(){return $i},nZ:function(){return i.nZ},oR:function(){return i.oR},of:function(){return _i},p1:function(){return Li},qG:function(){return On},qZ:function(){return Ln},qb:function(){return k},qj:function(){return i.qj},qq:function(){return i.qq},ry:function(){return Gi},sT:function(){return i.sT},se:function(){return Be},sv:function(){return In},uE:function(){return Yn},u_:function(){return Ni},up:function(){return at},vl:function(){return Ze},vs:function(){return r.vs},w5:function(){return H},wF:function(){return Ge},wg:function(){return Dn},wy:function(){return it},xv:function(){return Cn},yT:function(){return i.yT},yX:function(){return fe},zw:function(){return r.zw}});n(7658),n(541);var i=n(4870),r=n(7139);function s(e,...t){}function o(e,t){}function a(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){c(s,t,n)}return r}function u(e,t,n,i){if((0,r.mf)(e)){const s=a(e,t,n,i);return s&&(0,r.tI)(s)&&s.catch((e=>{c(e,t,n)})),s}const s=[];for(let r=0;r<e.length;r++)s.push(u(e[r],t,n,i));return s}function c(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const r=t.proxy,s=n;while(i){const t=i.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,s))return;i=i.parent}const o=t.appContext.config.errorHandler;if(o)return void a(o,null,10,[e,r,s])}l(e,n,r,i)}function l(e,t,n,i=!0){console.error(e)}let h=!1,d=!1;const p=[];let f=0;const m=[];let g=null,y=0;const v=Promise.resolve();let _=null;function b(e){const t=_||v;return e?t.then(this?e.bind(this):e):t}function T(e){let t=f+1,n=p.length;while(t<n){const i=t+n>>>1,r=O(p[i]);r<e?t=i+1:n=i}return t}function w(e){p.length&&p.includes(e,h&&e.allowRecurse?f+1:f)||(null==e.id?p.push(e):p.splice(T(e.id),0,e),E())}function E(){h||d||(d=!0,_=v.then(A))}function S(e){const t=p.indexOf(e);t>f&&p.splice(t,1)}function k(e){(0,r.kJ)(e)?m.push(...e):g&&g.includes(e,e.allowRecurse?y+1:y)||m.push(e),E()}function C(e,t=(h?f+1:0)){for(0;t<p.length;t++){const e=p[t];e&&e.pre&&(p.splice(t,1),t--,e())}}function I(e){if(m.length){const e=[...new Set(m)];if(m.length=0,g)return void g.push(...e);for(g=e,g.sort(((e,t)=>O(e)-O(t))),y=0;y<g.length;y++)g[y]();g=null,y=0}}const O=e=>null==e.id?1/0:e.id,x=(e,t)=>{const n=O(e)-O(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function A(e){d=!1,h=!0,p.sort(x);r.dG;try{for(f=0;f<p.length;f++){const e=p[f];e&&!1!==e.active&&a(e,null,14)}}finally{f=0,p.length=0,I(e),h=!1,_=null,(p.length||m.length)&&A(e)}}new Set;new Map;let D,P=[],R=!1;function N(e,t){var n,i;if(D=e,D)D.enabled=!0,P.forEach((({event:e,args:t})=>D.emit(e,...t))),P=[];else if("undefined"!==typeof window&&window.HTMLElement&&!(null===(i=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.includes("jsdom"))){const e=t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[];e.push((e=>{N(e,t)})),setTimeout((()=>{D||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,R=!0,P=[])}),3e3)}else R=!0,P=[]}function L(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||r.kT;let s=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in i){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:o}=i[e]||r.kT;o&&(s=n.map((e=>(0,r.HD)(e)?e.trim():e))),t&&(s=n.map(r.h5))}let c;let l=i[c=(0,r.hR)(t)]||i[c=(0,r.hR)((0,r._A)(t))];!l&&o&&(l=i[c=(0,r.hR)((0,r.rs)(t))]),l&&u(l,e,6,s);const h=i[c+"Once"];if(h){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,u(h,e,6,s)}}function M(e,t,n=!1){const i=t.emitsCache,s=i.get(e);if(void 0!==s)return s;const o=e.emits;let a={},u=!1;if(!(0,r.mf)(e)){const i=e=>{const n=M(e,t,!0);n&&(u=!0,(0,r.l7)(a,n))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return o||u?((0,r.kJ)(o)?o.forEach((e=>a[e]=null)):(0,r.l7)(a,o),(0,r.Kn)(e)&&i.set(e,a),a):((0,r.Kn)(e)&&i.set(e,null),null)}function U(e,t){return!(!e||!(0,r.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,r.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,r.RI)(e,(0,r.rs)(t))||(0,r.RI)(e,t))}let j=null,F=null;function B(e){const t=j;return j=e,F=e&&e.type.__scopeId||null,t}function V(e){F=e}function $(){F=null}const q=e=>H;function H(e,t=j,n){if(!t)return e;if(e._n)return e;const i=(...n)=>{i._d&&Ln(-1);const r=B(t);let s;try{s=e(...n)}finally{B(r),i._d&&Ln(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function W(e){const{type:t,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[a],slots:u,attrs:l,emit:h,render:d,renderCache:p,data:f,setupState:m,ctx:g,inheritAttrs:y}=e;let v,_;const b=B(e);try{if(4&n.shapeFlag){const e=s||i;v=Zn(d.call(e,e,p,o,m,f,g)),_=l}else{const e=t;0,v=Zn(e.length>1?e(o,{attrs:l,slots:u,emit:h}):e(o,null)),_=t.props?l:G(l)}}catch(w){xn.length=0,c(w,e,1),v=zn(In)}let T=v;if(_&&!1!==y){const e=Object.keys(_),{shapeFlag:t}=T;e.length&&7&t&&(a&&e.some(r.tR)&&(_=Q(_,a)),T=Kn(T,_))}return n.dirs&&(T=Kn(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),v=T,B(b),v}function z(e){let t;for(let n=0;n<e.length;n++){const i=e[n];if(!Fn(i))return;if(i.type!==In||"v-if"===i.children){if(t)return;t=i}}return t}const G=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,r.F7)(n))&&((t||(t={}))[n]=e[n]);return t},Q=(e,t)=>{const n={};for(const i in e)(0,r.tR)(i)&&i.slice(9)in t||(n[i]=e[i]);return n};function K(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:u}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&u>=0))return!(!r&&!a||a&&a.$stable)||i!==o&&(i?!o||X(i,o,c):!!o);if(1024&u)return!0;if(16&u)return i?X(i,o,c):!!o;if(8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==i[n]&&!U(c,n))return!0}}return!1}function X(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!U(n,s))return!0}return!1}function Y({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const J=e=>e.__isSuspense,Z={name:"Suspense",__isSuspense:!0,process(e,t,n,i,r,s,o,a,u,c){null==e?ne(t,n,i,r,s,o,a,u,c):ie(e,t,n,i,r,o,a,u,c)},hydrate:se,create:re,normalize:oe},ee=Z;function te(e,t){const n=e.props&&e.props[t];(0,r.mf)(n)&&n()}function ne(e,t,n,i,r,s,o,a,u){const{p:c,o:{createElement:l}}=u,h=l("div"),d=e.suspense=re(e,r,i,t,h,n,s,o,a,u);c(null,d.pendingBranch=e.ssContent,h,null,i,d,s,o),d.deps>0?(te(e,"onPending"),te(e,"onFallback"),c(null,e.ssFallback,t,n,i,null,s,o),ce(d,e.ssFallback)):d.resolve()}function ie(e,t,n,i,r,s,o,a,{p:u,um:c,o:{createElement:l}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,p=t.ssFallback,{activeBranch:f,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,Bn(d,m)?(u(m,d,h.hiddenContainer,null,r,h,s,o,a),h.deps<=0?h.resolve():g&&(u(f,p,n,i,r,null,s,o,a),ce(h,p))):(h.pendingId++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,r,h),h.deps=0,h.effects.length=0,h.hiddenContainer=l("div"),g?(u(null,d,h.hiddenContainer,null,r,h,s,o,a),h.deps<=0?h.resolve():(u(f,p,n,i,r,null,s,o,a),ce(h,p))):f&&Bn(d,f)?(u(f,d,n,i,r,h,s,o,a),h.resolve(!0)):(u(null,d,h.hiddenContainer,null,r,h,s,o,a),h.deps<=0&&h.resolve()));else if(f&&Bn(d,f))u(f,d,n,i,r,h,s,o,a),ce(h,d);else if(te(t,"onPending"),h.pendingBranch=d,h.pendingId++,u(null,d,h.hiddenContainer,null,r,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout((()=>{h.pendingId===t&&h.fallback(p)}),e):0===e&&h.fallback(p)}}function re(e,t,n,i,s,o,a,u,l,h,d=!1){const{p:p,m:f,um:m,n:g,o:{parentNode:y,remove:v}}=h,_=e.props?(0,r.He)(e.props.timeout):void 0;const b={vnode:e,parent:t,parentComponent:n,isSVG:a,container:i,hiddenContainer:s,anchor:o,deps:0,pendingId:0,timeout:"number"===typeof _?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:d,isUnmounted:!1,effects:[],resolve(e=!1){const{vnode:t,activeBranch:n,pendingBranch:i,pendingId:r,effects:s,parentComponent:o,container:a}=b;if(b.isHydrating)b.isHydrating=!1;else if(!e){const e=n&&i.transition&&"out-in"===i.transition.mode;e&&(n.transition.afterLeave=()=>{r===b.pendingId&&f(i,a,t,0)});let{anchor:t}=b;n&&(t=g(n),m(n,o,b,!0)),e||f(i,a,t,0)}ce(b,i),b.pendingBranch=null,b.isInFallback=!1;let u=b.parent,c=!1;while(u){if(u.pendingBranch){u.effects.push(...s),c=!0;break}u=u.parent}c||k(s),b.effects=[],te(t,"onResolve")},fallback(e){if(!b.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:i,container:r,isSVG:s}=b;te(t,"onFallback");const o=g(n),a=()=>{b.isInFallback&&(p(null,e,r,o,i,null,s,u,l),ce(b,e))},c=e.transition&&"out-in"===e.transition.mode;c&&(n.transition.afterLeave=a),b.isInFallback=!0,m(n,i,null,!0),c||a()},move(e,t,n){b.activeBranch&&f(b.activeBranch,e,t,n),b.container=e},next(){return b.activeBranch&&g(b.activeBranch)},registerDep(e,t){const n=!!b.pendingBranch;n&&b.deps++;const i=e.vnode.el;e.asyncDep.catch((t=>{c(t,e,0)})).then((r=>{if(e.isUnmounted||b.isUnmounted||b.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:s}=e;yi(e,r,!1),i&&(s.el=i);const o=!i&&e.subTree.el;t(e,s,y(i||e.subTree.el),i?null:g(e.subTree),b,a,l),o&&v(o),Y(e,s.el),n&&0===--b.deps&&b.resolve()}))},unmount(e,t){b.isUnmounted=!0,b.activeBranch&&m(b.activeBranch,n,e,t),b.pendingBranch&&m(b.pendingBranch,n,e,t)}};return b}function se(e,t,n,i,r,s,o,a,u){const c=t.suspense=re(t,i,n,e.parentNode,document.createElement("div"),null,r,s,o,a,!0),l=u(e,c.pendingBranch=t.ssContent,n,c,s,o);return 0===c.deps&&c.resolve(),l}function oe(e){const{shapeFlag:t,children:n}=e,i=32&t;e.ssContent=ae(i?n.default:n),e.ssFallback=i?ae(n.fallback):zn(In)}function ae(e){let t;if((0,r.mf)(e)){const n=Nn&&e._c;n&&(e._d=!1,Dn()),e=e(),n&&(e._d=!0,t=An,Pn())}if((0,r.kJ)(e)){const t=z(e);0,e=t}return e=Zn(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function ue(e,t){t&&t.pendingBranch?(0,r.kJ)(e)?t.effects.push(...e):t.effects.push(e):k(e)}function ce(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e,r=n.el=t.el;i&&i.subTree===n&&(i.vnode.el=r,Y(i,r))}function le(e,t){if(ai){let n=ai.provides;const i=ai.parent&&ai.parent.provides;i===n&&(n=ai.provides=Object.create(i)),n[e]=t}else 0}function he(e,t,n=!1){const i=ai||j;if(i){const s=null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&(0,r.mf)(t)?t.call(i.proxy):t}else 0}function de(e,t){return ye(e,null,t)}function pe(e,t){return ye(e,null,{flush:"post"})}function fe(e,t){return ye(e,null,{flush:"sync"})}const me={};function ge(e,t,n){return ye(e,t,n)}function ye(e,t,{immediate:n,deep:s,flush:o,onTrack:c,onTrigger:l}=r.kT){const h=(0,i.nZ)()===(null===ai||void 0===ai?void 0:ai.scope)?ai:null;let d,p,f=!1,m=!1;if((0,i.dq)(e)?(d=()=>e.value,f=(0,i.yT)(e)):(0,i.PG)(e)?(d=()=>e,s=!0):(0,r.kJ)(e)?(m=!0,f=e.some((e=>(0,i.PG)(e)||(0,i.yT)(e))),d=()=>e.map((e=>(0,i.dq)(e)?e.value:(0,i.PG)(e)?be(e):(0,r.mf)(e)?a(e,h,2):void 0))):d=(0,r.mf)(e)?t?()=>a(e,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),u(e,h,3,[y])}:r.dG,t&&s){const e=d;d=()=>be(e())}let g,y=e=>{p=T.onStop=()=>{a(e,h,4)}};if(fi){if(y=r.dG,t?n&&u(t,h,3,[d(),m?[]:void 0,y]):d(),"sync"!==o)return r.dG;{const e=Fi();g=e.__watcherHandles||(e.__watcherHandles=[])}}let v=m?new Array(e.length).fill(me):me;const _=()=>{if(T.active)if(t){const e=T.run();(s||f||(m?e.some(((e,t)=>(0,r.aU)(e,v[t]))):(0,r.aU)(e,v)))&&(p&&p(),u(t,h,3,[e,v===me?void 0:m&&v[0]===me?[]:v,y]),v=e)}else T.run()};let b;_.allowRecurse=!!t,"sync"===o?b=_:"post"===o?b=()=>cn(_,h&&h.suspense):(_.pre=!0,h&&(_.id=h.uid),b=()=>w(_));const T=new i.qq(d,b);t?n?_():v=T.run():"post"===o?cn(T.run.bind(T),h&&h.suspense):T.run();const E=()=>{T.stop(),h&&h.scope&&(0,r.Od)(h.scope.effects,T)};return g&&g.push(E),E}function ve(e,t,n){const i=this.proxy,s=(0,r.HD)(e)?e.includes(".")?_e(i,e):()=>i[e]:e.bind(i,i);let o;(0,r.mf)(t)?o=t:(o=t.handler,n=t);const a=ai;ci(this);const u=ye(s,o.bind(i),n);return a?ci(a):li(),u}function _e(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function be(e,t){if(!(0,r.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,i.dq)(e))be(e.value,t);else if((0,r.kJ)(e))for(let n=0;n<e.length;n++)be(e[n],t);else if((0,r.DM)(e)||(0,r._N)(e))e.forEach((e=>{be(e,t)}));else if((0,r.PO)(e))for(const n in e)be(e[n],t);return e}function Te(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qe((()=>{e.isMounted=!0})),Ye((()=>{e.isUnmounting=!0})),e}const we=[Function,Array],Ee={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:we,onEnter:we,onAfterEnter:we,onEnterCancelled:we,onBeforeLeave:we,onLeave:we,onAfterLeave:we,onLeaveCancelled:we,onBeforeAppear:we,onAppear:we,onAfterAppear:we,onAppearCancelled:we},setup(e,{slots:t}){const n=ui(),r=Te();let s;return()=>{const o=t.default&&Ae(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let e=!1;for(const t of o)if(t.type!==In){0,a=t,e=!0;break}}const u=(0,i.IU)(e),{mode:c}=u;if(r.isLeaving)return Ie(a);const l=Oe(a);if(!l)return Ie(a);const h=Ce(l,u,r,n);xe(l,h);const d=n.subTree,p=d&&Oe(d);let f=!1;const{getTransitionKey:m}=l.type;if(m){const e=m();void 0===s?s=e:e!==s&&(s=e,f=!0)}if(p&&p.type!==In&&(!Bn(l,p)||f)){const e=Ce(p,u,r,n);if(xe(p,e),"out-in"===c)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},Ie(a);"in-out"===c&&l.type!==In&&(e.delayLeave=(e,t,n)=>{const i=ke(r,p);i[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},Se=Ee;function ke(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Ce(e,t,n,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:_,onAppearCancelled:b}=t,T=String(e.key),w=ke(n,e),E=(e,t)=>{e&&u(e,i,9,t)},S=(e,t)=>{const n=t[1];E(e,t),(0,r.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},k={mode:o,persisted:a,beforeEnter(t){let i=c;if(!n.isMounted){if(!s)return;i=y||c}t._leaveCb&&t._leaveCb(!0);const r=w[T];r&&Bn(e,r)&&r.el._leaveCb&&r.el._leaveCb(),E(i,[t])},enter(e){let t=l,i=h,r=d;if(!n.isMounted){if(!s)return;t=v||l,i=_||h,r=b||d}let o=!1;const a=e._enterCb=t=>{o||(o=!0,E(t?r:i,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?S(t,[e,a]):a()},leave(t,i){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return i();E(p,[t]);let s=!1;const o=t._leaveCb=n=>{s||(s=!0,i(),E(n?g:m,[t]),t._leaveCb=void 0,w[r]===e&&delete w[r])};w[r]=e,f?S(f,[t,o]):o()},clone(e){return Ce(e,t,n,i)}};return k}function Ie(e){if(Le(e))return e=Kn(e),e.children=null,e}function Oe(e){return Le(e)?e.children?e.children[0]:void 0:e}function xe(e,t){6&e.shapeFlag&&e.component?xe(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ae(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:s);o.type===kn?(128&o.patchFlag&&r++,i=i.concat(Ae(o.children,t,a))):(t||o.type!==In)&&i.push(null!=a?Kn(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function De(e){return(0,r.mf)(e)?{setup:e,name:e.name}:e}const Pe=e=>!!e.type.__asyncLoader;function Re(e){(0,r.mf)(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:s,delay:o=200,timeout:a,suspensible:u=!0,onError:l}=e;let h,d=null,p=0;const f=()=>(p++,d=null,m()),m=()=>{let e;return d||(e=d=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),l)return new Promise(((t,n)=>{const i=()=>t(f()),r=()=>n(e);l(e,i,r,p+1)}));throw e})).then((t=>e!==d&&d?d:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),h=t,t))))};return De({name:"AsyncComponentWrapper",__asyncLoader:m,get __asyncResolved(){return h},setup(){const e=ai;if(h)return()=>Ne(h,e);const t=t=>{d=null,c(t,e,13,!s)};if(u&&e.suspense||fi)return m().then((t=>()=>Ne(t,e))).catch((e=>(t(e),()=>s?zn(s,{error:e}):null)));const r=(0,i.iH)(!1),l=(0,i.iH)(),p=(0,i.iH)(!!o);return o&&setTimeout((()=>{p.value=!1}),o),null!=a&&setTimeout((()=>{if(!r.value&&!l.value){const e=new Error(`Async component timed out after ${a}ms.`);t(e),l.value=e}}),a),m().then((()=>{r.value=!0,e.parent&&Le(e.parent.vnode)&&w(e.parent.update)})).catch((e=>{t(e),l.value=e})),()=>r.value&&h?Ne(h,e):l.value&&s?zn(s,{error:l.value}):n&&!p.value?zn(n):void 0}})}function Ne(e,t){const{ref:n,props:i,children:r,ce:s}=t.vnode,o=zn(e,i,r);return o.ref=n,o.ce=s,delete t.vnode.ce,o}const Le=e=>e.type.__isKeepAlive,Me={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=ui(),i=n.ctx;if(!i.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const s=new Map,o=new Set;let a=null;const u=n.suspense,{renderer:{p:c,m:l,um:h,o:{createElement:d}}}=i,p=d("div");function f(e){qe(e),h(e,n,u,!0)}function m(e){s.forEach(((t,n)=>{const i=Si(t.type);!i||e&&e(i)||g(n)}))}function g(e){const t=s.get(e);a&&Bn(t,a)?a&&qe(a):f(t),s.delete(e),o.delete(e)}i.activate=(e,t,n,i,s)=>{const o=e.component;l(e,t,n,0,u),c(o.vnode,e,t,n,o,u,i,e.slotScopeIds,s),cn((()=>{o.isDeactivated=!1,o.a&&(0,r.ir)(o.a);const t=e.props&&e.props.onVnodeMounted;t&&ii(t,o.parent,e)}),u)},i.deactivate=e=>{const t=e.component;l(e,p,null,1,u),cn((()=>{t.da&&(0,r.ir)(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&ii(n,t.parent,e),t.isDeactivated=!0}),u)},ge((()=>[e.include,e.exclude]),(([e,t])=>{e&&m((t=>je(e,t))),t&&m((e=>!je(t,e)))}),{flush:"post",deep:!0});let y=null;const v=()=>{null!=y&&s.set(y,He(n.subTree))};return Qe(v),Xe(v),Ye((()=>{s.forEach((e=>{const{subTree:t,suspense:i}=n,r=He(t);if(e.type!==r.type||e.key!==r.key)f(e);else{qe(r);const e=r.component.da;e&&cn(e,i)}}))})),()=>{if(y=null,!t.default)return null;const n=t.default(),i=n[0];if(n.length>1)return a=null,n;if(!Fn(i)||!(4&i.shapeFlag)&&!(128&i.shapeFlag))return a=null,i;let r=He(i);const u=r.type,c=Si(Pe(r)?r.type.__asyncResolved||{}:u),{include:l,exclude:h,max:d}=e;if(l&&(!c||!je(l,c))||h&&c&&je(h,c))return a=r,i;const p=null==r.key?u:r.key,f=s.get(p);return r.el&&(r=Kn(r),128&i.shapeFlag&&(i.ssContent=r)),y=p,f?(r.el=f.el,r.component=f.component,r.transition&&xe(r,r.transition),r.shapeFlag|=512,o.delete(p),o.add(p)):(o.add(p),d&&o.size>parseInt(d,10)&&g(o.values().next().value)),r.shapeFlag|=256,a=r,J(i.type)?i:r}}},Ue=Me;function je(e,t){return(0,r.kJ)(e)?e.some((e=>je(e,t))):(0,r.HD)(e)?e.split(",").includes(t):!!(0,r.Kj)(e)&&e.test(t)}function Fe(e,t){Ve(e,"a",t)}function Be(e,t){Ve(e,"da",t)}function Ve(e,t,n=ai){const i=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(We(t,i,n),n){let e=n.parent;while(e&&e.parent)Le(e.parent.vnode)&&$e(i,t,n,e),e=e.parent}}function $e(e,t,n,i){const s=We(t,e,i,!0);Je((()=>{(0,r.Od)(i[t],s)}),n)}function qe(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function He(e){return 128&e.shapeFlag?e.ssContent:e}function We(e,t,n=ai,r=!1){if(n){const s=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.Jd)(),ci(n);const s=u(t,n,e,r);return li(),(0,i.lk)(),s});return r?s.unshift(o):s.push(o),o}}const ze=e=>(t,n=ai)=>(!fi||"sp"===e)&&We(e,((...e)=>t(...e)),n),Ge=ze("bm"),Qe=ze("m"),Ke=ze("bu"),Xe=ze("u"),Ye=ze("bum"),Je=ze("um"),Ze=ze("sp"),et=ze("rtg"),tt=ze("rtc");function nt(e,t=ai){We("ec",e,t)}function it(e,t){const n=j;if(null===n)return e;const i=Ei(n)||n.proxy,s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,n,a,u=r.kT]=t[o];e&&((0,r.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&be(n),s.push({dir:e,instance:i,value:n,oldValue:void 0,arg:a,modifiers:u}))}return e}function rt(e,t,n,r){const s=e.dirs,o=t&&t.dirs;for(let a=0;a<s.length;a++){const c=s[a];o&&(c.oldValue=o[a].value);let l=c.dir[r];l&&((0,i.Jd)(),u(l,n,8,[e.el,c,e,t]),(0,i.lk)())}}const st="components",ot="directives";function at(e,t){return ht(st,e,!0,t)||e}const ut=Symbol();function ct(e){return(0,r.HD)(e)?ht(st,e,!1)||e:e||ut}function lt(e){return ht(ot,e)}function ht(e,t,n=!0,i=!1){const s=j||ai;if(s){const n=s.type;if(e===st){const e=Si(n,!1);if(e&&(e===t||e===(0,r._A)(t)||e===(0,r.kC)((0,r._A)(t))))return n}const o=dt(s[e]||n[e],t)||dt(s.appContext[e],t);return!o&&i?n:o}}function dt(e,t){return e&&(e[t]||e[(0,r._A)(t)]||e[(0,r.kC)((0,r._A)(t))])}function pt(e,t,n,i){let s;const o=n&&n[i];if((0,r.kJ)(e)||(0,r.HD)(e)){s=new Array(e.length);for(let n=0,i=e.length;n<i;n++)s[n]=t(e[n],n,void 0,o&&o[n])}else if("number"===typeof e){0,s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,o&&o[n])}else if((0,r.Kn)(e))if(e[Symbol.iterator])s=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);s=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];s[i]=t(e[r],r,i,o&&o[i])}}else s=[];return n&&(n[i]=s),s}function ft(e,t){for(let n=0;n<t.length;n++){const i=t[n];if((0,r.kJ)(i))for(let t=0;t<i.length;t++)e[i[t].name]=i[t].fn;else i&&(e[i.name]=i.key?(...e)=>{const t=i.fn(...e);return t&&(t.key=i.key),t}:i.fn)}return e}function mt(e,t,n={},i,r){if(j.isCE||j.parent&&Pe(j.parent)&&j.parent.isCE)return"default"!==t&&(n.name=t),zn("slot",n,i&&i());let s=e[t];s&&s._c&&(s._d=!1),Dn();const o=s&&gt(s(n)),a=jn(kn,{key:n.key||o&&o.key||`_${t}`},o||(i?i():[]),o&&1===e._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function gt(e){return e.some((e=>!Fn(e)||e.type!==In&&!(e.type===kn&&!gt(e.children))))?e:null}function yt(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:(0,r.hR)(i)]=e[i];return n}const vt=e=>e?hi(e)?Ei(e)||e.proxy:vt(e.parent):null,_t=(0,r.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vt(e.parent),$root:e=>vt(e.root),$emit:e=>e.emit,$options:e=>Ot(e),$forceUpdate:e=>e.f||(e.f=()=>w(e.update)),$nextTick:e=>e.n||(e.n=b.bind(e.proxy)),$watch:e=>ve.bind(e)}),bt=(e,t)=>e!==r.kT&&!e.__isScriptSetup&&(0,r.RI)(e,t),Tt={get({_:e},t){const{ctx:n,setupState:s,data:o,props:a,accessCache:u,type:c,appContext:l}=e;let h;if("$"!==t[0]){const i=u[t];if(void 0!==i)switch(i){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(bt(s,t))return u[t]=1,s[t];if(o!==r.kT&&(0,r.RI)(o,t))return u[t]=2,o[t];if((h=e.propsOptions[0])&&(0,r.RI)(h,t))return u[t]=3,a[t];if(n!==r.kT&&(0,r.RI)(n,t))return u[t]=4,n[t];Et&&(u[t]=0)}}const d=_t[t];let p,f;return d?("$attrs"===t&&(0,i.j)(e,"get",t),d(e)):(p=c.__cssModules)&&(p=p[t])?p:n!==r.kT&&(0,r.RI)(n,t)?(u[t]=4,n[t]):(f=l.config.globalProperties,(0,r.RI)(f,t)?f[t]:void 0)},set({_:e},t,n){const{data:i,setupState:s,ctx:o}=e;return bt(s,t)?(s[t]=n,!0):i!==r.kT&&(0,r.RI)(i,t)?(i[t]=n,!0):!(0,r.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:s,propsOptions:o}},a){let u;return!!n[a]||e!==r.kT&&(0,r.RI)(e,a)||bt(t,a)||(u=o[0])&&(0,r.RI)(u,a)||(0,r.RI)(i,a)||(0,r.RI)(_t,a)||(0,r.RI)(s.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,r.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};const wt=(0,r.l7)({},Tt,{get(e,t){if(t!==Symbol.unscopables)return Tt.get(e,t,e)},has(e,t){const n="_"!==t[0]&&!(0,r.e1)(t);return n}});let Et=!0;function St(e){const t=Ot(e),n=e.proxy,s=e.ctx;Et=!1,t.beforeCreate&&Ct(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:u,watch:c,provide:l,inject:h,created:d,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:y,deactivated:v,beforeDestroy:_,beforeUnmount:b,destroyed:T,unmounted:w,render:E,renderTracked:S,renderTriggered:k,errorCaptured:C,serverPrefetch:I,expose:O,inheritAttrs:x,components:A,directives:D,filters:P}=t,R=null;if(h&&kt(h,s,R,e.appContext.config.unwrapInjectedRef),u)for(const i in u){const e=u[i];(0,r.mf)(e)&&(s[i]=e.bind(n))}if(o){0;const t=o.call(n,n);0,(0,r.Kn)(t)&&(e.data=(0,i.qj)(t))}if(Et=!0,a)for(const i in a){const e=a[i],t=(0,r.mf)(e)?e.bind(n,n):(0,r.mf)(e.get)?e.get.bind(n,n):r.dG;0;const o=!(0,r.mf)(e)&&(0,r.mf)(e.set)?e.set.bind(n):r.dG,u=Ci({get:t,set:o});Object.defineProperty(s,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:e=>u.value=e})}if(c)for(const i in c)It(c[i],s,n,i);if(l){const e=(0,r.mf)(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{le(t,e[t])}))}function N(e,t){(0,r.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(d&&Ct(d,e,"c"),N(Ge,p),N(Qe,f),N(Ke,m),N(Xe,g),N(Fe,y),N(Be,v),N(nt,C),N(tt,S),N(et,k),N(Ye,b),N(Je,w),N(Ze,I),(0,r.kJ)(O))if(O.length){const t=e.exposed||(e.exposed={});O.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});E&&e.render===r.dG&&(e.render=E),null!=x&&(e.inheritAttrs=x),A&&(e.components=A),D&&(e.directives=D)}function kt(e,t,n=r.dG,s=!1){(0,r.kJ)(e)&&(e=Rt(e));for(const o in e){const n=e[o];let a;a=(0,r.Kn)(n)?"default"in n?he(n.from||o,n.default,!0):he(n.from||o):he(n),(0,i.dq)(a)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[o]=a}}function Ct(e,t,n){u((0,r.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function It(e,t,n,i){const s=i.includes(".")?_e(n,i):()=>n[i];if((0,r.HD)(e)){const n=t[e];(0,r.mf)(n)&&ge(s,n)}else if((0,r.mf)(e))ge(s,e.bind(n));else if((0,r.Kn)(e))if((0,r.kJ)(e))e.forEach((e=>It(e,t,n,i)));else{const i=(0,r.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,r.mf)(i)&&ge(s,i,e)}else 0}function Ot(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,u=o.get(t);let c;return u?c=u:s.length||n||i?(c={},s.length&&s.forEach((e=>xt(c,e,a,!0))),xt(c,t,a)):c=t,(0,r.Kn)(t)&&o.set(t,c),c}function xt(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&xt(e,s,n,!0),r&&r.forEach((t=>xt(e,t,n,!0)));for(const o in t)if(i&&"expose"===o);else{const i=At[o]||n&&n[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const At={data:Dt,props:Lt,emits:Lt,methods:Lt,computed:Lt,beforeCreate:Nt,created:Nt,beforeMount:Nt,mounted:Nt,beforeUpdate:Nt,updated:Nt,beforeDestroy:Nt,beforeUnmount:Nt,destroyed:Nt,unmounted:Nt,activated:Nt,deactivated:Nt,errorCaptured:Nt,serverPrefetch:Nt,components:Lt,directives:Lt,watch:Mt,provide:Dt,inject:Pt};function Dt(e,t){return t?e?function(){return(0,r.l7)((0,r.mf)(e)?e.call(this,this):e,(0,r.mf)(t)?t.call(this,this):t)}:t:e}function Pt(e,t){return Lt(Rt(e),Rt(t))}function Rt(e){if((0,r.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Nt(e,t){return e?[...new Set([].concat(e,t))]:t}function Lt(e,t){return e?(0,r.l7)((0,r.l7)(Object.create(null),e),t):t}function Mt(e,t){if(!e)return t;if(!t)return e;const n=(0,r.l7)(Object.create(null),e);for(const i in t)n[i]=Nt(e[i],t[i]);return n}function Ut(e,t,n,s=!1){const o={},a={};(0,r.Nj)(a,$n,1),e.propsDefaults=Object.create(null),Ft(e,t,o,a);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:(0,i.Um)(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function jt(e,t,n,s){const{props:o,attrs:a,vnode:{patchFlag:u}}=e,c=(0,i.IU)(o),[l]=e.propsOptions;let h=!1;if(!(s||u>0)||16&u){let i;Ft(e,t,o,a)&&(h=!0);for(const s in c)t&&((0,r.RI)(t,s)||(i=(0,r.rs)(s))!==s&&(0,r.RI)(t,i))||(l?!n||void 0===n[s]&&void 0===n[i]||(o[s]=Bt(l,c,s,void 0,e,!0)):delete o[s]);if(a!==c)for(const e in a)t&&(0,r.RI)(t,e)||(delete a[e],h=!0)}else if(8&u){const n=e.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];if(U(e.emitsOptions,s))continue;const u=t[s];if(l)if((0,r.RI)(a,s))u!==a[s]&&(a[s]=u,h=!0);else{const t=(0,r._A)(s);o[t]=Bt(l,c,t,u,e,!1)}else u!==a[s]&&(a[s]=u,h=!0)}}h&&(0,i.X$)(e,"set","$attrs")}function Ft(e,t,n,s){const[o,a]=e.propsOptions;let u,c=!1;if(t)for(let i in t){if((0,r.Gg)(i))continue;const l=t[i];let h;o&&(0,r.RI)(o,h=(0,r._A)(i))?a&&a.includes(h)?(u||(u={}))[h]=l:n[h]=l:U(e.emitsOptions,i)||i in s&&l===s[i]||(s[i]=l,c=!0)}if(a){const t=(0,i.IU)(n),s=u||r.kT;for(let i=0;i<a.length;i++){const u=a[i];n[u]=Bt(o,t,u,s[u],e,!(0,r.RI)(s,u))}}return c}function Bt(e,t,n,i,s,o){const a=e[n];if(null!=a){const e=(0,r.RI)(a,"default");if(e&&void 0===i){const e=a.default;if(a.type!==Function&&(0,r.mf)(e)){const{propsDefaults:r}=s;n in r?i=r[n]:(ci(s),i=r[n]=e.call(null,t),li())}else i=e}a[0]&&(o&&!e?i=!1:!a[1]||""!==i&&i!==(0,r.rs)(n)||(i=!0))}return i}function Vt(e,t,n=!1){const i=t.propsCache,s=i.get(e);if(s)return s;const o=e.props,a={},u=[];let c=!1;if(!(0,r.mf)(e)){const i=e=>{c=!0;const[n,i]=Vt(e,t,!0);(0,r.l7)(a,n),i&&u.push(...i)};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}if(!o&&!c)return(0,r.Kn)(e)&&i.set(e,r.Z6),r.Z6;if((0,r.kJ)(o))for(let h=0;h<o.length;h++){0;const e=(0,r._A)(o[h]);$t(e)&&(a[e]=r.kT)}else if(o){0;for(const e in o){const t=(0,r._A)(e);if($t(t)){const n=o[e],i=a[t]=(0,r.kJ)(n)||(0,r.mf)(n)?{type:n}:Object.assign({},n);if(i){const e=Wt(Boolean,i.type),n=Wt(String,i.type);i[0]=e>-1,i[1]=n<0||e<n,(e>-1||(0,r.RI)(i,"default"))&&u.push(t)}}}}const l=[a,u];return(0,r.Kn)(e)&&i.set(e,l),l}function $t(e){return"$"!==e[0]}function qt(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function Ht(e,t){return qt(e)===qt(t)}function Wt(e,t){return(0,r.kJ)(t)?t.findIndex((t=>Ht(t,e))):(0,r.mf)(t)&&Ht(t,e)?0:-1}const zt=e=>"_"===e[0]||"$stable"===e,Gt=e=>(0,r.kJ)(e)?e.map(Zn):[Zn(e)],Qt=(e,t,n)=>{if(t._n)return t;const i=H(((...e)=>Gt(t(...e))),n);return i._c=!1,i},Kt=(e,t,n)=>{const i=e._ctx;for(const s in e){if(zt(s))continue;const n=e[s];if((0,r.mf)(n))t[s]=Qt(s,n,i);else if(null!=n){0;const e=Gt(n);t[s]=()=>e}}},Xt=(e,t)=>{const n=Gt(t);e.slots.default=()=>n},Yt=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,i.IU)(t),(0,r.Nj)(t,"_",n)):Kt(t,e.slots={})}else e.slots={},t&&Xt(e,t);(0,r.Nj)(e.slots,$n,1)},Jt=(e,t,n)=>{const{vnode:i,slots:s}=e;let o=!0,a=r.kT;if(32&i.shapeFlag){const e=t._;e?n&&1===e?o=!1:((0,r.l7)(s,t),n||1!==e||delete s._):(o=!t.$stable,Kt(t,s)),a=t}else t&&(Xt(e,t),a={default:1});if(o)for(const r in s)zt(r)||r in a||delete s[r]};function Zt(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let en=0;function tn(e,t){return function(n,i=null){(0,r.mf)(n)||(n=Object.assign({},n)),null==i||(0,r.Kn)(i)||(i=null);const s=Zt(),o=new Set;let a=!1;const u=s.app={_uid:en++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:qi,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&(0,r.mf)(e.install)?(o.add(e),e.install(u,...t)):(0,r.mf)(e)&&(o.add(e),e(u,...t))),u},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),u},component(e,t){return t?(s.components[e]=t,u):s.components[e]},directive(e,t){return t?(s.directives[e]=t,u):s.directives[e]},mount(r,o,c){if(!a){0;const l=zn(n,i);return l.appContext=s,o&&t?t(l,r):e(l,r,c),a=!0,u._container=r,r.__vue_app__=u,Ei(l.component)||l.component.proxy}},unmount(){a&&(e(null,u._container),delete u._container.__vue_app__)},provide(e,t){return s.provides[e]=t,u}};return u}}function nn(e,t,n,s,o=!1){if((0,r.kJ)(e))return void e.forEach(((e,i)=>nn(e,t&&((0,r.kJ)(t)?t[i]:t),n,s,o)));if(Pe(s)&&!o)return;const u=4&s.shapeFlag?Ei(s.component)||s.component.proxy:s.el,c=o?null:u,{i:l,r:h}=e;const d=t&&t.r,p=l.refs===r.kT?l.refs={}:l.refs,f=l.setupState;if(null!=d&&d!==h&&((0,r.HD)(d)?(p[d]=null,(0,r.RI)(f,d)&&(f[d]=null)):(0,i.dq)(d)&&(d.value=null)),(0,r.mf)(h))a(h,l,12,[c,p]);else{const t=(0,r.HD)(h),s=(0,i.dq)(h);if(t||s){const i=()=>{if(e.f){const n=t?(0,r.RI)(f,h)?f[h]:p[h]:h.value;o?(0,r.kJ)(n)&&(0,r.Od)(n,u):(0,r.kJ)(n)?n.includes(u)||n.push(u):t?(p[h]=[u],(0,r.RI)(f,h)&&(f[h]=p[h])):(h.value=[u],e.k&&(p[e.k]=h.value))}else t?(p[h]=c,(0,r.RI)(f,h)&&(f[h]=c)):s&&(h.value=c,e.k&&(p[e.k]=c))};c?(i.id=-1,cn(i,n)):i()}else 0}}let rn=!1;const sn=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,on=e=>8===e.nodeType;function an(e){const{mt:t,p:n,o:{patchProp:i,createText:s,nextSibling:o,parentNode:a,remove:u,insert:c,createComment:l}}=e,h=(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),I(),void(t._vnode=e);rn=!1,d(t.firstChild,e,null,null,null),I(),t._vnode=e,rn&&console.error("Hydration completed but contains mismatches.")},d=(n,i,r,u,l,h=!1)=>{const v=on(n)&&"["===n.data,_=()=>g(n,i,r,u,l,v),{type:b,ref:T,shapeFlag:w,patchFlag:E}=i;let S=n.nodeType;i.el=n,-2===E&&(h=!1,i.dynamicChildren=null);let k=null;switch(b){case Cn:3!==S?""===i.children?(c(i.el=s(""),a(n),n),k=n):k=_():(n.data!==i.children&&(rn=!0,n.data=i.children),k=o(n));break;case In:k=8!==S||v?_():o(n);break;case On:if(v&&(n=o(n),S=n.nodeType),1===S||3===S){k=n;const e=!i.children.length;for(let t=0;t<i.staticCount;t++)e&&(i.children+=1===k.nodeType?k.outerHTML:k.data),t===i.staticCount-1&&(i.anchor=k),k=o(k);return v?o(k):k}_();break;case kn:k=v?m(n,i,r,u,l,h):_();break;default:if(1&w)k=1!==S||i.type.toLowerCase()!==n.tagName.toLowerCase()?_():p(n,i,r,u,l,h);else if(6&w){i.slotScopeIds=l;const e=a(n);if(t(i,e,null,r,u,sn(e),h),k=v?y(n):o(n),k&&on(k)&&"teleport end"===k.data&&(k=o(k)),Pe(i)){let t;v?(t=zn(kn),t.anchor=k?k.previousSibling:e.lastChild):t=3===n.nodeType?Xn(""):zn("div"),t.el=n,i.component.subTree=t}}else 64&w?k=8!==S?_():i.type.hydrate(n,i,r,u,l,h,e,f):128&w&&(k=i.type.hydrate(n,i,r,u,sn(a(n)),l,h,e,d))}return null!=T&&nn(T,null,u,i),k},p=(e,t,n,s,o,a)=>{a=a||!!t.dynamicChildren;const{type:c,props:l,patchFlag:h,shapeFlag:d,dirs:p}=t,m="input"===c&&p||"option"===c;if(m||-1!==h){if(p&&rt(t,null,n,"created"),l)if(m||!a||48&h)for(const t in l)(m&&t.endsWith("value")||(0,r.F7)(t)&&!(0,r.Gg)(t))&&i(e,t,null,l[t],!1,void 0,n);else l.onClick&&i(e,"onClick",null,l.onClick,!1,void 0,n);let c;if((c=l&&l.onVnodeBeforeMount)&&ii(c,n,t),p&&rt(t,null,n,"beforeMount"),((c=l&&l.onVnodeMounted)||p)&&ue((()=>{c&&ii(c,n,t),p&&rt(t,null,n,"mounted")}),s),16&d&&(!l||!l.innerHTML&&!l.textContent)){let i=f(e.firstChild,t,e,n,s,o,a);while(i){rn=!0;const e=i;i=i.nextSibling,u(e)}}else 8&d&&e.textContent!==t.children&&(rn=!0,e.textContent=t.children)}return e.nextSibling},f=(e,t,i,r,s,o,a)=>{a=a||!!t.dynamicChildren;const u=t.children,c=u.length;for(let l=0;l<c;l++){const t=a?u[l]:u[l]=Zn(u[l]);if(e)e=d(e,t,r,s,o,a);else{if(t.type===Cn&&!t.children)continue;rn=!0,n(null,t,i,null,r,s,sn(i),o)}}return e},m=(e,t,n,i,r,s)=>{const{slotScopeIds:u}=t;u&&(r=r?r.concat(u):u);const h=a(e),d=f(o(e),t,h,n,i,r,s);return d&&on(d)&&"]"===d.data?o(t.anchor=d):(rn=!0,c(t.anchor=l("]"),h,d),d)},g=(e,t,i,r,s,c)=>{if(rn=!0,t.el=null,c){const t=y(e);while(1){const n=o(e);if(!n||n===t)break;u(n)}}const l=o(e),h=a(e);return u(e),n(null,t,h,l,i,r,sn(h),s),l},y=e=>{let t=0;while(e)if(e=o(e),e&&on(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return o(e);t--}return e};return[h,d]}function un(){}const cn=ue;function ln(e){return dn(e)}function hn(e){return dn(e,an)}function dn(e,t){un();const n=(0,r.E9)();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:u,createText:c,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:f,setScopeId:m=r.dG,insertStaticContent:g}=e,y=(e,t,n,i=null,r=null,s=null,o=!1,a=null,u=!!t.dynamicChildren)=>{if(e===t)return;e&&!Bn(e,t)&&(i=J(e),H(e,r,s,!0),e=null),-2===t.patchFlag&&(u=!1,t.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=t;switch(c){case Cn:v(e,t,n,i);break;case In:_(e,t,n,i);break;case On:null==e&&b(t,n,i,o);break;case kn:N(e,t,n,i,r,s,o,a,u);break;default:1&h?k(e,t,n,i,r,s,o,a,u):6&h?L(e,t,n,i,r,s,o,a,u):(64&h||128&h)&&c.process(e,t,n,i,r,s,o,a,u,ee)}null!=l&&r&&nn(l,e&&e.ref,s,t||e,!t)},v=(e,t,n,i)=>{if(null==e)s(t.el=c(t.children),n,i);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},_=(e,t,n,i)=>{null==e?s(t.el=l(t.children||""),n,i):t.el=e.el},b=(e,t,n,i)=>{[e.el,e.anchor]=g(e.children,t,n,i,e.el,e.anchor)},T=({el:e,anchor:t},n,i)=>{let r;while(e&&e!==t)r=f(e),s(e,n,i),e=r;s(t,n,i)},E=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=f(e),o(e),e=n;o(t)},k=(e,t,n,i,r,s,o,a,u)=>{o=o||"svg"===t.type,null==e?O(t,n,i,r,s,o,a,u):D(e,t,r,s,o,a,u)},O=(e,t,n,i,o,c,l,h)=>{let p,f;const{type:m,props:g,shapeFlag:y,transition:v,dirs:_}=e;if(p=e.el=u(e.type,c,g&&g.is,g),8&y?d(p,e.children):16&y&&A(e.children,p,null,i,o,c&&"foreignObject"!==m,l,h),_&&rt(e,null,i,"created"),x(p,e,e.scopeId,l,i),g){for(const t in g)"value"===t||(0,r.Gg)(t)||a(p,t,null,g[t],c,e.children,i,o,X);"value"in g&&a(p,"value",null,g.value),(f=g.onVnodeBeforeMount)&&ii(f,i,e)}_&&rt(e,null,i,"beforeMount");const b=(!o||o&&!o.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(p),s(p,t,n),((f=g&&g.onVnodeMounted)||b||_)&&cn((()=>{f&&ii(f,i,e),b&&v.enter(p),_&&rt(e,null,i,"mounted")}),o)},x=(e,t,n,i,r)=>{if(n&&m(e,n),i)for(let s=0;s<i.length;s++)m(e,i[s]);if(r){let n=r.subTree;if(t===n){const t=r.vnode;x(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},A=(e,t,n,i,r,s,o,a,u=0)=>{for(let c=u;c<e.length;c++){const u=e[c]=a?ei(e[c]):Zn(e[c]);y(null,u,t,n,i,r,s,o,a)}},D=(e,t,n,i,s,o,u)=>{const c=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:p}=t;l|=16&e.patchFlag;const f=e.props||r.kT,m=t.props||r.kT;let g;n&&pn(n,!1),(g=m.onVnodeBeforeUpdate)&&ii(g,n,t,e),p&&rt(t,e,n,"beforeUpdate"),n&&pn(n,!0);const y=s&&"foreignObject"!==t.type;if(h?P(e.dynamicChildren,h,c,n,i,y,o):u||B(e,t,c,null,n,i,y,o,!1),l>0){if(16&l)R(c,t,f,m,n,i,s);else if(2&l&&f.class!==m.class&&a(c,"class",null,m.class,s),4&l&&a(c,"style",f.style,m.style,s),8&l){const r=t.dynamicProps;for(let t=0;t<r.length;t++){const o=r[t],u=f[o],l=m[o];l===u&&"value"!==o||a(c,o,u,l,s,e.children,n,i,X)}}1&l&&e.children!==t.children&&d(c,t.children)}else u||null!=h||R(c,t,f,m,n,i,s);((g=m.onVnodeUpdated)||p)&&cn((()=>{g&&ii(g,n,t,e),p&&rt(t,e,n,"updated")}),i)},P=(e,t,n,i,r,s,o)=>{for(let a=0;a<t.length;a++){const u=e[a],c=t[a],l=u.el&&(u.type===kn||!Bn(u,c)||70&u.shapeFlag)?p(u.el):n;y(u,c,l,null,i,r,s,o,!0)}},R=(e,t,n,i,s,o,u)=>{if(n!==i){if(n!==r.kT)for(const c in n)(0,r.Gg)(c)||c in i||a(e,c,n[c],null,u,t.children,s,o,X);for(const c in i){if((0,r.Gg)(c))continue;const l=i[c],h=n[c];l!==h&&"value"!==c&&a(e,c,h,l,u,t.children,s,o,X)}"value"in i&&a(e,"value",n.value,i.value)}},N=(e,t,n,i,r,o,a,u,l)=>{const h=t.el=e?e.el:c(""),d=t.anchor=e?e.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(s(h,n,i),s(d,n,i),A(t.children,n,d,r,o,a,u,l)):p>0&&64&p&&f&&e.dynamicChildren?(P(e.dynamicChildren,f,n,r,o,a,u),(null!=t.key||r&&t===r.subTree)&&fn(e,t,!0)):B(e,t,n,d,r,o,a,u,l)},L=(e,t,n,i,r,s,o,a,u)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?r.ctx.activate(t,n,i,o,u):M(t,n,i,r,s,o,u):U(e,t,u)},M=(e,t,n,i,r,s,o)=>{const a=e.component=oi(e,i,r);if(Le(e)&&(a.ctx.renderer=ee),mi(a),a.asyncDep){if(r&&r.registerDep(a,j),!e.el){const e=a.subTree=zn(In);_(null,e,t,n)}}else j(a,e,t,n,r,s,o)},U=(e,t,n)=>{const i=t.component=e.component;if(K(e,t,n)){if(i.asyncDep&&!i.asyncResolved)return void F(i,t,n);i.next=t,S(i.update),i.update()}else t.el=e.el,i.vnode=t},j=(e,t,n,s,o,a,u)=>{const c=()=>{if(e.isMounted){let t,{next:n,bu:i,u:s,parent:c,vnode:l}=e,h=n;0,pn(e,!1),n?(n.el=l.el,F(e,n,u)):n=l,i&&(0,r.ir)(i),(t=n.props&&n.props.onVnodeBeforeUpdate)&&ii(t,c,n,l),pn(e,!0);const d=W(e);0;const f=e.subTree;e.subTree=d,y(f,d,p(f.el),J(f),e,o,a),n.el=d.el,null===h&&Y(e,d.el),s&&cn(s,o),(t=n.props&&n.props.onVnodeUpdated)&&cn((()=>ii(t,c,n,l)),o)}else{let i;const{el:u,props:c}=t,{bm:l,m:h,parent:d}=e,p=Pe(t);if(pn(e,!1),l&&(0,r.ir)(l),!p&&(i=c&&c.onVnodeBeforeMount)&&ii(i,d,t),pn(e,!0),u&&ne){const n=()=>{e.subTree=W(e),ne(u,e.subTree,e,o,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const i=e.subTree=W(e);0,y(null,i,n,s,e,o,a),t.el=i.el}if(h&&cn(h,o),!p&&(i=c&&c.onVnodeMounted)){const e=t;cn((()=>ii(i,d,e)),o)}(256&t.shapeFlag||d&&Pe(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&cn(e.a,o),e.isMounted=!0,t=n=s=null}},l=e.effect=new i.qq(c,(()=>w(h)),e.scope),h=e.update=()=>l.run();h.id=e.uid,pn(e,!0),h()},F=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,jt(e,t.props,r,n),Jt(e,t.children,n),(0,i.Jd)(),C(),(0,i.lk)()},B=(e,t,n,i,r,s,o,a,u=!1)=>{const c=e&&e.children,l=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void $(c,h,n,i,r,s,o,a,u);if(256&p)return void V(c,h,n,i,r,s,o,a,u)}8&f?(16&l&&X(c,r,s),h!==c&&d(n,h)):16&l?16&f?$(c,h,n,i,r,s,o,a,u):X(c,r,s,!0):(8&l&&d(n,""),16&f&&A(h,n,i,r,s,o,a,u))},V=(e,t,n,i,s,o,a,u,c)=>{e=e||r.Z6,t=t||r.Z6;const l=e.length,h=t.length,d=Math.min(l,h);let p;for(p=0;p<d;p++){const i=t[p]=c?ei(t[p]):Zn(t[p]);y(e[p],i,n,null,s,o,a,u,c)}l>h?X(e,s,o,!0,!1,d):A(t,n,i,s,o,a,u,c,d)},$=(e,t,n,i,s,o,a,u,c)=>{let l=0;const h=t.length;let d=e.length-1,p=h-1;while(l<=d&&l<=p){const i=e[l],r=t[l]=c?ei(t[l]):Zn(t[l]);if(!Bn(i,r))break;y(i,r,n,null,s,o,a,u,c),l++}while(l<=d&&l<=p){const i=e[d],r=t[p]=c?ei(t[p]):Zn(t[p]);if(!Bn(i,r))break;y(i,r,n,null,s,o,a,u,c),d--,p--}if(l>d){if(l<=p){const e=p+1,r=e<h?t[e].el:i;while(l<=p)y(null,t[l]=c?ei(t[l]):Zn(t[l]),n,r,s,o,a,u,c),l++}}else if(l>p)while(l<=d)H(e[l],s,o,!0),l++;else{const f=l,m=l,g=new Map;for(l=m;l<=p;l++){const e=t[l]=c?ei(t[l]):Zn(t[l]);null!=e.key&&g.set(e.key,l)}let v,_=0;const b=p-m+1;let T=!1,w=0;const E=new Array(b);for(l=0;l<b;l++)E[l]=0;for(l=f;l<=d;l++){const i=e[l];if(_>=b){H(i,s,o,!0);continue}let r;if(null!=i.key)r=g.get(i.key);else for(v=m;v<=p;v++)if(0===E[v-m]&&Bn(i,t[v])){r=v;break}void 0===r?H(i,s,o,!0):(E[r-m]=l+1,r>=w?w=r:T=!0,y(i,t[r],n,null,s,o,a,u,c),_++)}const S=T?mn(E):r.Z6;for(v=S.length-1,l=b-1;l>=0;l--){const e=m+l,r=t[e],d=e+1<h?t[e+1].el:i;0===E[l]?y(null,r,n,d,s,o,a,u,c):T&&(v<0||l!==S[v]?q(r,n,d,2):v--)}}},q=(e,t,n,i,r=null)=>{const{el:o,type:a,transition:u,children:c,shapeFlag:l}=e;if(6&l)return void q(e.component.subTree,t,n,i);if(128&l)return void e.suspense.move(t,n,i);if(64&l)return void a.move(e,t,n,ee);if(a===kn){s(o,t,n);for(let e=0;e<c.length;e++)q(c[e],t,n,i);return void s(e.anchor,t,n)}if(a===On)return void T(e,t,n);const h=2!==i&&1&l&&u;if(h)if(0===i)u.beforeEnter(o),s(o,t,n),cn((()=>u.enter(o)),r);else{const{leave:e,delayLeave:i,afterLeave:r}=u,a=()=>s(o,t,n),c=()=>{e(o,(()=>{a(),r&&r()}))};i?i(o,a,c):c()}else s(o,t,n)},H=(e,t,n,i=!1,r=!1)=>{const{type:s,props:o,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:d}=e;if(null!=a&&nn(a,null,n,e,!0),256&l)return void t.ctx.deactivate(e);const p=1&l&&d,f=!Pe(e);let m;if(f&&(m=o&&o.onVnodeBeforeUnmount)&&ii(m,t,e),6&l)Q(e.component,n,i);else{if(128&l)return void e.suspense.unmount(n,i);p&&rt(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,n,r,ee,i):c&&(s!==kn||h>0&&64&h)?X(c,t,n,!1,!0):(s===kn&&384&h||!r&&16&l)&&X(u,t,n),i&&z(e)}(f&&(m=o&&o.onVnodeUnmounted)||p)&&cn((()=>{m&&ii(m,t,e),p&&rt(e,null,t,"unmounted")}),n)},z=e=>{const{type:t,el:n,anchor:i,transition:r}=e;if(t===kn)return void G(n,i);if(t===On)return void E(e);const s=()=>{o(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&e.shapeFlag&&r&&!r.persisted){const{leave:t,delayLeave:i}=r,o=()=>t(n,s);i?i(e.el,s,o):o()}else s()},G=(e,t)=>{let n;while(e!==t)n=f(e),o(e),e=n;o(t)},Q=(e,t,n)=>{const{bum:i,scope:s,update:o,subTree:a,um:u}=e;i&&(0,r.ir)(i),s.stop(),o&&(o.active=!1,H(a,e,t,n)),u&&cn(u,t),cn((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},X=(e,t,n,i=!1,r=!1,s=0)=>{for(let o=s;o<e.length;o++)H(e[o],t,n,i,r)},J=e=>6&e.shapeFlag?J(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),Z=(e,t,n)=>{null==e?t._vnode&&H(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),C(),I(),t._vnode=e},ee={p:y,um:H,m:q,r:z,mt:M,mc:A,pc:B,pbc:P,n:J,o:e};let te,ne;return t&&([te,ne]=t(ee)),{render:Z,hydrate:te,createApp:tn(Z,te)}}function pn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function fn(e,t,n=!1){const i=e.children,s=t.children;if((0,r.kJ)(i)&&(0,r.kJ)(s))for(let r=0;r<i.length;r++){const e=i[r];let t=s[r];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[r]=ei(s[r]),t.el=e.el),n||fn(e,t)),t.type===Cn&&(t.el=e.el)}}function mn(e){const t=e.slice(),n=[0];let i,r,s,o,a;const u=e.length;for(i=0;i<u;i++){const u=e[i];if(0!==u){if(r=n[n.length-1],e[r]<u){t[i]=r,n.push(i);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,e[n[a]]<u?s=a+1:o=a;u<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=t[o];return n}const gn=e=>e.__isTeleport,yn=e=>e&&(e.disabled||""===e.disabled),vn=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,_n=(e,t)=>{const n=e&&e.to;if((0,r.HD)(n)){if(t){const e=t(n);return e}return null}return n},bn={__isTeleport:!0,process(e,t,n,i,r,s,o,a,u,c){const{mc:l,pc:h,pbc:d,o:{insert:p,querySelector:f,createText:m,createComment:g}}=c,y=yn(t.props);let{shapeFlag:v,children:_,dynamicChildren:b}=t;if(null==e){const e=t.el=m(""),c=t.anchor=m("");p(e,n,i),p(c,n,i);const h=t.target=_n(t.props,f),d=t.targetAnchor=m("");h&&(p(d,h),o=o||vn(h));const g=(e,t)=>{16&v&&l(_,e,t,r,s,o,a,u)};y?g(n,c):h&&g(h,d)}else{t.el=e.el;const i=t.anchor=e.anchor,l=t.target=e.target,p=t.targetAnchor=e.targetAnchor,m=yn(e.props),g=m?n:l,v=m?i:p;if(o=o||vn(l),b?(d(e.dynamicChildren,b,g,r,s,o,a),fn(e,t,!0)):u||h(e,t,g,v,r,s,o,a,!1),y)m||Tn(t,n,i,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=_n(t.props,f);e&&Tn(t,e,null,c,0)}else m&&Tn(t,l,p,c,1)}Sn(t)},remove(e,t,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:u,anchor:c,targetAnchor:l,target:h,props:d}=e;if(h&&s(l),(o||!yn(d))&&(s(c),16&a))for(let p=0;p<u.length;p++){const e=u[p];r(e,t,n,!0,!!e.dynamicChildren)}},move:Tn,hydrate:wn};function Tn(e,t,n,{o:{insert:i},m:r},s=2){0===s&&i(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:u,children:c,props:l}=e,h=2===s;if(h&&i(o,t,n),(!h||yn(l))&&16&u)for(let d=0;d<c.length;d++)r(c[d],t,n,2);h&&i(a,t,n)}function wn(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:u}},c){const l=t.target=_n(t.props,u);if(l){const u=l._lpa||l.firstChild;if(16&t.shapeFlag)if(yn(t.props))t.anchor=c(o(e),t,a(e),n,i,r,s),t.targetAnchor=u;else{t.anchor=o(e);let a=u;while(a)if(a=o(a),a&&8===a.nodeType&&"teleport anchor"===a.data){t.targetAnchor=a,l._lpa=t.targetAnchor&&o(t.targetAnchor);break}c(u,t,l,n,i,r,s)}Sn(t)}return t.anchor&&o(t.anchor)}const En=bn;function Sn(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;while(n!==e.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const kn=Symbol(void 0),Cn=Symbol(void 0),In=Symbol(void 0),On=Symbol(void 0),xn=[];let An=null;function Dn(e=!1){xn.push(An=e?null:[])}function Pn(){xn.pop(),An=xn[xn.length-1]||null}let Rn,Nn=1;function Ln(e){Nn+=e}function Mn(e){return e.dynamicChildren=Nn>0?An||r.Z6:null,Pn(),Nn>0&&An&&An.push(e),e}function Un(e,t,n,i,r,s){return Mn(Wn(e,t,n,i,r,s,!0))}function jn(e,t,n,i,r){return Mn(zn(e,t,n,i,r,!0))}function Fn(e){return!!e&&!0===e.__v_isVNode}function Bn(e,t){return e.type===t.type&&e.key===t.key}function Vn(e){Rn=e}const $n="__vInternal",qn=({key:e})=>null!=e?e:null,Hn=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,r.HD)(e)||(0,i.dq)(e)||(0,r.mf)(e)?{i:j,r:e,k:t,f:!!n}:e:null;function Wn(e,t=null,n=null,i=0,s=null,o=(e===kn?0:1),a=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qn(t),ref:t&&Hn(t),scopeId:F,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:j};return u?(ti(c,n),128&o&&e.normalize(c)):n&&(c.shapeFlag|=(0,r.HD)(n)?8:16),Nn>0&&!a&&An&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&An.push(c),c}const zn=Gn;function Gn(e,t=null,n=null,s=0,o=null,a=!1){if(e&&e!==ut||(e=In),Fn(e)){const i=Kn(e,t,!0);return n&&ti(i,n),Nn>0&&!a&&An&&(6&i.shapeFlag?An[An.indexOf(e)]=i:An.push(i)),i.patchFlag|=-2,i}if(ki(e)&&(e=e.__vccOpts),t){t=Qn(t);let{class:e,style:n}=t;e&&!(0,r.HD)(e)&&(t.class=(0,r.C_)(e)),(0,r.Kn)(n)&&((0,i.X3)(n)&&!(0,r.kJ)(n)&&(n=(0,r.l7)({},n)),t.style=(0,r.j5)(n))}const u=(0,r.HD)(e)?1:J(e)?128:gn(e)?64:(0,r.Kn)(e)?4:(0,r.mf)(e)?2:0;return Wn(e,t,n,s,o,u,a,!0)}function Qn(e){return e?(0,i.X3)(e)||$n in e?(0,r.l7)({},e):e:null}function Kn(e,t,n=!1){const{props:i,ref:s,patchFlag:o,children:a}=e,u=t?ni(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&qn(u),ref:t&&t.ref?n&&s?(0,r.kJ)(s)?s.concat(Hn(t)):[s,Hn(t)]:Hn(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kn?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Kn(e.ssContent),ssFallback:e.ssFallback&&Kn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c}function Xn(e=" ",t=0){return zn(Cn,null,e,t)}function Yn(e,t){const n=zn(On,null,e);return n.staticCount=t,n}function Jn(e="",t=!1){return t?(Dn(),jn(In,null,e)):zn(In,null,e)}function Zn(e){return null==e||"boolean"===typeof e?zn(In):(0,r.kJ)(e)?zn(kn,null,e.slice()):"object"===typeof e?ei(e):zn(Cn,null,String(e))}function ei(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Kn(e)}function ti(e,t){let n=0;const{shapeFlag:i}=e;if(null==t)t=null;else if((0,r.kJ)(t))n=16;else if("object"===typeof t){if(65&i){const n=t.default;return void(n&&(n._c&&(n._d=!1),ti(e,n()),n._c&&(n._d=!0)))}{n=32;const i=t._;i||$n in t?3===i&&j&&(1===j.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=j}}else(0,r.mf)(t)?(t={default:t,_ctx:j},n=32):(t=String(t),64&i?(n=16,t=[Xn(t)]):n=8);e.children=t,e.shapeFlag|=n}function ni(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if("class"===e)t.class!==i.class&&(t.class=(0,r.C_)([t.class,i.class]));else if("style"===e)t.style=(0,r.j5)([t.style,i.style]);else if((0,r.F7)(e)){const n=t[e],s=i[e];!s||n===s||(0,r.kJ)(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=i[e])}return t}function ii(e,t,n,i=null){u(e,t,7,[n,i])}const ri=Zt();let si=0;function oi(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||ri,a={uid:si++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vt(s,o),emitsOptions:M(s,o),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:s.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=L.bind(null,a),e.ce&&e.ce(a),a}let ai=null;const ui=()=>ai||j,ci=e=>{ai=e,e.scope.on()},li=()=>{ai&&ai.scope.off(),ai=null};function hi(e){return 4&e.vnode.shapeFlag}let di,pi,fi=!1;function mi(e,t=!1){fi=t;const{props:n,children:i}=e.vnode,r=hi(e);Ut(e,n,r,t),Yt(e,i);const s=r?gi(e,t):void 0;return fi=!1,s}function gi(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,i.Xl)(new Proxy(e.ctx,Tt));const{setup:s}=n;if(s){const n=e.setupContext=s.length>1?wi(e):null;ci(e),(0,i.Jd)();const o=a(s,e,0,[e.props,n]);if((0,i.lk)(),li(),(0,r.tI)(o)){if(o.then(li,li),t)return o.then((n=>{yi(e,n,t)})).catch((t=>{c(t,e,0)}));e.asyncDep=o}else yi(e,o,t)}else bi(e,t)}function yi(e,t,n){(0,r.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,r.Kn)(t)&&(e.setupState=(0,i.WL)(t)),bi(e,n)}function vi(e){di=e,pi=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,wt))}}const _i=()=>!di;function bi(e,t,n){const s=e.type;if(!e.render){if(!t&&di&&!s.render){const t=s.template||Ot(e).template;if(t){0;const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:o,compilerOptions:a}=s,u=(0,r.l7)((0,r.l7)({isCustomElement:n,delimiters:o},i),a);s.render=di(t,u)}}e.render=s.render||r.dG,pi&&pi(e)}ci(e),(0,i.Jd)(),St(e),(0,i.lk)(),li()}function Ti(e){return new Proxy(e.attrs,{get(t,n){return(0,i.j)(e,"get","$attrs"),t[n]}})}function wi(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Ti(e))},slots:e.slots,emit:e.emit,expose:t}}function Ei(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in _t?_t[n](e):void 0},has(e,t){return t in e||t in _t}}))}function Si(e,t=!0){return(0,r.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function ki(e){return(0,r.mf)(e)&&"__vccOpts"in e}const Ci=(e,t)=>(0,i.Fl)(e,t,fi);function Ii(){return null}function Oi(){return null}function xi(e){0}function Ai(e,t){return null}function Di(){return Ri().slots}function Pi(){return Ri().attrs}function Ri(){const e=ui();return e.setupContext||(e.setupContext=wi(e))}function Ni(e,t){const n=(0,r.kJ)(e)?e.reduce(((e,t)=>(e[t]={},e)),{}):e;for(const i in t){const e=n[i];e?(0,r.kJ)(e)||(0,r.mf)(e)?n[i]={type:e,default:t[i]}:e.default=t[i]:null===e&&(n[i]={default:t[i]})}return n}function Li(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function Mi(e){const t=ui();let n=e();return li(),(0,r.tI)(n)&&(n=n.catch((e=>{throw ci(t),e}))),[n,()=>ci(t)]}function Ui(e,t,n){const i=arguments.length;return 2===i?(0,r.Kn)(t)&&!(0,r.kJ)(t)?Fn(t)?zn(e,null,[t]):zn(e,t):zn(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Fn(n)&&(n=[n]),zn(e,t,n))}const ji=Symbol(""),Fi=()=>{{const e=he(ji);return e}};function Bi(){return void 0}function Vi(e,t,n,i){const r=n[i];if(r&&$i(r,e))return r;const s=t();return s.memo=e.slice(),n[i]=s}function $i(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if((0,r.aU)(n[i],t[i]))return!1;return Nn>0&&An&&An.push(e),!0}const qi="3.2.47",Hi={createComponentInstance:oi,setupComponent:mi,renderComponentRoot:W,setCurrentRenderingInstance:B,isVNode:Fn,normalizeVNode:Zn},Wi=Hi,zi=null,Gi=null},9242:function(e,t,n){"use strict";n.d(t,{$d:function(){return r.$d},$y:function(){return r.$y},Ah:function(){return N},B:function(){return r.B},BK:function(){return r.BK},Bj:function(){return r.Bj},Bz:function(){return r.Bz},C3:function(){return r.C3},C_:function(){return r.C_},Cn:function(){return r.Cn},D2:function(){return Re},EB:function(){return r.EB},Eo:function(){return r.Eo},F4:function(){return r.F4},F8:function(){return Ne},FN:function(){return r.FN},Fl:function(){return r.Fl},G:function(){return r.G},G2:function(){return be},HX:function(){return r.HX},HY:function(){return r.HY},Ho:function(){return r.Ho},IU:function(){return r.IU},JJ:function(){return r.JJ},Jd:function(){return r.Jd},KU:function(){return r.KU},Ko:function(){return r.Ko},LL:function(){return r.LL},MW:function(){return R},MX:function(){return r.MX},Mr:function(){return r.Mr},Nd:function(){return Qe},Nv:function(){return r.Nv},OT:function(){return r.OT},Ob:function(){return r.Ob},P$:function(){return r.P$},PG:function(){return r.PG},Q2:function(){return r.Q2},Q6:function(){return r.Q6},RC:function(){return r.RC},Rh:function(){return r.Rh},Rr:function(){return r.Rr},S3:function(){return r.S3},SK:function(){return r.Ah},SU:function(){return r.SU},U2:function(){return r.U2},Uc:function(){return r.Uc},Uk:function(){return r.Uk},Um:function(){return r.Um},Us:function(){return r.Us},Vh:function(){return r.Vh},W3:function(){return ce},WI:function(){return r.WI},WL:function(){return r.WL},WY:function(){return r.WY},Wm:function(){return r.Wm},Wu:function(){return r.Wu},X3:function(){return r.X3},XI:function(){return r.XI},Xl:function(){return r.Xl},Xn:function(){return r.Xn},Y1:function(){return r.Y1},Y3:function(){return r.Y3},Y8:function(){return r.Y8},YP:function(){return r.YP},YS:function(){return r.YS},YZ:function(){return ke},Yq:function(){return r.Yq},ZB:function(){return qe},ZK:function(){return r.ZK},ZM:function(){return r.ZM},Zq:function(){return r.Zq},_:function(){return r._},_A:function(){return r._A},a2:function(){return M},aZ:function(){return r.aZ},b9:function(){return r.b9},bM:function(){return Te},bT:function(){return r.bT},bv:function(){return r.bv},cE:function(){return r.cE},d1:function(){return r.d1},dD:function(){return r.dD},dG:function(){return r.dG},dl:function(){return r.dl},dq:function(){return r.dq},e8:function(){return ve},ec:function(){return r.ec},eq:function(){return r.eq},f3:function(){return r.f3},fb:function(){return U},h:function(){return r.h},hR:function(){return r.hR},i8:function(){return r.i8},iD:function(){return r.iD},iH:function(){return r.iH},iM:function(){return De},ic:function(){return r.ic},j4:function(){return r.j4},j5:function(){return r.j5},kC:function(){return r.kC},kq:function(){return r.kq},l1:function(){return r.l1},lA:function(){return r.lA},lR:function(){return r.lR},m0:function(){return r.m0},mW:function(){return r.mW},mv:function(){return r.mv},mx:function(){return r.mx},n4:function(){return r.n4},nK:function(){return r.nK},nQ:function(){return r.nQ},nZ:function(){return r.nZ},nr:function(){return ye},oR:function(){return r.oR},of:function(){return r.of},p1:function(){return r.p1},qG:function(){return r.qG},qZ:function(){return r.qZ},qb:function(){return r.qb},qj:function(){return r.qj},qq:function(){return r.qq},ri:function(){return He},ry:function(){return r.ry},sT:function(){return r.sT},sY:function(){return $e},se:function(){return r.se},sj:function(){return j},sv:function(){return r.sv},uE:function(){return r.uE},uT:function(){return q},u_:function(){return r.u_},up:function(){return r.up},vl:function(){return r.vl},vr:function(){return We},vs:function(){return r.vs},w5:function(){return r.w5},wF:function(){return r.wF},wg:function(){return r.wg},wy:function(){return r.wy},xv:function(){return r.xv},yT:function(){return r.yT},yX:function(){return r.yX},yb:function(){return r.MW},zw:function(){return r.zw}});n(7658);var i=n(7139),r=n(3396),s=n(4870);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,u=a&&a.createElement("template"),c={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?a.createElementNS(o,e):a.createElement(e,n?{is:n}:void 0);return"select"===e&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling)){while(1)if(t.insertBefore(r.cloneNode(!0),n),r===s||!(r=r.nextSibling))break}else{u.innerHTML=i?`<svg>${e}</svg>`:e;const r=u.content;if(i){const e=r.firstChild;while(e.firstChild)r.appendChild(e.firstChild);r.removeChild(e)}t.insertBefore(r,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function l(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function h(e,t,n){const r=e.style,s=(0,i.HD)(n);if(n&&!s){if(t&&!(0,i.HD)(t))for(const e in t)null==n[e]&&p(r,e,"");for(const e in n)p(r,e,n[e])}else{const i=r.display;s?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const d=/\s*!important$/;function p(e,t,n){if((0,i.kJ)(n))n.forEach((n=>p(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=g(e,t);d.test(n)?e.setProperty((0,i.rs)(r),n.replace(d,""),"important"):e[r]=n}}const f=["Webkit","Moz","ms"],m={};function g(e,t){const n=m[t];if(n)return n;let r=(0,i._A)(t);if("filter"!==r&&r in e)return m[t]=r;r=(0,i.kC)(r);for(let i=0;i<f.length;i++){const n=f[i]+r;if(n in e)return m[t]=n}return t}const y="http://www.w3.org/1999/xlink";function v(e,t,n,r,s){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(y,t.slice(6,t.length)):e.setAttributeNS(y,t,n);else{const r=(0,i.Pq)(t);null==n||r&&!(0,i.yA)(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function _(e,t,n,r,s,o,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,s,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const i=null==n?"":n;return e.value===i&&"OPTION"!==e.tagName||(e.value=i),void(null==n&&e.removeAttribute(t))}let u=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=(0,i.yA)(n):null==n&&"string"===r?(n="",u=!0):"number"===r&&(n=0,u=!0)}try{e[t]=n}catch(c){0}u&&e.removeAttribute(t)}function b(e,t,n,i){e.addEventListener(t,n,i)}function T(e,t,n,i){e.removeEventListener(t,n,i)}function w(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[n,a]=S(t);if(i){const o=s[t]=O(i,r);b(e,n,o,a)}else o&&(T(e,n,o,a),s[t]=void 0)}}const E=/(?:Once|Passive|Capture)$/;function S(e){let t;if(E.test(e)){let n;t={};while(n=e.match(E))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):(0,i.rs)(e.slice(2));return[n,t]}let k=0;const C=Promise.resolve(),I=()=>k||(C.then((()=>k=0)),k=Date.now());function O(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();(0,r.$d)(x(e,n.value),t,5,[e])};return n.value=e,n.attached=I(),n}function x(e,t){if((0,i.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const A=/^on[a-z]/,D=(e,t,n,r,s=!1,o,a,u,c)=>{"class"===t?l(e,r,s):"style"===t?h(e,n,r):(0,i.F7)(t)?(0,i.tR)(t)||w(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):P(e,t,r,s))?_(e,t,r,o,a,u,c):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),v(e,t,r,s))};function P(e,t,n,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&A.test(t)&&(0,i.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!A.test(t)||!(0,i.HD)(n))&&t in e))))}function R(e,t){const n=(0,r.aZ)(e);class i extends M{constructor(e){super(n,e,t)}}return i.def=n,i}const N=e=>R(e,qe),L="undefined"!==typeof HTMLElement?HTMLElement:class{};class M extends L{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,(0,r.Y3)((()=>{this._connected||($e(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})).observe(this,{attributes:!0});const e=(e,t=!1)=>{const{props:n,styles:r}=e;let s;if(n&&!(0,i.kJ)(n))for(const o in n){const e=n[o];(e===Number||e&&e.type===Number)&&(o in this._props&&(this._props[o]=(0,i.He)(this._props[o])),(s||(s=Object.create(null)))[(0,i._A)(o)]=!0)}this._numberProps=s,t&&this._resolveProps(e),this._applyStyles(r),this._update()},t=this._def.__asyncLoader;t?t().then((t=>e(t,!0))):e(this._def)}_resolveProps(e){const{props:t}=e,n=(0,i.kJ)(t)?t:Object.keys(t||{});for(const i of Object.keys(this))"_"!==i[0]&&n.includes(i)&&this._setProp(i,this[i],!0,!1);for(const r of n.map(i._A))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(e){this._setProp(r,e)}})}_setAttr(e){let t=this.getAttribute(e);const n=(0,i._A)(e);this._numberProps&&this._numberProps[n]&&(t=(0,i.He)(t)),this._setProp(n,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,r=!0){t!==this._props[e]&&(this._props[e]=t,r&&this._instance&&this._update(),n&&(!0===t?this.setAttribute((0,i.rs)(e),""):"string"===typeof t||"number"===typeof t?this.setAttribute((0,i.rs)(e),t+""):t||this.removeAttribute((0,i.rs)(e))))}_update(){$e(this._createVNode(),this.shadowRoot)}_createVNode(){const e=(0,r.Wm)(this._def,(0,i.l7)({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};e.emit=(e,...n)=>{t(e,n),(0,i.rs)(e)!==e&&t((0,i.rs)(e),n)};let n=this;while(n=n&&(n.parentNode||n.host))if(n instanceof M){e.parent=n._instance,e.provides=n._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function U(e="$style"){{const t=(0,r.FN)();if(!t)return i.kT;const n=t.type.__cssModules;if(!n)return i.kT;const s=n[e];return s||i.kT}}function j(e){const t=(0,r.FN)();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>B(e,n)))},i=()=>{const i=e(t.proxy);F(t.subTree,i),n(i)};(0,r.Rh)(i),(0,r.bv)((()=>{const e=new MutationObserver(i);e.observe(t.subTree.el.parentNode,{childList:!0}),(0,r.Ah)((()=>e.disconnect()))}))}function F(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{F(n.activeBranch,t)}))}while(e.component)e=e.component.subTree;if(1&e.shapeFlag&&e.el)B(e.el,t);else if(e.type===r.HY)e.children.forEach((e=>F(e,t)));else if(e.type===r.qG){let{el:n,anchor:i}=e;while(n){if(B(n,t),n===i)break;n=n.nextSibling}}}function B(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const V="transition",$="animation",q=(e,{slots:t})=>(0,r.h)(r.P$,Q(e),t);q.displayName="Transition";const H={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},W=q.props=(0,i.l7)({},r.P$.props,H),z=(e,t=[])=>{(0,i.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},G=e=>!!e&&((0,i.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function Q(e){const t={};for(const i in e)i in H||(t[i]=e[i]);if(!1===e.css)return t;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:l=a,appearToClass:h=u,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=K(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:b,onLeave:T,onLeaveCancelled:w,onBeforeAppear:E=v,onAppear:S=_,onAppearCancelled:k=b}=t,C=(e,t,n)=>{J(e,t?h:u),J(e,t?l:a),n&&n()},I=(e,t)=>{e._isLeaving=!1,J(e,d),J(e,f),J(e,p),t&&t()},O=e=>(t,n)=>{const i=e?S:_,s=()=>C(t,e,n);z(i,[t,s]),Z((()=>{J(t,e?c:o),Y(t,e?h:u),G(i)||te(t,r,g,s)}))};return(0,i.l7)(t,{onBeforeEnter(e){z(v,[e]),Y(e,o),Y(e,a)},onBeforeAppear(e){z(E,[e]),Y(e,c),Y(e,l)},onEnter:O(!1),onAppear:O(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>I(e,t);Y(e,d),se(),Y(e,p),Z((()=>{e._isLeaving&&(J(e,d),Y(e,f),G(T)||te(e,r,y,n))})),z(T,[e,n])},onEnterCancelled(e){C(e,!1),z(b,[e])},onAppearCancelled(e){C(e,!0),z(k,[e])},onLeaveCancelled(e){I(e),z(w,[e])}})}function K(e){if(null==e)return null;if((0,i.Kn)(e))return[X(e.enter),X(e.leave)];{const t=X(e);return[t,t]}}function X(e){const t=(0,i.He)(e);return t}function Y(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function J(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Z(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let ee=0;function te(e,t,n,i){const r=e._endId=++ee,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:u}=ne(e,t);if(!o)return i();const c=o+"end";let l=0;const h=()=>{e.removeEventListener(c,d),s()},d=t=>{t.target===e&&++l>=u&&h()};setTimeout((()=>{l<u&&h()}),a+1),e.addEventListener(c,d)}function ne(e,t){const n=window.getComputedStyle(e),i=e=>(n[e]||"").split(", "),r=i(`${V}Delay`),s=i(`${V}Duration`),o=ie(r,s),a=i(`${$}Delay`),u=i(`${$}Duration`),c=ie(a,u);let l=null,h=0,d=0;t===V?o>0&&(l=V,h=o,d=s.length):t===$?c>0&&(l=$,h=c,d=u.length):(h=Math.max(o,c),l=h>0?o>c?V:$:null,d=l?l===V?s.length:u.length:0);const p=l===V&&/\b(transform|all)(,|$)/.test(i(`${V}Property`).toString());return{type:l,timeout:h,propCount:d,hasTransform:p}}function ie(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>re(t)+re(e[n]))))}function re(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function se(){return document.body.offsetHeight}const oe=new WeakMap,ae=new WeakMap,ue={name:"TransitionGroup",props:(0,i.l7)({},W,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,r.FN)(),i=(0,r.Y8)();let o,a;return(0,r.ic)((()=>{if(!o.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!pe(o[0].el,n.vnode.el,t))return;o.forEach(le),o.forEach(he);const i=o.filter(de);se(),i.forEach((e=>{const n=e.el,i=n.style;Y(n,t),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,J(n,t))};n.addEventListener("transitionend",r)}))})),()=>{const u=(0,s.IU)(e),c=Q(u);let l=u.tag||r.HY;o=a,a=t.default?(0,r.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,r.nK)(t,(0,r.U2)(t,c,i,n))}if(o)for(let e=0;e<o.length;e++){const t=o[e];(0,r.nK)(t,(0,r.U2)(t,c,i,n)),oe.set(t,t.el.getBoundingClientRect())}return(0,r.Wm)(l,null,a)}}};ue.props;const ce=ue;function le(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function he(e){ae.set(e,e.el.getBoundingClientRect())}function de(e){const t=oe.get(e),n=ae.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${i}px,${r}px)`,t.transitionDuration="0s",e}}function pe(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&i.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&i.classList.add(e))),i.style.display="none";const r=1===t.nodeType?t:t.parentNode;r.appendChild(i);const{hasTransform:s}=ne(i);return r.removeChild(i),s}const fe=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,i.kJ)(t)?e=>(0,i.ir)(t,e):t};function me(e){e.target.composing=!0}function ge(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ye={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e._assign=fe(s);const o=r||s.props&&"number"===s.props.type;b(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=(0,i.h5)(r)),e._assign(r)})),n&&b(e,"change",(()=>{e.value=e.value.trim()})),t||(b(e,"compositionstart",me),b(e,"compositionend",ge),b(e,"change",ge))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:s}},o){if(e._assign=fe(o),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(r&&e.value.trim()===t)return;if((s||"number"===e.type)&&(0,i.h5)(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},ve={deep:!0,created(e,t,n){e._assign=fe(n),b(e,"change",(()=>{const t=e._modelValue,n=Ee(e),r=e.checked,s=e._assign;if((0,i.kJ)(t)){const e=(0,i.hq)(t,n),o=-1!==e;if(r&&!o)s(t.concat(n));else if(!r&&o){const n=[...t];n.splice(e,1),s(n)}}else if((0,i.DM)(t)){const e=new Set(t);r?e.add(n):e.delete(n),s(e)}else s(Se(e,r))}))},mounted:_e,beforeUpdate(e,t,n){e._assign=fe(n),_e(e,t,n)}};function _e(e,{value:t,oldValue:n},r){e._modelValue=t,(0,i.kJ)(t)?e.checked=(0,i.hq)(t,r.props.value)>-1:(0,i.DM)(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=(0,i.WV)(t,Se(e,!0)))}const be={created(e,{value:t},n){e.checked=(0,i.WV)(t,n.props.value),e._assign=fe(n),b(e,"change",(()=>{e._assign(Ee(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=fe(r),t!==n&&(e.checked=(0,i.WV)(t,r.props.value))}},Te={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=(0,i.DM)(t);b(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?(0,i.h5)(Ee(e)):Ee(e)));e._assign(e.multiple?s?new Set(t):t:t[0])})),e._assign=fe(r)},mounted(e,{value:t}){we(e,t)},beforeUpdate(e,t,n){e._assign=fe(n)},updated(e,{value:t}){we(e,t)}};function we(e,t){const n=e.multiple;if(!n||(0,i.kJ)(t)||(0,i.DM)(t)){for(let r=0,s=e.options.length;r<s;r++){const s=e.options[r],o=Ee(s);if(n)(0,i.kJ)(t)?s.selected=(0,i.hq)(t,o)>-1:s.selected=t.has(o);else if((0,i.WV)(Ee(s),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Ee(e){return"_value"in e?e._value:e.value}function Se(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const ke={created(e,t,n){Ie(e,t,n,null,"created")},mounted(e,t,n){Ie(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Ie(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Ie(e,t,n,i,"updated")}};function Ce(e,t){switch(e){case"SELECT":return Te;case"TEXTAREA":return ye;default:switch(t){case"checkbox":return ve;case"radio":return be;default:return ye}}}function Ie(e,t,n,i,r){const s=Ce(e.tagName,n.props&&n.props.type),o=s[r];o&&o(e,t,n,i)}function Oe(){ye.getSSRProps=({value:e})=>({value:e}),be.getSSRProps=({value:e},t)=>{if(t.props&&(0,i.WV)(t.props.value,e))return{checked:!0}},ve.getSSRProps=({value:e},t)=>{if((0,i.kJ)(e)){if(t.props&&(0,i.hq)(e,t.props.value)>-1)return{checked:!0}}else if((0,i.DM)(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},ke.getSSRProps=(e,t)=>{if("string"!==typeof t.type)return;const n=Ce(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0}}const xe=["ctrl","shift","alt","meta"],Ae={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>xe.some((n=>e[`${n}Key`]&&!t.includes(n)))},De=(e,t)=>(n,...i)=>{for(let e=0;e<t.length;e++){const i=Ae[t[e]];if(i&&i(n,t))return}return e(n,...i)},Pe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Re=(e,t)=>n=>{if(!("key"in n))return;const r=(0,i.rs)(n.key);return t.some((e=>e===r||Pe[e]===r))?e(n):void 0},Ne={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Le(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!==!n&&(i?t?(i.beforeEnter(e),Le(e,!0),i.enter(e)):i.leave(e,(()=>{Le(e,!1)})):Le(e,t))},beforeUnmount(e,{value:t}){Le(e,t)}};function Le(e,t){e.style.display=t?e._vod:"none"}function Me(){Ne.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Ue=(0,i.l7)({patchProp:D},c);let je,Fe=!1;function Be(){return je||(je=(0,r.Us)(Ue))}function Ve(){return je=Fe?je:(0,r.Eo)(Ue),Fe=!0,je}const $e=(...e)=>{Be().render(...e)},qe=(...e)=>{Ve().hydrate(...e)},He=(...e)=>{const t=Be().createApp(...e);const{mount:n}=t;return t.mount=e=>{const r=ze(e);if(!r)return;const s=t._component;(0,i.mf)(s)||s.render||s.template||(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t},We=(...e)=>{const t=Ve().createApp(...e);const{mount:n}=t;return t.mount=e=>{const t=ze(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function ze(e){if((0,i.HD)(e)){const t=document.querySelector(e);return t}return e}let Ge=!1;const Qe=()=>{Ge||(Ge=!0,Oe(),Me())}},7139:function(e,t,n){"use strict";n.d(t,{C_:function(){return h},DM:function(){return N},E9:function(){return ae},F7:function(){return C},Gg:function(){return G},HD:function(){return j},He:function(){return se},Kj:function(){return M},Kn:function(){return B},NO:function(){return S},Nj:function(){return ie},Od:function(){return x},PO:function(){return W},Pq:function(){return f},RI:function(){return D},S0:function(){return z},W7:function(){return H},WV:function(){return y},Z6:function(){return w},_A:function(){return X},_N:function(){return R},aU:function(){return te},dG:function(){return E},e1:function(){return s},fY:function(){return i},h5:function(){return re},hR:function(){return ee},hq:function(){return v},ir:function(){return ne},j5:function(){return o},kC:function(){return Z},kJ:function(){return P},kT:function(){return T},l7:function(){return O},mf:function(){return U},rs:function(){return J},tI:function(){return V},tR:function(){return I},vs:function(){return d},yA:function(){return m},yk:function(){return F},zw:function(){return _}});n(7658);function i(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}const r="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=i(r);function o(e){if(P(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=j(i)?l(i):o(i);if(r)for(const e in r)t[e]=r[e]}return t}return j(e)||B(e)?e:void 0}const a=/;(?![^(]*\))/g,u=/:([^]+)/,c=/\/\*.*?\*\//gs;function l(e){const t={};return e.replace(c,"").split(a).forEach((e=>{if(e){const n=e.split(u);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function h(e){let t="";if(j(e))t=e;else if(P(e))for(let n=0;n<e.length;n++){const i=h(e[n]);i&&(t+=i+" ")}else if(B(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function d(e){if(!e)return null;let{class:t,style:n}=e;return t&&!j(t)&&(e.class=h(t)),n&&(e.style=o(n)),e}const p="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f=i(p);function m(e){return!!e||""===e}function g(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=y(e[i],t[i]);return n}function y(e,t){if(e===t)return!0;let n=L(e),i=L(t);if(n||i)return!(!n||!i)&&e.getTime()===t.getTime();if(n=F(e),i=F(t),n||i)return e===t;if(n=P(e),i=P(t),n||i)return!(!n||!i)&&g(e,t);if(n=B(e),i=B(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const n in e){const i=e.hasOwnProperty(n),r=t.hasOwnProperty(n);if(i&&!r||!i&&r||!y(e[n],t[n]))return!1}}return String(e)===String(t)}function v(e,t){return e.findIndex((e=>y(e,t)))}const _=e=>j(e)?e:null==e?"":P(e)||B(e)&&(e.toString===$||!U(e.toString))?JSON.stringify(e,b,2):String(e),b=(e,t)=>t&&t.__v_isRef?b(e,t.value):R(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:N(t)?{[`Set(${t.size})`]:[...t.values()]}:!B(t)||P(t)||W(t)?t:String(t),T={},w=[],E=()=>{},S=()=>!1,k=/^on[^a-z]/,C=e=>k.test(e),I=e=>e.startsWith("onUpdate:"),O=Object.assign,x=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},A=Object.prototype.hasOwnProperty,D=(e,t)=>A.call(e,t),P=Array.isArray,R=e=>"[object Map]"===q(e),N=e=>"[object Set]"===q(e),L=e=>"[object Date]"===q(e),M=e=>"[object RegExp]"===q(e),U=e=>"function"===typeof e,j=e=>"string"===typeof e,F=e=>"symbol"===typeof e,B=e=>null!==e&&"object"===typeof e,V=e=>B(e)&&U(e.then)&&U(e.catch),$=Object.prototype.toString,q=e=>$.call(e),H=e=>q(e).slice(8,-1),W=e=>"[object Object]"===q(e),z=e=>j(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,G=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Q=e=>{const t=Object.create(null);return n=>{const i=t[n];return i||(t[n]=e(n))}},K=/-(\w)/g,X=Q((e=>e.replace(K,((e,t)=>t?t.toUpperCase():"")))),Y=/\B([A-Z])/g,J=Q((e=>e.replace(Y,"-$1").toLowerCase())),Z=Q((e=>e.charAt(0).toUpperCase()+e.slice(1))),ee=Q((e=>e?`on${Z(e)}`:"")),te=(e,t)=>!Object.is(e,t),ne=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ie=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},re=e=>{const t=parseFloat(e);return isNaN(t)?e:t},se=e=>{const t=j(e)?Number(e):NaN;return isNaN(t)?e:t};let oe;const ae=()=>oe||(oe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},1583:function(e,t,n){"use strict";n.d(t,{g7:function(){return h}});n(7658);var i=null,r={},s=1,o=function(){return function(){function e(){this.id=["slot",s++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=i;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===r)break;return e!==i&&(i.slots[this.id]=t),!0}return i&&(i.slots[this.id]=r),!1},e.prototype.getValue=function(){if(this.hasValue())return i.slots[this.id]},e.prototype.withValue=function(e,t,n,r){var s,o=(s={__proto__:null},s[this.id]=e,s),a=i;i={parent:a,slots:o};try{return t.apply(r,n)}finally{i=a}},e.bind=function(e){var t=i;return function(){var n=i;try{return i=t,e.apply(this,arguments)}finally{i=n}}},e.noContext=function(e,t,n){if(!i)return e.apply(n,t);var r=i;try{return i=null,e.apply(n,t)}finally{i=r}},e}()};function a(e){try{return e()}catch(t){}}var u="@wry/context:Slot",c=a((function(){return globalThis}))||a((function(){return n.g}))||Object.create(null),l=c,h=l[u]||Array[u]||function(e){try{Object.defineProperty(l,u,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(o());h.bind,h.noContext},2713:function(e,t,n){"use strict";n.d(t,{D:function(){return u}});n(3767),n(8585),n(8696);var i=Object.prototype,r=i.toString,s=i.hasOwnProperty,o=Function.prototype.toString,a=new Map;function u(e,t){try{return c(e,t)}finally{a.clear()}}function c(e,t){if(e===t)return!0;var n=r.call(e),i=r.call(t);if(n!==i)return!1;switch(n){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(f(e,t))return!0;var a=l(e),u=l(t),h=a.length;if(h!==u.length)return!1;for(var m=0;m<h;++m)if(!s.call(t,a[m]))return!1;for(m=0;m<h;++m){var g=a[m];if(!c(e[g],t[g]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e===+t;case"[object RegExp]":case"[object String]":return e=="".concat(t);case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(f(e,t))return!0;var y=e.entries(),v="[object Map]"===n;while(1){var _=y.next();if(_.done)break;var b=_.value,T=b[0],w=b[1];if(!t.has(T))return!1;if(v&&!c(w,t.get(T)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":var E=e.byteLength;if(E===t.byteLength)while(E--&&e[E]===t[E]);return-1===E;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var S=o.call(e);return S===o.call(t)&&!p(S,d)}return!1}function l(e){return Object.keys(e).filter(h,e)}function h(e){return void 0!==this[e]}var d="{ [native code] }";function p(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function f(e,t){var n=a.get(e);if(n){if(n.has(t))return!0}else a.set(e,n=new Set);return n.add(t),!1}},4492:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var i=function(){return Object.create(null)},r=Array.prototype,s=r.forEach,o=r.slice,a=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=i),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return s.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(o.call(e)))},e.prototype.getChildTrie=function(t){var n=this.weakness&&u(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=n.get(t);return i||n.set(t,i=new e(this.weakness,this.makeData)),i},e}();function u(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}},2107:function(e,t){"use strict";function n(e,t,n){if(void 0===n&&(n=Array.prototype),e&&"function"===typeof n.find)return n.find.call(e,t);for(var i=0;i<e.length;i++)if(Object.prototype.hasOwnProperty.call(e,i)){var r=e[i];if(t.call(void 0,r,i,e))return r}}function i(e,t){return void 0===t&&(t=Object),t&&"function"===typeof t.freeze?t.freeze(e):e}function r(e,t){if(null===e||"object"!==typeof e)throw new TypeError("target is not an object");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var s=i({HTML:"text/html",isHTML:function(e){return e===s.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=r,t.find=n,t.freeze=i,t.MIME_TYPE=s,t.NAMESPACE=o},8270:function(e,t,n){var i=n(2107),r=n(9569),s=n(3835),o=n(2261),a=r.DOMImplementation,u=i.NAMESPACE,c=o.ParseError,l=o.XMLReader;function h(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function d(e){this.options=e||{locator:{}}}function p(e,t,n){if(!e){if(t instanceof f)return t;e=t}var i={},r=e instanceof Function;function s(t){var s=e[t];!s&&r&&(s=2==e.length?function(n){e(t,n)}:e),i[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+g(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}function f(){this.cdata=!1}function m(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function g(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function y(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function v(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}d.prototype.parseFromString=function(e,t){var n=this.options,i=new l,r=n.domBuilder||new f,o=n.errorHandler,a=n.locator,c=n.xmlns||{},d=/\/x?html?$/.test(t),m=d?s.HTML_ENTITIES:s.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=p(o,r,a),i.domBuilder=n.domBuilder||r,d&&(c[""]=u.HTML),c.xml=c.xml||u.XML;var g=n.normalizeLineEndings||h;return e&&"string"===typeof e?i.parse(g(e),c,m):i.errorHandler.error("invalid doc source"),r.doc},f.prototype={startDocument:function(){this.doc=(new a).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,s=r.createElementNS(e,n||t),o=i.length;v(this,s),this.currentElement=s,this.locator&&m(this.locator,s);for(var a=0;a<o;a++){e=i.getURI(a);var u=i.getValue(a),c=(n=i.getQName(a),r.createAttributeNS(e,n));this.locator&&m(i.getLocator(a),c),c.value=c.nodeValue=u,s.setAttributeNode(c)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&m(this.locator,n),v(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=y.apply(this,arguments),e){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&m(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=y.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&m(this.locator,i),v(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&m(this.locator,r),v(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,g(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,g(this.locator))},fatalError:function(e){throw new c(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){f.prototype[e]=function(){return null}})),t.DOMParser=d},9569:function(e,t,n){n(7658);var i=n(2107),r=i.find,s=i.NAMESPACE;function o(e){return""!==e}function a(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}function u(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function c(e){if(!e)return[];var t=a(e);return Object.keys(t.reduce(u,{}))}function l(e){return function(t){return e&&-1!==e.indexOf(t)}}function h(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function d(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,i=new i,h(n,i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var p={},f=p.ELEMENT_NODE=1,m=p.ATTRIBUTE_NODE=2,g=p.TEXT_NODE=3,y=p.CDATA_SECTION_NODE=4,v=p.ENTITY_REFERENCE_NODE=5,_=p.ENTITY_NODE=6,b=p.PROCESSING_INSTRUCTION_NODE=7,T=p.COMMENT_NODE=8,w=p.DOCUMENT_NODE=9,E=p.DOCUMENT_TYPE_NODE=10,S=p.DOCUMENT_FRAGMENT_NODE=11,k=p.NOTATION_NODE=12,C={},I={},O=(C.INDEX_SIZE_ERR=(I[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(I[2]="DOMString size error",2),C.HIERARCHY_REQUEST_ERR=(I[3]="Hierarchy request error",3)),x=(C.WRONG_DOCUMENT_ERR=(I[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(I[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(I[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(I[7]="No modification allowed",7),C.NOT_FOUND_ERR=(I[8]="Not found",8)),A=(C.NOT_SUPPORTED_ERR=(I[9]="Not supported",9),C.INUSE_ATTRIBUTE_ERR=(I[10]="Attribute in use",10));C.INVALID_STATE_ERR=(I[11]="Invalid state",11),C.SYNTAX_ERR=(I[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(I[13]="Invalid modification",13),C.NAMESPACE_ERR=(I[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(I[15]="Invalid access",15);function D(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,I[e]),this.message=I[e],Error.captureStackTrace&&Error.captureStackTrace(this,D);return n.code=e,t&&(this.message=this.message+": "+t),n}function P(){}function R(e,t){this._node=e,this._refresh=t,N(this)}function N(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ke(e,"length",n.length),h(n,e),e._inc=t}}function L(){}function M(e,t){var n=e.length;while(n--)if(e[n]===t)return n}function U(e,t,n,i){if(i?t[M(t,i)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(i&&W(r,e,i),H(r,e,n))}}function j(e,t,n){var i=M(t,n);if(!(i>=0))throw new D(x,new Error(e.tagName+"@"+n));var r=t.length-1;while(i<r)t[i]=t[++i];if(t.length=r,e){var s=e.ownerDocument;s&&(W(s,e,n),n.ownerElement=null)}}function F(){}function B(){}function V(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function $(e,t){if(t(e))return!0;if(e=e.firstChild)do{if($(e,t))return!0}while(e=e.nextSibling)}function q(){this.ownerDocument=this}function H(e,t,n){e&&e._inc++;var i=n.namespaceURI;i===s.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function W(e,t,n,i){e&&e._inc++;var r=n.namespaceURI;r===s.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function z(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{var r=t.firstChild,s=0;while(r)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function G(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,z(e.ownerDocument,e),t}function Q(e){return e&&(e.nodeType===B.DOCUMENT_NODE||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.ELEMENT_NODE)}function K(e){return e&&(Y(e)||J(e)||X(e)||e.nodeType===B.DOCUMENT_FRAGMENT_NODE||e.nodeType===B.COMMENT_NODE||e.nodeType===B.PROCESSING_INSTRUCTION_NODE)}function X(e){return e&&e.nodeType===B.DOCUMENT_TYPE_NODE}function Y(e){return e&&e.nodeType===B.ELEMENT_NODE}function J(e){return e&&e.nodeType===B.TEXT_NODE}function Z(e,t){var n=e.childNodes||[];if(r(n,Y)||X(t))return!1;var i=r(n,X);return!(t&&i&&n.indexOf(i)>n.indexOf(t))}function ee(e,t){var n=e.childNodes||[];function i(e){return Y(e)&&e!==t}if(r(n,i))return!1;var s=r(n,X);return!(t&&s&&n.indexOf(s)>n.indexOf(t))}function te(e,t,n){if(!Q(e))throw new D(O,"Unexpected parent node type "+e.nodeType);if(n&&n.parentNode!==e)throw new D(x,"child not in parent");if(!K(t)||X(t)&&e.nodeType!==B.DOCUMENT_NODE)throw new D(O,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function ne(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=s.filter(Y);if(o.length>1||r(s,J))throw new D(O,"More than one element or text in fragment");if(1===o.length&&!Z(e,n))throw new D(O,"Element in fragment can not be inserted before doctype")}if(Y(t)&&!Z(e,n))throw new D(O,"Only one element can be added and only after doctype");if(X(t)){if(r(i,X))throw new D(O,"Only one doctype is allowed");var a=r(i,Y);if(n&&i.indexOf(a)<i.indexOf(n))throw new D(O,"Doctype can only be inserted before an element");if(!n&&a)throw new D(O,"Doctype can not be appended since element is present")}}function ie(e,t,n){var i=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===B.DOCUMENT_FRAGMENT_NODE){var o=s.filter(Y);if(o.length>1||r(s,J))throw new D(O,"More than one element or text in fragment");if(1===o.length&&!ee(e,n))throw new D(O,"Element in fragment can not be inserted before doctype")}if(Y(t)&&!ee(e,n))throw new D(O,"Only one element can be added and only after doctype");if(X(t)){function a(e){return X(e)&&e!==n}if(r(i,a))throw new D(O,"Only one doctype is allowed");var u=r(i,Y);if(n&&i.indexOf(u)<i.indexOf(n))throw new D(O,"Doctype can only be inserted before an element")}}function re(e,t,n,i){te(e,t,n),e.nodeType===B.DOCUMENT_NODE&&(i||ne)(e,t,n);var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===S){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var a=n?n.previousSibling:e.lastChild;s.previousSibling=a,o.nextSibling=n,a?a.nextSibling=s:e.firstChild=s,null==n?e.lastChild=o:n.previousSibling=o;do{s.parentNode=e}while(s!==o&&(s=s.nextSibling));return z(e.ownerDocument||e,e),t.nodeType==S&&(t.firstChild=t.lastChild=null),t}function se(e,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=e,t.previousSibling=e.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,e.lastChild=t,z(e.ownerDocument,e,t),t}function oe(){this._nsMap={}}function ae(){}function ue(){}function ce(){}function le(){}function he(){}function de(){}function pe(){}function fe(){}function me(){}function ge(){}function ye(){}function ve(){}function _e(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&null==r){r=i.lookupPrefix(s);if(null==r)var o=[{namespace:s,prefix:null}]}return we(this,n,e,t,o),n.join("")}function be(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(!r)return!1;if("xml"===i&&r===s.XML||r===s.XMLNS)return!1;var o=n.length;while(o--){var a=n[o];if(a.prefix===i)return a.namespace!==r}return!0}function Te(e,t,n){e.push(" ",t,'="',n.replace(/[<>&"\t\n\r]/g,V),'"')}function we(e,t,n,i,r){if(r||(r=[]),i){if(e=i(e),!e)return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case f:var o=e.attributes,a=o.length,u=e.firstChild,c=e.tagName;n=s.isHTML(e.namespaceURI)||n;var l=c;if(!n&&!e.prefix&&e.namespaceURI){for(var h,d=0;d<o.length;d++)if("xmlns"===o.item(d).name){h=o.item(d).value;break}if(!h)for(var p=r.length-1;p>=0;p--){var _=r[p];if(""===_.prefix&&_.namespace===e.namespaceURI){h=_.namespace;break}}if(h!==e.namespaceURI)for(p=r.length-1;p>=0;p--){_=r[p];if(_.namespace===e.namespaceURI){_.prefix&&(l=_.prefix+":"+c);break}}}t.push("<",l);for(var k=0;k<a;k++){var C=o.item(k);"xmlns"==C.prefix?r.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&r.push({prefix:"",namespace:C.value})}for(k=0;k<a;k++){C=o.item(k);if(be(C,n,r)){var I=C.prefix||"",O=C.namespaceURI;Te(t,I?"xmlns:"+I:"xmlns",O),r.push({prefix:I,namespace:O})}we(C,t,n,i,r)}if(c===l&&be(e,n,r)){I=e.prefix||"",O=e.namespaceURI;Te(t,I?"xmlns:"+I:"xmlns",O),r.push({prefix:I,namespace:O})}if(u||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),n&&/^script$/i.test(c))while(u)u.data?t.push(u.data):we(u,t,n,i,r.slice()),u=u.nextSibling;else while(u)we(u,t,n,i,r.slice()),u=u.nextSibling;t.push("</",l,">")}else t.push("/>");return;case w:case S:u=e.firstChild;while(u)we(u,t,n,i,r.slice()),u=u.nextSibling;return;case m:return Te(t,e.name,e.value);case g:return t.push(e.data.replace(/[<&>]/g,V));case y:return t.push("<![CDATA[",e.data,"]]>");case T:return t.push("\x3c!--",e.data,"--\x3e");case E:var x=e.publicId,A=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(" PUBLIC ",x),A&&"."!=A&&t.push(" ",A),t.push(">");else if(A&&"."!=A)t.push(" SYSTEM ",A,">");else{var D=e.internalSubset;D&&t.push(" [",D,"]"),t.push(">")}return;case b:return t.push("<?",e.target," ",e.data,"?>");case v:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Ee(e,t,n){var i;switch(t.nodeType){case f:i=t.cloneNode(!1),i.ownerDocument=e;case S:break;case m:n=!0;break}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n){var r=t.firstChild;while(r)i.appendChild(Ee(e,r,n)),r=r.nextSibling}return i}function Se(e,t,n){var i=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=t[r];"object"!=typeof s&&s!=i[r]&&(i[r]=s)}switch(t.childNodes&&(i.childNodes=new P),i.ownerDocument=e,i.nodeType){case f:var o=t.attributes,a=i.attributes=new L,u=o.length;a._ownerElement=i;for(var c=0;c<u;c++)i.setAttributeNode(Se(e,o.item(c),!0));break;case m:n=!0}if(n){var l=t.firstChild;while(l)i.appendChild(Se(e,l,n)),l=l.nextSibling}return i}function ke(e,t,n){e[t]=n}D.prototype=Error.prototype,h(C,D),P.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)we(this[i],n,e,t);return n.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},R.prototype.item=function(e){return N(this),this[e]},d(R,P),L.prototype={length:0,item:P.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new D(A);var n=this.getNamedItem(e.nodeName);return U(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new D(A);return t=this.getNamedItemNS(e.namespaceURI,e.localName),U(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return j(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return j(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){var n=this.length;while(n--){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},F.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new q;if(i.implementation=this,i.childNodes=new P,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new de;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},B.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return re(this,e,t)},replaceChild:function(e,t){re(this,e,t,ie),t&&this.removeChild(t)},removeChild:function(e){return G(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Se(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;t&&t.nodeType==g&&e.nodeType==g?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var n=t._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e)return i;t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var n=t._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,e))return n[e];t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},h(p,B),h(p,B.prototype),q.prototype={nodeName:"#document",nodeType:w,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==S){var n=e.firstChild;while(n){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return re(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===f&&(this.documentElement=e),e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),G(this,e)},replaceChild:function(e,t){re(this,e,t,ie),e.ownerDocument=this,t&&this.removeChild(t),Y(e)&&(this.documentElement=e)},importNode:function(e,t){return Ee(this,e,t)},getElementById:function(e){var t=null;return $(this.documentElement,(function(n){if(n.nodeType==f&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=c(e);return new R(this,(function(n){var i=[];return t.length>0&&$(n.documentElement,(function(r){if(r!==n&&r.nodeType===f){var s=r.getAttribute("class");if(s){var o=e===s;if(!o){var a=c(s);o=t.every(l(a))}o&&i.push(r)}}})),i}))},createElement:function(e){var t=new oe;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new P;var n=t.attributes=new L;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new ge;return e.ownerDocument=this,e.childNodes=new P,e},createTextNode:function(e){var t=new ce;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new le;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new he;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ye;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new ae;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new me;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new oe,i=t.split(":"),r=n.attributes=new L;return n.childNodes=new P,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new ae,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},d(q,B),oe.prototype={nodeType:f,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===S?this.insertBefore(e,null):se(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new R(this,(function(t){var n=[];return $(t,(function(i){i===t||i.nodeType!=f||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new R(this,(function(n){var i=[];return $(n,(function(r){r===n||r.nodeType!==f||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},q.prototype.getElementsByTagName=oe.prototype.getElementsByTagName,q.prototype.getElementsByTagNameNS=oe.prototype.getElementsByTagNameNS,d(oe,B),ae.prototype.nodeType=m,d(ae,B),ue.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(I[O])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var i=this.data.substring(0,e),r=this.data.substring(e+t);n=i+n+r,this.nodeValue=this.data=n,this.length=n.length}},d(ue,B),ce.prototype={nodeName:"#text",nodeType:g,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},d(ce,ue),le.prototype={nodeName:"#comment",nodeType:T},d(le,ue),he.prototype={nodeName:"#cdata-section",nodeType:y},d(he,ue),de.prototype.nodeType=E,d(de,B),pe.prototype.nodeType=k,d(pe,B),fe.prototype.nodeType=_,d(fe,B),me.prototype.nodeType=v,d(me,B),ge.prototype.nodeName="#document-fragment",ge.prototype.nodeType=S,d(ge,B),ye.prototype.nodeType=b,d(ye,B),ve.prototype.serializeToString=function(e,t,n){return _e.call(e,t,n)},B.prototype.toString=_e;try{if(Object.defineProperty){function Ce(e){switch(e.nodeType){case f:case S:var t=[];e=e.firstChild;while(e)7!==e.nodeType&&8!==e.nodeType&&t.push(Ce(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(R.prototype,"length",{get:function(){return N(this),this.$$length}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return Ce(this)},set:function(e){switch(this.nodeType){case f:case S:while(this.firstChild)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ke=function(e,t,n){e["$$"+t]=n}}}catch(Ie){}t.DocumentType=de,t.DOMException=D,t.DOMImplementation=F,t.Element=oe,t.Node=B,t.NodeList=P,t.XMLSerializer=ve},3835:function(e,t,n){var i=n(2107).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES},7978:function(e,t,n){var i=n(9569);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(8270).DOMParser},2261:function(e,t,n){n(7658);var i=n(2107).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$"),a=0,u=1,c=2,l=3,h=4,d=5,p=6,f=7;function m(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,m)}function g(){}function y(e,t,n,r,s){function o(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function a(e){var t=e.slice(1,-1);return Object.hasOwnProperty.call(n,t)?n[t]:"#"===t.charAt(0)?o(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function u(t){if(t>y){var n=e.substring(y,t).replace(/&#?\w+;/g,a);p&&c(y),r.characters(n,0,t-y),y=t}}function c(t,n){while(t>=h&&(n=d.exec(e)))l=n.index,h=l+n[0].length,p.lineNumber++;p.columnNumber=t-l+1}var l=0,h=0,d=/.*(?:\r\n?|\n)|.*$/g,p=r.locator,f=[{currentNSMap:t}],g={},y=0;while(1){try{var E=e.indexOf("<",y);if(E<0){if(!e.substr(y).match(/^\s*$/)){var I=r.doc,O=I.createTextNode(e.substr(y));I.appendChild(O),r.currentElement=O}return}switch(E>y&&u(E),e.charAt(E+1)){case"/":var x=e.indexOf(">",E+3),A=e.substring(E+2,x).replace(/[ \t\n\r]+$/g,""),D=f.pop();x<0?(A=e.substring(E+2).replace(/[\s<].*/,""),s.error("end tag name: "+A+" is not complete:"+D.tagName),x=E+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),s.error("end tag name: "+A+" maybe not complete"),x=E+1+A.length);var P=D.localNSMap,R=D.tagName==A,N=R||D.tagName&&D.tagName.toLowerCase()==A.toLowerCase();if(N){if(r.endElement(D.uri,D.localName,A),P)for(var L in P)Object.prototype.hasOwnProperty.call(P,L)&&r.endPrefixMapping(L);R||s.fatalError("end tag name: "+A+" is not match the current start tagName:"+D.tagName)}else f.push(D);x++;break;case"?":p&&c(E),x=k(e,E,r);break;case"!":p&&c(E),x=S(e,E,r,s);break;default:p&&c(E);var M=new C,U=f[f.length-1].currentNSMap,j=(x=_(e,E,M,U,a,s),M.length);if(!M.closed&&w(e,x,M.tagName,g)&&(M.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),p&&j){for(var F=v(p,{}),B=0;B<j;B++){var V=M[B];c(V.offset),V.locator=v(p,{})}r.locator=F,b(M,r,U)&&f.push(M),r.locator=p}else b(M,r,U)&&f.push(M);i.isHTML(M.uri)&&!M.closed?x=T(e,x,M.tagName,a,r):x++}}catch($){if($ instanceof m)throw $;s.error("element parse error: "+$),x=-1}x>y?y=x:u(Math.max(E,y)+1)}}function v(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function _(e,t,n,r,s,o){function m(e,t,i){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),i)}var g,y=++t,v=a;while(1){var _=e.charAt(y);switch(_){case"=":if(v===u)g=e.slice(t,y),v=l;else{if(v!==c)throw new Error("attribute equal must after attrName");v=l}break;case"'":case'"':if(v===l||v===u){if(v===u&&(o.warning('attribute value must after "="'),g=e.slice(t,y)),t=y+1,y=e.indexOf(_,t),!(y>0))throw new Error("attribute value no end '"+_+"' match");b=e.slice(t,y),m(g,b,t-1),v=d}else{if(v!=h)throw new Error('attribute value must after "="');b=e.slice(t,y),m(g,b,t),o.warning('attribute "'+g+'" missed start quot('+_+")!!"),t=y+1,v=d}break;case"/":switch(v){case a:n.setTagName(e.slice(t,y));case d:case p:case f:v=f,n.closed=!0;case h:case u:case c:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),v==a&&n.setTagName(e.slice(t,y)),y;case">":switch(v){case a:n.setTagName(e.slice(t,y));case d:case p:case f:break;case h:case u:b=e.slice(t,y),"/"===b.slice(-1)&&(n.closed=!0,b=b.slice(0,-1));case c:v===c&&(b=g),v==h?(o.warning('attribute "'+b+'" missed quot(")!'),m(g,b,t)):(i.isHTML(r[""])&&b.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+b+'" missed value!! "'+b+'" instead!!'),m(b,b,t));break;case l:throw new Error("attribute value missed!!")}return y;case"":_=" ";default:if(_<=" ")switch(v){case a:n.setTagName(e.slice(t,y)),v=p;break;case u:g=e.slice(t,y),v=c;break;case h:var b=e.slice(t,y);o.warning('attribute "'+b+'" missed quot(")!!'),m(g,b,t);case d:v=p;break}else switch(v){case c:n.tagName;i.isHTML(r[""])&&g.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!'),m(g,g,t),t=y,v=u;break;case d:o.warning('attribute space is required"'+g+'"!!');case p:v=u,t=y;break;case l:v=h,t=y;break;case f:throw new Error("elements closed character '/' and '>' must be connected to")}}y++}}function b(e,t,n){var r=e.tagName,s=null,o=e.length;while(o--){var a=e[o],u=a.qName,c=a.value,l=u.indexOf(":");if(l>0)var h=a.prefix=u.slice(0,l),d=u.slice(l+1),p="xmlns"===h&&d;else d=u,h=null,p="xmlns"===u&&"";a.localName=d,!1!==p&&(null==s&&(s={},E(n,n={})),n[p]=s[p]=c,a.uri=i.XMLNS,t.startPrefixMapping(p,c))}o=e.length;while(o--){a=e[o];h=a.prefix;h&&("xml"===h&&(a.uri=i.XML),"xmlns"!==h&&(a.uri=n[h||""]))}l=r.indexOf(":");l>0?(h=e.prefix=r.slice(0,l),d=e.localName=r.slice(l+1)):(h=null,d=e.localName=r);var f=e.uri=n[h||""];if(t.startElement(f,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=s,!0;if(t.endElement(f,d,r),s)for(h in s)Object.prototype.hasOwnProperty.call(s,h)&&t.endPrefixMapping(h)}function T(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),o=e.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),s)}return t+1}function w(e,t,n,i){var r=i[n];return null==r&&(r=e.lastIndexOf("</"+n+">"),r<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function E(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function S(e,t,n,i){var r=e.charAt(t+2);switch(r){case"-":if("-"===e.charAt(t+3)){var s=e.indexOf("--\x3e",t+4);return s>t?(n.comment(e,t+4,s-t-4),s+3):(i.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){s=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,s-t-9),n.endCDATA(),s+3}var o=I(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],c=!1,l=!1;a>3&&(/^public$/i.test(o[2][0])?(c=o[3][0],l=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(l=o[3][0]));var h=o[a-1];return n.startDTD(u,c,l),n.endDTD(),h.index+h[0].length}}return-1}function k(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function C(){this.attributeNames={}}function I(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);while(n=r.exec(e))if(i.push(n),n[1])return i}m.prototype=new Error,m.prototype.name=m.name,g.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),E(t,t={}),y(e,t,n,i,this.errorHandler),i.endDocument()}},C.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=g,t.ParseError=m},918:function(e,t,n){"use strict";const{ApolloLink:i,Observable:r}=n(6927),{createSignalIfSupported:s,fallbackHttpConfig:o,parseAndCheckHttpResponse:a,rewriteURIForGET:u,selectHttpOptionsAndBody:c,selectURI:l,serializeFetchParameter:h}=n(1967),d=n(3766),p=n(2845),f=n(9626);e.exports=function({uri:e="/graphql",useGETForQueries:t,isExtractableFile:n=f,FormData:m,formDataAppendFile:g=p,fetch:y,fetchOptions:v,credentials:_,headers:b,includeExtensions:T}={}){const w={http:{includeExtensions:T},options:v,credentials:_,headers:b};return new i((i=>{const p=i.getContext(),{clientAwareness:{name:f,version:v}={},headers:_}=p,b={http:p.http,options:p.fetchOptions,credentials:p.credentials,headers:{...f&&{"apollographql-client-name":f},...v&&{"apollographql-client-version":v},..._}},{options:T,body:E}=c(i,o,w,b),{clone:S,files:k}=d(E,"",n);let C=l(i,e);if(k.size){delete T.headers["content-type"];const e=m||FormData,t=new e;t.append("operations",h(S,"Payload"));const n={};let i=0;k.forEach((e=>{n[++i]=e})),t.append("map",JSON.stringify(n)),i=0,k.forEach(((e,n)=>{g(t,++i,n)})),T.body=t}else if(t&&!i.query.definitions.some((e=>"OperationDefinition"===e.kind&&"mutation"===e.operation))&&(T.method="GET"),"GET"===T.method){const{newURI:e,parseError:t}=u(C,E);if(t)return new r((e=>{e.error(t)}));C=e}else T.body=h(S,"Payload");const{controller:I}=s();I&&(T.signal&&(T.signal.aborted?I.abort():T.signal.addEventListener("abort",(()=>{I.abort()}),{once:!0})),T.signal=I.signal);const O=y||fetch;return new r((e=>{let t;return O(C,T).then((e=>(i.setContext({response:e}),e))).then(a(i)).then((t=>{e.next(t),e.complete()})).catch((n=>{t||(n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n))})),()=>{t=!0,I&&I.abort()}}))}))}},2845:function(e){"use strict";e.exports=function(e,t,n){e.append(t,n,n.name)}},9626:function(e,t,n){"use strict";e.exports=n(4253)},9222:function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},6856:function(e,t,n){"use strict";n(7658);var i=Object.prototype.hasOwnProperty,r="~";function s(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,i,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function c(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return u(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||u(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[s]=1===c.length?c[0]:c:u(this,s)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&u(this,t)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c},2509:function(e){"use strict";e.exports=class{constructor({uri:e,name:t,type:n}){this.uri=e,this.name=t,this.type=n}}},3766:function(e,t,n){"use strict";n(7658);const i=n(4253);e.exports=function(e,t="",n=i){const r=new Map,s=new Map;function o(e,t,i){let a=e;if(n(e)){a=null;const n=r.get(e);n?n.push(t):r.set(e,[t])}else{const n=Array.isArray(e)||"undefined"!==typeof FileList&&e instanceof FileList,r=e&&e.constructor===Object;if(n||r){const r=s.has(e);if(r?a=s.get(e):(a=n?[]:{},s.set(e,a)),!i.has(e)){const s=t?`${t}.`:"",u=new Set(i).add(e);if(n){let t=0;for(const n of e){const e=o(n,s+t++,u);r||a.push(e)}}else for(const t in e){const n=o(e[t],s+t,u);r||(a[t]=n)}}}}return a}return{clone:o(e,t,new Set),files:r}}},4253:function(e,t,n){"use strict";const i=n(2509);e.exports=function(e){return"undefined"!==typeof File&&e instanceof File||"undefined"!==typeof Blob&&e instanceof Blob||e instanceof i}},9004:function(e,t,n){var i,r="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},s=n(5893);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=s)),e.exports=i},5743:function(e,t,n){var i;i="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},e.exports=i},8833:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ae},J9:function(){return se},_t:function(){return ie},wO:function(){return re},Ps:function(){return te},HW:function(){return ne}});n(7658);var i=n(2900);function r(e){return"object"==typeof e&&null!==e}function s(e,t){const n=Boolean(e);if(!n)throw new Error(null!=t?t:"Unexpected invariant triggered.")}const o=/\r\n|[\n\r]/g;function a(e,t){let n=0,i=1;for(const r of e.body.matchAll(o)){if("number"===typeof r.index||s(!1),r.index>=t)break;n=r.index+r[0].length,i+=1}return{line:i,column:t+1-n}}function u(e){return c(e.source,a(e.source,e.start))}function c(e,t){const n=e.locationOffset.column-1,i="".padStart(n)+e.body,r=t.line-1,s=e.locationOffset.line-1,o=t.line+s,a=1===t.line?n:0,u=t.column+a,c=`${e.name}:${o}:${u}\n`,h=i.split(/\r\n|[\n\r]/g),d=h[r];if(d.length>120){const e=Math.floor(u/80),t=u%80,n=[];for(let i=0;i<d.length;i+=80)n.push(d.slice(i,i+80));return c+l([[`${o} |`,n[0]],...n.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(t)],["|",n[e+1]]])}return c+l([[o-1+" |",h[r-1]],[`${o} |`,d],["|","^".padStart(u)],[`${o+1} |`,h[r+1]]])}function l(e){const t=e.filter((([e,t])=>void 0!==t)),n=Math.max(...t.map((([e])=>e.length)));return t.map((([e,t])=>e.padStart(n)+(t?" "+t:""))).join("\n")}function h(e){const t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class d extends Error{constructor(e,...t){var n,i,s;const{nodes:o,source:u,positions:c,path:l,originalError:f,extensions:m}=h(t);super(e),this.name="GraphQLError",this.path=null!==l&&void 0!==l?l:void 0,this.originalError=null!==f&&void 0!==f?f:void 0,this.nodes=p(Array.isArray(o)?o:o?[o]:void 0);const g=p(null===(n=this.nodes)||void 0===n?void 0:n.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!==u&&void 0!==u?u:null===g||void 0===g||null===(i=g[0])||void 0===i?void 0:i.source,this.positions=null!==c&&void 0!==c?c:null===g||void 0===g?void 0:g.map((e=>e.start)),this.locations=c&&u?c.map((e=>a(u,e))):null===g||void 0===g?void 0:g.map((e=>a(e.source,e.start)));const y=r(null===f||void 0===f?void 0:f.extensions)?null===f||void 0===f?void 0:f.extensions:void 0;this.extensions=null!==(s=null!==m&&void 0!==m?m:y)&&void 0!==s?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!==f&&void 0!==f&&f.stack?Object.defineProperty(this,"stack",{value:f.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,d):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+="\n\n"+u(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+="\n\n"+c(this.source,t);return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function p(e){return void 0===e||0===e.length?void 0:e}function f(e,t,n){return new d(`Syntax Error: ${n}`,{source:e,positions:[t]})}var m,g=n(8027);(function(e){e["QUERY"]="QUERY",e["MUTATION"]="MUTATION",e["SUBSCRIPTION"]="SUBSCRIPTION",e["FIELD"]="FIELD",e["FRAGMENT_DEFINITION"]="FRAGMENT_DEFINITION",e["FRAGMENT_SPREAD"]="FRAGMENT_SPREAD",e["INLINE_FRAGMENT"]="INLINE_FRAGMENT",e["VARIABLE_DEFINITION"]="VARIABLE_DEFINITION",e["SCHEMA"]="SCHEMA",e["SCALAR"]="SCALAR",e["OBJECT"]="OBJECT",e["FIELD_DEFINITION"]="FIELD_DEFINITION",e["ARGUMENT_DEFINITION"]="ARGUMENT_DEFINITION",e["INTERFACE"]="INTERFACE",e["UNION"]="UNION",e["ENUM"]="ENUM",e["ENUM_VALUE"]="ENUM_VALUE",e["INPUT_OBJECT"]="INPUT_OBJECT",e["INPUT_FIELD_DEFINITION"]="INPUT_FIELD_DEFINITION"})(m||(m={}));var y,v=n(4478),_=n(7872),b=n(193);(function(e){e["SOF"]="<SOF>",e["EOF"]="<EOF>",e["BANG"]="!",e["DOLLAR"]="$",e["AMP"]="&",e["PAREN_L"]="(",e["PAREN_R"]=")",e["SPREAD"]="...",e["COLON"]=":",e["EQUALS"]="=",e["AT"]="@",e["BRACKET_L"]="[",e["BRACKET_R"]="]",e["BRACE_L"]="{",e["PIPE"]="|",e["BRACE_R"]="}",e["NAME"]="Name",e["INT"]="Int",e["FLOAT"]="Float",e["STRING"]="String",e["BLOCK_STRING"]="BlockString",e["COMMENT"]="Comment"})(y||(y={}));class T{constructor(e){const t=new g.WU(y.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;const e=this.token=this.lookahead();return e}lookahead(){let e=this.token;if(e.kind!==y.EOF)do{if(e.next)e=e.next;else{const t=x(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===y.COMMENT);return e}}function w(e){return e===y.BANG||e===y.DOLLAR||e===y.AMP||e===y.PAREN_L||e===y.PAREN_R||e===y.SPREAD||e===y.COLON||e===y.EQUALS||e===y.AT||e===y.BRACKET_L||e===y.BRACKET_R||e===y.BRACE_L||e===y.PIPE||e===y.BRACE_R}function E(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function S(e,t){return k(e.charCodeAt(t))&&C(e.charCodeAt(t+1))}function k(e){return e>=55296&&e<=56319}function C(e){return e>=56320&&e<=57343}function I(e,t){const n=e.source.body.codePointAt(t);if(void 0===n)return y.EOF;if(n>=32&&n<=126){const e=String.fromCodePoint(n);return'"'===e?"'\"'":`"${e}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function O(e,t,n,i,r){const s=e.line,o=1+n-e.lineStart;return new g.WU(t,n,i,s,o,r)}function x(e,t){const n=e.source.body,i=n.length;let r=t;while(r<i){const t=n.charCodeAt(r);switch(t){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++e.line,e.lineStart=r;continue;case 13:10===n.charCodeAt(r+1)?r+=2:++r,++e.line,e.lineStart=r;continue;case 35:return A(e,r);case 33:return O(e,y.BANG,r,r+1);case 36:return O(e,y.DOLLAR,r,r+1);case 38:return O(e,y.AMP,r,r+1);case 40:return O(e,y.PAREN_L,r,r+1);case 41:return O(e,y.PAREN_R,r,r+1);case 46:if(46===n.charCodeAt(r+1)&&46===n.charCodeAt(r+2))return O(e,y.SPREAD,r,r+3);break;case 58:return O(e,y.COLON,r,r+1);case 61:return O(e,y.EQUALS,r,r+1);case 64:return O(e,y.AT,r,r+1);case 91:return O(e,y.BRACKET_L,r,r+1);case 93:return O(e,y.BRACKET_R,r,r+1);case 123:return O(e,y.BRACE_L,r,r+1);case 124:return O(e,y.PIPE,r,r+1);case 125:return O(e,y.BRACE_R,r,r+1);case 34:return 34===n.charCodeAt(r+1)&&34===n.charCodeAt(r+2)?F(e,r):R(e,r)}if((0,b.X1)(t)||45===t)return D(e,r,t);if((0,b.LQ)(t))return B(e,r);throw f(e.source,r,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":E(t)||S(n,r)?`Unexpected character: ${I(e,r)}.`:`Invalid character: ${I(e,r)}.`)}return O(e,y.EOF,i,i)}function A(e,t){const n=e.source.body,i=n.length;let r=t+1;while(r<i){const e=n.charCodeAt(r);if(10===e||13===e)break;if(E(e))++r;else{if(!S(n,r))break;r+=2}}return O(e,y.COMMENT,t,r,n.slice(t+1,r))}function D(e,t,n){const i=e.source.body;let r=t,s=n,o=!1;if(45===s&&(s=i.charCodeAt(++r)),48===s){if(s=i.charCodeAt(++r),(0,b.X1)(s))throw f(e.source,r,`Invalid number, unexpected digit after 0: ${I(e,r)}.`)}else r=P(e,r,s),s=i.charCodeAt(r);if(46===s&&(o=!0,s=i.charCodeAt(++r),r=P(e,r,s),s=i.charCodeAt(r)),69!==s&&101!==s||(o=!0,s=i.charCodeAt(++r),43!==s&&45!==s||(s=i.charCodeAt(++r)),r=P(e,r,s),s=i.charCodeAt(r)),46===s||(0,b.LQ)(s))throw f(e.source,r,`Invalid number, expected digit but got: ${I(e,r)}.`);return O(e,o?y.FLOAT:y.INT,t,r,i.slice(t,r))}function P(e,t,n){if(!(0,b.X1)(n))throw f(e.source,t,`Invalid number, expected digit but got: ${I(e,t)}.`);const i=e.source.body;let r=t+1;while((0,b.X1)(i.charCodeAt(r)))++r;return r}function R(e,t){const n=e.source.body,i=n.length;let r=t+1,s=r,o="";while(r<i){const i=n.charCodeAt(r);if(34===i)return o+=n.slice(s,r),O(e,y.STRING,t,r+1,o);if(92!==i){if(10===i||13===i)break;if(E(i))++r;else{if(!S(n,r))throw f(e.source,r,`Invalid character within String: ${I(e,r)}.`);r+=2}}else{o+=n.slice(s,r);const t=117===n.charCodeAt(r+1)?123===n.charCodeAt(r+2)?N(e,r):L(e,r):j(e,r);o+=t.value,r+=t.size,s=r}}throw f(e.source,r,"Unterminated string.")}function N(e,t){const n=e.source.body;let i=0,r=3;while(r<12){const e=n.charCodeAt(t+r++);if(125===e){if(r<5||!E(i))break;return{value:String.fromCodePoint(i),size:r}}if(i=i<<4|U(e),i<0)break}throw f(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+r)}".`)}function L(e,t){const n=e.source.body,i=M(n,t+2);if(E(i))return{value:String.fromCodePoint(i),size:6};if(k(i)&&92===n.charCodeAt(t+6)&&117===n.charCodeAt(t+7)){const e=M(n,t+8);if(C(e))return{value:String.fromCodePoint(i,e),size:12}}throw f(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function M(e,t){return U(e.charCodeAt(t))<<12|U(e.charCodeAt(t+1))<<8|U(e.charCodeAt(t+2))<<4|U(e.charCodeAt(t+3))}function U(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function j(e,t){const n=e.source.body,i=n.charCodeAt(t+1);switch(i){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw f(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function F(e,t){const n=e.source.body,i=n.length;let r=e.lineStart,s=t+3,o=s,a="";const u=[];while(s<i){const i=n.charCodeAt(s);if(34===i&&34===n.charCodeAt(s+1)&&34===n.charCodeAt(s+2)){a+=n.slice(o,s),u.push(a);const i=O(e,y.BLOCK_STRING,t,s+3,(0,_.wv)(u).join("\n"));return e.line+=u.length-1,e.lineStart=r,i}if(92!==i||34!==n.charCodeAt(s+1)||34!==n.charCodeAt(s+2)||34!==n.charCodeAt(s+3))if(10!==i&&13!==i)if(E(i))++s;else{if(!S(n,s))throw f(e.source,s,`Invalid character within String: ${I(e,s)}.`);s+=2}else a+=n.slice(o,s),u.push(a),13===i&&10===n.charCodeAt(s+1)?s+=2:++s,a="",o=s,r=s;else a+=n.slice(o,s),o=s+1,s+=4}throw f(e.source,s,"Unterminated string.")}function B(e,t){const n=e.source.body,i=n.length;let r=t+1;while(r<i){const e=n.charCodeAt(r);if(!(0,b.HQ)(e))break;++r}return O(e,y.NAME,t,r,n.slice(t,r))}var V=n(9024);function $(e,t){const n=new q(e,t);return n.parseDocument()}class q{constructor(e,t={}){const n=(0,V.T)(e)?e:new V.H(e);this._lexer=new T(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(y.NAME);return this.node(e,{kind:v.h.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:v.h.DOCUMENT,definitions:this.many(y.SOF,this.parseDefinition,y.EOF)})}parseDefinition(){if(this.peek(y.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===y.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw f(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(y.BRACE_L))return this.node(e,{kind:v.h.OPERATION_DEFINITION,operation:g.ku.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(y.NAME)&&(n=this.parseName()),this.node(e,{kind:v.h.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(y.NAME);switch(e.value){case"query":return g.ku.QUERY;case"mutation":return g.ku.MUTATION;case"subscription":return g.ku.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(y.PAREN_L,this.parseVariableDefinition,y.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:v.h.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(y.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(y.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(y.DOLLAR),this.node(e,{kind:v.h.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:v.h.SELECTION_SET,selections:this.many(y.BRACE_L,this.parseSelection,y.BRACE_R)})}parseSelection(){return this.peek(y.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(y.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:v.h.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(y.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(y.PAREN_L,t,y.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(y.COLON),this.node(t,{kind:v.h.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(y.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(y.NAME)?this.node(e,{kind:v.h.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:v.h.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables?this.node(e,{kind:v.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:v.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case y.BRACKET_L:return this.parseList(e);case y.BRACE_L:return this.parseObject(e);case y.INT:return this.advanceLexer(),this.node(t,{kind:v.h.INT,value:t.value});case y.FLOAT:return this.advanceLexer(),this.node(t,{kind:v.h.FLOAT,value:t.value});case y.STRING:case y.BLOCK_STRING:return this.parseStringLiteral();case y.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:v.h.BOOLEAN,value:!0});case"false":return this.node(t,{kind:v.h.BOOLEAN,value:!1});case"null":return this.node(t,{kind:v.h.NULL});default:return this.node(t,{kind:v.h.ENUM,value:t.value})}case y.DOLLAR:if(e){if(this.expectToken(y.DOLLAR),this._lexer.token.kind===y.NAME){const e=this._lexer.token.value;throw f(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:v.h.STRING,value:e.value,block:e.kind===y.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:v.h.LIST,values:this.any(y.BRACKET_L,t,y.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:v.h.OBJECT,fields:this.any(y.BRACE_L,t,y.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(y.COLON),this.node(t,{kind:v.h.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];while(this.peek(y.AT))t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(y.AT),this.node(t,{kind:v.h.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(y.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(y.BRACKET_R),t=this.node(e,{kind:v.h.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(y.BANG)?this.node(e,{kind:v.h.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:v.h.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(y.STRING)||this.peek(y.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);return this.node(e,{kind:v.h.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(y.COLON);const n=this.parseNamedType();return this.node(e,{kind:v.h.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:v.h.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:v.h.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(y.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(y.BRACE_L,this.parseFieldDefinition,y.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(y.COLON);const r=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:v.h.FIELD_DEFINITION,description:t,name:n,arguments:i,type:r,directives:s})}parseArgumentDefs(){return this.optionalMany(y.PAREN_L,this.parseInputValueDef,y.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(y.COLON);const i=this.parseTypeReference();let r;this.expectOptionalToken(y.EQUALS)&&(r=this.parseConstValueLiteral());const s=this.parseConstDirectives();return this.node(e,{kind:v.h.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:s})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:v.h.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:r,fields:s})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseUnionMemberTypes();return this.node(e,{kind:v.h.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:r})}parseUnionMemberTypes(){return this.expectOptionalToken(y.EQUALS)?this.delimitedMany(y.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();return this.node(e,{kind:v.h.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:r})}parseEnumValuesDefinition(){return this.optionalMany(y.BRACE_L,this.parseEnumValueDefinition,y.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:v.h.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw f(this._lexer.source,this._lexer.token.start,`${H(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();return this.node(e,{kind:v.h.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:r})}parseInputFieldsDefinition(){return this.optionalMany(y.BRACE_L,this.parseInputValueDef,y.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===y.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:v.h.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(0===n.length)throw this.unexpected();return this.node(e,{kind:v.h.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:v.h.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),r=this.parseFieldsDefinition();if(0===n.length&&0===i.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:v.h.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:r})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:v.h.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:v.h.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:v.h.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(y.AT);const n=this.parseName(),i=this.parseArgumentDefs(),r=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const s=this.parseDirectiveLocations();return this.node(e,{kind:v.h.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:r,locations:s})}parseDirectiveLocations(){return this.delimitedMany(y.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(m,t.value))return t;throw this.unexpected(e)}node(e,t){return!0!==this._options.noLocation&&(t.loc=new g.Ye(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw f(this._lexer.source,t.start,`Expected ${W(e)}, found ${H(t)}.`)}expectOptionalToken(e){const t=this._lexer.token;return t.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==y.NAME||t.value!==e)throw f(this._lexer.source,t.start,`Expected "${e}", found ${H(t)}.`);this.advanceLexer()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===y.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){const t=null!==e&&void 0!==e?e:this._lexer.token;return f(this._lexer.source,t.start,`Unexpected ${H(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];while(!this.expectOptionalToken(n))i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const e=[];do{e.push(t.call(this))}while(!this.expectOptionalToken(n));return e}return[]}many(e,t,n){this.expectToken(e);const i=[];do{i.push(t.call(this))}while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(void 0!==e&&t.kind!==y.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw f(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function H(e){const t=e.value;return W(e.kind)+(null!=t?` "${t}"`:"")}function W(e){return w(e)?`"${e}"`:e}var z=new Map,G=new Map,Q=!0,K=!1;function X(e){return e.replace(/[\s,]+/g," ").trim()}function Y(e){return X(e.source.body.substring(e.start,e.end))}function J(e){var t=new Set,n=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var i=e.name.value,r=Y(e.loc),s=G.get(i);s&&!s.has(r)?Q&&console.warn("Warning: fragment with name "+i+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):s||G.set(i,s=new Set),s.add(r),t.has(r)||(t.add(r),n.push(e))}else n.push(e)})),(0,i.pi)((0,i.pi)({},e),{definitions:n})}function Z(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(n){var i=e[n];i&&"object"===typeof i&&t.add(i)}))}));var n=e.loc;return n&&(delete n.startToken,delete n.endToken),e}function ee(e){var t=X(e);if(!z.has(t)){var n=$(e,{experimentalFragmentVariables:K,allowLegacyFragmentVariables:K});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");z.set(t,Z(J(n)))}return z.get(t)}function te(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"string"===typeof e&&(e=[e]);var i=e[0];return t.forEach((function(t,n){t&&"Document"===t.kind?i+=t.loc.source.body:i+=t,i+=e[n+1]})),ee(i)}function ne(){z.clear(),G.clear()}function ie(){Q=!1}function re(){K=!0}function se(){K=!1}var oe={gql:te,resetCaches:ne,disableFragmentWarnings:ie,enableExperimentalFragmentVariables:re,disableExperimentalFragmentVariables:se};(function(e){e.gql=oe.gql,e.resetCaches=oe.resetCaches,e.disableFragmentWarnings=oe.disableFragmentWarnings,e.enableExperimentalFragmentVariables=oe.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=oe.disableExperimentalFragmentVariables})(te||(te={})),te["default"]=te;var ae=te},3940:function(e){e.exports=n;var t=Object.prototype.toString;function n(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"===typeof e&&"[object RegExp]"!==n||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},5801:function(e,t,n){"use strict";
/*!
  * jenesius-vue-modal v1.8.2
  * (c) 2022 Jenesius
  * @license MIT
  */
n(7658);var i=n(6866),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function s(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):r(e.value).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,i&&(r=2&s[0]?i["return"]:s[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var u=function(e){function t(t,n){void 0===n&&(n=null);var i=e.call(this)||this;return i.isModalError=!0,i.message=t,i.details=n,i}return s(t,e),t.Undefined=function(e){return new t("Modal with id: ".concat(e," not founded. The modal window may have been closed earlier."))},t.UndefinedGuardName=function(e){return new t("Guard's name ".concat(e," is not declaration."))},t.NextReject=function(e){return new t("Guard returned false. Modal navigation was stopped. Modal id ".concat(e))},t.GuardDeclarationType=function(e){return new t("Guard's type should be a function. Provided:",e)},t.ConfigurationType=function(e){return new t("Configuration type must be an Object. Provided",e)},t.ConfigurationUndefinedParam=function(e,n){return new t("In configuration founded unknown parameter: ".concat(e,". Available are ").concat(n.join(", ")," "))},t.QueueNoEmpty=function(){return new t("Modal's queue is not empty. Probably some modal reject closing by onClose hook.")},t.EmptyModalQueue=function(){return new t("Modal queue is empty.")},t.NotInitialized=function(){return new t("Modal Container not found. Put container from jenesius-vue-modal in App's template. Check documentation for more information https://modal.jenesius.com/docs.html/installation#getting-started.")},t.ModalComponentNotProvided=function(){return new t("The first parameter(VueComponent) was not specified.")},t.DuplicatedRouterIntegration=function(){return new t("useModalRouter.init should escaped only once.")},t.ModalRouterIntegrationNotInitialized=function(){return new t("The integration was not initialized. Please, use useModalRouter.init(router). For more information: https://modal.jenesius.com/docs.html/integration-vue-router#installation")},t.ModalEventNameMustBeString=function(e){return new t("Event name must be a string. Provided: ".concat(e))},t}(Error),c={scrollLock:!0,animation:"modal-list",backgroundClose:!0,escClose:!0};function l(e){if("object"!==typeof e)throw u.ConfigurationType(e);Object.assign(c,e)}var h=i.ref([]),d={initialized:!1,instanceStorage:{}};i.watch(h.value,(function(){c.scrollLock&&(h.value.length?document.body.style.overflowY="hidden":document.body.style.overflowY="auto")}));var p={store:{},add:function(e,t,n){var i;if("function"!==typeof n)throw u.GuardDeclarationType(n);this.store[e]||(this.store[e]=(i={},i[t]=[],i)),this.store[e][t]||(this.store[e][t]=[]),this.store[e][t].push(n)},get:function(e,t){return e in this.store&&t in this.store[e]?this.store[e][t]:[]},delete:function(e){e in this.store&&delete this.store[e]}};function f(e){return e.reduce((function(e,t){return e.then((function(){return t()}))}),Promise.resolve())}function m(e,t,n){return function(){return new Promise((function(i,r){var s=function(e){void 0===e&&(e=!0),!1===e&&r(u.NextReject(t)),i()};Promise.resolve(e.call(d.instanceStorage[t],n)).then(s).catch((function(e){return r(e)}))}))}}function g(){return f(h.value.map((function(e){return function(){return e.close()}})))}function y(){if(0!==h.value.length)return h.value[h.value.length-1]}function v(){var e=y();return e?e.close():Promise.resolve()}function _(e){void 0===e&&(e={});var t={background:!1,esc:!1};return Object.assign(t,e)}function b(e,t){void 0===t&&(t={});var n=h.value.findIndex((function(t){return t.id===e}));if(-1===n)return Promise.reject(u.Undefined(e));var i=p.get(e,"close").map((function(n){return m(n,e,_(t))}));return f(i).then((function(){h.value.splice(n,1),delete d.instanceStorage[e],p.delete(e)}))}function T(e,t){d.instanceStorage[e]=t}function w(e){return d.instanceStorage[e]}function E(e){var t={backgroundClose:c.backgroundClose,isRoute:!1};return void 0!==e.backgroundClose&&(t.backgroundClose=e.backgroundClose),e.isRoute&&(t.isRoute=e.isRoute),t}var S=function(){function e(t,n,r){var s=this;this.events=i.reactive({}),this.backgroundClose=!0,this.isRoute=!1,this.id=e.modalId++,this.component=t,this.props=i.ref(n),this.closed=i.computed((function(){return!h.value.includes(s)})),t.beforeModalClose&&p.add(this.id,"close",t.beforeModalClose);var o=E(r);this.backgroundClose=o.backgroundClose,this.isRoute=o.isRoute}return e.prototype.close=function(){return b(this.id)},Object.defineProperty(e.prototype,"onclose",{set:function(e){p.add(this.id,"close",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){return w(this.id)},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){var n=this;return Array.isArray(this.events[e])||(this.events[e]=[]),this.events[e].push(t),function(){var i=n.events[e].indexOf(t);-1!==i&&n.events[e].splice(i,1)}},e.modalId=0,e.EVENT_PROMPT="jenesius-vue-modal:____P____R____O____M____P____T",e}();function k(e,t,n){if(!d.initialized)throw u.NotInitialized();if(!e)throw u.ModalComponentNotProvided();var r=new S(e,t,n);return h.value.push(i.markRaw(r)),r}function C(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),Promise.resolve().then((function(){return k(e,t,n)}))}function I(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),g().then((function(){if(h.value.length)throw u.QueueNoEmpty()})).then((function(){return C(e,t,n)}))}function O(e){var t,n,r,s=i.getCurrentInstance(),o=String((null===(t=null===s||void 0===s?void 0:s.props)||void 0===t?void 0:t.modalId)||(null===(n=null===s||void 0===s?void 0:s.props)||void 0===n?void 0:n["modal-id"])||(null===(r=null===s||void 0===s?void 0:s.attrs)||void 0===r?void 0:r.modalId)),a=o.replace(/[^0-9]/g,"");p.add(Number(a),"close",e)}function x(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var n,i=this;return a(this,(function(r){switch(r.label){case 0:return[4,C(e,t)];case 1:return n=r.sent(),[2,new Promise((function(e){n.on(S.EVENT_PROMPT,(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return[4,n.close()];case 1:return i.sent(),e(t),[2]}}))}))}))}))]}}))}))}function A(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var D="\n.modal-container{\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\r\n\t\tbackground-color: #3e3e3e21;\r\n\t\tcursor: pointer;\n}\n.modal-item{\r\n\t\tcursor: default;\n}\r\n\r\n";A(D);var P=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const R={__name:"WidgetModalContainerItem",props:{id:Number},setup(e){const t=e,n=i.ref(null),r=i.ref(null),s=o(t.id);function o(e){return h.value.find((t=>t.id===e))}function a(e){if(e.target===r.value)return s.backgroundClose?b(s.id,{background:!0}).catch((()=>{})):void 0}return i.watch((()=>n.value),(e=>{T(t.id,e)})),(t,o)=>(i.openBlock(),i.createElementBlock("div",{class:"widget__modal-container__item modal-container",ref_key:"containerRef",ref:r,onClick:a},[(i.openBlock(),i.createBlock(i.resolveDynamicComponent(i.unref(s).component),i.mergeProps(i.unref(s).props.value,{class:"modal-item widget__modal-wrap",modalId:`_modal_${e.id}`,ref_key:"modalRef",ref:n},i.toHandlers(i.unref(s).events)),null,16,["modalId"]))],512))}};var N=P(R,[["__file","WidgetModalContainerItem.vue"]]);function L(){d.initialized=!0,document.addEventListener("keyup",(function(e){if(c.escClose&&("Escape"===e.key||"Escape"===e.code)){var t=y();if(!t)return;b(t.id,{esc:!0})}}))}var M="\n.modal-list-enter-active,\r\n    .modal-list-leave-active,\r\n    .modal-list-enter-active .modal-item,\r\n    .modal-list-leave-active .modal-item\r\n    {\r\n        transition: all 0.2s ease;\n}\n.modal-list-enter-from,\r\n    .modal-list-leave-to{\r\n\t\topacity: 0 !important;\n}\n.modal-list-enter-from .modal-item,\r\n    .modal-list-leave-to   .modal-item{\r\n\t\ttransform: translateY(-60px);\n}\r\n";A(M);const U={setup(){return i.onMounted(L),()=>i.h(i.TransitionGroup,{name:c.animation},{default:()=>h.value.map((e=>i.h(N,{key:e.id,id:e.id})))})},components:{WidgetContainerModalItem:N}};var j=P(U,[["__file","WidgetModalContainer.vue"]]),F={router:null};function B(e){var t=this;if(F.router)throw u.DuplicatedRouterIntegration();function n(e){for(var t=e.matched.length-1;t>=0;t--){var n=e.matched[t].components,i=Object.values(n).find((function(e){return e._isModal}));if(i)return i}return null}F.router=e,e.beforeEach((function(e,i){return o(t,void 0,void 0,(function(){var e,t,r;return a(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),e=n(i),!e||(null===(r=null===(t=e.getModalObject())||void 0===t?void 0:t.closed)||void 0===r?void 0:r.value)?[3,2]:[4,e.close(!0)];case 1:s.sent(),s.label=2;case 2:return[3,4];case 3:return s.sent(),[2,!1];case 4:return[2]}}))}))})),e.afterEach((function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(i){switch(i.label){case 0:return t=n(e),t?[4,t.initialize()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}))}function V(e){var t=null,n=!1;function r(){return o(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:if(!F.router)throw u.ModalRouterIntegrationNotInitialized();return n=!1,t=null,[4,I(e,i.computed((function(){var e;return null===(e=F.router)||void 0===e?void 0:e.currentRoute.value.params})),{isRoute:!0})];case 1:return t=r.sent(),t.onclose=function(){var e;n||null===(e=F.router)||void 0===e||e.back()},[2]}}))}))}return{getModalObject:function(){return t},_isModal:!0,close:function(e){return void 0===e&&(e=!1),o(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return n=e,t?[4,t.close()]:[3,2];case 1:return[2,i.sent()];case 2:return[2]}}))}))},initialize:r,setup:function(){return function(){return null}}}}V.init=B,t.Mr=g,t.nC=j,t.h7=I},9297:function(e,t,n){n(3767),n(8585),n(8696);var i=n(4545).MY,r=n(4545).cx,s={unpack:function(e){var t=new o(e);return t.unpack()},pack:function(e){var t=new a;t.pack(e);var n=t.getBuffer();return n}};function o(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function a(){this.bufferBuilder=new i}function u(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function c(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,u).length}e.exports=s,o.prototype.unpack=function(){var e,t=this.unpack_uint8();if(t<128){var n=t;return n}if((224^t)<32){var i=(224^t)-32;return i}if((e=160^t)<=15)return this.unpack_raw(e);if((e=176^t)<=15)return this.unpack_string(e);if((e=144^t)<=15)return this.unpack_array(e);if((e=128^t)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}},o.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},o.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},o.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},o.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},o.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},o.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},o.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},o.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},o.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},o.prototype.unpack_string=function(e){var t,n,i=this.read(e),r=0,s="";while(r<e)t=i[r],t<128?(s+=String.fromCharCode(t),r++):(192^t)<32?(n=(192^t)<<6|63&i[r+1],s+=String.fromCharCode(n),r+=2):(n=(15&t)<<12|(63&i[r+1])<<6|63&i[r+2],s+=String.fromCharCode(n),r+=3);return this.index+=e,s},o.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},o.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var i=this.unpack(),r=this.unpack();t[i]=r}return t},o.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,n=(e>>23&255)-127,i=8388607&e|8388608;return(0==t?1:-1)*i*Math.pow(2,n-23)},o.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,i=(e>>20&2047)-1023,r=1048575&e|1048576,s=r*Math.pow(2,i-20)+t*Math.pow(2,i-52);return(0==n?1:-1)*s},o.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},a.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},a.prototype.pack=function(e){var t=typeof e;if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File)this.pack_bin(e);else if(n==ArrayBuffer)r.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)r.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object)this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},a.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},a.prototype.pack_string=function(e){var t=c(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},a.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},a.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},a.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),i=e/Math.pow(2,n)-1,r=Math.floor(i*Math.pow(2,52)),s=Math.pow(2,32),o=t<<31|n+1023<<20|r/s&1048575,a=r%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(a)},a.prototype.pack_object=function(e){var t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(n)}for(var i in e)e.hasOwnProperty(i)&&(this.pack(i),this.pack(e[i]))},a.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},a.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},a.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},a.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},a.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},a.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},4545:function(e,t,n){n(3767),n(8585),n(8696),n(7658);var i={};i.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),i.useArrayBufferView=!i.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),e.exports.cx=i;var r=e.exports.xE;function s(){this._pieces=[],this._parts=[]}"undefined"!=typeof window&&(r=e.exports.xE=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),s.prototype.append=function(e){"number"===typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},s.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);i.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},s.prototype.getBuffer=function(){if(this.flush(),i.useBlobBuilder){for(var e=new r,t=0,n=this._parts.length;t<n;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},e.exports.MY=s},6274:function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var n=String(e),s=i[n.toLowerCase()];if(s)return s;s=r[n.toLowerCase()];return s||(1===n.length?n.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var s=i[t.toLowerCase()];if(s)return s===n;s=r[t.toLowerCase()];if(s)return s===n}else if("number"===typeof t)return t===n;return!1}},t=e.exports=n;var i=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(s=97;s<123;s++)i[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)i[s-48]=s;for(s=1;s<13;s++)i["f"+s]=s+111;for(s=0;s<10;s++)i["numpad "+s]=s+96;var o=t.names=t.title={};for(s in i)o[i[s]]=s;for(var a in r)i[a]=r[a]},9577:function(e,t,n){n(3767),n(8585),n(8696),n(7658);var i=n(5155).getUint64,r=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var s=t.getUint16(r);for(r+=2;s>0;r+=12,s--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n};e.exports=r},9771:function(e){var t,n,i,r,s,o,a,u=9e4;t=function(e){return e*u},n=function(e,t){return e*t},i=function(e){return e/u},r=function(e,t){return e/t},s=function(e,n){return t(r(e,n))},o=function(e,t){return n(i(e),t)},a=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:u,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:o,metadataTsToSeconds:a}},5155:function(e){var t=Math.pow(2,32),n=function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):i.getUint32(0)*t+i.getUint32(4)};e.exports={getUint64:n,MAX_UINT32:t}},3348:function(e,t,n){"use strict";n.d(t,{dP:function(){return N},re:function(){return U}});n(7658);var i=n(4492),r=n(1583);function s(){}var o,a=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=s),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var n=t.older,i=t.newer;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t},e.prototype.set=function(e,t){var n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},e.prototype.clean=function(){while(this.oldest&&this.map.size>this.max)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),u=new r.g7,c=Object.prototype.hasOwnProperty,l=(o=Array.from,void 0===o?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:o);function h(e){var t=e.unsubscribe;"function"===typeof t&&(e.unsubscribe=void 0,t())}var d=[],p=100;function f(e,t){if(!e)throw new Error(t||"assertion failure")}function m(e,t){var n=e.length;return n>0&&n===t.length&&e[n-1]===t[n-1]}function g(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function y(e){return e.slice(0)}var v=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!w(this))return _(this),this.value[0]},e.prototype.recompute=function(e){return f(!this.recomputing,"already recomputing"),_(this),w(this)?b(this,e):g(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,S(this),h(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),A(this),C(this,(function(t,n){t.setDirty(),D(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=d.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(l(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),d.push(this.deps),this.deps=null)},e.count=0,e}();function _(e){var t=u.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),w(e)?I(t,e):O(t,e),t}function b(e,t){return A(e),u.withValue(e,T,[e,t]),P(e,t)&&E(e),g(e.value)}function T(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(n){e.value[1]=n}e.recomputing=!1}function w(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function E(e){e.dirty=!1,w(e)||k(e)}function S(e){C(e,I)}function k(e){C(e,O)}function C(e,t){var n=e.parents.size;if(n)for(var i=l(e.parents),r=0;r<n;++r)t(i[r],e)}function I(e,t){f(e.childValues.has(t)),f(w(t));var n=!w(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=d.pop()||new Set;e.dirtyChildren.add(t),n&&S(e)}function O(e,t){f(e.childValues.has(t)),f(!w(t));var n=e.childValues.get(t);0===n.length?e.childValues.set(t,y(t.value)):m(n,t.value)||e.setDirty(),x(e,t),w(e)||k(e)}function x(e,t){var n=e.dirtyChildren;n&&(n.delete(t),0===n.size&&(d.length<p&&d.push(n),e.dirtyChildren=null))}function A(e){e.childValues.size>0&&e.childValues.forEach((function(t,n){D(e,n)})),e.forgetDeps(),f(null===e.dirtyChildren)}function D(e,t){t.parents.delete(e),e.childValues.delete(t),x(e,t)}function P(e,t){if("function"===typeof e.subscribe)try{h(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(n){return e.setDirty(),!1}return!0}var R={setDirty:!0,dispose:!0,forget:!0};function N(e){var t=new Map,n=e&&e.subscribe;function i(e){var i=u.getValue();if(i){var r=t.get(e);r||t.set(e,r=new Set),i.dependOn(r),"function"===typeof n&&(h(r),r.unsubscribe=n(e))}}return i.dirty=function(e,n){var i=t.get(e);if(i){var r=n&&c.call(R,n)?n:"setDirty";l(i).forEach((function(e){return e[r]()})),t.delete(e),h(i)}},i}function L(){var e=new i.B("function"===typeof WeakMap);return function(){return e.lookupArray(arguments)}}L();var M=new Set;function U(e,t){void 0===t&&(t=Object.create(null));var n=new a(t.max||Math.pow(2,16),(function(e){return e.dispose()})),i=t.keyArgs,r=t.makeCacheKey||L(),s=function(){var s=r.apply(null,i?i.apply(null,arguments):arguments);if(void 0===s)return e.apply(null,arguments);var o=n.get(s);o||(n.set(s,o=new v(e)),o.subscribe=t.subscribe,o.forget=function(){return n.delete(s)});var a=o.recompute(Array.prototype.slice.call(arguments));return n.set(s,o),M.add(n),u.hasValue()||(M.forEach((function(e){return e.clean()})),M.clear()),a};function o(e){var t=n.get(e);t&&t.setDirty()}function c(e){var t=n.get(e);if(t)return t.peek()}function l(e){return n.delete(e)}return Object.defineProperty(s,"size",{get:function(){return n["map"].size},configurable:!1,enumerable:!1}),s.dirtyKey=o,s.dirty=function(){o(r.apply(null,arguments))},s.peekKey=c,s.peek=function(){return c(r.apply(null,arguments))},s.forgetKey=l,s.forget=function(){return l(r.apply(null,arguments))},s.makeCacheKey=r,s.getKey=i?function(){return r.apply(null,i.apply(null,arguments))}:r,Object.freeze(s)}},8e3:function(e){e.exports.Ao=window.RTCSessionDescription||window.mozRTCSessionDescription,e.exports.I$=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,e.exports.Lc=window.RTCIceCandidate||window.mozRTCIceCandidate},5154:function(e,t,n){n(7658);var i=n(6846),r=n(5125),s=n(9456),o=n(8864);function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);r.call(this),this.options=i.extend({serialization:"binary",reliable:!1},n),this.open=!1,this.type="data",this.peer=e,this.provider=t,this.id=this.options.connectionId||a._idPrefix+i.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),i.log("startConnection from DataConnection"),s.startConnection(this,this.options._payload||{originator:!0})}i.inherits(a,r),a._idPrefix="dc_",a.prototype.initialize=function(e){this._dc=this.dataChannel=e,this._configureDataChannel()},a.prototype._configureDataChannel=function(){var e=this;i.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){i.log("Data channel connection success"),e.open=!0,e.emit("open")},!i.supports.sctp&&this.reliable&&(this._reliable=new o(this._dc,i.debug)),this._reliable?this._reliable.onmessage=function(t){e.emit("data",t)}:this._dc.onmessage=function(t){e._handleDataMessage(t)},this._dc.onclose=function(t){i.log("DataChannel closed for:",e.peer),e.close()}},a.prototype._handleDataMessage=function(e){var t=this,n=e.data,r=n.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(r===Blob)return void i.blobToArrayBuffer(n,(function(e){n=i.unpack(e),t.emit("data",n)}));if(r===ArrayBuffer)n=i.unpack(n);else if(r===String){var s=i.binaryStringToArrayBuffer(n);n=i.unpack(s)}}else"json"===this.serialization&&(n=JSON.parse(n));if(n.__peerData){var o=n.__peerData,a=this._chunkedData[o]||{data:[],count:0,total:n.total};return a.data[n.n]=n.data,a.count+=1,a.total===a.count&&(delete this._chunkedData[o],n=new Blob(a.data),this._handleDataMessage({data:n})),void(this._chunkedData[o]=a)}this.emit("data",n)},a.prototype.close=function(){this.open&&(this.open=!1,s.cleanup(this),this.emit("close"))},a.prototype.send=function(e,t){if(this.open)if(this._reliable)this._reliable.send(e);else{var n=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(e));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var r=i.pack(e),s=i.chunkedBrowsers[this._peerBrowser]||i.chunkedBrowsers[i.browser];if(s&&!t&&r.size>i.chunkedMTU)return void this._sendChunks(r);i.supports.sctp?i.supports.binaryBlob?this._bufferedSend(r):i.blobToArrayBuffer(r,(function(e){n._bufferedSend(e)})):i.blobToBinaryString(r,(function(e){n._bufferedSend(e)}))}else this._bufferedSend(e)}else this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},a.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this.bufferSize=this._buffer.length)},a.prototype._trySend=function(e){var t=this;function n(){return t._buffering=!0,setTimeout((function(){t._buffering=!1,t._tryBuffer()}),100),!1}if(t._dc.bufferedAmount>15728640)return n();try{this._dc.send(e)}catch(i){return n()}return!0},a.prototype._tryBuffer=function(){if(0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},a.prototype._sendChunks=function(e){for(var t=i.chunk(e),n=0,r=t.length;n<r;n+=1){e=t[n];this.send(e,!0)}},a.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":this._peerBrowser=t.browser,s.handleSDP(e.type,this,t.sdp);break;case"CANDIDATE":s.handleCandidate(this,t.candidate);break;default:i.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}},e.exports=a},4568:function(e,t,n){var i=n(6846),r=n(5125),s=n(9456);function o(e,t,n){if(!(this instanceof o))return new o(e,t,n);r.call(this),this.options=i.extend({},n),this.open=!1,this.type="media",this.peer=e,this.provider=t,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||o._idPrefix+i.randomToken(),this.localStream&&s.startConnection(this,{_stream:this.localStream,originator:!0})}i.inherits(o,r),o._idPrefix="mc_",o.prototype.addStream=function(e){i.log("Receiving stream",e),this.remoteStream=e,this.emit("stream",e)},o.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":s.handleSDP(e.type,this,t.sdp),this.open=!0;break;case"CANDIDATE":s.handleCandidate(this,t.candidate);break;default:i.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}},o.prototype.answer=function(e){if(this.localStream)i.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this.options._payload._stream=e,this.localStream=e,s.startConnection(this,this.options._payload);for(var t=this.provider._getMessages(this.id),n=0,r=t.length;n<r;n+=1)this.handleMessage(t[n]);this.open=!0}},o.prototype.close=function(){this.open&&(this.open=!1,s.cleanup(this),this.emit("close"))},e.exports=o},9456:function(e,t,n){var i=n(6846),r=n(8e3).I$,s=n(8e3).Ao,o=n(8e3).Lc,a={pcs:{data:{},media:{}},queue:[],_idPrefix:"pc_",startConnection:function(e,t){var n=a._getPeerConnection(e,t);if(e.pc=e.peerConnection=n,"media"===e.type&&t._stream&&n.addStream(t._stream),t.originator){if("data"===e.type){var r={};i.supports.sctp||(r={reliable:t.reliable});var s=n.createDataChannel(e.label,r);e.initialize(s)}i.supports.onnegotiationneeded||setTimeout((function(){a._makeOffer(e)}),0)}else a.handleSDP("OFFER",e,t.sdp)},_getPeerConnection:function(e,t){a.pcs[e.type]||i.error(e.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),a.pcs[e.type][e.peer]||(a.pcs[e.type][e.peer]={});var n;a.pcs[e.type][e.peer];return t.pc&&(n=a.pcs[e.type][e.peer][t.pc]),n&&"stable"===n.signalingState||(n=a._startPeerConnection(e)),n},_startPeerConnection:function(e){i.log("Creating RTCPeerConnection.");var t=a._idPrefix+i.randomToken(),n={};"data"!==e.type||i.supports.sctp?"media"===e.type&&(n={optional:[{DtlsSrtpKeyAgreement:!0}]}):n={optional:[{RtpDataChannels:!0}]};var s=new r(e.provider.options.config,n);return a.pcs[e.type][e.peer][t]=s,a._setupListeners(e,s,t),s},_setupListeners:function(e,t,n){var r=e.peer,s=e.id,o=e.provider;i.log("Listening for ICE candidates."),t.onicecandidate=function(t){var n=t.candidate||t;n&&null!==n.candidate?(i.log("Generated ICE candidate for:",e.peer,n),o.socket.send({type:"CANDIDATE",payload:{candidate:{sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,candidate:n.candidate},type:e.type,connectionId:e.id},dst:r})):i.log("ICE candidates gathering complete for:",e.peer)},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":i.log("iceConnectionState is disconnected, closing connections to "+r),e.close();break;case"completed":t.onicecandidate=i.noop;break}},t.onicechange=t.oniceconnectionstatechange,i.supports.onnegotiationneeded&&(i.log("Listening for `negotiationneeded`"),t.onnegotiationneeded=function(){i.log("`negotiationneeded` triggered"),"stable"!=t.signalingState||e.options.connectionId?i.log("onnegotiationneeded triggered when not stable. Is another connection being established?"):a._makeOffer(e)}),i.log("Listening for data channel"),t.ondatachannel=function(e){i.log("Received data channel");var t=e.channel||e,n=o.getConnection(r,s);n.initialize(t)},i.log("Listening for remote stream"),t.onaddstream=function(e){i.log("Received remote stream");var t=e.stream||e,n=o.getConnection(r,s);"media"===n.type&&n.addStream(t)}},cleanup:function(e){i.log("Cleaning up PeerConnection to "+e.peer);var t=e.pc;!t||"closed"===t.readyState&&"closed"===t.signalingState||(t.close(),e.pc=null)},_makeOffer:function(e){var t=e.pc;t.remoteDescription&&t.remoteDescription.type||t.createOffer((function(n){i.log("Created offer."),!i.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,(function(){i.log("Set localDescription: offer","for:",e.peer),e.provider.socket.send({type:"OFFER",payload:{sdp:{type:n.type,sdp:n.sdp},type:e.type,label:e.label,connectionId:e.id,reliable:e.reliable,serialization:e.serialization,metadata:e.metadata,browser:i.browser},dst:e.peer})}),(function(t){e.provider.emitError("webrtc",t),i.log("Failed to setLocalDescription, ",t)}))}),(function(t){e.provider.emitError("webrtc",t),i.log("Failed to createOffer, ",t)}),e.options.constraints)},_makeAnswer:function(e){var t=e.pc;t.createAnswer((function(n){i.log("Created answer."),!i.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,(function(){i.log("Set localDescription: answer","for:",e.peer),e.provider.socket.send({type:"ANSWER",payload:{sdp:{type:n.type,sdp:n.sdp},type:e.type,connectionId:e.id,browser:i.browser},dst:e.peer})}),(function(t){e.provider.emitError("webrtc",t),i.log("Failed to setLocalDescription, ",t)}))}),(function(t){e.provider.emitError("webrtc",t),i.log("Failed to create answer, ",t)}))},handleSDP:function(e,t,n){var r=new s({type:n.type,sdp:n.sdp}),o=t.pc;i.log("Setting remote description",r),o.setRemoteDescription(r,(function(){i.log("Set remoteDescription:",e,"for:",t.peer),"OFFER"===e&&a._makeAnswer(t)}),(function(e){t.provider.emitError("webrtc",e),i.log("Failed to setRemoteDescription, ",e)}))},handleCandidate:function(e,t){if(t){var n=t.candidate,r=t.sdpMLineIndex;e.pc.addIceCandidate(new o({sdpMLineIndex:r,candidate:n})),i.log("Added ICE candidate for:",e.peer)}}};e.exports=a},6594:function(e,t,n){n(7658);var i=n(6846),r=n(5125),s=n(6622),o=n(4568),a=n(5154);function u(e,t){if(!(this instanceof u))return new u(e,t);r.call(this),e&&e.constructor==Object?(t=e,e=void 0):e&&(e=e.toString()),t=i.extend({debug:0,host:i.CLOUD_HOST,port:i.CLOUD_PORT,key:"peerjs",path:"/",token:i.randomToken(),config:i.defaultConfig},t),this.options=t,"/"===t.host&&(t.host=window.location.hostname),"/"!==t.path[0]&&(t.path="/"+t.path),"/"!==t.path[t.path.length-1]&&(t.path+="/"),void 0===t.secure&&t.host!==i.CLOUD_HOST&&(t.secure=i.isSecure()),t.logFunction&&i.setLogFunction(t.logFunction),i.setLogLevel(t.debug),i.supports.audioVideo||i.supports.data?i.validateId(e)?i.validateKey(t.key)?t.secure&&"0.peerjs.com"===t.host?this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS."):(this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={},this._initializeServerConnection(),e?this._initialize(e):this._retrieveId()):this._delayedAbort("invalid-key",'API KEY "'+t.key+'" is invalid'):this._delayedAbort("invalid-id",'ID "'+e+'" is invalid'):this._delayedAbort("browser-incompatible","The current browser does not support WebRTC")}i.inherits(u,r),u.prototype._initializeServerConnection=function(){var e=this;this.socket=new s(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key),this.socket.on("message",(function(t){e._handleMessage(t)})),this.socket.on("error",(function(t){e._abort("socket-error",t)})),this.socket.on("disconnected",(function(){e.disconnected||(e.emitError("network","Lost connection to server."),e.disconnect())})),this.socket.on("close",(function(){e.disconnected||e._abort("socket-closed","Underlying socket is already closed.")}))},u.prototype._retrieveId=function(e){var t=this,n=new XMLHttpRequest,r=this.options.secure?"https://":"http://",s=r+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id",o="?ts="+(new Date).getTime()+Math.random();s+=o,n.open("get",s,!0),n.onerror=function(e){i.error("Error retrieving ID",e);var n="";"/"===t.options.path&&t.options.host!==i.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),t._abort("server-error","Could not get an ID from the server."+n)},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?t._initialize(n.responseText):n.onerror())},n.send(null)},u.prototype._initialize=function(e){this.id=e,this.socket.start(this.id,this.options.token)},u.prototype._handleMessage=function(e){var t,n=e.type,r=e.payload,s=e.src;switch(n){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",r.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":i.log("Received leave message from",s),this._cleanupPeer(s);break;case"EXPIRE":this.emitError("peer-unavailable","Could not connect to peer "+s);break;case"OFFER":var u=r.connectionId;if(t=this.getConnection(s,u),t)i.warn("Offer received for existing Connection ID:",u);else{if("media"===r.type)t=new o(s,this,{connectionId:u,_payload:r,metadata:r.metadata}),this._addConnection(s,t),this.emit("call",t);else{if("data"!==r.type)return void i.warn("Received malformed connection type:",r.type);t=new a(s,this,{connectionId:u,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable}),this._addConnection(s,t),this.emit("connection",t)}for(var c=this._getMessages(u),l=0,h=c.length;l<h;l+=1)t.handleMessage(c[l])}break;default:if(!r)return void i.warn("You received a malformed message from "+s+" of type "+n);var d=r.connectionId;t=this.getConnection(s,d),t&&t.pc?t.handleMessage(e):d?this._storeMessage(d,e):i.warn("You received an unrecognized message:",e);break}},u.prototype._storeMessage=function(e,t){this._lostMessages[e]||(this._lostMessages[e]=[]),this._lostMessages[e].push(t)},u.prototype._getMessages=function(e){var t=this._lostMessages[e];return t?(delete this._lostMessages[e],t):[]},u.prototype.connect=function(e,t){if(this.disconnected)return i.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");var n=new a(e,this,t);return this._addConnection(e,n),n},u.prototype.call=function(e,t,n){if(this.disconnected)return i.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");if(t){n=n||{},n._stream=t;var r=new o(e,this,n);return this._addConnection(e,r),r}i.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")},u.prototype._addConnection=function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].push(t)},u.prototype.getConnection=function(e,t){var n=this.connections[e];if(!n)return null;for(var i=0,r=n.length;i<r;i++)if(n[i].id===t)return n[i];return null},u.prototype._delayedAbort=function(e,t){var n=this;i.setZeroTimeout((function(){n._abort(e,t)}))},u.prototype._abort=function(e,t){i.error("Aborting!"),this._lastServerId?this.disconnect():this.destroy(),this.emitError(e,t)},u.prototype.emitError=function(e,t){i.error("Error:",t),"string"===typeof t&&(t=new Error(t)),t.type=e,this.emit("error",t)},u.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},u.prototype._cleanup=function(){if(this.connections)for(var e=Object.keys(this.connections),t=0,n=e.length;t<n;t++)this._cleanupPeer(e[t]);this.emit("close")},u.prototype._cleanupPeer=function(e){for(var t=this.connections[e],n=0,i=t.length;n<i;n+=1)t[n].close()},u.prototype.disconnect=function(){var e=this;i.setZeroTimeout((function(){e.disconnected||(e.disconnected=!0,e.open=!1,e.socket&&e.socket.close(),e.emit("disconnected",e.id),e._lastServerId=e.id,e.id=null)}))},u.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)i.log("Attempting reconnection to server with ID "+this._lastServerId),this.disconnected=!1,this._initializeServerConnection(),this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");i.error("In a hurry? We're still trying to make the initial connection!")}},u.prototype.listAllPeers=function(e){e=e||function(){};var t=this,n=new XMLHttpRequest,r=this.options.secure?"https://":"http://",s=r+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers",o="?ts="+(new Date).getTime()+Math.random();s+=o,n.open("get",s,!0),n.onerror=function(n){t._abort("server-error","Could not get peers from the server."),e([])},n.onreadystatechange=function(){if(4===n.readyState){if(401===n.status){var r="";throw r=t.options.host!==i.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",e([]),new Error("It doesn't look like you have permission to list peers IDs. "+r)}200!==n.status?e([]):e(JSON.parse(n.responseText))}},n.send(null)},e.exports=u},6622:function(e,t,n){n(7658);var i=n(6846),r=n(5125);function s(e,t,n,i,o){if(!(this instanceof s))return new s(e,t,n,i,o);r.call(this),this.disconnected=!1,this._queue=[];var a=e?"https://":"http://",u=e?"wss://":"ws://";this._httpUrl=a+t+":"+n+i+o,this._wsUrl=u+t+":"+n+i+"peerjs?key="+o}i.inherits(s,r),s.prototype.start=function(e,t){this.id=e,this._httpUrl+="/"+e+"/"+t,this._wsUrl+="&id="+e+"&token="+t,this._startWebSocket()},s.prototype._startWebSocket=function(e){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){try{var n=JSON.parse(e.data)}catch(r){return void i.log("Invalid server message",e.data)}t.emit("message",n)},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout((function(){t._http.abort(),t._http=null}),5e3)),i.supportsKeepAlive&&t._setWSTimeout(),t._sendQueuedMessages(),i.log("Socket open")},this._socket.onerror=function(e){i.error("WS error code "+e.code)},this._socket.onclose=function(e){i.error("WS closed with code "+e.code),t.disconnected})},s.prototype._startXhrStream=function(e){try{var t=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=e||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onerror=function(){clearTimeout(t._timeout),t.emit("disconnected")},this._http.onreadystatechange=function(){2==this.readyState&&this.old?(this.old.abort(),delete this.old):this.readyState>2&&200===this.status&&this.responseText&&t._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(n){i.log("XMLHttpRequest not available; defaulting to WebSockets")}},s.prototype._handleStream=function(e){var t=e.responseText.split("\n");if(console.log(t),e._buffer)while(e._buffer.length>0){var n=e._buffer.shift(),r=t[n];try{r=JSON.parse(r)}catch(o){e._buffer.shift(n);break}this.emit("message",r)}var s=t[e._index];if(s)if(e._index+=1,e._index===t.length)e._buffer||(e._buffer=[]),e._buffer.push(e._index-1);else{try{s=JSON.parse(s)}catch(o){return void i.log("Invalid server message",s)}this.emit("message",s)}},s.prototype._setHTTPTimeout=function(){var e=this;this._timeout=setTimeout((function(){var t=e._http;e._wsOpen()?t.abort():e._http.old=t}),25e3)},s.prototype._setWSTimeout=function(){var e=this;this._wsTimeout=setTimeout((function(){e._wsOpen()&&(e._socket.close(),i.error("WS timed out"))}),45e3)},s.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},s.prototype._sendQueuedMessages=function(){for(var e=0,t=this._queue.length;e<t;e+=1)this.send(this._queue[e])},s.prototype.send=function(e){if(!this.disconnected)if(this.id)if(e.type){var t=JSON.stringify(e);if(this._wsOpen())this._socket.send(t);else if("PONG"!==e.type){var n=new XMLHttpRequest,i=this._httpUrl+"/"+e.type.toLowerCase();n.open("post",i,!0),n.setRequestHeader("Content-Type","application/json"),n.send(t)}}else this.emit("error","Invalid message");else this._queue.push(e)},s.prototype.sendPong=function(){this._wsOpen()&&(this.send({type:"PONG"}),this._wsTimeout&&clearTimeout(this._wsTimeout),this._setWSTimeout())},s.prototype.close=function(){this.disconnected||(this.disconnected=!0,this._wsOpen()&&this._socket.close(),this._http&&this._http.abort(),clearTimeout(this._timeout))},e.exports=s},6846:function(e,t,n){n(541),n(7658),n(3767),n(8585),n(8696);var i={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},r=1,s=n(9297),o=n(8e3).I$,a={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(e){var t=parseInt(e,10);isNaN(parseInt(e,10))?a.logLevel=e?3:0:a.logLevel=t,a.log=a.warn=a.error=a.noop,a.logLevel>0&&(a.error=a._printWith("ERROR")),a.logLevel>1&&(a.warn=a._printWith("WARNING")),a.logLevel>2&&(a.log=a._print)},setLogFunction:function(e){e.constructor!==Function?a.warn("The log function you passed in is not a function. Defaulting to regular logs."):a._print=e},_printWith:function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),a._print.apply(a,t)}},_print:function(){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,i=t.length;n<i;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)},defaultConfig:i,browser:function(){return window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported"}(),supports:function(){if("undefined"===typeof o)return{};var e,t,n=!0,r=!0,s=!1,u=!1,c=!!window.webkitRTCPeerConnection;try{e=new o(i,{optional:[{RtpDataChannels:!0}]})}catch(p){n=!1,r=!1}if(n)try{t=e.createDataChannel("_PEERJSTEST")}catch(p){n=!1}if(n){try{t.binaryType="blob",s=!0}catch(p){}var l=new o(i,{});try{var h=l.createDataChannel("_PEERJSRELIABLETEST",{});u=h.reliable}catch(p){}l.close()}if(r&&(r=!!e.addStream),!c&&n){var d=new o(i,{optional:[{RtpDataChannels:!0}]});d.onnegotiationneeded=function(){c=!0,a&&a.supports&&(a.supports.onnegotiationneeded=!0)},d.createDataChannel("_PEERJSNEGOTIATIONTEST"),setTimeout((function(){d.close()}),1e3)}return e&&e.close(),{audioVideo:r,data:n,binaryBlob:s,binary:u,reliable:u,sctp:u,onnegotiationneeded:c}}(),validateId:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},validateKey:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:s.pack,unpack:s.unpack,log:function(){if(a.debug){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,i=t.length;n<i;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)}},setZeroTimeout:function(e){var t=[],n="zero-timeout-message";function i(i){t.push(i),e.postMessage(n,"*")}function r(i){i.source==e&&i.data==n&&(i.stopPropagation&&i.stopPropagation(),t.length&&t.shift()())}return e.addEventListener?e.addEventListener("message",r,!0):e.attachEvent&&e.attachEvent("onmessage",r),i}(window),chunk:function(e){var t=[],n=e.size,i=index=0,s=Math.ceil(n/a.chunkedMTU);while(i<n){var o=Math.min(n,i+a.chunkedMTU),u=e.slice(i,o),c={__peerData:r,n:index,data:u,total:s};t.push(c),i=o,index+=1}return r+=1,t},blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};e.exports=a},5125:function(e,t,n){"use strict";n(7658);var i=Object.prototype.hasOwnProperty,r="~";function s(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var s=0,o=i.length,a=new Array(o);s<o;s++)a[s]=i[s].fn;return a},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,o),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,n){var i=new o(t,n||this),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},a.prototype.once=function(e,t,n){var i=new o(t,n||this,!0),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new s:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||(0===--this._eventsCount?this._events=new s:delete this._events[o]);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new s:delete this._events[o]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new s:delete this._events[t])):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=r,a.EventEmitter=a,e.exports=a},8864:function(e,t,n){n(7658),n(3767),n(8585),n(8696);var i=n(1789);function r(e,t){if(!(this instanceof r))return new r(e);this._dc=e,i.debug=t,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],this._setupDC()}r.prototype.send=function(e){var t=i.pack(e);t.size<this._mtu?this._handleSend(["no",t]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(t)},i.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),this._count+=1)},r.prototype._setupInterval=function(){var e=this;this._timeout=setInterval((function(){var t=e._queue.shift();if(t._multiple)for(var n=0,i=t.length;n<i;n+=1)e._intervalSend(t[n]);else e._intervalSend(t)}),this._interval)},r.prototype._intervalSend=function(e){var t=this;e=i.pack(e),i.blobToBinaryString(e,(function(e){t._dc.send(e)})),0===t._queue.length&&(clearTimeout(t._timeout),t._timeout=null)},r.prototype._processAcks=function(){for(var e in this._outgoing)this._outgoing.hasOwnProperty(e)&&this._sendWindowedChunks(e)},r.prototype._handleSend=function(e){for(var t=!0,n=0,i=this._queue.length;n<i;n+=1){var r=this._queue[n];(r===e||r._multiple&&-1!==r.indexOf(e))&&(t=!1)}t&&(this._queue.push(e),this._timeout||this._setupInterval())},r.prototype._setupDC=function(){var e=this;this._dc.onmessage=function(t){var n=t.data,r=n.constructor;if(r===String){var s=i.binaryStringToArrayBuffer(n);n=i.unpack(s),e._handleMessage(n)}}},r.prototype._handleMessage=function(e){var t,n=e[1],r=this._incoming[n],s=this._outgoing[n];switch(e[0]){case"no":var o=n;o&&this.onmessage(i.unpack(o));break;case"end":if(t=r,this._received[n]=e[2],!t)break;this._ack(n);break;case"ack":if(t=s,t){var a=e[2];t.ack=Math.max(a,t.ack),t.ack>=t.chunks.length?(i.log("Time: ",new Date-t.timer),delete this._outgoing[n]):this._processAcks()}break;case"chunk":if(t=r,!t){var u=this._received[n];if(!0===u)break;t={ack:["ack",n,0],chunks:[]},this._incoming[n]=t}var c=e[2],l=e[3];t.chunks[c]=new Uint8Array(l),c===t.ack[2]&&this._calculateNextAck(n),this._ack(n);break;default:this._handleSend(e);break}},r.prototype._chunk=function(e){var t=[],n=e.size,r=0;while(r<n){var s=Math.min(n,r+this._mtu),o=e.slice(r,s),a={payload:o};t.push(a),r=s}return i.log("Created",t.length,"chunks."),t},r.prototype._ack=function(e){var t=this._incoming[e].ack;this._received[e]===t[2]&&(this._complete(e),this._received[e]=!0),this._handleSend(t)},r.prototype._calculateNextAck=function(e){for(var t=this._incoming[e],n=t.chunks,i=0,r=n.length;i<r;i+=1)if(void 0===n[i])return void(t.ack[2]=i);t.ack[2]=n.length},r.prototype._sendWindowedChunks=function(e){i.log("sendWindowedChunks for: ",e);for(var t=this._outgoing[e],n=t.chunks,r=[],s=Math.min(t.ack+this._window,n.length),o=t.ack;o<s;o+=1)n[o].sent&&o!==t.ack||(n[o].sent=!0,r.push(["chunk",e,o,n[o].payload]));t.ack+this._window>=n.length&&r.push(["end",e,n.length]),r._multiple=!0,this._handleSend(r)},r.prototype._complete=function(e){i.log("Completed called for",e);var t=this,n=this._incoming[e].chunks,r=new Blob(n);i.blobToArrayBuffer(r,(function(e){t.onmessage(i.unpack(e))})),delete this._incoming[e]},r.higherBandwidthSDP=function(e){var t=navigator.appVersion.match(/Chrome\/(.*?) /);if(t&&(t=parseInt(t[1].split(".").shift()),t<31)){var n=e.split("b=AS:30"),i="b=AS:102400";if(n.length>1)return n[0]+i+n[1]}return e},r.prototype.onmessage=function(e){},e.exports=r},1789:function(e,t,n){n(541),n(7658),n(3767),n(8585),n(8696);var i=n(9297),r={debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:i.pack,unpack:i.unpack,log:function(){if(r.debug){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("Reliable: "),console.log.apply(console,e)}},setZeroTimeout:function(e){var t=[],n="zero-timeout-message";function i(i){t.push(i),e.postMessage(n,"*")}function r(i){i.source==e&&i.data==n&&(i.stopPropagation&&i.stopPropagation(),t.length&&t.shift()())}return e.addEventListener?e.addEventListener("message",r,!0):e.attachEvent&&e.attachEvent("onmessage",r),i}(this),blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)}};e.exports=r},4988:function(e){function t(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}e.exports=t},8039:function(e,t,n){"use strict";n(7658);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):r(e.value).then(o,a)}u((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,i&&(r=2&s[0]?i["return"]:s[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionClient=void 0;var a="undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:{},u=a.WebSocket||a.MozWebSocket,c=n(9222),l=n(6856),h=n(2849),d=n(7614),p=n(937),f=n(2927),m=n(2198),g=n(4187),y=n(1244),v=n(2718),_=function(){function e(e,t,n,i){var r=t||{},s=r.connectionCallback,o=void 0===s?void 0:s,a=r.connectionParams,h=void 0===a?{}:a,d=r.minTimeout,p=void 0===d?y.MIN_WS_TIMEOUT:d,f=r.timeout,m=void 0===f?y.WS_TIMEOUT:f,v=r.reconnect,_=void 0!==v&&v,b=r.reconnectionAttempts,T=void 0===b?1/0:b,w=r.lazy,E=void 0!==w&&w,S=r.inactivityTimeout,k=void 0===S?0:S,C=r.wsOptionArguments,I=void 0===C?[]:C;if(this.wsImpl=n||u,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=i||g.GRAPHQL_WS,this.connectionCallback=o,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=p,this.wsTimeout=m,this.unsentMessagesQueue=[],this.reconnect=_,this.reconnecting=!1,this.reconnectionAttempts=T,this.lazy=!!E,this.inactivityTimeout=k,this.closedByUser=!1,this.backoff=new c({jitter:.5}),this.eventEmitter=new l.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(h),this.wsOptionArguments=I,this.lazy||this.connect()}return Object.defineProperty(e.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,v.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},e.prototype.request=function(e){var t,n,i=this.getObserver.bind(this),r=this.executeOperation.bind(this),s=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),t={},t[m.default]=function(){return this},t.subscribe=function(t,o,a){var u=i(t,o,a);return n=r(e,(function(e,t){null===e&&null===t?u.complete&&u.complete():e?u.error&&u.error(e[0]):u.next&&u.next(t)})),{unsubscribe:function(){n&&(s(n),n=null)}}},t},e.prototype.on=function(e,t,n){var i=this.eventEmitter.on(e,t,n);return function(){i.off(e,t,n)}},e.prototype.onConnected=function(e,t){return this.on("connected",e,t)},e.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},e.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},e.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},e.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},e.prototype.onError=function(e,t){return this.on("error",e,t)},e.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach((function(t){e.unsubscribe(t)}))},e.prototype.applyMiddlewares=function(e){var t=this;return new Promise((function(n,i){var r=function(t,r){var s=function(o){if(o)i(o);else if(t.length>0){var a=t.shift();a&&a.applyMiddleware.apply(r,[e,s])}else n(e)};s()};r(o([],t.middlewares,!0),t)}))},e.prototype.use=function(e){var t=this;return e.map((function(e){if("function"!==typeof e.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(e)})),this},e.prototype.getConnectionParams=function(e){return function(){return new Promise((function(t,n){if("function"===typeof e)try{return t(e.call(null))}catch(i){return n(i)}t(e)}))}},e.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var i=this.generateOperationId();return this.operations[i]={options:e,handler:t},this.applyMiddlewares(e).then((function(e){n.checkOperationOptions(e,t),n.operations[i]&&(n.operations[i]={options:e,handler:t},n.sendMessage(i,v.default.GQL_START,e))})).catch((function(e){n.unsubscribe(i),t(n.formatErrors(e))})),i},e.prototype.getObserver=function(e,t,n){return"function"===typeof e?{next:function(t){return e(t)},error:function(e){return t&&t(e)},complete:function(){return n&&n()}}:e},e.prototype.createMaxConnectTimeGenerator=function(){var e=this.minWsTimeout,t=this.wsTimeout;return new c({min:e,max:t,factor:1.2})},e.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},e.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},e.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},e.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},e.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(e.operations).length&&e.close()}),this.inactivityTimeout))},e.prototype.checkOperationOptions=function(e,t){var n=e.query,i=e.variables,r=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!(0,h.default)(n)&&!(0,f.getOperationAST)(n,r)||r&&!(0,h.default)(r)||i&&!(0,d.default)(i))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},e.prototype.buildMessage=function(e,t,n){var r=n&&n.query?i(i({},n),{query:"string"===typeof n.query?n.query:(0,p.print)(n.query)}):n;return{id:e,type:t,payload:r}},e.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},e.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},e.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(n){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},e.prototype.generateOperationId=function(){return String(++this.nextOperationId)},e.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(t){e.unsentMessagesQueue.push(e.buildMessage(t,v.default.GQL_START,e.operations[t].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){e.connect()}),t)}},e.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach((function(t){e.sendMessageRaw(t)})),this.unsentMessagesQueue=[]},e.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},e.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},e.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,o([void 0,this.url,this.wsProtocols],this.wsOptionArguments,!1))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return r(t,void 0,void 0,(function(){var e,t;return s(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return e=n.sent(),this.sendMessage(void 0,v.default.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue(),[3,4];case 3:return t=n.sent(),this.sendMessage(void 0,v.default.GQL_CONNECTION_ERROR,t),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(e){t.eventEmitter.emit("error",e)},this.client.onmessage=function(e){var n=e.data;t.processReceivedData(n)}},e.prototype.processReceivedData=function(e){var t,n;try{t=JSON.parse(e),n=t.id}catch(a){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[v.default.GQL_DATA,v.default.GQL_COMPLETE,v.default.GQL_ERROR].indexOf(t.type)||this.operations[n])switch(t.type){case v.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case v.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case v.default.GQL_COMPLETE:var r=this.operations[n].handler;delete this.operations[n],r.call(this,null,null);break;case v.default.GQL_ERROR:this.operations[n].handler(this.formatErrors(t.payload),null),delete this.operations[n];break;case v.default.GQL_DATA:var s=t.payload.errors?i(i({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[n].handler(null,s);break;case v.default.GQL_CONNECTION_KEEP_ALIVE:var o="undefined"===typeof this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,o&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(n)},e.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,v.default.GQL_STOP,void 0))},e}();t.SubscriptionClient=_},1244:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WS_TIMEOUT=t.MIN_WS_TIMEOUT=void 0;var n=1e3;t.MIN_WS_TIMEOUT=n;var i=3e4;t.WS_TIMEOUT=i},2718:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){throw new Error("Static Class")}return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_CONNECTION_TERMINATE="connection_terminate",e.GQL_START="start",e.GQL_DATA="data",e.GQL_ERROR="error",e.GQL_COMPLETE="complete",e.GQL_STOP="stop",e.SUBSCRIPTION_START="subscription_start",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_SUCCESS="subscription_success",e.SUBSCRIPTION_FAIL="subscription_fail",e.SUBSCRIPTION_END="subscription_end",e.INIT="init",e.INIT_SUCCESS="init_success",e.INIT_FAIL="init_fail",e.KEEP_ALIVE="keepalive",e}();t["default"]=n},4187:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPHQL_SUBSCRIPTIONS=t.GRAPHQL_WS=void 0;var n="graphql-ws";t.GRAPHQL_WS=n;var i="graphql-subscriptions";t.GRAPHQL_SUBSCRIPTIONS=i},7614:function(e,t){"use strict";function n(e){return null!==e&&"object"===typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2849:function(e,t){"use strict";function n(e){return"string"===typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2198:function(e,t,n){"use strict";function i(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var r;n.r(t),n.d(t,{default:function(){return o}}),e=n.hmd(e),r="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:e;var s=i(r),o=s},2900:function(e,t,n){"use strict";n.d(t,{Jh:function(){return u},ZT:function(){return r},_T:function(){return o},ev:function(){return c},mG:function(){return a},pi:function(){return s}});n(7658);var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function a(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i["throw"](e))}catch(t){s(t)}}function u(e){e.done?n(e.value):r(e.value).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function u(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,a[0]&&(o=0)),o)try{if(n=1,i&&(r=2&a[0]?i["return"]:a[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}Object.create;function c(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create},2940:function(e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=o.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse relative URL.");if(s.scheme)return n.alwaysNormalize?(s.path=o.normalizePath(s.path),o.buildURLFromParts(s)):t;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var u=i.exec(a.path);a.netLoc=u[1],a.path=u[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:s.netLoc,path:null,params:s.params,query:s.query,fragment:s.fragment};if(!s.netLoc&&(c.netLoc=a.netLoc,"/"!==s.path[0]))if(s.path){var l=a.path,h=l.substring(0,l.lastIndexOf("/")+1)+s.path;c.path=o.normalizePath(h)}else c.path=a.path,s.params||(c.params=a.params,s.query||(c.query=a.query));return null===c.path&&(c.path=n.alwaysNormalize?o.normalizePath(s.path):s.path),o.buildURLFromParts(c)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){e=e.split("").reverse().join("").replace(r,"");while(e.length!==(e=e.replace(s,"")).length);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o})()},5570:function(e,t,n){var i=n(5743),r=e.exports={WebVTT:n(7318),VTTCue:n(9622),VTTRegion:n(7223)};i.vttjs=r,i.WebVTT=r.WebVTT;var s=r.VTTCue,o=r.VTTRegion,a=i.VTTCue,u=i.VTTRegion;r.shim=function(){i.VTTCue=s,i.VTTRegion=o},r.restore=function(){i.VTTCue=a,i.VTTRegion=u},i.VTTCue||r.shim()},7318:function(e,t,n){n(7658);var i=n(9004),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function s(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=r(null)}function u(e,t,n,i){var r=i?e.split(i):[e];for(var s in r)if("string"===typeof r[s]){var o=r[s].split(n);if(2===o.length){var a=o[0].trim(),u=o[1].trim();t(a,u)}}}function c(e,t,n){var i=e;function r(){var t=o(e);if(null===t)throw new s(s.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(e,t){var i=new a;u(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var s=t.split(","),o=s[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===s.length&&i.alt("lineAlign",s[1],["start","center","end"]);break;case"position":s=t.split(","),i.percent(e,s[0]),2===s.length&&i.alt("positionAlign",s[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"]);break}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(r){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(r){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(r){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=r(),l(),"--\x3e"!==e.substr(0,3))throw new s(s.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),l(),t.endTime=r(),l(),c(e,t)}s.prototype=r(Error.prototype),s.prototype.constructor=s,s.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var l=i.createElement&&i.createElement("textarea"),h={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(e,t){function n(){if(!t)return null;function e(e){return t=t.substr(e.length),e}var n=t.match(/^([^<]*)(<[^>]*>?)?/);return e(n[1]?n[1]:n[2])}function i(e){return l.innerHTML=e,e=l.textContent,l.textContent="",e}function r(e,t){return!f[t.localName]||f[t.localName]===e.localName}function s(t,n){var i=h[t];if(!i)return null;var r=e.document.createElement(i),s=p[t];return s&&n&&(r[s]=n.trim()),r}var a,u=e.document.createElement("div"),c=u,m=[];while(null!==(a=n()))if("<"!==a[0])c.appendChild(e.document.createTextNode(i(a)));else{if("/"===a[1]){m.length&&m[m.length-1]===a.substr(2).replace(">","")&&(m.pop(),c=c.parentNode);continue}var g,y=o(a.substr(1,a.length-2));if(y){g=e.document.createProcessingInstruction("timestamp",y),c.appendChild(g);continue}var v=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(g=s(v[1],v[3]),!g)continue;if(!r(c,g))continue;if(v[2]){var _=v[2].split(".");_.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(d.hasOwnProperty(n)){var i=t?"background-color":"color",r=d[n];g.style[i]=r}})),g.className=_.join(" ")}m.push(v[1]),c.appendChild(g),c=g}return u}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function v(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function s(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?s(e):t.childNodes?(r(e,t),s(e)):void 0}r(n,e);while(i=s(n))for(var o=0;o<i.length;o++)if(t=i.charCodeAt(o),y(t))return"rtl";return"ltr"}function _(e){if("number"===typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}function b(){}function T(e,t,n){b.call(this),this.cue=t,this.cueDiv=m(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:v(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size;break}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function w(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var s=(s=e.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();e=e.div.getBoundingClientRect(),t=s?Math.max(s[0]&&s[0].height||0,e.height/s.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function E(e,t,n,i){function r(e,t){for(var r,s=new w(e),o=1,a=0;a<t.length;a++){while(e.overlapsOppositeAxis(n,t[a])||e.within(n)&&e.overlapsAny(i))e.move(t[a]);if(e.within(n))return e;var u=e.intersectPercentage(n);o>u&&(r=new w(e),o=u),e=new w(s)}return r||s}var s=new w(t),o=t.cue,a=_(o),u=[];if(o.snapToLines){var c;switch(o.vertical){case"":u=["+y","-y"],c="height";break;case"rl":u=["+x","-x"],c="width";break;case"lr":u=["-x","+x"],c="width";break}var l=s.lineHeight,h=l*Math.round(a),d=n[c]+l,p=u[0];Math.abs(h)>d&&(h=h<0?-1:1,h*=Math.ceil(d/l)*l),a<0&&(h+=""===o.vertical?n.height:n.width,u=u.reverse()),s.move(p,h)}else{var f=s.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=f/2;break;case"end":a-=f;break}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")});break}u=["+y","-x","+x","-y"],s=new w(t)}var m=r(s,u);t.move(m.toCSSCompatValues(n))}function S(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},T.prototype=r(b.prototype),T.prototype.constructor=T,w.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}},w.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},w.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},w.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},w.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},w.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),n=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),i=t*n;return i/(this.height*this.width)},w.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},w.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var r={left:e.left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n};return r},S.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},S.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null};var k=.05,C="sans-serif",I="1.5%";S.processCues=function(e,t,n){if(!e||!t||!n)return null;while(n.firstChild)n.removeChild(n.firstChild);var i=e.document.createElement("div");function r(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=I,n.appendChild(i),r(t)){var s=[],o=w.getSimpleBoxPosition(i),a=Math.round(o.height*k*100)/100,u={font:a+"px "+C};(function(){for(var n,r,a=0;a<t.length;a++)r=t[a],n=new T(e,r,u),i.appendChild(n.div),E(e,n,o,s),r.displayState=n.div,s.push(w.getSimpleBoxPosition(n))})()}else for(var c=0;c<t.length;c++)i.appendChild(t[c].displayState)},S.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof s))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){var e=t.buffer,n=0;while(n<e.length&&"\r"!==e[n]&&"\n"!==e[n])++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){var n=new a;if(u(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new a;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"]);break}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}function r(e){var n=new a;u(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",o(t));break}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}function l(e){e.match(/X-TIMESTAMP-MAP/)?u(e,(function(e,t){switch(e){case"X-TIMESTAMP-MAP":r(t);break}}),/=/):u(e,(function(e,t){switch(e){case"Region":i(t);break}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var h;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;h=n();var d=h.match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new s(s.Errors.BadSignature);t.state="HEADER"}var p=!1;while(t.buffer){if(!/\r\n|\n/.test(t.buffer))return this;switch(p?p=!1:h=n(),t.state){case"HEADER":/:/.test(h)?l(h):h||(t.state="ID");continue;case"NOTE":h||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(h)){t.state="NOTE";break}if(!h)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(m){t.cue.align="middle"}if(t.state="CUE",-1===h.indexOf("--\x3e")){t.cue.id=h;continue}case"CUE":try{c(h,t.cue,t.regionList)}catch(m){t.reportOrThrowError(m),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=-1!==h.indexOf("--\x3e");if(!h||f&&(p=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=h.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":h||(t.state="ID");continue}}}catch(m){t.reportOrThrowError(m),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new s(s.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=S},9622:function(e){var t="auto",n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){if("string"!==typeof e)return!1;var t=n[e.toLowerCase()];return!!t&&e.toLowerCase()}function s(e){if("string"!==typeof e)return!1;var t=i[e.toLowerCase()];return!!t&&e.toLowerCase()}function o(e,n,i){this.hasBeenReset=!1;var o="",a=!1,u=e,c=n,l=i,h=null,d="",p=!0,f="auto",m="start",g="auto",y="auto",v=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(e){o=""+e}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(e){a=!!e}},startTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(e){var t=r(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");d=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e&&e!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=s(e);t?(m=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return y},set:function(e){var t=s(e);t?(y=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(e){var t=s(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=t,this.hasBeenReset=!0}}}),this.displayState=void 0}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=o},7223:function(e){var t={"":!0,up:!0};function n(e){if("string"!==typeof e)return!1;var n=t[e.toLowerCase()];return!!n&&e.toLowerCase()}function i(e){return"number"===typeof e&&e>=0&&e<=100}function r(){var e=100,t=3,r=0,s=100,o=0,a=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!i(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!i(e))throw new Error("RegionAnchorX must be between 0 and 100.");s=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!i(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!i(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!i(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=n(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):u=t}}})}e.exports=r},89:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n}},6866:function(e,t,n){"use strict";n.r(t),n.d(t,{BaseTransition:function(){return i.P$},Comment:function(){return i.sv},EffectScope:function(){return i.Bj},Fragment:function(){return i.HY},KeepAlive:function(){return i.Ob},ReactiveEffect:function(){return i.qq},Static:function(){return i.qG},Suspense:function(){return i.n4},Teleport:function(){return i.lR},Text:function(){return i.xv},Transition:function(){return i.uT},TransitionGroup:function(){return i.W3},VueElement:function(){return i.a2},assertNumber:function(){return i.Wu},callWithAsyncErrorHandling:function(){return i.$d},callWithErrorHandling:function(){return i.KU},camelize:function(){return i._A},capitalize:function(){return i.kC},cloneVNode:function(){return i.Ho},compatUtils:function(){return i.ry},compile:function(){return r},computed:function(){return i.Fl},createApp:function(){return i.ri},createBlock:function(){return i.j4},createCommentVNode:function(){return i.kq},createElementBlock:function(){return i.iD},createElementVNode:function(){return i._},createHydrationRenderer:function(){return i.Eo},createPropsRestProxy:function(){return i.p1},createRenderer:function(){return i.Us},createSSRApp:function(){return i.vr},createSlots:function(){return i.Nv},createStaticVNode:function(){return i.uE},createTextVNode:function(){return i.Uk},createVNode:function(){return i.Wm},customRef:function(){return i.ZM},defineAsyncComponent:function(){return i.RC},defineComponent:function(){return i.aZ},defineCustomElement:function(){return i.MW},defineEmits:function(){return i.Bz},defineExpose:function(){return i.WY},defineProps:function(){return i.yb},defineSSRCustomElement:function(){return i.Ah},devtools:function(){return i.mW},effect:function(){return i.cE},effectScope:function(){return i.B},getCurrentInstance:function(){return i.FN},getCurrentScope:function(){return i.nZ},getTransitionRawChildren:function(){return i.Q6},guardReactiveProps:function(){return i.F4},h:function(){return i.h},handleError:function(){return i.S3},hydrate:function(){return i.ZB},initCustomFormatter:function(){return i.Mr},initDirectivesForSSR:function(){return i.Nd},inject:function(){return i.f3},isMemoSame:function(){return i.nQ},isProxy:function(){return i.X3},isReactive:function(){return i.PG},isReadonly:function(){return i.$y},isRef:function(){return i.dq},isRuntimeOnly:function(){return i.of},isShallow:function(){return i.yT},isVNode:function(){return i.lA},markRaw:function(){return i.Xl},mergeDefaults:function(){return i.u_},mergeProps:function(){return i.dG},nextTick:function(){return i.Y3},normalizeClass:function(){return i.C_},normalizeProps:function(){return i.vs},normalizeStyle:function(){return i.j5},onActivated:function(){return i.dl},onBeforeMount:function(){return i.wF},onBeforeUnmount:function(){return i.Jd},onBeforeUpdate:function(){return i.Xn},onDeactivated:function(){return i.se},onErrorCaptured:function(){return i.d1},onMounted:function(){return i.bv},onRenderTracked:function(){return i.bT},onRenderTriggered:function(){return i.Yq},onScopeDispose:function(){return i.EB},onServerPrefetch:function(){return i.vl},onUnmounted:function(){return i.SK},onUpdated:function(){return i.ic},openBlock:function(){return i.wg},popScopeId:function(){return i.Cn},provide:function(){return i.JJ},proxyRefs:function(){return i.WL},pushScopeId:function(){return i.dD},queuePostFlushCb:function(){return i.qb},reactive:function(){return i.qj},readonly:function(){return i.OT},ref:function(){return i.iH},registerRuntimeCompiler:function(){return i.Y1},render:function(){return i.sY},renderList:function(){return i.Ko},renderSlot:function(){return i.WI},resolveComponent:function(){return i.up},resolveDirective:function(){return i.Q2},resolveDynamicComponent:function(){return i.LL},resolveFilter:function(){return i.eq},resolveTransitionHooks:function(){return i.U2},setBlockTracking:function(){return i.qZ},setDevtoolsHook:function(){return i.ec},setTransitionHooks:function(){return i.nK},shallowReactive:function(){return i.Um},shallowReadonly:function(){return i.YS},shallowRef:function(){return i.XI},ssrContextKey:function(){return i.Uc},ssrUtils:function(){return i.G},stop:function(){return i.sT},toDisplayString:function(){return i.zw},toHandlerKey:function(){return i.hR},toHandlers:function(){return i.mx},toRaw:function(){return i.IU},toRef:function(){return i.Vh},toRefs:function(){return i.BK},transformVNodeArgs:function(){return i.C3},triggerRef:function(){return i.oR},unref:function(){return i.SU},useAttrs:function(){return i.l1},useCssModule:function(){return i.fb},useCssVars:function(){return i.sj},useSSRContext:function(){return i.Zq},useSlots:function(){return i.Rr},useTransitionState:function(){return i.Y8},vModelCheckbox:function(){return i.e8},vModelDynamic:function(){return i.YZ},vModelRadio:function(){return i.G2},vModelSelect:function(){return i.bM},vModelText:function(){return i.nr},vShow:function(){return i.F8},version:function(){return i.i8},warn:function(){return i.ZK},watch:function(){return i.YP},watchEffect:function(){return i.m0},watchPostEffect:function(){return i.Rh},watchSyncEffect:function(){return i.yX},withAsyncContext:function(){return i.mv},withCtx:function(){return i.w5},withDefaults:function(){return i.b9},withDirectives:function(){return i.wy},withKeys:function(){return i.D2},withMemo:function(){return i.MX},withModifiers:function(){return i.iM},withScopeId:function(){return i.HX}});var i=n(9242);const r=()=>{0}},2415:function(e,t){"use strict";var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?u(Array.isArray(e)?[]:{},e,t):e}function s(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function u(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||s,i.isMergeableObject=i.isMergeableObject||n,i.cloneUnlessOtherwiseSpecified=r;var c=Array.isArray(t);return c===Array.isArray(e)?c?i.arrayMerge(e,t,i):function(e,t,n){var i={};return n.isMergeableObject(e)&&o(e).forEach((function(t){i[t]=r(e[t],n)})),o(t).forEach((function(s){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(i[s]=a(e,s)&&n.isMergeableObject(t[s])?function(e,t){if(!t.customMerge)return u;var n=t.customMerge(e);return"function"==typeof n?n:u}(s,n)(e[s],t[s],n):r(t[s],n))})),i}(e,t,i):r(t,i)}u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return u(e,n,t)}),{})};var c=u;function l(e){var t=(e=e||{}).storage||window&&window.localStorage,n=e.key||"vuex";function i(e,t){var n=t.getItem(e);try{return"string"==typeof n?JSON.parse(n):"object"==typeof n?n:void 0}catch(e){}}function r(){return!0}function s(e,t,n){return n.setItem(e,JSON.stringify(t))}function o(e,t){return Array.isArray(t)?t.reduce((function(t,n){return function(e,t,n,i){return!/^(__proto__|constructor|prototype)$/.test(t)&&((t=t.split?t.split("."):t.slice(0)).slice(0,-1).reduce((function(e,t){return e[t]=e[t]||{}}),e)[t.pop()]=n),e}(t,n,(i=e,void 0===(i=((r=n).split?r.split("."):r).reduce((function(e,t){return e&&e[t]}),i))?void 0:i));var i,r}),{}):e}function a(e){return function(t){return e.subscribe(t)}}(e.assertStorage||function(){t.setItem("@@",1),t.removeItem("@@")})(t);var u,l=function(){return(e.getState||i)(n,t)};return e.fetchBeforeUse&&(u=l()),function(i){e.fetchBeforeUse||(u=l()),"object"==typeof u&&null!==u&&(i.replaceState(e.overwrite?u:c(i.state,u,{arrayMerge:e.arrayMerger||function(e,t){return t},clone:!1})),(e.rehydrated||function(){})(i)),(e.subscriber||a)(i)((function(i,a){(e.filter||r)(i)&&(e.setState||s)(n,(e.reducer||o)(a,e.paths),t)}))}}t["Z"]=l},65:function(e,t,n){"use strict";n.d(t,{MT:function(){return ee}});n(7658),n(541);var i=n(3396),r=n(4870);function s(){return o().__VUE_DEVTOOLS_GLOBAL_HOOK__}function o(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,u="devtools-plugin:setup",c="plugin:settings:set";let l,h;function d(){var e;return void 0!==l||("undefined"!==typeof window&&window.performance?(l=!0,h=window.performance):"undefined"!==typeof n.g&&(null===(e=n.g.perf_hooks)||void 0===e?void 0:e.performance)?(l=!0,h=n.g.perf_hooks.performance):l=!1),l}function p(){return d()?h.now():Date.now()}class f{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const n={};if(e.settings)for(const o in e.settings){const t=e.settings[o];n[o]=t.defaultValue}const i=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},n);try{const e=localStorage.getItem(i),t=JSON.parse(e);Object.assign(r,t)}catch(s){}this.fallbacks={getSettings(){return r},setSettings(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(s){}r=e},now(){return p()}},t&&t.on(c,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((n=>{this.targetQueue.push({method:t,args:e,resolve:n})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function m(e,t){const n=e,i=o(),r=s(),c=a&&n.enableEarlyProxy;if(!r||!i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const e=c?new f(n,r):null,s=i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[];s.push({pluginDescriptor:n,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else r.emit(u,e,t)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var g="store";function y(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function v(e){return null!==e&&"object"===typeof e}function _(e){return e&&"function"===typeof e.then}function b(e,t){return function(){return e(t)}}function T(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function w(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;S(e,n,[],e._modules.root,!0),E(e,n,t)}function E(e,t,n){var s=e._state,o=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var a=e._wrappedGetters,u={},c={},l=(0,r.B)(!0);l.run((function(){y(a,(function(t,n){u[n]=b(t,e),c[n]=(0,i.Fl)((function(){return u[n]()})),Object.defineProperty(e.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),e._state=(0,r.qj)({data:t}),e._scope=l,e.strict&&A(e),s&&n&&e._withCommit((function(){s.data=null})),o&&o.stop()}function S(e,t,n,i,r){var s=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!s&&!r){var a=D(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit((function(){a[u]=i.state}))}var c=i.context=k(e,o,n);i.forEachMutation((function(t,n){var i=o+n;I(e,i,t,c)})),i.forEachAction((function(t,n){var i=t.root?n:o+n,r=t.handler||t;O(e,i,r,c)})),i.forEachGetter((function(t,n){var i=o+n;x(e,i,t,c)})),i.forEachChild((function(i,s){S(e,t,n.concat(s),i,r)}))}function k(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var s=P(n,i,r),o=s.payload,a=s.options,u=s.type;return a&&a.root||(u=t+u),e.dispatch(u,o)},commit:i?e.commit:function(n,i,r){var s=P(n,i,r),o=s.payload,a=s.options,u=s.type;a&&a.root||(u=t+u),e.commit(u,o,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return C(e,t)}},state:{get:function(){return D(e.state,n)}}}),r}function C(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function I(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push((function(t){n.call(e,i.state,t)}))}function O(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push((function(t){var r=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return _(r)||(r=Promise.resolve(r)),e._devtoolHook?r.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):r}))}function x(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function A(e){(0,i.YP)((function(){return e._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function D(e,t){return t.reduce((function(e,t){return e[t]}),e)}function P(e,t,n){return v(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var R="vuex bindings",N="vuex:mutations",L="vuex:actions",M="vuex",U=0;function j(e,t){m({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[R]},(function(n){n.addTimelineLayer({id:N,label:"Vuex Mutations",color:F}),n.addTimelineLayer({id:L,label:"Vuex Actions",color:F}),n.addInspector({id:M,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===e&&n.inspectorId===M)if(n.filter){var i=[];W(i,t._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[H(t._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===e&&n.inspectorId===M){var i=n.nodeId;C(t,i),n.state=z(Q(t._modules,i),"root"===i?t.getters:t._makeLocalGettersCache,i)}})),n.on.editInspectorState((function(n){if(n.app===e&&n.inspectorId===M){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),t._withCommit((function(){n.set(t._state.data,r,n.state.value)}))}})),t.subscribe((function(e,t){var i={};e.payload&&(i.payload=e.payload),i.state=t,n.notifyComponentUpdate(),n.sendInspectorTree(M),n.sendInspectorState(M),n.addTimelineEvent({layerId:N,event:{time:Date.now(),title:e.type,data:i}})})),t.subscribeAction({before:function(e,t){var i={};e.payload&&(i.payload=e.payload),e._id=U++,e._time=Date.now(),i.state=t,n.addTimelineEvent({layerId:L,event:{time:e._time,title:e.type,groupId:e._id,subtitle:"start",data:i}})},after:function(e,t){var i={},r=Date.now()-e._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},e.payload&&(i.payload=e.payload),i.state=t,n.addTimelineEvent({layerId:L,event:{time:Date.now(),title:e.type,groupId:e._id,subtitle:"end",data:i}})}})}))}var F=8702998,B=6710886,V=16777215,$={label:"namespaced",textColor:V,backgroundColor:B};function q(e){return e&&"root"!==e?e.split("/").slice(-2,-1)[0]:"Root"}function H(e,t){return{id:t||"root",label:q(t),tags:e.namespaced?[$]:[],children:Object.keys(e._children).map((function(n){return H(e._children[n],t+n+"/")}))}}function W(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[$]:[]}),Object.keys(t._children).forEach((function(r){W(e,t._children[r],n,i+r+"/")}))}function z(e,t,n){t="root"===n?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map((function(t){return{key:t,editable:!0,value:e.state[t]}}))};if(i.length){var s=G(t);r.getters=Object.keys(s).map((function(e){return{key:e.endsWith("/")?q(e):e,editable:!1,value:K((function(){return s[e]}))}}))}return r}function G(e){var t={};return Object.keys(e).forEach((function(n){var i=n.split("/");if(i.length>1){var r=t,s=i.pop();i.forEach((function(e){r[e]||(r[e]={_custom:{value:{},display:e,tooltip:"Module",abstract:!0}}),r=r[e]._custom.value})),r[s]=K((function(){return e[n]}))}else t[n]=K((function(){return e[n]}))})),t}function Q(e,t){var n=t.split("/").filter((function(e){return e}));return n.reduce((function(e,i,r){var s=e[i];if(!s)throw new Error('Missing module "'+i+'" for path "'+t+'".');return r===n.length-1?s:s._children}),"root"===t?e:e.root._children)}function K(e){try{return e()}catch(t){return t}}var X=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},Y={namespaced:{configurable:!0}};Y.namespaced.get=function(){return!!this._rawModule.namespaced},X.prototype.addChild=function(e,t){this._children[e]=t},X.prototype.removeChild=function(e){delete this._children[e]},X.prototype.getChild=function(e){return this._children[e]},X.prototype.hasChild=function(e){return e in this._children},X.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},X.prototype.forEachChild=function(e){y(this._children,e)},X.prototype.forEachGetter=function(e){this._rawModule.getters&&y(this._rawModule.getters,e)},X.prototype.forEachAction=function(e){this._rawModule.actions&&y(this._rawModule.actions,e)},X.prototype.forEachMutation=function(e){this._rawModule.mutations&&y(this._rawModule.mutations,e)},Object.defineProperties(X.prototype,Y);var J=function(e){this.register([],e,!1)};function Z(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;Z(e.concat(i),t.getChild(i),n.modules[i])}}J.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},J.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},J.prototype.update=function(e){Z([],this.root,e)},J.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var r=new X(t,n);if(0===e.length)this.root=r;else{var s=this.get(e.slice(0,-1));s.addChild(e[e.length-1],r)}t.modules&&y(t.modules,(function(t,r){i.register(e.concat(r),t,n)}))},J.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},J.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};function ee(e){return new te(e)}var te=function(e){var t=this;void 0===e&&(e={});var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new J(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var s=this,o=this,a=o.dispatch,u=o.commit;this.dispatch=function(e,t){return a.call(s,e,t)},this.commit=function(e,t,n){return u.call(s,e,t,n)},this.strict=i;var c=this._modules.root.state;S(this,c,[],this._modules.root),E(this,c),n.forEach((function(e){return e(t)}))},ne={state:{configurable:!0}};te.prototype.install=function(e,t){e.provide(t||g,this),e.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&j(e,this)},ne.state.get=function(){return this._state.data},ne.state.set=function(e){0},te.prototype.commit=function(e,t,n){var i=this,r=P(e,t,n),s=r.type,o=r.payload,a=(r.options,{type:s,payload:o}),u=this._mutations[s];u&&(this._withCommit((function(){u.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(a,i.state)})))},te.prototype.dispatch=function(e,t){var n=this,i=P(e,t),r=i.type,s=i.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(c){0}var u=a.length>1?Promise.all(a.map((function(e){return e(s)}))):a[0](s);return new Promise((function(e,t){u.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(c){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(c){0}t(e)}))}))}},te.prototype.subscribe=function(e,t){return T(e,this._subscribers,t)},te.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return T(n,this._actionSubscribers,t)},te.prototype.watch=function(e,t,n){var r=this;return(0,i.YP)((function(){return e(r.state,r.getters)}),t,Object.assign({},n))},te.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._state.data=e}))},te.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),S(this,this.state,e,this._modules.get(e),n.preserveState),E(this,this.state)},te.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=D(t.state,e.slice(0,-1));delete n[e[e.length-1]]})),w(this)},te.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},te.prototype.hotUpdate=function(e){this._modules.update(e),w(this,!0)},te.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(te.prototype,ne);se((function(e,t){var n={};return ie(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=oe(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,t,n):t[r]},n[i].vuex=!0})),n})),se((function(e,t){var n={};return ie(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var s=oe(this.$store,"mapMutations",e);if(!s)return;i=s.context.commit}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n})),se((function(e,t){var n={};return ie(t).forEach((function(t){var i=t.key,r=t.val;r=e+r,n[i]=function(){if(!e||oe(this.$store,"mapGetters",e))return this.$store.getters[r]},n[i].vuex=!0})),n})),se((function(e,t){var n={};return ie(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var s=oe(this.$store,"mapActions",e);if(!s)return;i=s.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n}));function ie(e){return re(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function re(e){return Array.isArray(e)||v(e)}function se(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function oe(e,t,n){var i=e._modulesNamespaceMap[n];return i}},9675:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},8753:function(e,t,n){"use strict";n.d(t,{R:function(){return o}});var i=n(2900),r=n(3348),s=n(2157),o=function(){function e(){this.getFragmentDoc=(0,r.re)(s.Yk)}return e.prototype.batch=function(e){var t,n=this,i="string"===typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction((function(){return t=e.update(n)}),i),t},e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,i.pi)((0,i.pi)({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,i.pi)((0,i.pi)({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},e.prototype.writeQuery=function(e){var t=e.id,n=e.data,r=(0,i._T)(e,["id","data"]);return this.write(Object.assign(r,{dataId:t||"ROOT_QUERY",result:n}))},e.prototype.writeFragment=function(e){var t=e.id,n=e.data,r=e.fragment,s=e.fragmentName,o=(0,i._T)(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(r,s),dataId:t,result:n}))},e.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var r=n.readQuery(e),s=t(r);return void 0===s||null===s?r:(n.writeQuery((0,i.pi)((0,i.pi)({},e),{data:s})),s)}})},e.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var r=n.readFragment(e),s=t(r);return void 0===s||null===s?r:(n.writeFragment((0,i.pi)((0,i.pi)({},e),{data:s})),s)}})},e}()},9926:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(2900),r=function(e){function t(n,i,r,s){var o,a=e.call(this,n)||this;if(a.message=n,a.path=i,a.query=r,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var u=a.path.length-1;u>=0;--u)a.missing=(o={},o[a.path[u]]=a.missing,o)}else a.missing=a.path;return a.__proto__=t.prototype,a}return(0,i.ZT)(t,e),t}(Error)},8840:function(e,t,n){"use strict";n.d(t,{$O:function(){return v},E_:function(){return _},Is:function(){return E},RC:function(){return b},RI:function(){return h},ig:function(){return w},j:function(){return T},jS:function(){return m},jp:function(){return y},lg:function(){return g},uG:function(){return p}});var i=n(8257),r=n(7491),s=n(6867),o=n(1328),a=n(1495),u=n(544),c=n(2157),l=n(958),h=Object.prototype.hasOwnProperty;function d(e){return null===e||void 0===e}function p(e,t){var n=e.__typename,i=e.id,r=e._id;if("string"===typeof n&&(t&&(t.keyObject=d(i)?d(r)?void 0:{_id:r}:{id:i}),d(i)&&!d(r)&&(i=r),!d(i)))return"".concat(n,":").concat("number"===typeof i||"string"===typeof i?i:JSON.stringify(i))}var f={dataIdFromObject:p,addTypename:!0,resultCaching:!0,canonizeResults:!1};function m(e){return(0,i.o)(f,e)}function g(e){var t=e.canonizeResults;return void 0===t?f.canonizeResults:t}function y(e,t){return(0,r.Yk)(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var v=/^[_a-z][_0-9a-z]*/i;function _(e){var t=e.match(v);return t?t[0]:e}function b(e,t,n){return!!(0,s.s)(t)&&((0,o.k)(t)?t.every((function(t){return b(e,t,n)})):e.selections.every((function(e){if((0,r.My)(e)&&(0,a.LZ)(e,n)){var i=(0,r.u2)(e);return h.call(t,i)&&(!e.selectionSet||b(e.selectionSet,t[i],n))}return!0})))}function T(e){return(0,s.s)(e)&&!(0,r.Yk)(e)&&!(0,o.k)(e)}function w(){return new u.w0}function E(e,t){var n=(0,c.F)((0,l.kU)(e));return{fragmentMap:n,lookupFragment:function(e){var i=n[e];return!i&&t&&(i=t.lookup(e)),i||null}}}},2419:function(e,t,n){"use strict";n.d(t,{h:function(){return ve}});var i=n(2900),r=n(909),s=n(3348),o=n(2713),a=n(8753),u=n(9926),c=n(7491),l=n(2012),h=(n(7658),n(4478)),d=n(2067),p=n(8257),f=n(958),m=n(544),g=n(1495),y=n(2157),v=n(6867);function _(e){var t=new Set([e]);return t.forEach((function(e){(0,v.s)(e)&&b(e)===e&&Object.getOwnPropertyNames(e).forEach((function(n){(0,v.s)(e[n])&&t.add(e[n])}))})),e}function b(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function T(e){return __DEV__&&_(e),e}var w=n(4492),E=n(8840),S=Object.create(null),k=function(){return S},C=Object.create(null),I=function(){function e(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return T((0,c.Yk)(e)?n.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return(0,c.Yk)(e)?n.has(e.__ref):"object"===typeof e},this.toReference=function(e,t){if("string"===typeof e)return(0,c.kQ)(e);if((0,c.Yk)(e))return e;var i=n.policies.identify(e)[0];if(i){var r=(0,c.kQ)(i);return t&&n.merge(i,e),r}}}return e.prototype.toObject=function(){return(0,i.pi)({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),E.RI.call(this.data,e)){var n=this.data[e];if(n&&E.RI.call(n,t))return n[t]}return"__typename"===t&&E.RI.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof D?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),E.RI.call(this.data,e)?this.data[e]:this instanceof D?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var n,i=this;(0,c.Yk)(e)&&(e=e.__ref),(0,c.Yk)(t)&&(t=t.__ref);var s="string"===typeof e?this.lookup(n=e):e,o="string"===typeof t?this.lookup(n=t):t;if(o){__DEV__?(0,r.kG)("string"===typeof n,"store.merge expects a string ID"):(0,r.kG)("string"===typeof n,1);var a=new m.w0(R).merge(s,o);if(this.data[n]=a,a!==s&&(delete this.refs[n],this.group.caching)){var u=Object.create(null);s||(u.__exists=1),Object.keys(o).forEach((function(e){if(!s||s[e]!==a[e]){u[e]=1;var t=(0,E.E_)(e);t===e||i.policies.hasKeyArgs(a.__typename,t)||(u[t]=1),void 0!==a[e]||i instanceof D||delete a[e]}})),!u.__typename||s&&s.__typename||this.policies.rootTypenamesById[n]!==a.__typename||delete u.__typename,Object.keys(u).forEach((function(e){return i.group.dirty(n,e)}))}}},e.prototype.modify=function(e,t){var n=this,r=this.lookup(e);if(r){var s=Object.create(null),o=!1,a=!0,u={DELETE:S,INVALIDATE:C,isReference:c.Yk,toReference:this.toReference,canRead:this.canRead,readField:function(t,i){return n.policies.readField("string"===typeof t?{fieldName:t,from:i||(0,c.kQ)(e)}:t,{store:n})}};if(Object.keys(r).forEach((function(c){var l=(0,E.E_)(c),h=r[c];if(void 0!==h){var d="function"===typeof t?t:t[c]||t[l];if(d){var p=d===k?S:d(T(h),(0,i.pi)((0,i.pi)({},u),{fieldName:l,storeFieldName:c,storage:n.getStorage(e,c)}));p===C?n.group.dirty(e,c):(p===S&&(p=void 0),p!==h&&(s[c]=p,o=!0,h=p))}void 0!==h&&(a=!1)}})),o)return this.merge(e,s),a&&(this instanceof D?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,n){var i,r=this.lookup(e);if(r){var s=this.getFieldValue(r,"__typename"),o=t&&n?this.policies.getStoreFieldName({typename:s,fieldName:t,args:n}):t;return this.modify(e,o?(i={},i[o]=k,i):k)}return!1},e.prototype.evict=function(e,t){var n=!1;return e.id&&(E.RI.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof D&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach((function(t){E.RI.call(e.policies.rootTypenamesById,t)||n.push(t)})),n.length&&(t.__META={extraRootIds:n.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(n){e&&E.RI.call(e,n)||t.delete(n)})),e){var n=e.__META,r=(0,i._T)(e,["__META"]);Object.keys(r).forEach((function(e){t.merge(e,r[e])})),n&&n.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof D?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach((function(i){E.RI.call(n,i)&&(Object.keys(e.findChildRefIds(i)).forEach(t.add,t),delete n[i])}));var i=Object.keys(n);if(i.length){var r=this;while(r instanceof D)r=r.parent;i.forEach((function(e){return r.delete(e)}))}return i},e.prototype.findChildRefIds=function(e){if(!E.RI.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var i=new Set([n]);i.forEach((function(e){(0,c.Yk)(e)&&(t[e.__ref]=!0),(0,v.s)(e)&&Object.keys(e).forEach((function(t){var n=e[t];(0,v.s)(n)&&i.add(n)}))}))}return this.refs[e]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),O=function(){function e(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?(0,s.dP)():null,this.keyMaker=new w.B(d.mr)},e.prototype.depend=function(e,t){if(this.d){this.d(x(e,t));var n=(0,E.E_)(t);n!==t&&this.d(x(e,n)),this.parent&&this.parent.depend(e,t)}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(x(e,t),"__exists"===t?"forget":"setDirty")},e}();function x(e,t){return t+"#"+e}function A(e,t){N(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(e){function t(t){var n=t.policies,i=t.resultCaching,r=void 0===i||i,s=t.seed,o=e.call(this,n,new O(r))||this;return o.stump=new P(o),o.storageTrie=new w.B(d.mr),s&&o.replace(s),o}return(0,i.ZT)(t,e),t.prototype.addLayer=function(e,t){return this.stump.addLayer(e,t)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t})(I||(I={}));var D=function(e){function t(t,n,i,r){var s=e.call(this,n.policies,r)||this;return s.id=t,s.parent=n,s.replay=i,s.group=r,i(s),s}return(0,i.ZT)(t,e),t.prototype.addLayer=function(e,n){return new t(e,this,n,this.group)},t.prototype.removeLayer=function(e){var t=this,n=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){var i=t.data[e],r=n["lookup"](e);r?i?i!==r&&Object.keys(i).forEach((function(n){(0,o.D)(i[n],r[n])||t.group.dirty(e,n)})):(t.group.dirty(e,"__exists"),Object.keys(r).forEach((function(n){t.group.dirty(e,n)}))):t.delete(e)})),n):n===this.parent?this:n.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return(0,i.pi)((0,i.pi)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return E.RI.call(this.data,t)?(0,i.pi)((0,i.pi)({},n),e.prototype.findChildRefIds.call(this,t)):n},t.prototype.getStorage=function(){var e=this.parent;while(e.parent)e=e.parent;return e.getStorage.apply(e,arguments)},t}(I),P=function(e){function t(t){return e.call(this,"EntityStore.Stump",t,(function(){}),new O(t.group.caching,t.group))||this}return(0,i.ZT)(t,e),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(D);function R(e,t,n){var i=e[n],r=t[n];return(0,o.D)(i,r)?i:r}function N(e){return!!(e instanceof I&&e.group.caching)}var L=n(1328),M=n(6631);function U(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var j=function(){function e(e){var t=this;this.knownResults=new(d.mr?WeakMap:Map),this.config=(0,p.o)(e,{addTypename:!1!==e.addTypename,canonizeResults:(0,E.lg)(e)}),this.canon=e.canon||new M.h,this.executeSelectionSet=(0,s.re)((function(e){var n,r=e.context.canonizeResults,s=U(e);s[3]=!r;var o=(n=t.executeSelectionSet).peek.apply(n,s);return o?r?(0,i.pi)((0,i.pi)({},o),{result:t.canon.admit(o.result)}):o:(A(e.context.store,e.enclosingRef.__ref),t.execSelectionSetImpl(e))}),{max:this.config.resultCacheMaxSize,keyArgs:U,makeCacheKey:function(e,t,n,i){if(N(n.store))return n.store.makeCacheKey(e,(0,c.Yk)(t)?t.__ref:t,n.varString,i)}}),this.executeSubSelectedArray=(0,s.re)((function(e){return A(e.context.store,e.enclosingRef.__ref),t.execSubSelectedArrayImpl(e)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var t=e.field,n=e.array,i=e.context;if(N(i.store))return i.store.makeCacheKey(t,n,i.varString)}})}return e.prototype.resetCanon=function(){this.canon=new M.h},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,r=e.rootId,s=void 0===r?"ROOT_QUERY":r,o=e.variables,a=e.returnPartialData,l=void 0===a||a,h=e.canonizeResults,d=void 0===h?this.config.canonizeResults:h,p=this.config.cache.policies;o=(0,i.pi)((0,i.pi)({},(0,f.O4)((0,f.iW)(n))),o);var m,g=(0,c.kQ)(s),y=this.executeSelectionSet({selectionSet:(0,f.p$)(n).selectionSet,objectOrReference:g,enclosingRef:g,context:(0,i.pi)({store:t,query:n,policies:p,variables:o,varString:(0,M.B)(o),canonizeResults:d},(0,E.Is)(n,this.config.fragments))});if(y.missing&&(m=[new u.y(F(y.missing),y.missing,n,o)],!l))throw m[0];return{result:y.result,complete:!m,missing:m}},e.prototype.isFresh=function(e,t,n,i){if(N(i.store)&&this.knownResults.get(e)===n){var r=this.executeSelectionSet.peek(n,t,i,this.canon.isKnown(e));if(r&&e===r.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,i=e.objectOrReference,s=e.enclosingRef,o=e.context;if((0,c.Yk)(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var a,u=o.variables,d=o.policies,p=o.store,f=p.getFieldValue(i,"__typename"),v=[],_=new m.w0;function b(e,t){var n;return e.missing&&(a=_.merge(a,(n={},n[t]=e.missing,n))),e.result}this.config.addTypename&&"string"===typeof f&&!d.rootIdsByTypename[f]&&v.push({__typename:f});var w=new Set(n.selections);w.forEach((function(e){var n,p;if((0,g.LZ)(e,u))if((0,c.My)(e)){var m=d.readField({fieldName:e.name.value,field:e,variables:o.variables,from:i},o),T=(0,c.u2)(e);void 0===m?l.Gw.added(e)||(a=_.merge(a,(n={},n[T]="Can't find field '".concat(e.name.value,"' on ").concat((0,c.Yk)(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),n))):(0,L.k)(m)?m=b(t.executeSubSelectedArray({field:e,array:m,enclosingRef:s,context:o}),T):e.selectionSet?null!=m&&(m=b(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:m,enclosingRef:(0,c.Yk)(m)?m:s,context:o}),T)):o.canonizeResults&&(m=t.canon.pass(m)),void 0!==m&&v.push((p={},p[T]=m,p))}else{var E=(0,y.hi)(e,o.lookupFragment);if(!E&&e.kind===h.h.FRAGMENT_SPREAD)throw __DEV__?new r.ej("No fragment named ".concat(e.name.value)):new r.ej(5);E&&d.fragmentMatches(E,f)&&E.selectionSet.selections.forEach(w.add,w)}}));var E=(0,m.bw)(v),S={result:E,missing:a},k=o.canonizeResults?this.canon.admit(S):T(S);return k.result&&this.knownResults.set(k.result,n),k},e.prototype.execSubSelectedArrayImpl=function(e){var t,n=this,i=e.field,r=e.array,s=e.enclosingRef,o=e.context,a=new m.w0;function u(e,n){var i;return e.missing&&(t=a.merge(t,(i={},i[n]=e.missing,i))),e.result}return i.selectionSet&&(r=r.filter(o.store.canRead)),r=r.map((function(e,t){return null===e?null:(0,L.k)(e)?u(n.executeSubSelectedArray({field:i,array:e,enclosingRef:s,context:o}),t):i.selectionSet?u(n.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:e,enclosingRef:(0,c.Yk)(e)?e:s,context:o}),t):(__DEV__&&B(o.store,i,e),e)})),{result:o.canonizeResults?this.canon.admit(r):r,missing:t}},e}();function F(e){try{JSON.stringify(e,(function(e,t){if("string"===typeof t)throw t;return t}))}catch(t){return t}}function B(e,t,n){if(!t.selectionSet){var i=new Set([n]);i.forEach((function(n){(0,v.s)(n)&&(__DEV__?(0,r.kG)(!(0,c.Yk)(n),"Missing selection set for object of type ".concat((0,E.jp)(e,n)," returned for query field ").concat(t.name.value)):(0,r.kG)(!(0,c.Yk)(n),6),Object.values(n).forEach(i.add,i))}))}}var V=n(9735),$=n(1073);function q(e){var t=(0,$.X)("stringifyForDisplay");return JSON.stringify(e,(function(e,n){return void 0===n?t:n})).split(JSON.stringify(t)).join("<undefined>")}var H=n(9961),W=Object.create(null);function z(e){var t=JSON.stringify(e);return W[t]||(W[t]=Object.create(null))}function G(e){var t=z(e);return t.keyFieldsFn||(t.keyFieldsFn=function(t,n){var i=function(e,t){return n.readField(t,e)},s=n.keyObject=K(e,(function(e){var s=J(n.storeObject,e,i);return void 0===s&&t!==n.storeObject&&E.RI.call(t,e[0])&&(s=J(t,e,Y)),__DEV__?(0,r.kG)(void 0!==s,"Missing field '".concat(e.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):(0,r.kG)(void 0!==s,2),s}));return"".concat(n.typename,":").concat(JSON.stringify(s))})}function Q(e){var t=z(e);return t.keyArgsFn||(t.keyArgsFn=function(t,n){var i=n.field,r=n.variables,s=n.fieldName,o=K(e,(function(e){var n=e[0],s=n.charAt(0);if("@"!==s)if("$"!==s){if(t)return J(t,e)}else{var o=n.slice(1);if(r&&E.RI.call(r,o)){var a=e.slice(0);return a[0]=o,J(r,a)}}else if(i&&(0,L.O)(i.directives)){var u=n.slice(1),l=i.directives.find((function(e){return e.name.value===u})),h=l&&(0,c.NC)(l,r);return h&&J(h,e.slice(1))}})),a=JSON.stringify(o);return(t||"{}"!==a)&&(s+=":"+a),s})}function K(e,t){var n=new m.w0;return X(e).reduce((function(e,i){var r,s=t(i);if(void 0!==s){for(var o=i.length-1;o>=0;--o)r={},r[i[o]]=s,s=r;e=n.merge(e,s)}return e}),Object.create(null))}function X(e){var t=z(e);if(!t.paths){var n=t.paths=[],i=[];e.forEach((function(t,r){(0,L.k)(t)?(X(t).forEach((function(e){return n.push(i.concat(e))})),i.length=0):(i.push(t),(0,L.k)(e[r+1])||(n.push(i.slice(0)),i.length=0))}))}return t.paths}function Y(e,t){return e[t]}function J(e,t,n){return n=n||Y,Z(t.reduce((function e(t,i){return(0,L.k)(t)?t.map((function(t){return e(t,i)})):t&&n(t,i)}),e))}function Z(e){return(0,v.s)(e)?(0,L.k)(e)?e.map(Z):K(Object.keys(e).sort(),(function(t){return J(e,t)})):e}function ee(e){return void 0!==e.args?e.args:e.field?(0,c.NC)(e.field,e.variables):null}c.PT.setStringify(M.B);var te=function(){},ne=function(e,t){return t.fieldName},ie=function(e,t,n){var i=n.mergeObjects;return i(e,t)},re=function(e,t){return t},se=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,i.pi)({dataIdFromObject:E.uG},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t){var n,r=this,s=t&&(t.typename||(null===(n=t.storeObject)||void 0===n?void 0:n.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o,a=t&&t.storeObject||e,u=(0,i.pi)((0,i.pi)({},t),{typename:s,storeObject:a,readField:t&&t.readField||function(){var e=ae(arguments,a);return r.readField(e,{store:r.cache["data"],variables:e.variables})}}),c=s&&this.getTypePolicy(s),l=c&&c.keyFn||this.config.dataIdFromObject;while(l){var h=l(e,u);if(!(0,L.k)(h)){o=h;break}l=G(h)}return o=o?String(o):void 0,u.keyObject?[o,u.keyObject]:[o]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],s=r.queryType,o=r.mutationType,a=r.subscriptionType,u=(0,i._T)(r,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),E.RI.call(t.toBeAdded,n)?t.toBeAdded[n].push(u):t.toBeAdded[n]=[u]}))},e.prototype.updateTypePolicy=function(e,t){var n=this,i=this.getTypePolicy(e),r=t.keyFields,s=t.fields;function o(e,t){e.merge="function"===typeof t?t:!0===t?ie:!1===t?re:e.merge}o(i,t.merge),i.keyFn=!1===r?te:(0,L.k)(r)?G(r):"function"===typeof r?r:i.keyFn,s&&Object.keys(s).forEach((function(t){var i=n.getFieldPolicy(e,t,!0),r=s[t];if("function"===typeof r)i.read=r;else{var a=r.keyArgs,u=r.read,c=r.merge;i.keyFn=!1===a?ne:(0,L.k)(a)?Q(a):"function"===typeof a?a:i.keyFn,"function"===typeof u&&(i.read=u),o(i,c)}i.read&&i.merge&&(i.keyFn=i.keyFn||ne)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var n="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[n];t!==i&&(__DEV__?(0,r.kG)(!i||i===e,"Cannot change root ".concat(e," __typename more than once")):(0,r.kG)(!i||i===e,3),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(n){t.getSupertypeSet(n,!0),e[n].forEach((function(e){t.getSupertypeSet(e,!0).add(n);var i=e.match(E.$O);i&&i[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!E.RI.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var r=this.supertypeMap.get(e);r&&r.size&&r.forEach((function(e){var r=t.getTypePolicy(e),s=r.fields,o=(0,i._T)(r,["fields"]);Object.assign(n,o),Object.assign(n.fields,s)}))}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach((function(n){t.updateTypePolicy(e,n)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,n){if(e){var i=this.getTypePolicy(e).fields;return i[t]||n&&(i[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},e.prototype.fragmentMatches=function(e,t,n,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),u=[a],c=function(e){var t=s.getSupertypeSet(e,!1);t&&t.size&&u.indexOf(t)<0&&u.push(t)},l=!(!n||!this.fuzzySubtypes.size),h=!1,d=0;d<u.length;++d){var p=u[d];if(p.has(o))return a.has(o)||(h&&__DEV__&&r.kG.warn("Inferring subtype ".concat(t," of supertype ").concat(o)),a.add(o)),!0;p.forEach(c),l&&d===u.length-1&&(0,E.RC)(e.selectionSet,n,i)&&(l=!1,h=!0,this.fuzzySubtypes.forEach((function(e,n){var i=t.match(e);i&&i[0]===t&&c(n)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!(!n||!n.keyFn)},e.prototype.getStoreFieldName=function(e){var t,n=e.typename,i=e.fieldName,r=this.getFieldPolicy(n,i,!1),s=r&&r.keyFn;if(s&&n){var o={typename:n,fieldName:i,field:e.field||null,variables:e.variables},a=ee(e);while(s){var u=s(a,o);if(!(0,L.k)(u)){t=u||i;break}s=Q(u)}}return void 0===t&&(t=e.field?(0,c.vf)(e.field,e.variables):(0,c.PT)(i,ee(e))),!1===t?i:i===(0,E.E_)(t)?t:i+":"+t},e.prototype.readField=function(e,t){var n=e.from;if(n){var i=e.field||e.fieldName;if(i){if(void 0===e.typename){var r=t.store.getFieldValue(n,"__typename");r&&(e.typename=r)}var s=this.getStoreFieldName(e),o=(0,E.E_)(s),a=t.store.getFieldValue(n,s),u=this.getFieldPolicy(e.typename,o,!1),l=u&&u.read;if(l){var h=oe(this,n,e,t,t.store.getStorage((0,c.Yk)(n)?n.__ref:n,s));return H.ab.withValue(this.cache,l,[a,h])}return a}}},e.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},e.prototype.getMergeFunction=function(e,t,n){var i=this.getFieldPolicy(e,t,!1),r=i&&i.merge;return!r&&n&&(i=this.getTypePolicy(n),r=i&&i.merge),r},e.prototype.runMergeFunction=function(e,t,n,i,r){var s=n.field,o=n.typename,a=n.merge;return a===ie?ue(i.store)(e,t):a===re?t:(i.overwrite&&(e=void 0),a(e,t,oe(this,void 0,{typename:o,fieldName:s.name.value,field:s,variables:i.variables},i,r||Object.create(null))))},e}();function oe(e,t,n,i,r){var s=e.getStoreFieldName(n),o=(0,E.E_)(s),a=n.variables||i.variables,u=i.store,l=u.toReference,h=u.canRead;return{args:ee(n),field:n.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:c.Yk,toReference:l,storage:r,cache:e.cache,canRead:h,readField:function(){return e.readField(ae(arguments,t,a),i)},mergeObjects:ue(i.store)}}function ae(e,t,n){var s,o=e[0],a=e[1],u=e.length;return"string"===typeof o?s={fieldName:o,from:u>1?a:t}:(s=(0,i.pi)({},o),E.RI.call(s,"from")||(s.from=t)),__DEV__&&void 0===s.from&&__DEV__&&r.kG.warn("Undefined 'from' passed to readField with arguments ".concat(q(Array.from(e)))),void 0===s.variables&&(s.variables=n),s}function ue(e){return function(t,n){if((0,L.k)(t)||(0,L.k)(n))throw __DEV__?new r.ej("Cannot automatically merge arrays"):new r.ej(4);if((0,v.s)(t)&&(0,v.s)(n)){var s=e.getFieldValue(t,"__typename"),o=e.getFieldValue(n,"__typename"),a=s&&o&&s!==o;if(a)return n;if((0,c.Yk)(t)&&(0,E.j)(n))return e.merge(t.__ref,n),t;if((0,E.j)(t)&&(0,c.Yk)(n))return e.merge(t,n.__ref),n;if((0,E.j)(t)&&(0,E.j)(n))return(0,i.pi)((0,i.pi)({},t),n)}return n}}function ce(e,t,n){var r="".concat(t).concat(n),s=e.flavors.get(r);return s||e.flavors.set(r,s=e.clientOnly===t&&e.deferred===n?e:(0,i.pi)((0,i.pi)({},e),{clientOnly:t,deferred:n})),s}var le=function(){function e(e,t,n){this.cache=e,this.reader=t,this.fragments=n}return e.prototype.writeToStore=function(e,t){var n=this,s=t.query,o=t.result,a=t.dataId,u=t.variables,l=t.overwrite,h=(0,f.$H)(s),d=(0,E.ig)();u=(0,i.pi)((0,i.pi)({},(0,f.O4)(h)),u);var p=(0,i.pi)((0,i.pi)({store:e,written:Object.create(null),merge:function(e,t){return d.merge(e,t)},variables:u,varString:(0,M.B)(u)},(0,E.Is)(s,this.fragments)),{overwrite:!!l,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),m=this.processSelectionSet({result:o||Object.create(null),dataId:a,selectionSet:h.selectionSet,mergeTree:{map:new Map},context:p});if(!(0,c.Yk)(m))throw __DEV__?new r.ej("Could not identify object ".concat(JSON.stringify(o))):new r.ej(7);return p.incomingById.forEach((function(t,i){var r=t.storeObject,s=t.mergeTree,o=t.fieldNodeSet,a=(0,c.kQ)(i);if(s&&s.map.size){var u=n.applyMerges(s,a,r,p);if((0,c.Yk)(u))return;r=u}if(__DEV__&&!p.overwrite){var l=Object.create(null);o.forEach((function(e){e.selectionSet&&(l[e.name.value]=!0)}));var h=function(e){return!0===l[(0,E.E_)(e)]},d=function(e){var t=s&&s.map.get(e);return Boolean(t&&t.info&&t.info.merge)};Object.keys(r).forEach((function(e){h(e)&&!d(e)&&ye(a,r,e,p.store)}))}e.merge(i,r)})),e.retain(m.__ref),m},e.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,s=e.result,o=e.selectionSet,a=e.context,u=e.mergeTree,h=this.cache.policies,d=Object.create(null),p=n&&h.rootTypenamesById[n]||(0,c.qw)(s,o,a.fragmentMap)||n&&a.store.get(n,"__typename");"string"===typeof p&&(d.__typename=p);var f=function(){var e=ae(arguments,d,a.variables);if((0,c.Yk)(e.from)){var t=a.incomingById.get(e.from.__ref);if(t){var n=h.readField((0,i.pi)((0,i.pi)({},e),{from:t.storeObject}),a);if(void 0!==n)return n}}return h.readField(e,a)},m=new Set;this.flattenFields(o,s,a,p).forEach((function(e,n){var i,o=(0,c.u2)(n),a=s[o];if(m.add(n),void 0!==a){var g=h.getStoreFieldName({typename:p,fieldName:n.name.value,field:n,variables:e.variables}),y=de(u,g),v=t.processFieldValue(a,n,n.selectionSet?ce(e,!1,!1):e,y),_=void 0;n.selectionSet&&((0,c.Yk)(v)||(0,E.j)(v))&&(_=f("__typename",v));var b=h.getMergeFunction(p,n.name.value,_);b?y.info={field:n,typename:p,merge:b}:me(u,g),d=e.merge(d,(i={},i[g]=v,i))}else!__DEV__||e.clientOnly||e.deferred||l.Gw.added(n)||h.getReadFunction(p,n.name.value)||__DEV__&&r.kG.error("Missing field '".concat((0,c.u2)(n),"' while writing result ").concat(JSON.stringify(s,null,2)).substring(0,1e3))}));try{var g=h.identify(s,{typename:p,selectionSet:o,fragmentMap:a.fragmentMap,storeObject:d,readField:f}),y=g[0],v=g[1];n=n||y,v&&(d=a.merge(d,v))}catch(w){if(!n)throw w}if("string"===typeof n){var _=(0,c.kQ)(n),b=a.written[n]||(a.written[n]=[]);if(b.indexOf(o)>=0)return _;if(b.push(o),this.reader&&this.reader.isFresh(s,_,o,a))return _;var T=a.incomingById.get(n);return T?(T.storeObject=a.merge(T.storeObject,d),T.mergeTree=pe(T.mergeTree,u),m.forEach((function(e){return T.fieldNodeSet.add(e)}))):a.incomingById.set(n,{storeObject:d,mergeTree:fe(u)?void 0:u,fieldNodeSet:m}),_}return d},e.prototype.processFieldValue=function(e,t,n,i){var r=this;return t.selectionSet&&null!==e?(0,L.k)(e)?e.map((function(e,s){var o=r.processFieldValue(e,t,n,de(i,s));return me(i,s),o})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:i}):__DEV__?(0,V.X)(e):e},e.prototype.flattenFields=function(e,t,n,i){void 0===i&&(i=(0,c.qw)(t,e,n.fragmentMap));var s=new Map,o=this.cache.policies,a=new w.B(!1);return function e(u,l){var d=a.lookup(u,l.clientOnly,l.deferred);d.visited||(d.visited=!0,u.selections.forEach((function(a){if((0,g.LZ)(a,n.variables)){var u=l.clientOnly,d=l.deferred;if(u&&d||!(0,L.O)(a.directives)||a.directives.forEach((function(e){var t=e.name.value;if("client"===t&&(u=!0),"defer"===t){var i=(0,c.NC)(e,n.variables);i&&!1===i.if||(d=!0)}})),(0,c.My)(a)){var p=s.get(a);p&&(u=u&&p.clientOnly,d=d&&p.deferred),s.set(a,ce(n,u,d))}else{var f=(0,y.hi)(a,n.lookupFragment);if(!f&&a.kind===h.h.FRAGMENT_SPREAD)throw __DEV__?new r.ej("No fragment named ".concat(a.name.value)):new r.ej(8);f&&o.fragmentMatches(f,i,t,n.variables)&&e(f.selectionSet,ce(n,u,d))}}})))}(e,n),s},e.prototype.applyMerges=function(e,t,n,s,o){var a,u=this;if(e.map.size&&!(0,c.Yk)(n)){var l,h=(0,L.k)(n)||!(0,c.Yk)(t)&&!(0,E.j)(t)?void 0:t,d=n;h&&!o&&(o=[(0,c.Yk)(h)?h.__ref:h]);var p=function(e,t){return(0,L.k)(e)?"number"===typeof t?e[t]:void 0:s.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){var n=p(h,t),i=p(d,t);if(void 0!==i){o&&o.push(t);var a=u.applyMerges(e,n,i,s,o);a!==i&&(l=l||new Map,l.set(t,a)),o&&(0,r.kG)(o.pop()===t)}})),l&&(n=(0,L.k)(d)?d.slice(0):(0,i.pi)({},d),l.forEach((function(e,t){n[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,s,o&&(a=s.store).getStorage.apply(a,o)):n},e}(),he=[];function de(e,t){var n=e.map;return n.has(t)||n.set(t,he.pop()||{map:new Map}),n.get(t)}function pe(e,t){if(e===t||!t||fe(t))return e;if(!e||fe(e))return t;var n=e.info&&t.info?(0,i.pi)((0,i.pi)({},e.info),t.info):e.info||t.info,r=e.map.size&&t.map.size,s=r?new Map:e.map.size?e.map:t.map,o={info:n,map:s};if(r){var a=new Set(t.map.keys());e.map.forEach((function(e,n){o.map.set(n,pe(e,t.map.get(n))),a.delete(n)})),a.forEach((function(n){o.map.set(n,pe(t.map.get(n),e.map.get(n)))}))}return o}function fe(e){return!e||!(e.info||e.map.size)}function me(e,t){var n=e.map,i=n.get(t);i&&fe(i)&&(he.push(i),n.delete(t))}var ge=new Set;function ye(e,t,n,i){var s=function(e){var t=i.getFieldValue(e,n);return"object"===typeof t&&t},a=s(e);if(a){var u=s(t);if(u&&!(0,c.Yk)(a)&&!(0,o.D)(a,u)&&!Object.keys(a).every((function(e){return void 0!==i.getFieldValue(u,e)}))){var l=i.getFieldValue(e,"__typename")||i.getFieldValue(t,"__typename"),h=(0,E.E_)(n),d="".concat(l,".").concat(h);if(!ge.has(d)){ge.add(d);var p=[];(0,L.k)(a)||(0,L.k)(u)||[a,u].forEach((function(e){var t=i.getFieldValue(e,"__typename");"string"!==typeof t||p.includes(t)||p.push(t)})),__DEV__&&r.kG.warn("Cache data may be lost when replacing the ".concat(h," field of a ").concat(l," object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(p.length?"either ensure all objects of type "+p.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(d," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(a).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(u).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}}}}var ve=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=H.QS,n.txCount=0,n.config=(0,E.jS)(t),n.addTypename=!!n.config.addTypename,n.policies=new se({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return(0,i.ZT)(t,e),t.prototype.init=function(){var e=this.data=new I.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var t=this,n=this.storeReader,i=this.config.fragments;this.storeWriter=new le(this,this.storeReader=new j({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:(0,E.lg)(this.config),canon:e?void 0:n&&n.canon,fragments:i}),i),this.maybeBroadcastWatch=(0,s.re)((function(e,n){return t.broadcastWatch(e,n)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var n=e.optimistic?t.optimisticData:t.data;if(N(n)){var i=e.optimistic,r=e.id,s=e.variables;return n.makeCacheKey(e.query,e.callback,(0,M.B)({optimistic:i,id:r,variables:s}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((function(e){return e.resetCaching()}))},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,n=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore((0,i.pi)((0,i.pi)({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:n})).result||null}catch(r){if(r instanceof u.y)return null;throw r}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(E.RI.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore((0,i.pi)((0,i.pi)({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var t=this;return this.watches.size||(0,H._v)(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&(0,H.li)(t),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){M.B.reset();var t=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),t},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if((0,c.Yk)(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(t){__DEV__&&r.kG.warn(t)}},t.prototype.evict=function(e){if(!e.id){if(E.RI.call(e,"id"))return!1;e=(0,i.pi)((0,i.pi)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(e){var t=this;return this.init(),M.B.reset(),e&&e.discardWatches?(this.watches.forEach((function(e){return t.maybeBroadcastWatch.forget(e)})),this.watches.clear(),(0,H.li)(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.batch=function(e){var t,n=this,r=e.update,s=e.optimistic,o=void 0===s||s,a=e.removeOptimistic,u=e.onWatchUpdated,c=function(e){var i=n,s=i.data,o=i.optimisticData;++n.txCount,e&&(n.data=n.optimisticData=e);try{return t=r(n)}finally{--n.txCount,n.data=s,n.optimisticData=o}},l=new Set;return u&&!this.txCount&&this.broadcastWatches((0,i.pi)((0,i.pi)({},e),{onWatchUpdated:function(e){return l.add(e),!1}})),"string"===typeof o?this.optimisticData=this.optimisticData.addLayer(o,c):!1===o?c(this.data):c(),"string"===typeof a&&(this.optimisticData=this.optimisticData.removeLayer(a)),u&&l.size?(this.broadcastWatches((0,i.pi)((0,i.pi)({},e),{onWatchUpdated:function(e,t){var n=u.call(this,e,t);return!1!==n&&l.delete(e),n}})),l.size&&l.forEach((function(e){return n.maybeBroadcastWatch.dirty(e)}))):this.broadcastWatches(e),t},t.prototype.performTransaction=function(e,t){return this.batch({update:e,optimistic:t||null!==t})},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=(0,l.Gw)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.transformForLink=function(e){var t=this.config.fragments;return t?t.transform(e):e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(n){return t.maybeBroadcastWatch(n,e)}))},t.prototype.broadcastWatch=function(e,t){var n=e.lastDiff,i=this.diff(e);t&&(e.optimistic&&"string"===typeof t.optimistic&&(i.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,i,n))||n&&(0,o.D)(n.result,i.result)||e.callback(e.lastDiff=i,n)},t}(a.R)},6631:function(e,t,n){"use strict";n.d(t,{B:function(){return d},h:function(){return h}});n(7658);var i=n(2900),r=(n(909),n(4492)),s=n(6867),o=n(2067),a=n(1328);function u(e){return(0,s.s)(e)?(0,a.k)(e)?e.slice(0):(0,i.pi)({__proto__:Object.getPrototypeOf(e)},e):e}var c,l,h=function(){function e(){this.known=new(o.sy?WeakSet:Set),this.pool=new r.B(o.mr),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(e){return(0,s.s)(e)&&this.known.has(e)},e.prototype.pass=function(e){if((0,s.s)(e)){var t=u(e);return this.passes.set(t,e),t}return e},e.prototype.admit=function(e){var t=this;if((0,s.s)(e)){var n=this.passes.get(e);if(n)return n;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:if(this.known.has(e))return e;var r=e.map(this.admit,this),o=this.pool.lookupArray(r);return o.array||(this.known.add(o.array=r),__DEV__&&Object.freeze(r)),o.array;case null:case Object.prototype:if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),u=[a],c=this.sortedKeys(e);u.push(c.json);var l=u.length;c.sorted.forEach((function(n){u.push(t.admit(e[n]))}));o=this.pool.lookupArray(u);if(!o.object){var h=o.object=Object.create(a);this.known.add(h),c.sorted.forEach((function(e,t){h[e]=u[l+t]})),__DEV__&&Object.freeze(h)}return o.object}}return e},e.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var i=JSON.stringify(t);(n.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,n.keys={sorted:t,json:i})}return n.keys},e}(),d=Object.assign((function(e){if((0,s.s)(e)){void 0===c&&p();var t=c.admit(e),n=l.get(t);return void 0===n&&l.set(t,n=JSON.stringify(t)),n}return JSON.stringify(e)}),{reset:p});function p(){c=new h,l=new(o.mr?WeakMap:Map)}},9961:function(e,t,n){"use strict";n.d(t,{QS:function(){return l},_v:function(){return c},ab:function(){return s},li:function(){return u}});var i=n(3348),r=n(1583),s=new r.g7,o=new WeakMap;function a(e){var t=o.get(e);return t||o.set(e,t={vars:new Set,dep:(0,i.dP)()}),t}function u(e){a(e).vars.forEach((function(t){return t.forgetCache(e)}))}function c(e){a(e).vars.forEach((function(t){return t.attachCache(e)}))}function l(e){var t=new Set,n=new Set,i=function(o){if(arguments.length>0){if(e!==o){e=o,t.forEach((function(e){a(e).dep.dirty(i),h(e)}));var u=Array.from(n);n.clear(),u.forEach((function(t){return t(e)}))}}else{var c=s.getValue();c&&(r(c),a(c).dep(i))}return e};i.onNextChange=function(e){return n.add(e),function(){n.delete(e)}};var r=i.attachCache=function(e){return t.add(e),a(e).vars.add(i),i};return i.forgetCache=function(e){return t.delete(e)},i}function h(e){e.broadcastWatches&&e.broadcastWatches()}},3518:function(e,t,n){"use strict";n.d(t,{f:function(){return X}});n(7658);var i=n(2900),r=n(909),s=n(5170),o=n(9431),a="3.7.10",u=n(6510),c=n(2713),l=n(1328),h=n(544);function d(e){return"incremental"in e}function p(e){return"hasNext"in e&&"data"in e}function f(e){return d(e)||p(e)}function m(e,t){var n=e,i=new h.w0;return d(t)&&(0,l.O)(t.incremental)&&t.incremental.forEach((function(e){for(var t=e.data,r=e.path,s=r.length-1;s>=0;--s){var o=r[s],a=!isNaN(+o),u=a?[]:{};u[o]=t,t=u}n=i.merge(n,t)})),n}var g=n(6631),y=n(2067),v=n(4444);function _(e,t,n){return new v.y((function(i){var r=i.next,s=i.error,o=i.complete,a=0,u=!1,c={then:function(e){return new Promise((function(t){return t(e())}))}};function l(e,t){return e?function(t){++a;var n=function(){return e(t)};c=c.then(n,n).then((function(e){--a,r&&r.call(i,e),u&&h.complete()}),(function(e){throw--a,e})).catch((function(e){s&&s.call(i,e)}))}:function(e){return t&&t.call(i,e)}}var h={next:l(t,r),error:l(n,s),complete:function(){u=!0,a||o&&o.call(i)}},d=e.subscribe(h);return function(){return d.unsubscribe()}}))}function b(e){var t=T(e);return(0,l.O)(t)}function T(e){var t=(0,l.O)(e.errors)?e.errors.slice(0):[];return d(e)&&(0,l.O)(e.incremental)&&e.incremental.forEach((function(e){e.errors&&t.push.apply(t,e.errors)})),t}var w=n(958),E=n(2012),S=n(1495),k=n(7491),C=n(6867),I=n(1073),O=n(9917),x=n(4986);function A(e){return e&&"function"===typeof e.then}var D=function(e){function t(t){var n=e.call(this,(function(e){return n.addObserver(e),function(){return n.removeObserver(e)}}))||this;return n.observers=new Set,n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),n.handlers={next:function(e){null!==n.sub&&(n.latest=["next",e],n.notify("next",e),(0,O.p)(n.observers,"next",e))},error:function(e){var t=n.sub;null!==t&&(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest=["error",e],n.reject(e),n.notify("error",e),(0,O.p)(n.observers,"error",e))},complete:function(){var e=n,t=e.sub,i=e.sources,r=void 0===i?[]:i;if(null!==t){var s=r.shift();s?A(s)?s.then((function(e){return n.sub=e.subscribe(n.handlers)})):n.sub=s.subscribe(n.handlers):(t&&setTimeout((function(){return t.unsubscribe()})),n.sub=null,n.latest&&"next"===n.latest[0]?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),(0,O.p)(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(e){n.reject(e),n.sources=[],n.handlers.complete()},n.promise.catch((function(e){})),"function"===typeof t&&(t=[new v.y(t)]),A(t)?t.then((function(e){return n.start(e)}),n.handlers.error):n.start(t),n}return(0,i.ZT)(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],n=e[t];n&&n.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,t){var n=this.nextResultListeners;n.size&&(this.nextResultListeners=new Set,n.forEach((function(n){return n(e,t)})))},t.prototype.beforeNext=function(e){var t=!1;this.nextResultListeners.add((function(n,i){t||(t=!0,e(n,i))}))},t}(v.y);(0,x.D)(D);var P=n(8410),R=n(6597),N=n(8970),L=n(9526),M=n(4478);function U(e){return e.kind===M.h.FIELD||e.kind===M.h.FRAGMENT_SPREAD||e.kind===M.h.INLINE_FRAGMENT}var j=n(2157),F=n(9961),B=function(){function e(e){var t=e.cache,n=e.client,i=e.resolvers,r=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,n&&(this.client=n),i&&this.addResolvers(i),r&&this.setFragmentMatcher(r)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=(0,h.Ee)(t.resolvers,e)})):this.resolvers=(0,h.Ee)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,n=e.remoteResult,r=e.context,s=e.variables,o=e.onlyRunForcedResolvers,a=void 0!==o&&o;return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t?[2,this.resolveDocument(t,n.data,r,s,this.fragmentMatcher,a).then((function(e){return(0,i.pi)((0,i.pi)({},n),{data:e.result})}))]:[2,n]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return(0,S.FS)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return(0,E.ob)(e)},e.prototype.prepareContext=function(e){var t=this.cache;return(0,i.pi)((0,i.pi)({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(r){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(n),t).then((function(e){return(0,i.pi)((0,i.pi)({},t),e.exportedVariables)}))]:[2,(0,i.pi)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return(0,L.Vn)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value})),t))return L.$_}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:(0,E.aL)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,n,r,s,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===s&&(s=function(){return!0}),void 0===o&&(o=!1),(0,i.mG)(this,void 0,void 0,(function(){var a,u,c,l,h,d,p,f,m,g,y;return(0,i.Jh)(this,(function(v){return a=(0,w.p$)(e),u=(0,w.kU)(e),c=(0,j.F)(u),l=this.collectSelectionsToResolve(a,c),h=a.operation,d=h?h.charAt(0).toUpperCase()+h.slice(1):"Query",p=this,f=p.cache,m=p.client,g={fragmentMap:c,context:(0,i.pi)((0,i.pi)({},n),{cache:f,client:m}),variables:r,fragmentMatcher:s,defaultOperationType:d,exportedVariables:{},selectionsToResolve:l,onlyRunForcedResolvers:o},y=!1,[2,this.resolveSelectionSet(a.selectionSet,y,t,g).then((function(e){return{result:e,exportedVariables:g.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,n,s){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,u,c,l,d=this;return(0,i.Jh)(this,(function(p){return o=s.fragmentMap,a=s.context,u=s.variables,c=[n],l=function(e){return(0,i.mG)(d,void 0,void 0,(function(){var l,h;return(0,i.Jh)(this,(function(i){return(t||s.selectionsToResolve.has(e))&&(0,S.LZ)(e,u)?(0,k.My)(e)?[2,this.resolveField(e,t,n,s).then((function(t){var n;"undefined"!==typeof t&&c.push((n={},n[(0,k.u2)(e)]=t,n))}))]:((0,k.Ao)(e)?l=e:(l=o[e.name.value],__DEV__?(0,r.kG)(l,"No fragment named ".concat(e.name.value)):(0,r.kG)(l,11)),l&&l.typeCondition&&(h=l.typeCondition.name.value,s.fragmentMatcher(n,h,a))?[2,this.resolveSelectionSet(l.selectionSet,t,n,s).then((function(e){c.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(l)).then((function(){return(0,h.bw)(c)}))]}))}))},e.prototype.resolveField=function(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var s,o,a,u,c,l,h,d,p,f=this;return(0,i.Jh)(this,(function(i){return n?(s=r.variables,o=e.name.value,a=(0,k.u2)(e),u=o!==a,c=n[a]||n[o],l=Promise.resolve(c),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(h=n.__typename||r.defaultOperationType,d=this.resolvers&&this.resolvers[h],d&&(p=d[u?o:a],p&&(l=Promise.resolve(F.ab.withValue(this.cache,p,[n,(0,k.NC)(e,s),r.context,{field:e,fragmentMap:r.fragmentMap}]))))),[2,l.then((function(n){var i,s;if(void 0===n&&(n=c),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(r.exportedVariables[e.value.value]=n)}))})),!e.selectionSet)return n;if(null==n)return n;var o=null!==(s=null===(i=e.directives)||void 0===i?void 0:i.some((function(e){return"client"===e.name.value})))&&void 0!==s&&s;return Array.isArray(n)?f.resolveSubSelectedArray(e,t||o,n,r):e.selectionSet?f.resolveSelectionSet(e.selectionSet,t||o,n,r):void 0}))]):[2,null]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,n,i){var r=this;return Promise.all(n.map((function(n){return null===n?null:Array.isArray(n)?r.resolveSubSelectedArray(e,t,n,i):e.selectionSet?r.resolveSelectionSet(e.selectionSet,t,n,i):void 0})))},e.prototype.collectSelectionsToResolve=function(e,t){var n=function(e){return!Array.isArray(e)},i=this.selectionsToResolveCache;function s(e){if(!i.has(e)){var o=new Set;i.set(e,o),(0,L.Vn)(e,{Directive:function(e,t,i,r,s){"client"===e.name.value&&s.forEach((function(e){n(e)&&U(e)&&o.add(e)}))},FragmentSpread:function(e,i,a,u,c){var l=t[e.name.value];__DEV__?(0,r.kG)(l,"No fragment named ".concat(e.name.value)):(0,r.kG)(l,12);var h=s(l);h.size>0&&(c.forEach((function(e){n(e)&&U(e)&&o.add(e)})),o.add(e),h.forEach((function(e){o.add(e)})))}})}return i.get(e)}return s(e)},e}(),V=new(y.mr?WeakMap:Map);function $(e,t){var n=e[t];"function"===typeof n&&(e[t]=function(){return V.set(e,(V.get(e)+1)%1e15),n.apply(this,arguments)})}function q(e){e["notifyTimeout"]&&(clearTimeout(e["notifyTimeout"]),e["notifyTimeout"]=void 0)}var H=function(){function e(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;V.has(n)||(V.set(n,0),$(n,"evict"),$(n,"modify"),$(n,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||N.I.loading;return this.variables&&this.networkStatus!==N.I.loading&&!(0,c.D)(this.variables,e.variables)&&(t=N.I.setVariables),(0,c.D)(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){q(this),this.dirty=!1},e.prototype.getDiff=function(e){void 0===e&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&(0,c.D)(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var n=this.observableQuery;if(n&&"no-cache"===n.options.fetchPolicy)return{complete:!1};var i=this.cache.diff(t);return this.updateLastDiff(i,t),i},e.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},e.prototype.setDiff=function(e){var t=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),this.dirty||(0,c.D)(n&&n.result,e&&e.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e["queryInfo"]=this,this.listeners.add(this.oqListener=function(){var n=t.getDiff();n.fromOptimisticTransaction?e["observe"]():(0,R.vj)(e)})):delete this.oqListener)},e.prototype.notify=function(){var e=this;q(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if((0,N.O)(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var n=this.observableQuery;if(!n||"no-cache"!==n.options.fetchPolicy){var r=(0,i.pi)((0,i.pi)({},this.getDiffOptions(e)),{watcher:this,callback:function(e){return t.setDiff(e)}});this.lastWatch&&(0,c.D)(r,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=r))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===V.get(this.cache)&&(0,c.D)(t,n.variables)&&(0,c.D)(e.data,n.result.data))},e.prototype.markResult=function(e,t,n,i){var r=this,s=new h.w0,o=(0,l.O)(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&(0,l.O)(e.incremental)){var a=m(this.getDiff().result,e);e.data=a}else if("hasNext"in e&&e.hasNext){var u=this.getDiff();e.data=s.merge(u.result,e.data)}this.graphQLErrors=o,"no-cache"===n.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(n.variables)):0!==i&&(W(e,n.errorPolicy)?this.cache.performTransaction((function(s){if(r.shouldWrite(e,n.variables))s.writeQuery({query:t,data:e.data,variables:n.variables,overwrite:1===i}),r.lastWrite={result:e,variables:n.variables,dmCount:V.get(r.cache)};else if(r.lastDiff&&r.lastDiff.diff.complete)return void(e.data=r.lastDiff.diff.result);var o=r.getDiffOptions(n.variables),a=s.diff(o);r.stopped||r.updateWatch(n.variables),r.updateLastDiff(a,o),a.complete&&(e.data=a.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=N.I.ready},e.prototype.markError=function(e){return this.networkStatus=N.I.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function W(e,t){void 0===t&&(t="none");var n="ignore"===t||"all"===t,i=!b(e);return!i&&n&&e.data&&(i=!0),i}var z=Object.prototype.hasOwnProperty,G=function(){function e(e){var t=e.cache,n=e.link,i=e.defaultOptions,r=e.queryDeduplication,s=void 0!==r&&r,o=e.onBroadcast,a=e.ssrMode,u=void 0!==a&&a,c=e.clientAwareness,l=void 0===c?{}:c,h=e.localState,d=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(y.mr?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=n,this.defaultOptions=i||Object.create(null),this.queryDeduplication=s,this.clientAwareness=l,this.localState=h||new B({cache:t}),this.ssrMode=u,this.assumeImmutableResults=!!d,(this.onBroadcast=o)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,n){e.stopQueryNoBroadcast(n)})),this.cancelPendingFetches(__DEV__?new r.ej("QueryManager stopped while query was in flight"):new r.ej(14))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t,n,s=e.mutation,o=e.variables,a=e.optimisticResponse,u=e.updateQueries,c=e.refetchQueries,l=void 0===c?[]:c,h=e.awaitRefetchQueries,d=void 0!==h&&h,p=e.update,f=e.onQueryUpdated,m=e.fetchPolicy,g=void 0===m?(null===(t=this.defaultOptions.mutate)||void 0===t?void 0:t.fetchPolicy)||"network-only":m,y=e.errorPolicy,v=void 0===y?(null===(n=this.defaultOptions.mutate)||void 0===n?void 0:n.errorPolicy)||"none":y,w=e.keepRootFields,E=e.context;return(0,i.mG)(this,void 0,void 0,(function(){var e,t,n,c,h,m;return(0,i.Jh)(this,(function(y){switch(y.label){case 0:return __DEV__?(0,r.kG)(s,"mutation option is required. You must specify your GraphQL document in the mutation option."):(0,r.kG)(s,15),__DEV__?(0,r.kG)("network-only"===g||"no-cache"===g,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):(0,r.kG)("network-only"===g||"no-cache"===g,16),e=this.generateMutationId(),t=this.transform(s),n=t.document,c=t.hasClientExports,s=this.cache.transformForLink(n),o=this.getVariables(s,o),c?[4,this.localState.addExportedVariables(s,o,E)]:[3,2];case 1:o=y.sent(),y.label=2;case 2:return h=this.mutationStore&&(this.mutationStore[e]={mutation:s,variables:o,loading:!0,error:null}),a&&this.markMutationOptimistic(a,{mutationId:e,document:s,variables:o,fetchPolicy:g,errorPolicy:v,context:E,updateQueries:u,update:p,keepRootFields:w}),this.broadcastQueries(),m=this,[2,new Promise((function(t,n){return _(m.getObservableFromLink(s,(0,i.pi)((0,i.pi)({},E),{optimisticResponse:a}),o,!1),(function(t){if(b(t)&&"none"===v)throw new P.c({graphQLErrors:T(t)});h&&(h.loading=!1,h.error=null);var n=(0,i.pi)({},t);return"function"===typeof l&&(l=l(n)),"ignore"===v&&b(n)&&delete n.errors,m.markMutationResult({mutationId:e,result:n,document:s,variables:o,fetchPolicy:g,errorPolicy:v,context:E,update:p,updateQueries:u,awaitRefetchQueries:d,refetchQueries:l,removeOptimistic:a?e:void 0,onQueryUpdated:f,keepRootFields:w})})).subscribe({next:function(e){m.broadcastQueries(),"hasNext"in e&&!1!==e.hasNext||t(e)},error:function(t){h&&(h.loading=!1,h.error=t),a&&m.cache.removeOptimistic(e),m.broadcastQueries(),n(t instanceof P.c?t:new P.c({networkError:t}))}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var n=this;void 0===t&&(t=this.cache);var r=e.result,s=[],o="no-cache"===e.fetchPolicy;if(!o&&W(r,e.errorPolicy)){if(d(r)||s.push({result:r.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),d(r)&&(0,l.O)(r.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),u=void 0;a.result&&(u=m(a.result,r)),"undefined"!==typeof u&&(r.data=u,s.push({result:u,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var c=e.updateQueries;c&&this.queries.forEach((function(e,i){var o=e.observableQuery,a=o&&o.queryName;if(a&&z.call(c,a)){var u=c[a],l=n.queries.get(i),h=l.document,d=l.variables,p=t.diff({query:h,variables:d,returnPartialData:!0,optimistic:!1}),f=p.result,m=p.complete;if(m&&f){var g=u(f,{mutationResult:r,queryName:h&&(0,w.rY)(h)||void 0,queryVariables:d});g&&s.push({result:g,dataId:"ROOT_QUERY",query:h,variables:d})}}}))}if(s.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var h=[];if(this.refetchQueries({updateCache:function(t){o||s.forEach((function(e){return t.write(e)}));var a=e.update,u=!f(r)||d(r)&&!r.hasNext;if(a){if(!o){var c=t.diff({id:"ROOT_MUTATION",query:n.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});c.complete&&(r=(0,i.pi)((0,i.pi)({},r),{data:c.result}),"incremental"in r&&delete r.incremental,"hasNext"in r&&delete r.hasNext)}u&&a(t,r,{context:e.context,variables:e.variables})}o||e.keepRootFields||!u||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var n=t.fieldName,i=t.DELETE;return"__typename"===n?e:i}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach((function(e){return h.push(e)})),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(h).then((function(){return r}))}return Promise.resolve(r)},e.prototype.markMutationOptimistic=function(e,t){var n=this,s="function"===typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{n.markMutationResult((0,i.pi)((0,i.pi)({},t),{result:{data:s}}),e)}catch(o){__DEV__&&r.kG.error(o)}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,n){return this.fetchQueryObservable(e,t,n).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var n=this.cache.transformDocument(e),r=(0,E.Fo)(n),s=this.localState.clientQuery(n),o=r&&this.localState.serverQuery(r),a={document:n,hasClientExports:(0,S.mj)(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:s,serverQuery:o,defaultVars:(0,w.O4)((0,w.$H)(n)),asQuery:(0,i.pi)((0,i.pi)({},n),{definitions:n.definitions.map((function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?(0,i.pi)((0,i.pi)({},e),{operation:"query"}):e}))})},u=function(e){e&&!t.has(e)&&t.set(e,a)};u(e),u(n),u(s),u(o)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,i.pi)((0,i.pi)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){e=(0,i.pi)((0,i.pi)({},e),{variables:this.getVariables(e.query,e.variables)}),"undefined"===typeof e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new H(this),n=new R.ue({queryManager:this,queryInfo:t,options:e});return this.queries.set(n.queryId,t),t.init({document:n.query,observableQuery:n,variables:n.variables}),n},e.prototype.query=function(e,t){var n=this;return void 0===t&&(t=this.generateQueryId()),__DEV__?(0,r.kG)(e.query,"query option is required. You must specify your GraphQL document in the query option."):(0,r.kG)(e.query,17),__DEV__?(0,r.kG)("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'):(0,r.kG)("Document"===e.query.kind,18),__DEV__?(0,r.kG)(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):(0,r.kG)(!e.returnPartialData,19),__DEV__?(0,r.kG)(!e.pollInterval,"pollInterval option only supported on watchQuery."):(0,r.kG)(!e.pollInterval,20),this.fetchQuery(t,e).finally((function(){return n.stopQuery(t)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new r.ej("Store reset while query was in flight (not completed in link chain)"):new r.ej(21)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=N.I.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var n=new Map,s=new Map,o=new Set;return Array.isArray(e)&&e.forEach((function(e){"string"===typeof e?s.set(e,!1):(0,k.JW)(e)?s.set(t.transform(e).document,!1):(0,C.s)(e)&&e.query&&o.add(e)})),this.queries.forEach((function(t,i){var r=t.observableQuery,o=t.document;if(r){if("all"===e)return void n.set(i,r);var a=r.queryName,u=r.options.fetchPolicy;if("standby"===u||"active"===e&&!r.hasObservers())return;("active"===e||a&&s.has(a)||o&&s.has(o))&&(n.set(i,r),a&&s.set(a,!0),o&&s.set(o,!0))}})),o.size&&o.forEach((function(e){var s=(0,I.X)("legacyOneTimeQuery"),o=t.getQuery(s).init({document:e.query,variables:e.variables}),a=new R.ue({queryManager:t,queryInfo:o,options:(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"network-only"})});(0,r.kG)(a.queryId===s),o.setObservableQuery(a),n.set(s,a)})),__DEV__&&s.size&&s.forEach((function(e,t){e||__DEV__&&r.kG.warn("Unknown query ".concat("string"===typeof t?"named ":"").concat(JSON.stringify(t,null,2)," requested in refetchQueries options.include array"))})),n},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach((function(i,r){var s=i.options.fetchPolicy;i.resetLastResults(),(e||"standby"!==s&&"cache-only"!==s)&&n.push(i.refetch()),t.getQuery(r).setDiff(null)})),this.broadcastQueries(),Promise.all(n)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,i=e.fetchPolicy,r=e.errorPolicy,s=e.variables,o=e.context,a=void 0===o?{}:o;n=this.transform(n).document,s=this.getVariables(n,s);var u=function(e){return t.getObservableFromLink(n,a,e).map((function(s){if("no-cache"!==i&&(W(s,r)&&t.cache.write({query:n,result:s.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),b(s))throw new P.c({graphQLErrors:s.errors});return s}))};if(this.transform(n).hasClientExports){var c=this.localState.addExportedVariables(n,s,a).then(u);return new v.y((function(e){var t=null;return c.then((function(n){return t=n.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return u(s)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,n,r){var s,a,u=this;void 0===r&&(r=null!==(s=null===t||void 0===t?void 0:t.queryDeduplication)&&void 0!==s?s:this.queryDeduplication);var c=this.transform(e).serverQuery;if(c){var l=this,h=l.inFlightLinkObservables,d=l.link,p={query:c,variables:n,operationName:(0,w.rY)(c)||void 0,context:this.prepareContext((0,i.pi)((0,i.pi)({},t),{forceFetch:!r}))};if(t=p.context,r){var f=h.get(c)||new Map;h.set(c,f);var m=(0,g.B)(n);if(a=f.get(m),!a){var y=new D([(0,o.h)(d,p)]);f.set(m,a=y),y.beforeNext((function(){f.delete(m)&&f.size<1&&h.delete(c)}))}}else a=new D([(0,o.h)(d,p)])}else a=new D([v.y.of({data:{}})]),t=this.prepareContext(t);var b=this.transform(e).clientQuery;return b&&(a=_(a,(function(e){return u.localState.runResolvers({document:b,remoteResult:e,context:t,variables:n})}))),a},e.prototype.getResultsFromLink=function(e,t,n){var i=e.lastRequestId=this.generateRequestId(),r=this.cache.transformForLink(this.transform(e.document).document);return _(this.getObservableFromLink(r,n.context,n.variables),(function(s){var o=T(s),a=o.length>0;if(i>=e.lastRequestId){if(a&&"none"===n.errorPolicy)throw e.markError(new P.c({graphQLErrors:o}));e.markResult(s,r,n,t),e.markReady()}var u={data:s.data,loading:!1,networkStatus:N.I.ready};return a&&"ignore"!==n.errorPolicy&&(u.errors=o,u.networkStatus=N.I.error),u}),(function(t){var n=(0,P.M)(t)?t:new P.c({networkError:t});throw i>=e.lastRequestId&&e.markError(n),n}))},e.prototype.fetchQueryObservable=function(e,t,n){var i=this;void 0===n&&(n=N.I.loading);var r=this.transform(t.query).document,s=this.getVariables(r,t.variables),o=this.getQuery(e),a=this.defaultOptions.watchQuery,u=t.fetchPolicy,c=void 0===u?a&&a.fetchPolicy||"cache-first":u,l=t.errorPolicy,h=void 0===l?a&&a.errorPolicy||"none":l,d=t.returnPartialData,p=void 0!==d&&d,f=t.notifyOnNetworkStatusChange,m=void 0!==f&&f,g=t.context,y=void 0===g?{}:g,v=Object.assign({},t,{query:r,variables:s,fetchPolicy:c,errorPolicy:h,returnPartialData:p,notifyOnNetworkStatusChange:m,context:y}),_=function(e){v.variables=e;var r=i.fetchQueryByPolicy(o,v,n);return"standby"!==v.fetchPolicy&&r.length>0&&o.observableQuery&&o.observableQuery["applyNextFetchPolicy"]("after-fetch",t),r},b=function(){return i.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,(function(e){b(),setTimeout((function(){return T.cancel(e)}))}));var T=new D(this.transform(v.query).hasClientExports?this.localState.addExportedVariables(v.query,v.variables,v.context).then(_):_(v.variables));return T.promise.then(b,b),T},e.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,i=e.include,r=e.optimistic,s=void 0!==r&&r,o=e.removeOptimistic,a=void 0===o?s?(0,I.X)("refetchQueries"):void 0:o,u=e.onQueryUpdated,c=new Map;i&&this.getObservableQueries(i).forEach((function(e,n){c.set(n,{oq:e,lastDiff:t.getQuery(n).getDiff()})}));var l=new Map;return n&&this.cache.batch({update:n,optimistic:s&&a||!1,removeOptimistic:a,onWatchUpdated:function(e,t,n){var i=e.watcher instanceof H&&e.watcher.observableQuery;if(i){if(u){c.delete(i.queryId);var r=u(i,t,n);return!0===r&&(r=i.refetch()),!1!==r&&l.set(i,r),r}null!==u&&c.set(i.queryId,{oq:i,lastDiff:n,diff:t})}}}),c.size&&c.forEach((function(e,n){var i,r=e.oq,s=e.lastDiff,o=e.diff;if(u){if(!o){var a=r["queryInfo"];a.reset(),o=a.getDiff()}i=u(r,o,s)}u&&!0!==i||(i=r.refetch()),!1!==i&&l.set(r,i),n.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(n)})),a&&this.cache.removeOptimistic(a),l},e.prototype.fetchQueryByPolicy=function(e,t,n){var r=this,s=t.query,o=t.variables,a=t.fetchPolicy,u=t.refetchWritePolicy,l=t.errorPolicy,h=t.returnPartialData,d=t.context,p=t.notifyOnNetworkStatusChange,f=e.networkStatus;e.init({document:this.transform(s).document,variables:o,networkStatus:n});var m=function(){return e.getDiff(o)},g=function(t,n){void 0===n&&(n=e.networkStatus||N.I.loading);var a=t.result;!__DEV__||h||(0,c.D)(a,{})||(0,R.DC)(t.missing);var u=function(e){return v.y.of((0,i.pi)({data:e,loading:(0,N.O)(n),networkStatus:n},t.complete?null:{partial:!0}))};return a&&r.transform(s).hasForcedResolvers?r.localState.runResolvers({document:s,remoteResult:{data:a},context:d,variables:o,onlyRunForcedResolvers:!0}).then((function(e){return u(e.data||void 0)})):"none"===l&&n===N.I.refetch&&Array.isArray(t.missing)?u(void 0):u(a)},y="no-cache"===a?0:n===N.I.refetch&&"merge"!==u?1:2,_=function(){return r.getResultsFromLink(e,y,{variables:o,context:d,fetchPolicy:a,errorPolicy:l})},b=p&&"number"===typeof f&&f!==n&&(0,N.O)(n);switch(a){default:case"cache-first":var T=m();return T.complete?[g(T,e.markReady())]:h||b?[g(T),_()]:[_()];case"cache-and-network":T=m();return T.complete||h||b?[g(T),_()]:[_()];case"cache-only":return[g(m(),e.markReady())];case"network-only":return b?[g(m()),_()]:[_()];case"no-cache":return b?[g(e.getDiff()),_()]:[_()];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new H(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,i.pi)((0,i.pi)({},t),{clientAwareness:this.clientAwareness})},e}(),Q=n(446),K=!1,X=function(){function e(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,i=e.credentials,o=e.headers,c=e.cache,l=e.ssrMode,h=void 0!==l&&l,d=e.ssrForceFetchDelay,p=void 0===d?0:d,f=e.connectToDevTools,m=void 0===f?"object"===typeof window&&!window.__APOLLO_CLIENT__&&__DEV__:f,g=e.queryDeduplication,y=void 0===g||g,v=e.defaultOptions,_=e.assumeImmutableResults,b=void 0!==_&&_,T=e.resolvers,w=e.typeDefs,E=e.fragmentMatcher,S=e.name,k=e.version,C=e.link;if(C||(C=n?new u.u({uri:n,credentials:i,headers:o}):s.i.empty()),!c)throw __DEV__?new r.ej("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new r.ej(9);if(this.link=C,this.cache=c,this.disableNetworkFetches=h||p>0,this.queryDeduplication=y,this.defaultOptions=v||Object.create(null),this.typeDefs=w,p&&setTimeout((function(){return t.disableNetworkFetches=!1}),p),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),m&&"object"===typeof window&&(window.__APOLLO_CLIENT__=this),!K&&m&&__DEV__&&(K=!0,"undefined"!==typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var I=window.navigator,O=I&&I.userAgent,x=void 0;"string"===typeof O&&(O.indexOf("Chrome/")>-1?x="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":O.indexOf("Firefox/")>-1&&(x="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),x&&__DEV__&&r.kG.log("Download the Apollo DevTools for a better development experience: "+x)}this.version=a,this.localState=new B({cache:c,client:this,resolvers:T,fragmentMatcher:E}),this.queryManager=new G({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:y,ssrMode:h,clientAwareness:{name:S,version:k},localState:this.localState,assumeImmutableResults:b,onBroadcast:m?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=(0,Q.J)(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=(0,Q.J)(this.defaultOptions.query,e)),__DEV__?(0,r.kG)("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):(0,r.kG)("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=(0,i.pi)((0,i.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=(0,Q.J)(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return!1!==e.broadcast&&this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return(0,o.h)(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!1})})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!0})})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],i=[];t.forEach((function(e,t){n.push(t),i.push(e)}));var s=Promise.all(i);return s.queries=n,s.results=i,s.catch((function(e){__DEV__&&r.kG.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(e))})),s},e.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}()},6597:function(e,t,n){"use strict";n.d(t,{DC:function(){return _},ue:function(){return g},vj:function(){return y}});var i=n(2900),r=n(909),s=n(2713),o=n(8970),a=n(958),u=n(9735),c=n(1328),l=n(8257),h=n(9917),d=n(4444),p=n(4986),f=Object.assign,m=Object.hasOwnProperty,g=function(e){function t(t){var n=t.queryManager,r=t.queryInfo,s=t.options,o=e.call(this,(function(e){try{var n=e._subscription._observer;n&&!n.error&&(n.error=v)}catch(t){}var i=!o.observers.size;o.observers.add(e);var r=o.last;return r&&r.error?e.error&&e.error(r.error):r&&r.result&&e.next&&e.next(r.result),i&&o.reobserve().catch((function(){})),function(){o.observers.delete(e)&&!o.observers.size&&o.tearDownQuery()}}))||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=r,o.queryManager=n,o.isTornDown=!1;var u=n.defaultOptions.watchQuery,c=void 0===u?{}:u,l=c.fetchPolicy,h=void 0===l?"cache-first":l,d=s.fetchPolicy,p=void 0===d?h:d,f=s.initialFetchPolicy,m=void 0===f?"standby"===p?h:p:f;o.options=(0,i.pi)((0,i.pi)({},s),{initialFetchPolicy:m,fetchPolicy:p}),o.queryId=r.queryId||n.generateQueryId();var g=(0,a.$H)(o.query);return o.queryName=g&&g.name&&g.name.value,o}return(0,i.ZT)(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,n){var i={next:function(n){t(n),e.observers.delete(i),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){r.unsubscribe()}),0)},error:n},r=e.subscribe(i)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.getLastResult(!0),n=this.queryInfo.networkStatus||t&&t.networkStatus||o.I.ready,r=(0,i.pi)((0,i.pi)({},t),{loading:(0,o.O)(n),networkStatus:n}),a=this.options.fetchPolicy,u=void 0===a?"cache-first":a;if("network-only"===u||"no-cache"===u||"standby"===u||this.queryManager.transform(this.options.query).hasForcedResolvers);else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(r.data=c.result),(0,s.D)(r.data,{})&&(r.data=void 0),c.complete?(delete r.partial,!c.complete||r.networkStatus!==o.I.loading||"cache-first"!==u&&"cache-only"!==u||(r.networkStatus=o.I.ready,r.loading=!1)):r.partial=!0,!__DEV__||c.complete||this.options.partialRefetch||r.loading||r.data||r.error||_(c.missing)}return e&&this.updateLastResult(r),r},t.prototype.isDifferentFromLastResult=function(e,t){return!this.last||!(0,s.D)(this.last.result,e)||t&&!(0,s.D)(this.last.variables,t)},t.prototype.getLast=function(e,t){var n=this.last;if(n&&n[e]&&(!t||(0,s.D)(n.variables,this.variables)))return n[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t,n={pollInterval:0},u=this.options.fetchPolicy;if(n.fetchPolicy="cache-and-network"===u?u:"no-cache"===u?"no-cache":"network-only",__DEV__&&e&&m.call(e,"variables")){var c=(0,a.iW)(this.query),l=c.variableDefinitions;l&&l.some((function(e){return"variables"===e.variable.name.value}))||__DEV__&&r.kG.warn("Called refetch(".concat(JSON.stringify(e),") for query ").concat((null===(t=c.name)||void 0===t?void 0:t.value)||JSON.stringify(c),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}return e&&!(0,s.D)(this.options.variables,e)&&(n.variables=this.options.variables=(0,i.pi)((0,i.pi)({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(n,o.I.refetch)},t.prototype.fetchMore=function(e){var t=this,n=(0,i.pi)((0,i.pi)({},e.query?e:(0,i.pi)((0,i.pi)((0,i.pi)((0,i.pi)({},this.options),{query:this.query}),e),{variables:(0,i.pi)((0,i.pi)({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),r=this.queryManager.generateQueryId(),s=this.queryInfo,a=s.networkStatus;s.networkStatus=o.I.fetchMore,n.notifyOnNetworkStatusChange&&this.observe();var u=new Set;return this.queryManager.fetchQuery(r,n,o.I.fetchMore).then((function(i){return t.queryManager.removeQuery(r),s.networkStatus===o.I.fetchMore&&(s.networkStatus=a),t.queryManager.cache.batch({update:function(r){var s=e.updateQuery;s?r.updateQuery({query:t.query,variables:t.variables,returnPartialData:!0,optimistic:!1},(function(e){return s(e,{fetchMoreResult:i.data,variables:n.variables})})):r.writeQuery({query:n.query,variables:n.variables,data:i.data})},onWatchUpdated:function(e){u.add(e.query)}}),i})).finally((function(){u.has(t.query)||y(t)}))},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(n){var i=e.updateQuery;i&&t.updateQuery((function(e,t){var r=t.variables;return i(e,{subscriptionData:n,variables:r})}))},error:function(t){e.onError?e.onError(t):__DEV__&&r.kG.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(n),function(){t.subscriptions.delete(n)&&n.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){return(0,s.D)(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},o.I.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,n=t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,i=e(n,{variables:this.variables});i&&(t.cache.writeQuery({query:this.options.query,data:i,variables:this.variables}),t.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,t){if(t.nextFetchPolicy){var n=t.fetchPolicy,i=void 0===n?"cache-first":n,r=t.initialFetchPolicy,s=void 0===r?i:r;"standby"===i||("function"===typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy(i,{reason:e,options:t,observable:this,initialFetchPolicy:s}):t.fetchPolicy="variables-changed"===e?s:t.nextFetchPolicy)}return t.fetchPolicy},t.prototype.fetch=function(e,t){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,e,t)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var t=this,n=t.pollingInfo,i=t.options.pollInterval;if(i){if(!n||n.interval!==i){__DEV__?(0,r.kG)(i,"Attempted to start a polling query without a polling interval."):(0,r.kG)(i,13);var s=n||(this.pollingInfo={});s.interval=i;var a=function(){e.pollingInfo&&((0,o.O)(e.queryInfo.networkStatus)?u():e.reobserve({fetchPolicy:"no-cache"===e.options.initialFetchPolicy?"no-cache":"network-only"},o.I.poll).then(u,u))},u=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(a,t.interval))};u()}}else n&&(clearTimeout(n.timeout),delete this.pollingInfo)}},t.prototype.updateLastResult=function(e,t){return void 0===t&&(t=this.variables),this.last=(0,i.pi)((0,i.pi)({},this.last),{result:this.queryManager.assumeImmutableResults?e:(0,u.X)(e),variables:t}),(0,c.O)(e.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(e,t){var n=this;this.isTornDown=!1;var r=t===o.I.refetch||t===o.I.fetchMore||t===o.I.poll,a=this.options.variables,u=this.options.fetchPolicy,c=(0,l.o)(this.options,e||{}),h=r?c:f(this.options,c);r||(this.updatePolling(),e&&e.variables&&!(0,s.D)(e.variables,a)&&"standby"!==h.fetchPolicy&&h.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",h),void 0===t&&(t=o.I.setVariables)));var d=h.variables&&(0,i.pi)({},h.variables),p=this.fetch(h,t),m={next:function(e){n.reportResult(e,d)},error:function(e){n.reportError(e,d)}};return r||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=p,this.observer=m),p.addObserver(m),p.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,t){var n=this.getLastError();(n||this.isDifferentFromLastResult(e,t))&&((n||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,t),(0,h.p)(this.observers,"next",e))},t.prototype.reportError=function(e,t){var n=(0,i.pi)((0,i.pi)({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:o.I.error,loading:!1});this.updateLastResult(n,t),(0,h.p)(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(d.y);function y(e){var t=e.options,n=t.fetchPolicy,i=t.nextFetchPolicy;return"cache-and-network"===n||"network-only"===n?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=i,"function"===typeof i?i.apply(this,arguments):n}}):e.reobserve()}function v(e){__DEV__&&r.kG.error("Unhandled error",e.message,e.stack)}function _(e){__DEV__&&e&&__DEV__&&r.kG.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}(0,p.D)(g)},6927:function(e,t,n){"use strict";n.r(t),n.d(t,{ApolloCache:function(){return l.R},ApolloClient:function(){return s.f},ApolloError:function(){return c.c},ApolloLink:function(){return m.i},Cache:function(){return i},HttpLink:function(){return T.HttpLink},InMemoryCache:function(){return h.h},MissingFieldError:function(){return d.y},NetworkStatus:function(){return u.I},Observable:function(){return E.y},ObservableQuery:function(){return a.ue},checkFetcher:function(){return T.checkFetcher},concat:function(){return _},createHttpLink:function(){return T.createHttpLink},createSignalIfSupported:function(){return T.createSignalIfSupported},defaultDataIdFromObject:function(){return p.uG},defaultPrinter:function(){return T.defaultPrinter},disableExperimentalFragmentVariables:function(){return x.J9},disableFragmentWarnings:function(){return x._t},empty:function(){return g},enableExperimentalFragmentVariables:function(){return x.wO},execute:function(){return b.h},fallbackHttpConfig:function(){return T.fallbackHttpConfig},from:function(){return y},fromError:function(){return k.Q},fromPromise:function(){return S},gql:function(){return x.Ps},isApolloError:function(){return c.M},isReference:function(){return I.Yk},makeReference:function(){return I.kQ},makeVar:function(){return f.QS},mergeOptions:function(){return o.J},parseAndCheckHttpResponse:function(){return T.parseAndCheckHttpResponse},resetCaches:function(){return x.HW},rewriteURIForGET:function(){return T.rewriteURIForGET},selectHttpOptionsAndBody:function(){return T.selectHttpOptionsAndBody},selectHttpOptionsAndBodyInternal:function(){return T.selectHttpOptionsAndBodyInternal},selectURI:function(){return T.selectURI},serializeFetchParameter:function(){return T.serializeFetchParameter},setLogVerbosity:function(){return O.U6},split:function(){return v.V},throwServerError:function(){return C.P},toPromise:function(){return w}});var i,r=n(909),s=n(3518),o=n(446),a=n(6597),u=n(8970),c=n(8410);i||(i={});var l=n(8753),h=n(2419),d=n(9926),p=n(8840),f=n(9961),m=n(5170),g=m.i.empty,y=m.i.from,v=n(6586),_=m.i.concat,b=n(9431),T=n(1967);function w(e){var t=!1;return new Promise((function(n,i){e.subscribe({next:function(e){t?__DEV__&&r.kG.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,n(e))},error:i})}))}var E=n(4444);function S(e){return new E.y((function(t){e.then((function(e){t.next(e),t.complete()})).catch(t.error.bind(t))}))}var k=n(6567),C=n(5894),I=n(7491),O=n(9768),x=n(8833);(0,O.U6)(r.Rk?"log":"silent")},8970:function(e,t,n){"use strict";var i;function r(e){return!!e&&e<7}n.d(t,{I:function(){return i},O:function(){return r}}),function(e){e[e["loading"]=1]="loading",e[e["setVariables"]=2]="setVariables",e[e["fetchMore"]=3]="fetchMore",e[e["refetch"]=4]="refetch",e[e["poll"]=6]="poll",e[e["ready"]=7]="ready",e[e["error"]=8]="error"}(i||(i={}))},8410:function(e,t,n){"use strict";n.d(t,{M:function(){return s},c:function(){return a}});var i=n(2900),r=(n(909),n(1328));function s(e){return e.hasOwnProperty("graphQLErrors")}var o=function(e){var t="";if((0,r.O)(e.graphQLErrors)||(0,r.O)(e.clientErrors)){var n=(e.graphQLErrors||[]).concat(e.clientErrors||[]);n.forEach((function(e){var n=e?e.message:"Error message not found.";t+="".concat(n,"\n")}))}return e.networkError&&(t+="".concat(e.networkError.message,"\n")),t=t.replace(/\n$/,""),t},a=function(e){function t(n){var i=n.graphQLErrors,r=n.clientErrors,s=n.networkError,a=n.errorMessage,u=n.extraInfo,c=e.call(this,a)||this;return c.name="ApolloError",c.graphQLErrors=i||[],c.clientErrors=r||[],c.networkError=s||null,c.message=a||o(c),c.extraInfo=u,c.__proto__=t.prototype,c}return(0,i.ZT)(t,e),t}(Error)},3193:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var i=n(2900),r=n(5170),s=n(4444);function o(e){return new r.i((function(t,n){var r=(0,i._T)(t,[]);return new s.y((function(i){var s,o=!1;return Promise.resolve(r).then((function(n){return e(n,t.getContext())})).then(t.setContext).then((function(){o||(s=n(t).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)}))})).catch(i.error.bind(i)),function(){o=!0,s&&s.unsubscribe()}}))}))}},5170:function(e,t,n){"use strict";n.d(t,{i:function(){return f}});var i=n(2900),r=n(909),s=n(4444);function o(e,t){var n=(0,i.pi)({},e),r=function(e){n="function"===typeof e?(0,i.pi)((0,i.pi)({},n),e(n)):(0,i.pi)((0,i.pi)({},n),e)},s=function(){return(0,i.pi)({},n)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:r}),Object.defineProperty(t,"getContext",{enumerable:!1,value:s}),t}var a=n(958);function u(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!==typeof t.query?(0,a.rY)(t.query)||void 0:""),t}function c(e){for(var t=["query","operationName","variables","extensions","context"],n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];if(t.indexOf(s)<0)throw __DEV__?new r.ej("illegal argument: ".concat(s)):new r.ej(27)}return e}function l(e,t){return t?t(e):s.y.of()}function h(e){return"function"===typeof e?new f(e):e}function d(e){return e.request.length<=1}var p=function(e){function t(t,n){var i=e.call(this,t)||this;return i.link=n,i}return(0,i.ZT)(t,e),t}(Error),f=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return s.y.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(h).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,n,i){var r=h(n),o=h(i||new e(l));return d(r)&&d(o)?new e((function(e){return t(e)?r.request(e)||s.y.of():o.request(e)||s.y.of()})):new e((function(e,n){return t(e)?r.request(e,n)||s.y.of():o.request(e,n)||s.y.of()}))},e.execute=function(e,t){return e.request(o(t.context,u(c(t))))||s.y.of()},e.concat=function(t,n){var i=h(t);if(d(i))return __DEV__&&r.kG.warn(new p("You are calling concat on a terminating link, which will have no effect",i)),i;var o=h(n);return d(o)?new e((function(e){return i.request(e,(function(e){return o.request(e)||s.y.of()}))||s.y.of()})):new e((function(e,t){return i.request(e,(function(e){return o.request(e,t)||s.y.of()}))||s.y.of()}))},e.prototype.split=function(t,n,i){return this.concat(e.split(t,n,i||new e(l)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw __DEV__?new r.ej("request is not implemented"):new r.ej(22)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}()},9431:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(5170),r=i.i.execute},6586:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(5170),r=i.i.split},6510:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var i=n(2900),r=n(5170),s=n(4474),o=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,(0,s.L)(t).request)||this;return n.options=t,n}return(0,i.ZT)(t,e),t}(r.i)},534:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(909),r=function(e){if(!e&&"undefined"===typeof fetch)throw __DEV__?new i.ej("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new i.ej(23)}},4474:function(e,t,n){"use strict";n.d(t,{L:function(){return v}});var i=n(2900),r=n(909),s=n(9526),o=n(5170),a=n(1495),u=n(4444),c=n(1969),l=n(1122),h=n(8401),d=n(534),p=n(4355),f=n(5553),m=n(5839),g=n(6567),y=(0,r.wY)((function(){return fetch})),v=function(e){void 0===e&&(e={});var t=e.uri,n=void 0===t?"/graphql":t,v=e.fetch,_=e.print,b=void 0===_?p.sb:_,T=e.includeExtensions,w=e.preserveHeaderCase,E=e.useGETForQueries,S=e.includeUnusedVariables,k=void 0!==S&&S,C=(0,i._T)(e,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&(0,d.U)(v||y);var I={http:{includeExtensions:T,preserveHeaderCase:w},options:C.fetchOptions,credentials:C.credentials,headers:C.headers};return new o.i((function(e){var t=(0,l.r)(e,n),o=e.getContext(),d={};if(o.clientAwareness){var _=o.clientAwareness,T=_.name,w=_.version;T&&(d["apollographql-client-name"]=T),w&&(d["apollographql-client-version"]=w)}var S,C=(0,i.pi)((0,i.pi)({},d),o.headers),O={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:C},x=(0,p.ve)(e,b,p.SC,I,O),A=x.options,D=x.body;if(D.variables&&!k){var P=new Set(Object.keys(D.variables));(0,s.Vn)(e.query,{Variable:function(e,t,n){n&&"VariableDefinition"!==n.kind&&P.delete(e.name.value)}}),P.size&&(D.variables=(0,i.pi)({},D.variables),P.forEach((function(e){delete D.variables[e]})))}if(!A.signal){var R=(0,f.$)(),N=R.controller,L=R.signal;S=N,S&&(A.signal=L)}var M=function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation};if(E&&!e.query.definitions.some(M)&&(A.method="GET"),(0,a.FS)(["defer"],e.query)&&(A.headers=A.headers||{},A.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),"GET"===A.method){var U=(0,m.H)(t,D),j=U.newURI,F=U.parseError;if(F)return(0,g.Q)(F);t=j}else try{A.body=(0,c.g)(D,"Payload")}catch(F){return(0,g.Q)(F)}return new u.y((function(n){var i=v||(0,r.wY)((function(){return fetch}))||y;return i(t,A).then((function(t){var i;e.setContext({response:t});var r=null===(i=t.headers)||void 0===i?void 0:i.get("content-type");return null!==r&&/^multipart\/mixed/i.test(r)?(0,h.TF)(t,n):(0,h.Wm)(t,e,n)})).catch((function(e){return(0,h.S3)(e,n)})),function(){S&&S.abort()}}))}))}},5553:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});var i=function(){if("undefined"===typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}}},1967:function(e,t,n){"use strict";n.r(t),n.d(t,{HttpLink:function(){return l.u},checkFetcher:function(){return o.U},createHttpLink:function(){return c.L},createSignalIfSupported:function(){return a.$},defaultPrinter:function(){return s.sb},fallbackHttpConfig:function(){return s.SC},parseAndCheckHttpResponse:function(){return i.dO},rewriteURIForGET:function(){return h.H},selectHttpOptionsAndBody:function(){return s.E4},selectHttpOptionsAndBodyInternal:function(){return s.ve},selectURI:function(){return u.r},serializeFetchParameter:function(){return r.g}});n(909);var i=n(8401),r=n(1969),s=n(4355),o=n(534),a=n(5553),u=n(1122),c=n(4474),l=n(6510),h=n(5839)},8401:function(e,t,n){"use strict";n.d(t,{S3:function(){return T},dO:function(){return E},Wm:function(){return w},TF:function(){return v}});var i=n(2900),r=n(2067);function s(e){return!!e.body}function o(e){return!!e.getReader}function a(e){return!(!r.DN||!e[Symbol.asyncIterator])}function u(e){return!!e.stream}function c(e){return!!e.arrayBuffer}function l(e){return!!e.pipe}function h(e){var t,n=e[Symbol.asyncIterator]();return t={next:function(){return n.next()}},t[Symbol.asyncIterator]=function(){return this},t}n(7658);function d(e){var t=null,n=null,i=!1,s=[],o=[];function a(e){if(!n){if(o.length){var t=o.shift();if(Array.isArray(t)&&t[0])return t[0]({value:e,done:!1})}s.push(e)}}function u(e){n=e;var i=o.slice();i.forEach((function(t){t[1](e)})),!t||t()}function c(){i=!0;var e=o.slice();e.forEach((function(e){e[0]({value:void 0,done:!0})})),!t||t()}function l(){return new Promise((function(e,t){return n?t(n):s.length?e({value:s.shift(),done:!1}):i?e({value:void 0,done:!0}):void o.push([e,t])}))}t=function(){t=null,e.removeListener("data",a),e.removeListener("error",u),e.removeListener("end",c),e.removeListener("finish",c),e.removeListener("close",c)},e.on("data",a),e.on("error",u),e.on("end",c),e.on("finish",c),e.on("close",c);var h={next:function(){return l()}};return r.DN&&(h[Symbol.asyncIterator]=function(){return this}),h}function p(e){var t=!1,n={next:function(){return t?Promise.resolve({value:void 0,done:!0}):(t=!0,new Promise((function(t,n){e.then((function(e){t({value:e,done:!1})})).catch(n)})))}};return r.DN&&(n[Symbol.asyncIterator]=function(){return this}),n}function f(e){var t={next:function(){return e.read()}};return r.DN&&(t[Symbol.asyncIterator]=function(){return this}),t}function m(e){var t=e;if(s(e)&&(t=e.body),a(t))return h(t);if(o(t))return f(t.getReader());if(u(t))return f(t.stream().getReader());if(c(t))return p(t.arrayBuffer());if(l(t))return d(t);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var g=n(5894),y=Object.prototype.hasOwnProperty;function v(e,t){var n,r,s;return(0,i.mG)(this,void 0,void 0,(function(){var o,a,u,c,l,h,d,p,f,g,y,v,w,E,S,k,C,I,O,x;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(void 0===TextDecoder)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");o=new TextDecoder("utf-8"),a=null===(n=e.headers)||void 0===n?void 0:n.get("content-type"),u="boundary=",c=(null===a||void 0===a?void 0:a.includes(u))?null===a||void 0===a?void 0:a.substring((null===a||void 0===a?void 0:a.indexOf(u))+u.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",l="--".concat(c),h="",d=m(e),p=!0,i.label=1;case 1:return p?[4,d.next()]:[3,3];case 2:f=i.sent(),g=f.value,y=f.done,v="string"===typeof g?g:o.decode(g),p=!y,h+=v,w=h.indexOf(l);while(w>-1){if(E=void 0,x=[h.slice(0,w),h.slice(w+l.length)],E=x[0],h=x[1],E.trim()){if(S=E.indexOf("\r\n\r\n"),k=_(E.slice(0,S)),C=k["content-type"],C&&-1===C.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");I=E.slice(S);try{O=b(e,I.replace("\r\n","")),(Object.keys(O).length>1||"data"in O||"incremental"in O||"errors"in O)&&(null===(r=t.next)||void 0===r||r.call(t,O))}catch(A){T(A,t)}}w=h.indexOf(l)}return[3,1];case 3:return null===(s=t.complete)||void 0===s||s.call(t),[2]}}))}))}function _(e){var t={};return e.split("\n").forEach((function(e){var n=e.indexOf(":");if(n>-1){var i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();t[i]=r}})),t}function b(e,t){if(e.status>=300){var n=function(){try{return JSON.parse(t)}catch(e){return t}};(0,g.P)(e,n(),"Response not successful: Received status code ".concat(e.status))}try{return JSON.parse(t)}catch(r){var i=r;throw i.name="ServerParseError",i.response=e,i.statusCode=e.status,i.bodyText=t,i}}function T(e,t){var n,i;"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&(null===(n=t.next)||void 0===n||n.call(t,e.result)),null===(i=t.error)||void 0===i||i.call(t,e))}function w(e,t,n){E(t)(e).then((function(e){var t,i;null===(t=n.next)||void 0===t||t.call(n,e),null===(i=n.complete)||void 0===i||i.call(n)})).catch((function(e){return T(e,n)}))}function E(e){return function(t){return t.text().then((function(e){return b(t,e)})).then((function(n){return t.status>=300&&(0,g.P)(t,n,"Response not successful: Received status code ".concat(t.status)),Array.isArray(n)||y.call(n,"data")||y.call(n,"errors")||(0,g.P)(t,n,"Server response was missing for query '".concat(Array.isArray(e)?e.map((function(e){return e.operationName})):e.operationName,"'.")),n}))}}},5839:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});n(7658);var i=n(1969);function r(e,t){var n=[],r=function(e,t){n.push("".concat(e,"=").concat(encodeURIComponent(t)))};if("query"in t&&r("query",t.query),t.operationName&&r("operationName",t.operationName),t.variables){var s=void 0;try{s=(0,i.g)(t.variables,"Variables map")}catch(d){return{parseError:d}}r("variables",s)}if(t.extensions){var o=void 0;try{o=(0,i.g)(t.extensions,"Extensions map")}catch(d){return{parseError:d}}r("extensions",o)}var a="",u=e,c=e.indexOf("#");-1!==c&&(a=e.substr(c),u=e.substr(0,c));var l=-1===u.indexOf("?")?"?":"&",h=u+l+n.join("&")+a;return{newURI:h}}},4355:function(e,t,n){"use strict";n.d(t,{E4:function(){return l},SC:function(){return u},sb:function(){return c},ve:function(){return h}});n(541);var i=n(2900),r=n(937),s={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},o={accept:"*/*","content-type":"application/json"},a={method:"POST"},u={http:s,headers:o,options:a},c=function(e,t){return t(e)};function l(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return n.unshift(t),h.apply(void 0,(0,i.ev)([e,c],n,!1))}function h(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var o={},a={};n.forEach((function(e){o=(0,i.pi)((0,i.pi)((0,i.pi)({},o),e.options),{headers:(0,i.pi)((0,i.pi)({},o.headers),e.headers)}),e.credentials&&(o.credentials=e.credentials),a=(0,i.pi)((0,i.pi)({},a),e.http)})),o.headers&&(o.headers=d(o.headers,a.preserveHeaderCase));var u=e.operationName,c=e.extensions,l=e.variables,h=e.query,p={operationName:u,variables:l};return a.includeExtensions&&(p.extensions=c),a.includeQuery&&(p.query=t(h,r.print)),{options:o,body:p}}function d(e,t){if(!t){var n=Object.create(null);return Object.keys(Object(e)).forEach((function(t){n[t.toLowerCase()]=e[t]})),n}var i=Object.create(null);Object.keys(Object(e)).forEach((function(t){i[t.toLowerCase()]={originalName:t,value:e[t]}}));var r=Object.create(null);return Object.keys(i).forEach((function(e){r[i[e].originalName]=i[e].value})),r}},1122:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var i=function(e,t){var n=e.getContext(),i=n.uri;return i||("function"===typeof t?t(e):t||"/graphql")}},1969:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var i=n(909),r=function(e,t){var n;try{n=JSON.stringify(e)}catch(s){var r=__DEV__?new i.ej("Network request failed. ".concat(t," is not serializable: ").concat(s.message)):new i.ej(24);throw r.parseError=s,r}return n}},6567:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});var i=n(4444);function r(e){return new i.y((function(t){t.error(e)}))}},5894:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var i=function(e,t,n){var i=new Error(n);throw i.name="ServerError",i.response=e,i.statusCode=e.status,i.result=t,i}},7777:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(2900),r=n(8039),s=n(5170),o=function(e){function t(t){var n=e.call(this)||this;return t instanceof r.SubscriptionClient?n.subscriptionClient=t:n.subscriptionClient=new r.SubscriptionClient(t.uri,t.options,t.webSocketImpl),n}return(0,i.ZT)(t,e),t.prototype.request=function(e){return this.subscriptionClient.request(e)},t}(s.i)},1328:function(e,t,n){"use strict";n.d(t,{O:function(){return r},k:function(){return i}});var i=Array.isArray;function r(e){return Array.isArray(e)&&e.length>0}},2067:function(e,t,n){"use strict";n.d(t,{DN:function(){return a},aS:function(){return o},mr:function(){return r},sy:function(){return s}});var i=n(909),r="function"===typeof WeakMap&&"ReactNative"!==(0,i.wY)((function(){return navigator.product})),s="function"===typeof WeakSet,o="function"===typeof Symbol&&"function"===typeof Symbol.for,a=o&&Symbol.asyncIterator;(0,i.wY)((function(){return window.document.createElement})),(0,i.wY)((function(){return navigator.userAgent.indexOf("jsdom")>=0}))},9735:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var i=Object.prototype.toString;function r(e){return s(e)}function s(e,t){switch(i.call(e)){case"[object Array]":if(t=t||new Map,t.has(e))return t.get(e);var n=e.slice(0);return t.set(e,n),n.forEach((function(e,i){n[i]=s(e,t)})),n;case"[object Object]":if(t=t||new Map,t.has(e))return t.get(e);var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Object.keys(e).forEach((function(n){r[n]=s(e[n],t)})),r;default:return e}}},8257:function(e,t,n){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&(n[t]=i)}))})),n}n.d(t,{o:function(){return i}})},1073:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var i=new Map;function r(e){var t=i.get(e)||1;return i.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}},544:function(e,t,n){"use strict";n.d(t,{Ee:function(){return o},bw:function(){return a},w0:function(){return c}});var i=n(2900),r=n(6867),s=Object.prototype.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}function a(e){var t=e[0]||{},n=e.length;if(n>1)for(var i=new c,r=1;r<n;++r)t=i.merge(t,e[r]);return t}var u=function(e,t,n){return this.merge(e[n],t[n])},c=function(){function e(e){void 0===e&&(e=u),this.reconciler=e,this.isObject=r.s,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var n=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return(0,r.s)(t)&&(0,r.s)(e)?(Object.keys(t).forEach((function(r){if(s.call(e,r)){var a=e[r];if(t[r]!==a){var u=n.reconciler.apply(n,(0,i.ev)([e,t,r],o,!1));u!==a&&(e=n.shallowCopyForMerge(e),e[r]=u)}}else e=n.shallowCopyForMerge(e),e[r]=t[r]})),e):t},e.prototype.shallowCopyForMerge=function(e){return(0,r.s)(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):(0,i.pi)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},e}()},446:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var i=n(2900),r=n(8257);function s(e,t){return(0,r.o)(e,t,t.variables&&{variables:(0,i.pi)((0,i.pi)({},e&&e.variables),t.variables)})}},6867:function(e,t,n){"use strict";function i(e){return null!==e&&"object"===typeof e}n.d(t,{s:function(){return i}})},909:function(e,t,n){"use strict";n.d(t,{Rk:function(){return c},ej:function(){return i.ej},kG:function(){return i.kG},wY:function(){return r}});var i=n(9768);function r(e){try{return e()}catch(t){}}var s=r((function(){return globalThis}))||r((function(){return window}))||r((function(){return self}))||r((function(){return global}))||r((function(){return r.constructor("return this")()})),o="__",a=[o,o].join("DEV");function u(){try{return Boolean(__DEV__)}catch(e){return Object.defineProperty(s,a,{value:"production"!==r((function(){return"production"})),enumerable:!1,configurable:!0,writable:!0}),s[a]}}var c=u();function l(e){try{return e()}catch(t){}}var h=l((function(){return globalThis}))||l((function(){return window}))||l((function(){return self}))||l((function(){return global}))||l((function(){return l.constructor("return this")()})),d=!1;function p(){!h||l((function(){return"production"}))||l((function(){return process}))||(Object.defineProperty(h,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),d=!0)}function f(){d&&(delete h.process,d=!1)}p();var m=n(9024);function g(){return m.H,f()}function y(){__DEV__?(0,i.kG)("boolean"===typeof c,c):(0,i.kG)("boolean"===typeof c,39)}g(),y()},1495:function(e,t,n){"use strict";n.d(t,{FS:function(){return o},LZ:function(){return s},mj:function(){return a}});n(7658);var i=n(909),r=n(9526);function s(e,t){var n=e.directives;return!n||!n.length||c(n).every((function(e){var n=e.directive,r=e.ifArgument,s=!1;return"Variable"===r.value.kind?(s=t&&t[r.value.name.value],__DEV__?(0,i.kG)(void 0!==s,"Invalid variable referenced in @".concat(n.name.value," directive.")):(0,i.kG)(void 0!==s,40)):s=r.value.value,"skip"===n.name.value?!s:s}))}function o(e,t,n){var i=new Set(e),s=i.size;return(0,r.Vn)(t,{Directive:function(e){if(i.delete(e.name.value)&&(!n||!i.size))return r.$_}}),n?!i.size:i.size<s}function a(e){return e&&o(["client","export"],e,!0)}function u(e){var t=e.name.value;return"skip"===t||"include"===t}function c(e){var t=[];return e&&e.length&&e.forEach((function(e){if(u(e)){var n=e.arguments,r=e.name.value;__DEV__?(0,i.kG)(n&&1===n.length,"Incorrect number of arguments for the @".concat(r," directive.")):(0,i.kG)(n&&1===n.length,41);var s=n[0];__DEV__?(0,i.kG)(s.name&&"if"===s.name.value,"Invalid argument for the @".concat(r," directive.")):(0,i.kG)(s.name&&"if"===s.name.value,42);var o=s.value;__DEV__?(0,i.kG)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),"Argument for the @".concat(r," directive must be a variable or a boolean value.")):(0,i.kG)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),43),t.push({directive:e,ifArgument:s})}})),t}},2157:function(e,t,n){"use strict";n.d(t,{F:function(){return o},Yk:function(){return s},hi:function(){return a}});n(7658);var i=n(2900),r=n(909);function s(e,t){var n=t,s=[];e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw __DEV__?new r.ej("Found a ".concat(e.operation," operation").concat(e.name?" named '".concat(e.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new r.ej(44);"FragmentDefinition"===e.kind&&s.push(e)})),"undefined"===typeof n&&(__DEV__?(0,r.kG)(1===s.length,"Found ".concat(s.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):(0,r.kG)(1===s.length,45),n=s[0].name.value);var o=(0,i.pi)((0,i.pi)({},e),{definitions:(0,i.ev)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}],e.definitions,!0)});return o}function o(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function a(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var n=e.name.value;if("function"===typeof t)return t(n);var i=t&&t[n];return __DEV__?(0,r.kG)(i,"No fragment named ".concat(n)):(0,r.kG)(i,46),i||null;default:return null}}},958:function(e,t,n){"use strict";n.d(t,{$H:function(){return o},A$:function(){return s},O4:function(){return d},iW:function(){return c},kU:function(){return u},p$:function(){return h},pD:function(){return l},rY:function(){return a}});var i=n(909),r=n(7491);function s(e){__DEV__?(0,i.kG)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):(0,i.kG)(e&&"Document"===e.kind,47);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw __DEV__?new i.ej('Schema type definitions not allowed in queries. Found: "'.concat(e.kind,'"')):new i.ej(48);return e}));return __DEV__?(0,i.kG)(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):(0,i.kG)(t.length<=1,49),e}function o(e){return s(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function a(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&!!e.name})).map((function(e){return e.name.value}))[0]||null}function u(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function c(e){var t=o(e);return __DEV__?(0,i.kG)(t&&"query"===t.operation,"Must contain a query definition."):(0,i.kG)(t&&"query"===t.operation,50),t}function l(e){__DEV__?(0,i.kG)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):(0,i.kG)("Document"===e.kind,51),__DEV__?(0,i.kG)(e.definitions.length<=1,"Fragment must have exactly one definition."):(0,i.kG)(e.definitions.length<=1,52);var t=e.definitions[0];return __DEV__?(0,i.kG)("FragmentDefinition"===t.kind,"Must be a fragment definition."):(0,i.kG)("FragmentDefinition"===t.kind,53),t}function h(e){var t;s(e);for(var n=0,r=e.definitions;n<r.length;n++){var o=r[n];if("OperationDefinition"===o.kind){var a=o.operation;if("query"===a||"mutation"===a||"subscription"===a)return o}"FragmentDefinition"!==o.kind||t||(t=o)}if(t)return t;throw __DEV__?new i.ej("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new i.ej(54)}function d(e){var t=Object.create(null),n=e&&e.variableDefinitions;return n&&n.length&&n.forEach((function(e){e.defaultValue&&(0,r.vb)(t,e.variable.name,e.defaultValue)})),t}},7491:function(e,t,n){"use strict";n.d(t,{Ao:function(){return O},JW:function(){return u},My:function(){return I},NC:function(){return S},PT:function(){return T},Yk:function(){return a},kQ:function(){return o},qw:function(){return C},u2:function(){return k},vb:function(){return v},vf:function(){return _}});var i=n(909),r=n(6867),s=n(2157);function o(e){return{__ref:String(e)}}function a(e){return Boolean(e&&"object"===typeof e&&"string"===typeof e.__ref)}function u(e){return(0,r.s)(e)&&"Document"===e.kind&&Array.isArray(e.definitions)}function c(e){return"StringValue"===e.kind}function l(e){return"BooleanValue"===e.kind}function h(e){return"IntValue"===e.kind}function d(e){return"FloatValue"===e.kind}function p(e){return"Variable"===e.kind}function f(e){return"ObjectValue"===e.kind}function m(e){return"ListValue"===e.kind}function g(e){return"EnumValue"===e.kind}function y(e){return"NullValue"===e.kind}function v(e,t,n,r){if(h(n)||d(n))e[t.value]=Number(n.value);else if(l(n)||c(n))e[t.value]=n.value;else if(f(n)){var s={};n.fields.map((function(e){return v(s,e.name,e.value,r)})),e[t.value]=s}else if(p(n)){var o=(r||{})[n.name.value];e[t.value]=o}else if(m(n))e[t.value]=n.values.map((function(e){var n={};return v(n,t,e,r),n[t.value]}));else if(g(n))e[t.value]=n.value;else{if(!y(n))throw __DEV__?new i.ej('The inline argument "'.concat(t.value,'" of kind "').concat(n.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new i.ej(55);e[t.value]=null}}function _(e,t){var n=null;e.directives&&(n={},e.directives.forEach((function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach((function(i){var r=i.name,s=i.value;return v(n[e.name.value],r,s,t)}))})));var i=null;return e.arguments&&e.arguments.length&&(i={},e.arguments.forEach((function(e){var n=e.name,r=e.value;return v(i,n,r,t)}))),T(e.name.value,i,n)}var b=["connection","include","skip","client","rest","export"],T=Object.assign((function(e,t,n){if(t&&n&&n["connection"]&&n["connection"]["key"]){if(n["connection"]["filter"]&&n["connection"]["filter"].length>0){var i=n["connection"]["filter"]?n["connection"]["filter"]:[];i.sort();var r={};return i.forEach((function(e){r[e]=t[e]})),"".concat(n["connection"]["key"],"(").concat(w(r),")")}return n["connection"]["key"]}var s=e;if(t){var o=w(t);s+="(".concat(o,")")}return n&&Object.keys(n).forEach((function(e){-1===b.indexOf(e)&&(n[e]&&Object.keys(n[e]).length?s+="@".concat(e,"(").concat(w(n[e]),")"):s+="@".concat(e))})),s}),{setStringify:function(e){var t=w;return w=e,t}}),w=function(e){return JSON.stringify(e,E)};function E(e,t){return(0,r.s)(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{})),t}function S(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach((function(e){var i=e.name,r=e.value;return v(n,i,r,t)})),n}return null}function k(e){return e.alias?e.alias.value:e.name.value}function C(e,t,n){if("string"===typeof e.__typename)return e.__typename;for(var i=0,r=t.selections;i<r.length;i++){var o=r[i];if(I(o)){if("__typename"===o.name.value)return e[k(o)]}else{var a=C(e,(0,s.hi)(o,n).selectionSet,n);if("string"===typeof a)return a}}}function I(e){return"Field"===e.kind}function O(e){return"InlineFragment"===e.kind}},2012:function(e,t,n){"use strict";n.d(t,{Fo:function(){return _},Gw:function(){return y},aL:function(){return b},ob:function(){return T}});n(7658);var i=n(2900),r=n(909),s=n(4478),o=n(9526),a=n(958),u=n(7491),c=n(2157),l=n(1328),h={kind:s.h.FIELD,name:{kind:s.h.NAME,value:"__typename"}};function d(e,t){return!e||e.selectionSet.selections.every((function(e){return e.kind===s.h.FRAGMENT_SPREAD&&d(t[e.name.value],t)}))}function p(e){return d((0,a.$H)(e)||(0,a.pD)(e),(0,c.F)((0,a.kU)(e)))?null:e}function f(e){var t=new Set,n=[];return e.forEach((function(e){e.name?t.add(e.name):e.test&&n.push(e.test)})),function(e){return t.has(e.name.value)||n.some((function(t){return t(e)}))}}function m(e){var t=new Map;return function(n){void 0===n&&(n=e);var i=t.get(n);return i||t.set(n,i={variables:new Set,fragmentSpreads:new Set}),i}}function g(e,t){for(var n=m(""),a=m(""),u=function(e){for(var t=0,i=void 0;t<e.length&&(i=e[t]);++t)if(!(0,l.k)(i)){if(i.kind===s.h.OPERATION_DEFINITION)return n(i.name&&i.name.value);if(i.kind===s.h.FRAGMENT_DEFINITION)return a(i.name.value)}return __DEV__&&r.kG.error("Could not find operation or fragment"),null},c=0,h=t.definitions.length-1;h>=0;--h)t.definitions[h].kind===s.h.OPERATION_DEFINITION&&++c;var d=f(e),g=e.some((function(e){return e.remove})),y=function(e){return g&&e&&e.some(d)},v=new Map,_=!1,b={enter:function(e){if(y(e.directives))return _=!0,null}},T=(0,o.Vn)(t,{Field:b,InlineFragment:b,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(e,t,n,i,r){var s=u(r);s&&s.variables.add(e.name.value)}},FragmentSpread:{enter:function(e,t,n,i,r){if(y(e.directives))return _=!0,null;var s=u(r);s&&s.fragmentSpreads.add(e.name.value)}},FragmentDefinition:{enter:function(e,t,n,i){v.set(JSON.stringify(i),e)},leave:function(e,t,n,i){var r=v.get(JSON.stringify(i));return e===r?e:c>0&&e.selectionSet.selections.every((function(e){return e.kind===s.h.FIELD&&"__typename"===e.name.value}))?(a(e.name.value).removed=!0,_=!0,null):void 0}},Directive:{leave:function(e){if(d(e))return _=!0,null}}});if(!_)return t;var w=function(e){return e.transitiveVars||(e.transitiveVars=new Set(e.variables),e.removed||e.fragmentSpreads.forEach((function(t){w(a(t)).transitiveVars.forEach((function(t){e.transitiveVars.add(t)}))}))),e},E=new Set;T.definitions.forEach((function(e){e.kind===s.h.OPERATION_DEFINITION?w(n(e.name&&e.name.value)).fragmentSpreads.forEach((function(e){E.add(e)})):e.kind!==s.h.FRAGMENT_DEFINITION||0!==c||a(e.name.value).removed||E.add(e.name.value)})),E.forEach((function(e){w(a(e)).fragmentSpreads.forEach((function(e){E.add(e)}))}));var S=function(e){return!(E.has(e)&&!a(e).removed)},k={enter:function(e){if(S(e.name.value))return null}};return p((0,o.Vn)(T,{FragmentSpread:k,FragmentDefinition:k,OperationDefinition:{leave:function(e){if(e.variableDefinitions){var t=w(n(e.name&&e.name.value)).transitiveVars;if(t.size<e.variableDefinitions.length)return(0,i.pi)((0,i.pi)({},e),{variableDefinitions:e.variableDefinitions.filter((function(e){return t.has(e.variable.name.value)}))})}}}}))}var y=Object.assign((function(e){return(0,o.Vn)(e,{SelectionSet:{enter:function(e,t,n){if(!n||n.kind!==s.h.OPERATION_DEFINITION){var r=e.selections;if(r){var o=r.some((function(e){return(0,u.My)(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}));if(!o){var a=n;if(!((0,u.My)(a)&&a.directives&&a.directives.some((function(e){return"export"===e.name.value}))))return(0,i.pi)((0,i.pi)({},e),{selections:(0,i.ev)((0,i.ev)([],r,!0),[h],!1)})}}}}}})}),{added:function(e){return e===h}}),v={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some((function(e){return"key"===e.name.value}))||__DEV__&&r.kG.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function _(e){return g([v],(0,a.A$)(e))}function b(e){var t=(0,a.p$)(e),n=t.operation;if("query"===n)return e;var r=(0,o.Vn)(e,{OperationDefinition:{enter:function(e){return(0,i.pi)((0,i.pi)({},e),{operation:"query"})}}});return r}function T(e){(0,a.A$)(e);var t=g([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t}},9917:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});n(7658);function i(e,t,n){var i=[];e.forEach((function(e){return e[t]&&i.push(e)})),i.forEach((function(e){return e[t](n)}))}},4986:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var i=n(4444),r=n(2067);function s(e){function t(t){Object.defineProperty(e,t,{value:i.y})}return r.aS&&Symbol.species&&t(Symbol.species),t("@@species"),e}},7077:function(e,t,n){"use strict";n.d(t,{Jn:function(){return me},qX:function(){return he},Xd:function(){return le},Mq:function(){return ye},ZF:function(){return ge},KN:function(){return ve}});n(7658);var i=n(7142),r=n(5168),s=n(223);n(2801);const o=(e,t)=>t.some((t=>e instanceof t));let a,u;function c(){return a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l(){return u||(u=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap;function g(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(w(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&h.set(t,e)})).catch((()=>{})),m.set(t,e),t}function y(e){if(d.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));d.set(e,t)}let v={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||p.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return w(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _(e){v=e(v)}function b(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?l().includes(e)?function(...t){return e.apply(E(this),t),w(h.get(this))}:function(...t){return w(e.apply(E(this),t))}:function(t,...n){const i=e.call(E(this),t,...n);return p.set(i,t.sort?t.sort():[t]),w(i)}}function T(e){return"function"===typeof e?b(e):(e instanceof IDBTransaction&&y(e),o(e,c())?new Proxy(e,v):e)}function w(e){if(e instanceof IDBRequest)return g(e);if(f.has(e))return f.get(e);const t=T(e);return t!==e&&(f.set(e,t),m.set(t,e)),t}const E=e=>m.get(e);function S(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=w(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(w(o.result),e.oldVersion,e.newVersion,w(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}const k=["get","getKey","getAll","getAllKeys","count"],C=["put","add","delete","clear"],I=new Map;function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(I.get(t))return I.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=C.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!k.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return I.set(t,s),s}_((e=>({...e,get:(t,n,i)=>O(t,n)||e.get(t,n,i),has:(t,n)=>!!O(t,n)||e.has(t,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class x{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map((e=>{if(A(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}function A(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}const D="@firebase/app",P="0.9.7",R=new r.Yd("@firebase/app"),N="@firebase/app-compat",L="@firebase/analytics-compat",M="@firebase/analytics",U="@firebase/app-check-compat",j="@firebase/app-check",F="@firebase/auth",B="@firebase/auth-compat",V="@firebase/database",$="@firebase/database-compat",q="@firebase/functions",H="@firebase/functions-compat",W="@firebase/installations",z="@firebase/installations-compat",G="@firebase/messaging",Q="@firebase/messaging-compat",K="@firebase/performance",X="@firebase/performance-compat",Y="@firebase/remote-config",J="@firebase/remote-config-compat",Z="@firebase/storage",ee="@firebase/storage-compat",te="@firebase/firestore",ne="@firebase/firestore-compat",ie="firebase",re="9.19.1",se="[DEFAULT]",oe={[D]:"fire-core",[N]:"fire-core-compat",[M]:"fire-analytics",[L]:"fire-analytics-compat",[j]:"fire-app-check",[U]:"fire-app-check-compat",[F]:"fire-auth",[B]:"fire-auth-compat",[V]:"fire-rtdb",[$]:"fire-rtdb-compat",[q]:"fire-fn",[H]:"fire-fn-compat",[W]:"fire-iid",[z]:"fire-iid-compat",[G]:"fire-fcm",[Q]:"fire-fcm-compat",[K]:"fire-perf",[X]:"fire-perf-compat",[Y]:"fire-rc",[J]:"fire-rc-compat",[Z]:"fire-gcs",[ee]:"fire-gcs-compat",[te]:"fire-fst",[ne]:"fire-fst-compat","fire-js":"fire-js",[ie]:"fire-js-all"},ae=new Map,ue=new Map;function ce(e,t){try{e.container.addComponent(t)}catch(n){R.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function le(e){const t=e.name;if(ue.has(t))return R.debug(`There were multiple attempts to register component ${t}.`),!1;ue.set(t,e);for(const n of ae.values())ce(n,e);return!0}function he(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const de={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},pe=new s.LL("app","Firebase",de);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pe.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=re;function ge(e,t={}){let n=e;if("object"!==typeof t){const e=t;t={name:e}}const r=Object.assign({name:se,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!==typeof o||!o)throw pe.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.aH)()),!n)throw pe.create("no-options");const a=ae.get(o);if(a){if((0,s.vZ)(n,a.options)&&(0,s.vZ)(r,a.config))return a;throw pe.create("duplicate-app",{appName:o})}const u=new i.H0(o);for(const i of ue.values())u.addComponent(i);const c=new fe(n,r,u);return ae.set(o,c),c}function ye(e=se){const t=ae.get(e);if(!t&&e===se)return ge();if(!t)throw pe.create("no-app",{appName:e});return t}function ve(e,t,n){var r;let s=null!==(r=oe[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void R.warn(e.join(" "))}le(new i.wA(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _e="firebase-heartbeat-database",be=1,Te="firebase-heartbeat-store";let we=null;function Ee(){return we||(we=S(_e,be,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Te)}}}).catch((e=>{throw pe.create("idb-open",{originalErrorMessage:e.message})}))),we}async function Se(e){try{const t=await Ee();return t.transaction(Te).objectStore(Te).get(Ce(e))}catch(t){if(t instanceof s.ZR)R.warn(t.message);else{const e=pe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});R.warn(e.message)}}}async function ke(e,t){try{const n=await Ee(),i=n.transaction(Te,"readwrite"),r=i.objectStore(Te);return await r.put(t,Ce(e)),i.done}catch(n){if(n instanceof s.ZR)R.warn(n.message);else{const e=pe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});R.warn(e.message)}}}function Ce(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=1024,Oe=2592e6;class xe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=Ae();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf(),n=Date.now();return n-t<=Oe})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ae(),{heartbeatsToSend:t,unsentEntries:n}=De(this._heartbeatsCache.heartbeats),i=(0,s.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ae(){const e=new Date;return e.toISOString().substring(0,10)}function De(e,t=Ie){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Re(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Re(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){const e=await this._canUseIndexedDBPromise;if(e){const e=await Se(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return ke(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Re(e){return(0,s.L)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(e){le(new i.wA("platform-logger",(e=>new x(e)),"PRIVATE")),le(new i.wA("heartbeat",(e=>new xe(e)),"PRIVATE")),ve(D,P,e),ve(D,P,"esm2017"),ve("fire-js","")}Ne("")},7142:function(e,t,n){"use strict";n.d(t,{H0:function(){return c},wA:function(){return r}});var i=n(223);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(u(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){const e=this.normalizeInstanceIdentifier(r);n===e&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}return n||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(e){return e===s?void 0:e}function u(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){const t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},5168:function(e,t,n){"use strict";n.d(t,{Yd:function(){return c},in:function(){return r}});n(7658);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i=[];var r;(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},u=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}},4161:function(e,t,n){"use strict";n.d(t,{Z:function(){return Mt}});n(3767),n(8585),n(8696),n(7658);function i(e,t){return function(){return e.apply(t,arguments)}}const{toString:r}=Object.prototype,{getPrototypeOf:s}=Object,o=(e=>t=>{const n=r.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),a=e=>(e=e.toLowerCase(),t=>o(t)===e),u=e=>t=>typeof t===e,{isArray:c}=Array,l=u("undefined");function h(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&m(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const d=a("ArrayBuffer");function p(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t}const f=u("string"),m=u("function"),g=u("number"),y=e=>null!==e&&"object"===typeof e,v=e=>!0===e||!1===e,_=e=>{if("object"!==o(e))return!1;const t=s(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},b=a("Date"),T=a("File"),w=a("Blob"),E=a("FileList"),S=e=>y(e)&&m(e.pipe),k=e=>{const t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||r.call(e)===t||m(e.toString)&&e.toString()===t)},C=a("URLSearchParams"),I=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function O(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let i,r;if("object"!==typeof e&&(e=[e]),c(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(i=0;i<s;i++)o=r[i],t.call(null,e[o],o,e)}}function x(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;while(r-- >0)if(i=n[r],t===i.toLowerCase())return i;return null}const A=(()=>"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global)(),D=e=>!l(e)&&e!==A;function P(){const{caseless:e}=D(this)&&this||{},t={},n=(n,i)=>{const r=e&&x(t,i)||i;_(t[r])&&_(n)?t[r]=P(t[r],n):_(n)?t[r]=P({},n):c(n)?t[r]=n.slice():t[r]=n};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&O(arguments[i],n);return t}const R=(e,t,n,{allOwnKeys:r}={})=>(O(t,((t,r)=>{n&&m(t)?e[r]=i(t,n):e[r]=t}),{allOwnKeys:r}),e),N=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),L=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},M=(e,t,n,i)=>{let r,o,a;const u={};if(t=t||{},null==e)return t;do{r=Object.getOwnPropertyNames(e),o=r.length;while(o-- >0)a=r[o],i&&!i(a,e,t)||u[a]||(t[a]=e[a],u[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},U=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},j=e=>{if(!e)return null;if(c(e))return e;let t=e.length;if(!g(t))return null;const n=new Array(t);while(t-- >0)n[t]=e[t];return n},F=(e=>t=>e&&t instanceof e)("undefined"!==typeof Uint8Array&&s(Uint8Array)),B=(e,t)=>{const n=e&&e[Symbol.iterator],i=n.call(e);let r;while((r=i.next())&&!r.done){const n=r.value;t.call(e,n[0],n[1])}},V=(e,t)=>{let n;const i=[];while(null!==(n=e.exec(t)))i.push(n);return i},$=a("HTMLFormElement"),q=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),H=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),W=a("RegExp"),z=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};O(n,((n,r)=>{!1!==t(n,r,e)&&(i[r]=n)})),Object.defineProperties(e,i)},G=e=>{z(e,((t,n)=>{if(m(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];m(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},Q=(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return c(e)?i(e):i(String(e).split(t)),n},K=()=>{},X=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Y="abcdefghijklmnopqrstuvwxyz",J="0123456789",Z={DIGIT:J,ALPHA:Y,ALPHA_DIGIT:Y+Y.toUpperCase()+J},ee=(e=16,t=Z.ALPHA_DIGIT)=>{let n="";const{length:i}=t;while(e--)n+=t[Math.random()*i|0];return n};function te(e){return!!(e&&m(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}const ne=e=>{const t=new Array(10),n=(e,i)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=c(e)?[]:{};return O(e,((e,t)=>{const s=n(e,i+1);!l(s)&&(r[t]=s)})),t[i]=void 0,r}}return e};return n(e,0)};var ie={isArray:c,isArrayBuffer:d,isBuffer:h,isFormData:k,isArrayBufferView:p,isString:f,isNumber:g,isBoolean:v,isObject:y,isPlainObject:_,isUndefined:l,isDate:b,isFile:T,isBlob:w,isRegExp:W,isFunction:m,isStream:S,isURLSearchParams:C,isTypedArray:F,isFileList:E,forEach:O,merge:P,extend:R,trim:I,stripBOM:N,inherits:L,toFlatObject:M,kindOf:o,kindOfTest:a,endsWith:U,toArray:j,forEachEntry:B,matchAll:V,isHTMLForm:$,hasOwnProperty:H,hasOwnProp:H,reduceDescriptors:z,freezeMethods:G,toObjectSet:Q,toCamelCase:q,noop:K,toFiniteNumber:X,findKey:x,global:A,isContextDefined:D,ALPHABET:Z,generateString:ee,isSpecCompliantForm:te,toJSONObject:ne};n(541);function re(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}ie.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const se=re.prototype,oe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{oe[e]={value:e}})),Object.defineProperties(re,oe),Object.defineProperty(se,"isAxiosError",{value:!0}),re.from=(e,t,n,i,r,s)=>{const o=Object.create(se);return ie.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),re.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};var ae=re,ue=null;function ce(e){return ie.isPlainObject(e)||ie.isArray(e)}function le(e){return ie.endsWith(e,"[]")?e.slice(0,-2):e}function he(e,t,n){return e?e.concat(t).map((function(e,t){return e=le(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}function de(e){return ie.isArray(e)&&!e.some(ce)}const pe=ie.toFlatObject(ie,{},null,(function(e){return/^is[A-Z]/.test(e)}));function fe(e,t,n){if(!ie.isObject(e))throw new TypeError("target must be an object");t=t||new(ue||FormData),n=ie.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ie.isUndefined(t[e])}));const i=n.metaTokens,r=n.visitor||l,s=n.dots,o=n.indexes,a=n.Blob||"undefined"!==typeof Blob&&Blob,u=a&&ie.isSpecCompliantForm(t);if(!ie.isFunction(r))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(ie.isDate(e))return e.toISOString();if(!u&&ie.isBlob(e))throw new ae("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(e)||ie.isTypedArray(e)?u&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(ie.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(ie.isArray(e)&&de(e)||(ie.isFileList(e)||ie.endsWith(n,"[]"))&&(a=ie.toArray(e)))return n=le(n),a.forEach((function(e,i){!ie.isUndefined(e)&&null!==e&&t.append(!0===o?he([n],i,s):null===o?n:n+"[]",c(e))})),!1;return!!ce(e)||(t.append(he(r,n,s),c(e)),!1)}const h=[],d=Object.assign(pe,{defaultVisitor:l,convertValue:c,isVisitable:ce});function p(e,n){if(!ie.isUndefined(e)){if(-1!==h.indexOf(e))throw Error("Circular reference detected in "+n.join("."));h.push(e),ie.forEach(e,(function(e,i){const s=!(ie.isUndefined(e)||null===e)&&r.call(t,e,ie.isString(i)?i.trim():i,n,d);!0===s&&p(e,n?n.concat(i):[i])})),h.pop()}}if(!ie.isObject(e))throw new TypeError("data must be an object");return p(e),t}var me=fe;function ge(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ye(e,t){this._pairs=[],e&&me(e,this,t)}const ve=ye.prototype;ve.append=function(e,t){this._pairs.push([e,t])},ve.toString=function(e){const t=e?function(t){return e.call(this,t,ge)}:ge;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var _e=ye;function be(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Te(e,t,n){if(!t)return e;const i=n&&n.encode||be,r=n&&n.serialize;let s;if(s=r?r(t,n):ie.isURLSearchParams(t)?t.toString():new _e(t,n).toString(i),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}class we{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var Ee=we,Se={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ke="undefined"!==typeof URLSearchParams?URLSearchParams:_e,Ce="undefined"!==typeof FormData?FormData:null,Ie="undefined"!==typeof Blob?Blob:null;const Oe=(()=>{let e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)})(),xe=(()=>"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts)();var Ae={isBrowser:!0,classes:{URLSearchParams:ke,FormData:Ce,Blob:Ie},isStandardBrowserEnv:Oe,isStandardBrowserWebWorkerEnv:xe,protocols:["http","https","file","blob","url","data"]};function De(e,t){return me(e,new Ae.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return Ae.isNode&&ie.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Pe(e){return ie.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}function Re(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}function Ne(e){function t(e,n,i,r){let s=e[r++];const o=Number.isFinite(+s),a=r>=e.length;if(s=!s&&ie.isArray(i)?i.length:s,a)return ie.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o;i[s]&&ie.isObject(i[s])||(i[s]=[]);const u=t(e,n,i[s],r);return u&&ie.isArray(i[s])&&(i[s]=Re(i[s])),!o}if(ie.isFormData(e)&&ie.isFunction(e.entries)){const n={};return ie.forEachEntry(e,((e,i)=>{t(Pe(e),i,n,0)})),n}return null}var Le=Ne;const Me={"Content-Type":void 0};function Ue(e,t,n){if(ie.isString(e))try{return(t||JSON.parse)(e),ie.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}const je={transitional:Se,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=ie.isObject(e);r&&ie.isHTMLForm(e)&&(e=new FormData(e));const s=ie.isFormData(e);if(s)return i&&i?JSON.stringify(Le(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return De(e,this.formSerializer).toString();if((o=ie.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return me(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),Ue(e)):e}],transformResponse:[function(e){const t=this.transitional||je.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&ie.isString(e)&&(n&&!this.responseType||i)){const n=t&&t.silentJSONParsing,s=!n&&i;try{return JSON.parse(e)}catch(r){if(s){if("SyntaxError"===r.name)throw ae.from(r,ae.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ie.forEach(["delete","get","head"],(function(e){je.headers[e]={}})),ie.forEach(["post","put","patch"],(function(e){je.headers[e]=ie.merge(Me)}));var Fe=je;const Be=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Ve=e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&Be[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t};const $e=Symbol("internals");function qe(e){return e&&String(e).trim().toLowerCase()}function He(e){return!1===e||null==e?e:ie.isArray(e)?e.map(He):String(e)}function We(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;while(i=n.exec(e))t[i[1]]=i[2];return t}function ze(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function Ge(e,t,n,i,r){return ie.isFunction(i)?i.call(this,t,n):(r&&(t=n),ie.isString(t)?ie.isString(i)?-1!==t.indexOf(i):ie.isRegExp(i)?i.test(t):void 0:void 0)}function Qe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}function Ke(e,t){const n=ie.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}class Xe{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=qe(t);if(!r)throw new Error("header name must be a non-empty string");const s=ie.findKey(i,r);(!s||void 0===i[s]||!0===n||void 0===n&&!1!==i[s])&&(i[s||t]=He(e))}const s=(e,t)=>ie.forEach(e,((e,n)=>r(e,n,t)));return ie.isPlainObject(e)||e instanceof this.constructor?s(e,t):ie.isString(e)&&(e=e.trim())&&!ze(e)?s(Ve(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=qe(e),e){const n=ie.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return We(e);if(ie.isFunction(t))return t.call(this,e,n);if(ie.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=qe(e),e){const n=ie.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ge(this,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=qe(e),e){const r=ie.findKey(n,e);!r||t&&!Ge(n,n[r],r,t)||(delete n[r],i=!0)}}return ie.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;while(n--){const r=t[n];e&&!Ge(this,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return ie.forEach(this,((i,r)=>{const s=ie.findKey(n,r);if(s)return t[s]=He(i),void delete t[r];const o=e?Qe(r):String(r).trim();o!==r&&delete t[r],t[o]=He(i),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&ie.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=this[$e]=this[$e]={accessors:{}},n=t.accessors,i=this.prototype;function r(e){const t=qe(e);n[t]||(Ke(i,e),n[t]=!0)}return ie.isArray(e)?e.forEach(r):r(e),this}}Xe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ie.freezeMethods(Xe.prototype),ie.freezeMethods(Xe);var Ye=Xe;function Je(e,t){const n=this||Fe,i=t||n,r=Ye.from(i.headers);let s=i.data;return ie.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function Ze(e){return!(!e||!e.__CANCEL__)}function et(e,t,n){ae.call(this,null==e?"canceled":e,ae.ERR_CANCELED,t,n),this.name="CanceledError"}ie.inherits(et,ae,{__CANCEL__:!0});var tt=et;n(2801);function nt(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new ae("Request failed with status code "+n.status,[ae.ERR_BAD_REQUEST,ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var it=Ae.isStandardBrowserEnv?function(){return{write:function(e,t,n,i,r,s){const o=[];o.push(e+"="+encodeURIComponent(t)),ie.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ie.isString(i)&&o.push("path="+i),ie.isString(r)&&o.push("domain="+r),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function rt(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function st(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function ot(e,t){return e&&!rt(t)?st(e,t):t}var at=Ae.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=ie.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return function(){return!0}}();function ut(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ct(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const u=Date.now(),c=i[o];r||(r=u),n[s]=a,i[s]=u;let l=o,h=0;while(l!==s)h+=n[l++],l%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-r<t)return;const d=c&&u-c;return d?Math.round(1e3*h/d):void 0}}var lt=ct;function ht(e,t){let n=0;const i=lt(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,u=i(a),c=s<=o;n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:u||void 0,estimated:u&&o&&c?(o-s)/u:void 0,event:r};l[t?"download":"upload"]=!0,e(l)}}const dt="undefined"!==typeof XMLHttpRequest;var pt=dt&&function(e){return new Promise((function(t,n){let i=e.data;const r=Ye.from(e.headers).normalize(),s=e.responseType;let o;function a(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}ie.isFormData(i)&&(Ae.isStandardBrowserEnv||Ae.isStandardBrowserWebWorkerEnv)&&r.setContentType(!1);let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const c=ot(e.baseURL,e.url);function l(){if(!u)return;const i=Ye.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),r=s&&"text"!==s&&"json"!==s?u.response:u.responseText,o={data:r,status:u.status,statusText:u.statusText,headers:i,config:e,request:u};nt((function(e){t(e),a()}),(function(e){n(e),a()}),o),u=null}if(u.open(e.method.toUpperCase(),Te(c,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=l:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(l)},u.onabort=function(){u&&(n(new ae("Request aborted",ae.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new ae("Network Error",ae.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||Se;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ae(t,i.clarifyTimeoutError?ae.ETIMEDOUT:ae.ECONNABORTED,e,u)),u=null},Ae.isStandardBrowserEnv){const t=(e.withCredentials||at(c))&&e.xsrfCookieName&&it.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===i&&r.setContentType(null),"setRequestHeader"in u&&ie.forEach(r.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),ie.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&"json"!==s&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",ht(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",ht(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{u&&(n(!t||t.type?new tt(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const h=ut(c);h&&-1===Ae.protocols.indexOf(h)?n(new ae("Unsupported protocol "+h+":",ae.ERR_BAD_REQUEST,e)):u.send(i||null)}))};const ft={http:ue,xhr:pt};ie.forEach(ft,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var mt={getAdapter:e=>{e=ie.isArray(e)?e:[e];const{length:t}=e;let n,i;for(let r=0;r<t;r++)if(n=e[r],i=ie.isString(n)?ft[n.toLowerCase()]:n)break;if(!i){if(!1===i)throw new ae(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(ie.hasOwnProp(ft,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!ie.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:ft};function gt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt(null,e)}function yt(e){gt(e),e.headers=Ye.from(e.headers),e.data=Je.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);const t=mt.getAdapter(e.adapter||Fe.adapter);return t(e).then((function(t){return gt(e),t.data=Je.call(e,e.transformResponse,t),t.headers=Ye.from(t.headers),t}),(function(t){return Ze(t)||(gt(e),t&&t.response&&(t.response.data=Je.call(e,e.transformResponse,t.response),t.response.headers=Ye.from(t.response.headers))),Promise.reject(t)}))}const vt=e=>e instanceof Ye?e.toJSON():e;function _t(e,t){t=t||{};const n={};function i(e,t,n){return ie.isPlainObject(e)&&ie.isPlainObject(t)?ie.merge.call({caseless:n},e,t):ie.isPlainObject(t)?ie.merge({},t):ie.isArray(t)?t.slice():t}function r(e,t,n){return ie.isUndefined(t)?ie.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function s(e,t){if(!ie.isUndefined(t))return i(void 0,t)}function o(e,t){return ie.isUndefined(t)?ie.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,s){return s in t?i(n,r):s in e?i(void 0,n):void 0}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>r(vt(e),vt(t),!0)};return ie.forEach(Object.keys(e).concat(Object.keys(t)),(function(i){const s=u[i]||r,o=s(e[i],t[i],i);ie.isUndefined(o)&&s!==a||(n[i]=o)})),n}const bt="1.3.4",Tt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Tt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const wt={};function Et(e,t,n){if("object"!==typeof e)throw new ae("options must be an object",ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;while(r-- >0){const s=i[r],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new ae("option "+s+" must be "+n,ae.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ae("Unknown option "+s,ae.ERR_BAD_OPTION)}}Tt.transitional=function(e,t,n){function i(e,t){return"[Axios v"+bt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new ae(i(r," has been removed"+(t?" in "+t:"")),ae.ERR_DEPRECATED);return t&&!wt[r]&&(wt[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}};var St={assertOptions:Et,validators:Tt};const kt=St.validators;class Ct{constructor(e){this.defaults=e,this.interceptors={request:new Ee,response:new Ee}}request(e,t){"string"===typeof e?(t=t||{},t.url=e):t=e||{},t=_t(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;let s;void 0!==n&&St.assertOptions(n,{silentJSONParsing:kt.transitional(kt.boolean),forcedJSONParsing:kt.transitional(kt.boolean),clarifyTimeoutError:kt.transitional(kt.boolean)},!1),void 0!==i&&St.assertOptions(i,{encode:kt.function,serialize:kt.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),s=r&&ie.merge(r.common,r[t.method]),s&&ie.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Ye.concat(s,r);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const u=[];let c;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let l,h=0;if(!a){const e=[yt.bind(this),void 0];e.unshift.apply(e,o),e.push.apply(e,u),l=e.length,c=Promise.resolve(t);while(h<l)c=c.then(e[h++],e[h++]);return c}l=o.length;let d=t;h=0;while(h<l){const e=o[h++],t=o[h++];try{d=e(d)}catch(p){t.call(this,p);break}}try{c=yt.call(this,d)}catch(p){return Promise.reject(p)}h=0,l=u.length;while(h<l)c=c.then(u[h++],u[h++]);return c}getUri(e){e=_t(this.defaults,e);const t=ot(e.baseURL,e.url);return Te(t,e.params,e.paramsSerializer)}}ie.forEach(["delete","get","head","options"],(function(e){Ct.prototype[e]=function(t,n){return this.request(_t(n||{},{method:e,url:t,data:(n||{}).data}))}})),ie.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(_t(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Ct.prototype[e]=t(),Ct.prototype[e+"Form"]=t(!0)}));var It=Ct;class Ot{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;while(t-- >0)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new tt(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new Ot((function(t){e=t}));return{token:t,cancel:e}}}var xt=Ot;function At(e){return function(t){return e.apply(null,t)}}function Dt(e){return ie.isObject(e)&&!0===e.isAxiosError}const Pt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pt).forEach((([e,t])=>{Pt[t]=e}));var Rt=Pt;function Nt(e){const t=new It(e),n=i(It.prototype.request,t);return ie.extend(n,It.prototype,t,{allOwnKeys:!0}),ie.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return Nt(_t(e,t))},n}const Lt=Nt(Fe);Lt.Axios=It,Lt.CanceledError=tt,Lt.CancelToken=xt,Lt.isCancel=Ze,Lt.VERSION=bt,Lt.toFormData=me,Lt.AxiosError=ae,Lt.Cancel=Lt.CanceledError,Lt.all=function(e){return Promise.all(e)},Lt.spread=At,Lt.isAxiosError=Dt,Lt.mergeConfig=_t,Lt.AxiosHeaders=Ye,Lt.formToJSON=e=>Le(ie.isHTMLForm(e)?new FormData(e):e),Lt.HttpStatusCode=Rt,Lt.default=Lt;var Mt=Lt},2308:function(e,t,n){"use strict";n.d(t,{hJ:function(){return nt},v0:function(){return Si},rh:function(){return mn}});n(7658);var i=n(223),r=n(7077),s=n(5168),o=n(2900),a=n(7142);function u(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c=u,l=new i.LL("auth","Firebase",u()),h=new s.Yd("@firebase/auth");function d(e,...t){h.logLevel<=s["in"].ERROR&&h.error(`Auth (${r.Jn}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e,...t){throw y(e,...t)}function f(e,...t){return y(e,...t)}function m(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n}),s=new i.LL("auth","Firebase",r);return s.create(t,{appName:e.name})}function g(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&p(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function y(e,...t){if("string"!==typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return l.create(e,...t)}function v(e,t,...n){if(!e)throw y(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function b(e,t){e||_(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T=new Map;function w(e){b(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(e,t){const n=(0,r.qX)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.vZ)(r,null!==t&&void 0!==t?t:{}))return e;p(e,"already-initialized")}const s=n.initialize({options:t});return s}function S(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(w);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function C(){return"http:"===I()||"https:"===I()}function I(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(C()||(0,i.ru)()||"connection"in navigator))||navigator.onLine}function x(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return O()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error"},N=new A(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function M(e,t,n,r,s={}){return U(e,s,(async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),P.fetch()(F(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))}))}async function U(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},R),t);try{const t=new B(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw V(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw V(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw V(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);p(e,a)}}catch(s){if(s instanceof i.ZR)throw s;p(e,"network-request-failed",{message:String(s)})}}async function j(e,t,n,i,r={}){const s=await M(e,t,n,i,r);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{_serverResponse:s}),s}function F(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?D(e.config,r):`${e.config.apiScheme}://${r}`}class B{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),N.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=f(e,t,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(e,t){return M(e,"POST","/v1/accounts:delete",t)}async function q(e,t){return M(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W(e,t=!1){const n=(0,i.m9)(e),r=await n.getIdToken(t),s=G(r);v(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:s,token:r,authTime:H(z(s.auth_time)),issuedAtTime:H(z(s.iat)),expirationTime:H(z(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function z(e){return 1e3*Number(e)}function G(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(s){return d("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Q(e){const t=G(e);return v(t,"internal-error"),v("undefined"!==typeof t.exp,"internal-error"),v("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof i.ZR&&X(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=H(this.lastLoginAt),this.creationTime=H(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z(e){var t;const n=e.auth,i=await e.getIdToken(),r=await K(e,q(n,{idToken:i}));v(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ne(s.providerUserInfo):[],a=te(e.providerData,o),u=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),l=!!u&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new J(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(e,h)}async function ee(e){const t=(0,i.m9)(e);await Z(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function te(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}function ne(e){return e.map((e=>{var{providerId:t}=e,n=(0,o._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ie(e,t){const n=await U(e,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=F(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",P.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v("undefined"!==typeof e.idToken,"internal-error"),v("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return v(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await ie(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new re;return n&&(v("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(v("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(v("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new re,this.toJSON())}_performRefresh(){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e,t){v("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class oe{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=(0,o._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new J(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return W(this,e)}reload(){return ee(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oe(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await K(this,$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:b,isAnonymous:T,providerData:w,stsTokenManager:E}=t;v(_&&E,e,"internal-error");const S=re.fromJSON(this.name,E);v("string"===typeof _,e,"internal-error"),se(l,e.name),se(h,e.name),v("boolean"===typeof b,e,"internal-error"),v("boolean"===typeof T,e,"internal-error"),se(d,e.name),se(p,e.name),se(f,e.name),se(m,e.name),se(g,e.name),se(y,e.name);const k=new oe({uid:_,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:T,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(k.providerData=w.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const i=new re;i.updateFromServerResponse(t);const r=new oe({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Z(r),r}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const ue=ae;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e,t,n){return`firebase:${e}:${t}:${n}`}class le{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ce(this.userKey,i.apiKey,r),this.fullPersistenceKey=ce("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?oe._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new le(w(ue),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||w(ue);const s=ce(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=oe._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(u){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(u){}}))),new le(r,e,n)):new le(r,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(me(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ye(t))return"Blackberry";if(ve(t))return"Webos";if(pe(t))return"Safari";if((t.includes("chrome/")||fe(t))&&!t.includes("edge/"))return"Chrome";if(ge(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(e=(0,i.z$)()){return/firefox\//i.test(e)}function pe(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fe(e=(0,i.z$)()){return/crios\//i.test(e)}function me(e=(0,i.z$)()){return/iemobile/i.test(e)}function ge(e=(0,i.z$)()){return/android/i.test(e)}function ye(e=(0,i.z$)()){return/blackberry/i.test(e)}function ve(e=(0,i.z$)()){return/webos/i.test(e)}function _e(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(e=(0,i.z$)()){var t;return _e(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function Te(){return(0,i.w1)()&&10===document.documentMode}function we(e=(0,i.z$)()){return _e(e)||ge(e)||ve(e)||ye(e)||/windows phone/i.test(e)||me(e)}function Ee(){try{return!(!window||window===window.top)}catch(e){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(e,t=[]){let n;switch(e){case"Browser":n=he((0,i.z$)());break;case"Worker":n=`${he((0,i.z$)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.Jn}/${s}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{const i=e(t);n(i)}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oe(this),this.idTokenSubscription=new Oe(this),this.beforeStateQueue=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=w(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await le.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Z(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=x()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,i.m9)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(w(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&w(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await le.create(this,[w(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return v(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function Ie(e){return(0,i.m9)(e)}class Oe{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)((e=>this.observer=e))}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e,t,n){const i=Ie(e);v(i._canInitEmulator,i,"emulator-config-failed"),v(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ae(t),{host:o,port:a}=De(t),u=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Re()}function Ae(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function De(e){const t=Ae(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Pe(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Pe(t)}}}function Pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Re(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Le(e,t){return M(e,"POST","/v1/accounts:update",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Me(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ue(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}async function je(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ne{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Fe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Fe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Me(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Ue(e,{email:this._email,oobCode:this._password});default:p(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Le(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return je(e,{idToken:t,email:this._email,oobCode:this._password});default:p(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Be(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="http://localhost";class $e extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $e(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=(0,o._T)(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new $e(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Be(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Be(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Be(e,t)}buildRequest(){const e={requestUri:Ve,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t["id_token"]=this.idToken),this.accessToken&&(t["access_token"]=this.accessToken),this.secret&&(t["oauth_token_secret"]=this.secret),t["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(t["nonce"]=this.nonce),e.postBody=(0,i.xO)(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qe(e,t){return M(e,"POST","/v1/accounts:sendVerificationCode",L(e,t))}async function He(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t))}async function We(e,t){const n=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t));if(n.temporaryProof)throw V(e,"account-exists-with-different-credential",n);return n}const ze={["USER_NOT_FOUND"]:"user-not-found"};async function Ge(e,t){const n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return j(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,n),ze)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Qe({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Qe({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return He(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return We(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Ge(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Qe({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xe(e){const t=(0,i.zd)((0,i.pd)(e))["link"],n=t?(0,i.zd)((0,i.pd)(t))["deep_link_id"]:null,r=(0,i.zd)((0,i.pd)(e))["deep_link_id"],s=r?(0,i.zd)((0,i.pd)(r))["link"]:null;return s||r||n||t||e}class Ye{constructor(e){var t,n,r,s,o,a;const u=(0,i.zd)((0,i.pd)(e)),c=null!==(t=u["apiKey"])&&void 0!==t?t:null,l=null!==(n=u["oobCode"])&&void 0!==n?n:null,h=Ke(null!==(r=u["mode"])&&void 0!==r?r:null);v(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(s=u["continueUrl"])&&void 0!==s?s:null,this.languageCode=null!==(o=u["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=u["tenantId"])&&void 0!==a?a:null}static parseLink(e){const t=Xe(e);try{return new Ye(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Je{constructor(){this.providerId=Je.PROVIDER_ID}static credential(e,t){return Fe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ye.parseLink(t);return v(n,"argument-error"),Fe._fromEmailAndCode(e,n.code,n.tenantId)}}Je.PROVIDER_ID="password",Je.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Je.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ze{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends Ze{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tt extends et{constructor(){super("facebook.com")}static credential(e){return $e._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return tt.credential(e.oauthAccessToken)}catch(t){return null}}}tt.FACEBOOK_SIGN_IN_METHOD="facebook.com",tt.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nt extends et{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $e._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return nt.credential(t,n)}catch(i){return null}}}nt.GOOGLE_SIGN_IN_METHOD="google.com",nt.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class it extends et{constructor(){super("github.com")}static credential(e){return $e._fromParams({providerId:it.PROVIDER_ID,signInMethod:it.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return it.credentialFromTaggedObject(e)}static credentialFromError(e){return it.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return it.credential(e.oauthAccessToken)}catch(t){return null}}}it.GITHUB_SIGN_IN_METHOD="github.com",it.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rt extends et{constructor(){super("twitter.com")}static credential(e,t){return $e._fromParams({providerId:rt.PROVIDER_ID,signInMethod:rt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rt.credentialFromTaggedObject(e)}static credentialFromError(e){return rt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return rt.credential(t,n)}catch(i){return null}}}rt.TWITTER_SIGN_IN_METHOD="twitter.com",rt.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class st{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await oe._fromIdTokenResponse(e,n,i),s=ot(n),o=new st({user:r,providerId:s,_tokenResponse:n,operationType:t});return o}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ot(n);return new st({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ot(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class at extends i.ZR{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,at.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new at(e,t,n,i)}}function ut(e,t,n,i){const r="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return r.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw at._fromErrorAndOperation(e,n,t,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ct(e,t,n=!1){const i=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return st._forOperation(e,"link",i)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function lt(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await K(e,ut(i,r,t,e),n);v(s.idToken,i,"internal-error");const o=G(s.idToken);v(o,i,"internal-error");const{sub:a}=o;return v(e.uid===a,i,"user-mismatch"),st._forOperation(e,r,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&p(i,"user-mismatch"),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ht(e,t,n=!1){const i="signIn",r=await ut(e,i,t),s=await st._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}function dt(e,t,n,r){return(0,i.m9)(e).onIdTokenChanged(t,n,r)}function pt(e,t,n){return(0,i.m9)(e).beforeAuthStateChanged(t,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ft(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:start",L(e,t))}function mt(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}function gt(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:start",L(e,t))}function yt(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}new WeakMap;const vt="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vt,"1"),this.storage.removeItem(vt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){const e=(0,i.z$)();return pe(e)||_e(e)}const Tt=1e3,wt=10;class Et extends _t{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=bt()&&Ee(),this.fallbackToPolling=we(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Te()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,wt):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),Tt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Et.type="LOCAL";const St=Et;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends _t{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kt.type="SESSION";const Ct=kt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(e){return Promise.all(e.map((async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ot(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await It(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xt(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot.receivers=[];class At{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const u=xt("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return window}function Pt(e){Dt().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return"undefined"!==typeof Dt()["WorkerGlobalScope"]&&"function"===typeof Dt()["importScripts"]}async function Nt(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}function Lt(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function Mt(){return Rt()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="firebaseLocalStorageDb",jt=1,Ft="firebaseLocalStorage",Bt="fbase_key";class Vt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $t(e,t){return e.transaction([Ft],t?"readwrite":"readonly").objectStore(Ft)}function qt(){const e=indexedDB.deleteDatabase(Ut);return new Vt(e).toPromise()}function Ht(){const e=indexedDB.open(Ut,jt);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ft,{keyPath:Bt})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ft)?t(n):(n.close(),await qt(),t(await Ht()))}))}))}async function Wt(e,t,n){const i=$t(e,!0).put({[Bt]:t,value:n});return new Vt(i).toPromise()}async function zt(e,t){const n=$t(e,!1).get(t),i=await new Vt(n).toPromise();return void 0===i?null:i.value}function Gt(e,t){const n=$t(e,!0).delete(t);return new Vt(n).toPromise()}const Qt=800,Kt=3;class Xt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ht()),this.db}async _withRetries(e){let t=0;while(1)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>Kt)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ot._getInstance(Mt()),this.receiver._subscribe("keyChanged",(async(e,t)=>{const n=await this._poll();return{keyProcessed:n.includes(t.key)}})),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await Nt(),!this.activeServiceWorker)return;this.sender=new At(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&Lt()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ht();return await Wt(e,vt,"1"),await Gt(e,vt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>zt(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Gt(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$t(e,!1).getAll();return new Vt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Qt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xt.type="LOCAL";const Yt=Xt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:start",L(e,t))}function Zt(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}function en(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tn(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}function nn(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",tn().appendChild(i)}))}function rn(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
rn("rcb"),new A(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sn="recaptcha";async function on(e,t,n){var i;const r=await n.verify();try{let s;if(v("string"===typeof r,e,"argument-error"),v(n.type===sn,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){v("enroll"===t.type,e,"internal-error");const n=await ft(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{v("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;v(n,e,"missing-multi-factor-info");const o=await Jt(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await qe(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class an{constructor(e){this.providerId=an.PROVIDER_ID,this.auth=Ie(e)}verifyPhoneNumber(e,t){return on(this.auth,e,(0,i.m9)(t))}static credential(e,t){return Qe._fromVerification(e,t)}static credentialFromResult(e){const t=e;return an.credentialFromTaggedObject(t)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Qe._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function un(e,t){return t?w(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.PROVIDER_ID="phone",an.PHONE_SIGN_IN_METHOD="phone";class cn extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Be(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Be(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Be(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ln(e){return ht(e.auth,new cn(e),e.bypassAuthState)}function hn(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),lt(n,new cn(e),e.bypassAuthState)}async function dn(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),ct(n,new cn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ln;case"linkViaPopup":case"linkViaRedirect":return dn;case"reauthViaPopup":case"reauthViaRedirect":return hn;default:p(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new A(2e3,1e4);async function mn(e,t,n){const i=Ie(e);g(e,t,Ze);const r=un(i,n),s=new gn(i,"signInViaPopup",t,r);return s.executeNotNull()}class gn extends pn{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,gn.currentPopupAction&&gn.currentPopupAction.cancel(),gn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,fn.get())};e()}}gn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const yn="pendingRedirect",vn=new Map;class _n extends pn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=vn.get(this.auth._key());if(!e){try{const t=await bn(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}vn.set(this.auth._key(),e)}return this.bypassAuthState||vn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function bn(e,t){const n=En(t),i=wn(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}function Tn(e,t){vn.set(e._key(),t)}function wn(e){return w(e._redirectPersistence)}function En(e){return ce(yn,e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sn(e,t,n=!1){const i=Ie(e),r=un(i,t),s=new _n(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const kn=6e5;class Cn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!xn(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!On(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kn&&this.cachedEventUids.clear(),this.cachedEventUids.has(In(e))}saveEventToCache(e){this.cachedEventUids.add(In(e)),this.lastProcessedEventTime=Date.now()}}function In(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function On({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}function xn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return On(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function An(e,t={}){return M(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pn=/^https?/;async function Rn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await An(e);for(const i of t)try{if(Nn(i))return}catch(n){}p(e,"unauthorized-domain")}function Nn(e){const t=k(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Pn.test(n))return!1;if(Dn.test(e))return i===e;const r=e.replace(/\./g,"\\."),s=new RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new A(3e4,6e4);function Mn(){const e=Dt().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Un(e){return new Promise(((t,n)=>{var i,r,s;function o(){Mn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Mn(),n(f(e,"network-request-failed"))},timeout:Ln.get()})}if(null===(r=null===(i=Dt().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Dt().gapi)||void 0===s?void 0:s.load)){const t=rn("iframefcb");return Dt()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw jn=null,e}))}let jn=null;function Fn(e){return jn=jn||Un(e),jn}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new A(5e3,15e3),Vn="__/auth/iframe",$n="emulator/auth/iframe",qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wn(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?D(t,$n):`https://${e.config.authDomain}/${Vn}`,s={apiKey:t.apiKey,appName:e.name,v:r.Jn},o=Hn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.xO)(s).slice(1)}`}async function zn(e){const t=await Fn(e),n=Dt().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:Wn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qn,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=f(e,"network-request-failed"),s=Dt().setTimeout((()=>{i(r)}),Bn.get());function o(){Dt().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qn=500,Kn=600,Xn="_blank",Yn="http://localhost";class Jn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Zn(e,t,n,r=Qn,s=Kn){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},Gn),{width:r.toString(),height:s.toString(),top:o,left:a}),l=(0,i.z$)().toLowerCase();n&&(u=fe(l)?Xn:n),de(l)&&(t=t||Yn,c.scrollbars="yes");const h=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(be(l)&&"_self"!==u)return ei(t||"",u),new Jn(null);const d=window.open(t||"",u,h);v(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Jn(d)}function ei(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="__/auth/handler",ni="emulator/auth/handler";function ii(e,t,n,s,o,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.Jn,eventId:o};if(t instanceof Ze){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof et){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const i of Object.keys(c))void 0===c[i]&&delete c[i];return`${ri(e)}?${(0,i.xO)(c).slice(1)}`}function ri({config:e}){return e.emulator?D(e,ni):`https://${e.authDomain}/${ti}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="webStorageSupport";class oi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ct,this._completeRedirectFn=Sn,this._overrideRedirectResult=Tn}async _openPopup(e,t,n,i){var r;b(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const s=ii(e,t,n,k(),i);return Zn(e,s,xt())}async _openRedirect(e,t,n,i){return await this._originValidation(e),Pt(ii(e,t,n,k(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await zn(e),n=new Cn(e);return t.register("authEvent",(t=>{v(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");const i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){const n=this.iframes[e._key()];n.send(si,{type:si},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[si];void 0!==r&&t(!!r),p(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rn(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return we()||pe()||_e()}}const ai=oi;class ui{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}class ci extends ui{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ci(e)}_finalizeEnroll(e,t,n){return mt(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Zt(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class li{constructor(){}static assertion(e){return ci._fromCredential(e)}}li.FACTOR_ID="phone";class hi{static assertionForEnrollment(e,t){return di._fromSecret(e,t)}static assertionForSignIn(e,t){return di._fromEnrollmentId(e,t)}static async generateSecret(e){const t=e;v("undefined"!==typeof t.auth,"internal-error");const n=await gt(t.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return pi._fromStartTotpMfaEnrollmentResponse(n,t.auth)}}hi.FACTOR_ID="totp";class di extends ui{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new di(t,void 0,e)}static _fromEnrollmentId(e,t){return new di(t,e)}async _finalizeEnroll(e,t,n){return v("undefined"!==typeof this.secret,e,"argument-error"),yt(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){v(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return en(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class pi{constructor(e,t,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(e,t){return new pi(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(fi(e)||fi(t))&&(i=!0),i&&(fi(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),fi(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function fi(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var mi="@firebase/auth",gi="0.22.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function _i(e){(0,r.Xd)(new a.wA("auth",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((t,i)=>{v(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),v(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:t.name});const r={apiKey:s,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(e)},a=new Ce(t,i,r);return S(a,n),a})(i,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{const i=e.getProvider("auth-internal");i.initialize()}))),(0,r.Xd)(new a.wA("auth-internal",(e=>{const t=Ie(e.getProvider("auth").getImmediate());return(e=>new yi(e))(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KN)(mi,gi,vi(e)),(0,r.KN)(mi,gi,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=300,Ti=(0,i.Pz)("authIdTokenMaxAge")||bi;let wi=null;const Ei=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ti)return;const r=null===n||void 0===n?void 0:n.token;wi!==r&&(wi=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Si(e=(0,r.Mq)()){const t=(0,r.qX)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=E(e,{popupRedirectResolver:ai,persistence:[Yt,St,Ct]}),s=(0,i.Pz)("authTokenSyncURL");if(s){const e=Ei(s);pt(n,e,(()=>e(n.currentUser))),dt(n,(t=>e(t)))}const o=(0,i.q4)("auth");return o&&xe(n,`http://${o}`),n}_i("Browser")},3731:function(e,t,n){"use strict";function i(e,t){const n=Boolean(e);if(!n)throw new Error(t)}n.d(t,{a:function(){return i}})},560:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});n(7658);const i=10,r=2;function s(e){return o(e,[])}function o(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return a(e,t);default:return String(e)}}function a(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(u(e)){const t=e.toJSON();if(t!==e)return"string"===typeof t?t:o(t,n)}else if(Array.isArray(e))return l(e,n);return c(e,n)}function u(e){return"function"===typeof e.toJSON}function c(e,t){const n=Object.entries(e);if(0===n.length)return"{}";if(t.length>r)return"["+h(e)+"]";const i=n.map((([e,n])=>e+": "+o(n,t)));return"{ "+i.join(", ")+" }"}function l(e,t){if(0===e.length)return"[]";if(t.length>r)return"[Array]";const n=Math.min(i,e.length),s=e.length-n,a=[];for(let i=0;i<n;++i)a.push(o(e[i],t));return 1===s?a.push("... 1 more item"):s>1&&a.push(`... ${s} more items`),"["+a.join(", ")+"]"}function h(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"===typeof e.constructor){const t=e.constructor.name;if("string"===typeof t&&""!==t)return t}return t}},8027:function(e,t,n){"use strict";n.d(t,{UG:function(){return a},WU:function(){return r},Ye:function(){return i},h8:function(){return s},ku:function(){return u}});class i{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class r{constructor(e,t,n,i,r,s){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=r,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const s={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=new Set(Object.keys(s));function a(e){const t=null===e||void 0===e?void 0:e.kind;return"string"===typeof t&&o.has(t)}var u;(function(e){e["QUERY"]="query",e["MUTATION"]="mutation",e["SUBSCRIPTION"]="subscription"})(u||(u={}))},7872:function(e,t,n){"use strict";n.d(t,{LZ:function(){return o},wv:function(){return r}});var i=n(193);function r(e){var t;let n=Number.MAX_SAFE_INTEGER,i=null,r=-1;for(let a=0;a<e.length;++a){var o;const t=e[a],u=s(t);u!==t.length&&(i=null!==(o=i)&&void 0!==o?o:a,r=a,0!==a&&u<n&&(n=u))}return e.map(((e,t)=>0===t?e:e.slice(n))).slice(null!==(t=i)&&void 0!==t?t:0,r+1)}function s(e){let t=0;while(t<e.length&&(0,i.FD)(e.charCodeAt(t)))++t;return t}function o(e,t){const n=e.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),s=1===r.length,o=r.length>1&&r.slice(1).every((e=>0===e.length||(0,i.FD)(e.charCodeAt(0)))),a=n.endsWith('\\"""'),u=e.endsWith('"')&&!a,c=e.endsWith("\\"),l=u||c,h=!(null!==t&&void 0!==t&&t.minimize)&&(!s||e.length>70||l||o||a);let d="";const p=s&&(0,i.FD)(e.charCodeAt(0));return(h&&!p||o)&&(d+="\n"),d+=n,(h||l)&&(d+="\n"),'"""'+d+'"""'}},193:function(e,t,n){"use strict";function i(e){return 9===e||32===e}function r(e){return e>=48&&e<=57}function s(e){return e>=97&&e<=122||e>=65&&e<=90}function o(e){return s(e)||95===e}function a(e){return s(e)||r(e)||95===e}n.d(t,{FD:function(){return i},HQ:function(){return a},LQ:function(){return o},X1:function(){return r}})},4478:function(e,t,n){"use strict";var i;n.d(t,{h:function(){return i}}),function(e){e["NAME"]="Name",e["DOCUMENT"]="Document",e["OPERATION_DEFINITION"]="OperationDefinition",e["VARIABLE_DEFINITION"]="VariableDefinition",e["SELECTION_SET"]="SelectionSet",e["FIELD"]="Field",e["ARGUMENT"]="Argument",e["FRAGMENT_SPREAD"]="FragmentSpread",e["INLINE_FRAGMENT"]="InlineFragment",e["FRAGMENT_DEFINITION"]="FragmentDefinition",e["VARIABLE"]="Variable",e["INT"]="IntValue",e["FLOAT"]="FloatValue",e["STRING"]="StringValue",e["BOOLEAN"]="BooleanValue",e["NULL"]="NullValue",e["ENUM"]="EnumValue",e["LIST"]="ListValue",e["OBJECT"]="ObjectValue",e["OBJECT_FIELD"]="ObjectField",e["DIRECTIVE"]="Directive",e["NAMED_TYPE"]="NamedType",e["LIST_TYPE"]="ListType",e["NON_NULL_TYPE"]="NonNullType",e["SCHEMA_DEFINITION"]="SchemaDefinition",e["OPERATION_TYPE_DEFINITION"]="OperationTypeDefinition",e["SCALAR_TYPE_DEFINITION"]="ScalarTypeDefinition",e["OBJECT_TYPE_DEFINITION"]="ObjectTypeDefinition",e["FIELD_DEFINITION"]="FieldDefinition",e["INPUT_VALUE_DEFINITION"]="InputValueDefinition",e["INTERFACE_TYPE_DEFINITION"]="InterfaceTypeDefinition",e["UNION_TYPE_DEFINITION"]="UnionTypeDefinition",e["ENUM_TYPE_DEFINITION"]="EnumTypeDefinition",e["ENUM_VALUE_DEFINITION"]="EnumValueDefinition",e["INPUT_OBJECT_TYPE_DEFINITION"]="InputObjectTypeDefinition",e["DIRECTIVE_DEFINITION"]="DirectiveDefinition",e["SCHEMA_EXTENSION"]="SchemaExtension",e["SCALAR_TYPE_EXTENSION"]="ScalarTypeExtension",e["OBJECT_TYPE_EXTENSION"]="ObjectTypeExtension",e["INTERFACE_TYPE_EXTENSION"]="InterfaceTypeExtension",e["UNION_TYPE_EXTENSION"]="UnionTypeExtension",e["ENUM_TYPE_EXTENSION"]="EnumTypeExtension",e["INPUT_OBJECT_TYPE_EXTENSION"]="InputObjectTypeExtension"}(i||(i={}))},937:function(e,t,n){"use strict";n.r(t),n.d(t,{print:function(){return c}});var i=n(7872);function r(e){return`"${e.replace(s,o)}"`}const s=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function o(e){return a[e.charCodeAt(0)]}const a=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];var u=n(9526);function c(e){return(0,u.Vn)(e,h)}const l=80,h={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>d(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=f("(",d(e.variableDefinitions,", "),")"),n=d([e.operation,d([e.name,t]),d(e.directives," ")]," ");return("query"===n?"":n+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:n,directives:i})=>e+": "+t+f(" = ",n)+f(" ",d(i," "))},SelectionSet:{leave:({selections:e})=>p(e)},Field:{leave({alias:e,name:t,arguments:n,directives:i,selectionSet:r}){const s=f("",e,": ")+t;let o=s+f("(",d(n,", "),")");return o.length>l&&(o=s+f("(\n",m(d(n,"\n")),"\n)")),d([o,d(i," "),r]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+f(" ",d(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:n})=>d(["...",f("on ",e),d(t," "),n]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:n,directives:i,selectionSet:r})=>`fragment ${e}${f("(",d(n,", "),")")} on ${t} ${f("",d(i," ")," ")}`+r},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?(0,i.LZ)(e):r(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+d(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+d(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+f("(",d(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:n})=>f("",e,"\n")+d(["schema",d(t," "),p(n)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:n})=>f("",e,"\n")+d(["scalar",t,d(n," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:r})=>f("",e,"\n")+d(["type",t,f("implements ",d(n," & ")),d(i," "),p(r)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:n,type:i,directives:r})=>f("",e,"\n")+t+(g(n)?f("(\n",m(d(n,"\n")),"\n)"):f("(",d(n,", "),")"))+": "+i+f(" ",d(r," "))},InputValueDefinition:{leave:({description:e,name:t,type:n,defaultValue:i,directives:r})=>f("",e,"\n")+d([t+": "+n,f("= ",i),d(r," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:n,directives:i,fields:r})=>f("",e,"\n")+d(["interface",t,f("implements ",d(n," & ")),d(i," "),p(r)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:n,types:i})=>f("",e,"\n")+d(["union",t,d(n," "),f("= ",d(i," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:n,values:i})=>f("",e,"\n")+d(["enum",t,d(n," "),p(i)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:n})=>f("",e,"\n")+d([t,d(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:n,fields:i})=>f("",e,"\n")+d(["input",t,d(n," "),p(i)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:n,repeatable:i,locations:r})=>f("",e,"\n")+"directive @"+t+(g(n)?f("(\n",m(d(n,"\n")),"\n)"):f("(",d(n,", "),")"))+(i?" repeatable":"")+" on "+d(r," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>d(["extend schema",d(e," "),p(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>d(["extend scalar",e,d(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>d(["extend type",e,f("implements ",d(t," & ")),d(n," "),p(i)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:n,fields:i})=>d(["extend interface",e,f("implements ",d(t," & ")),d(n," "),p(i)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:n})=>d(["extend union",e,d(t," "),f("= ",d(n," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:n})=>d(["extend enum",e,d(t," "),p(n)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:n})=>d(["extend input",e,d(t," "),p(n)]," ")}};function d(e,t=""){var n;return null!==(n=null===e||void 0===e?void 0:e.filter((e=>e)).join(t))&&void 0!==n?n:""}function p(e){return f("{\n",m(d(e,"\n")),"\n}")}function f(e,t,n=""){return null!=t&&""!==t?e+t+n:""}function m(e){return f("  ",e.replace(/\n/g,"\n  "))}function g(e){var t;return null!==(t=null===e||void 0===e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}},9024:function(e,t,n){"use strict";n.d(t,{H:function(){return o},T:function(){return a}});var i=n(3731),r=n(560);const s=function(e,t){return e instanceof t};class o{constructor(e,t="GraphQL request",n={line:1,column:1}){"string"===typeof e||(0,i.a)(!1,`Body must be a string. Received: ${(0,r.X)(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||(0,i.a)(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||(0,i.a)(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function a(e){return s(e,o)}},9526:function(e,t,n){"use strict";n.d(t,{$_:function(){return a},Vn:function(){return u}});n(7658);var i=n(3731),r=n(560),s=n(8027),o=n(4478);const a=Object.freeze({});function u(e,t,n=s.h8){const u=new Map;for(const i of Object.values(o.h))u.set(i,c(t,i));let l,h,d,p=Array.isArray(e),f=[e],m=-1,g=[],y=e;const v=[],_=[];do{m++;const e=m===f.length,o=e&&0!==g.length;if(e){if(h=0===_.length?void 0:v[v.length-1],y=d,d=_.pop(),o)if(p){y=y.slice();let e=0;for(const[t,n]of g){const i=t-e;null===n?(y.splice(i,1),e++):y[i]=n}}else{y=Object.defineProperties({},Object.getOwnPropertyDescriptors(y));for(const[e,t]of g)y[e]=t}m=l.index,f=l.keys,g=l.edits,p=l.inArray,l=l.prev}else if(d){if(h=p?m:f[m],y=d[h],null===y||void 0===y)continue;v.push(h)}let c;if(!Array.isArray(y)){var b,T;(0,s.UG)(y)||(0,i.a)(!1,`Invalid AST Node: ${(0,r.X)(y)}.`);const n=e?null===(b=u.get(y.kind))||void 0===b?void 0:b.leave:null===(T=u.get(y.kind))||void 0===T?void 0:T.enter;if(c=null===n||void 0===n?void 0:n.call(t,y,h,d,v,_),c===a)break;if(!1===c){if(!e){v.pop();continue}}else if(void 0!==c&&(g.push([h,c]),!e)){if(!(0,s.UG)(c)){v.pop();continue}y=c}}var w;if(void 0===c&&o&&g.push([h,y]),e)v.pop();else l={inArray:p,index:m,keys:f,edits:g,prev:l},p=Array.isArray(y),f=p?y:null!==(w=n[y.kind])&&void 0!==w?w:[],m=-1,g=[],d&&_.push(d),d=y}while(void 0!==l);return 0!==g.length?g[g.length-1][1]:e}function c(e,t){const n=e[t];return"object"===typeof n?n:"function"===typeof n?{enter:n,leave:void 0}:{enter:e.enter,leave:e.leave}}},2927:function(e,t,n){"use strict";n.r(t),n.d(t,{getOperationAST:function(){return r}});var i=n(4478);function r(e,t){let n=null;for(const s of e.definitions){var r;if(s.kind===i.h.OPERATION_DEFINITION)if(null==t){if(n)return null;n=s}else if((null===(r=s.name)||void 0===r?void 0:r.value)===t)return s}return n}},9768:function(e,t,n){"use strict";n.d(t,{U6:function(){return d},ej:function(){return a},kG:function(){return u}});var i=n(2900),r="Invariant Violation",s=Object.setPrototypeOf,o=void 0===s?function(e,t){return e.__proto__=t,e}:s,a=function(e){function t(n){void 0===n&&(n=r);var i=e.call(this,"number"===typeof n?r+": "+n+" (see https://github.com/apollographql/invariant-packages)":n)||this;return i.framesToPop=1,i.name=r,o(i,t.prototype),i}return(0,i.ZT)(t,e),t}(Error);function u(e,t){if(!e)throw new a(t)}var c=["debug","log","warn","error","silent"],l=c.indexOf("log");function h(e){return function(){if(c.indexOf(e)>=l){var t=console[e]||console.log;return t.apply(console,arguments)}}}function d(e){var t=c[l];return l=Math.max(0,c.indexOf(e)),t}(function(e){e.debug=h("debug"),e.log=h("log"),e.warn=h("warn"),e.error=h("error")})(u||(u={}))},2483:function(e,t,n){"use strict";n.d(t,{PO:function(){return F},p7:function(){return tt}});n(7658),n(541);var i=n(3396),r=n(4870);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof window;function o(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const a=Object.assign;function u(e,t){const n={};for(const i in t){const r=t[i];n[i]=l(r)?r.map(e):e(r)}return n}const c=()=>{},l=Array.isArray;const h=/\/$/,d=e=>e.replace(h,"");function p(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let u=t.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(i=t.slice(0,u),s=t.slice(u+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=T(null!=i?i:t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function f(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function m(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function g(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&y(t.matched[i],n.matched[r])&&v(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function y(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function v(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_(e[n],t[n]))return!1;return!0}function _(e,t){return l(e)?b(e,t):l(t)?b(t,e):e===t}function b(e,t){return l(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function T(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r,s,o=n.length-1;for(r=0;r<i.length;r++)if(s=i[r],"."!==s){if(".."!==s)break;o>1&&o--}return n.slice(0,o).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var w,E;(function(e){e["pop"]="pop",e["push"]="push"})(w||(w={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(E||(E={}));function S(e){if(!e)if(s){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),d(e)}const k=/^[^#]+#/;function C(e,t){return e.replace(k,"#")+t}function I(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const O=()=>({left:window.pageXOffset,top:window.pageYOffset});function x(e){let t;if("el"in e){const n=e.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=I(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function A(e,t){const n=history.state?history.state.position-t:-1;return n+e}const D=new Map;function P(e,t){D.set(e,t)}function R(e){const t=D.get(e);return D.delete(e),t}let N=()=>location.protocol+"//"+location.host;function L(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let t=r.includes(e.slice(s))?e.slice(s).length:1,n=r.slice(t);return"/"!==n[0]&&(n="/"+n),m(n,"")}const o=m(n,e);return o+i+r}function M(e,t,n,i){let r=[],s=[],o=null;const u=({state:s})=>{const a=L(e,location),u=n.value,c=t.value;let l=0;if(s){if(n.value=a,t.value=s,o&&o===u)return void(o=null);l=c?s.position-c.position:0}else i(a);r.forEach((e=>{e(n.value,u,{delta:l,type:w.pop,direction:l?l>0?E.forward:E.back:E.unknown})}))};function c(){o=n.value}function l(e){r.push(e);const t=()=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)};return s.push(t),t}function h(){const{history:e}=window;e.state&&e.replaceState(a({},e.state,{scroll:O()}),"")}function d(){for(const e of s)e();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",h),{pauseListeners:c,listen:l,destroy:d}}function U(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?O():null}}function j(e){const{history:t,location:n}=window,i={value:L(e,n)},r={value:t.state};function s(i,s,o){const a=e.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+i:N()+e+i;try{t[o?"replaceState":"pushState"](s,"",u),r.value=s}catch(c){console.error(c),n[o?"replace":"assign"](u)}}function o(e,n){const o=a({},t.state,U(r.value.back,e,r.value.forward,!0),n,{position:r.value.position});s(e,o,!0),i.value=e}function u(e,n){const o=a({},r.value,t.state,{forward:e,scroll:O()});s(o.current,o,!0);const u=a({},U(i.value,e,null),{position:o.position+1},n);s(e,u,!1),i.value=e}return r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:u,replace:o}}function F(e){e=S(e);const t=j(e),n=M(e,t.state,t.location,t.replace);function i(e,t=!0){t||n.pauseListeners(),history.go(e)}const r=a({location:"",base:e,go:i,createHref:C.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function B(e){return"string"===typeof e||e&&"object"===typeof e}function V(e){return"string"===typeof e||"symbol"===typeof e}const $={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},q=Symbol("");var H;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(H||(H={}));function W(e,t){return a(new Error,{type:e,[q]:!0},t)}function z(e,t){return e instanceof Error&&q in e&&(null==t||!!(e.type&t))}const G="[^/]+?",Q={sensitive:!1,strict:!1,start:!0,end:!0},K=/[.+*?^${}()[\]/\\]/g;function X(e,t){const n=a({},Q,t),i=[];let r=n.start?"^":"";const s=[];for(const a of e){const e=a.length?[]:[90];n.strict&&!a.length&&(r+="/");for(let t=0;t<a.length;t++){const i=a[t];let o=40+(n.sensitive?.25:0);if(0===i.type)t||(r+="/"),r+=i.value.replace(K,"\\$&"),o+=40;else if(1===i.type){const{value:e,repeatable:n,optional:u,regexp:c}=i;s.push({name:e,repeatable:n,optional:u});const l=c||G;if(l!==G){o+=10;try{new RegExp(`(${l})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${e}" (${l}): `+h.message)}}let d=n?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;t||(d=u&&a.length<2?`(?:/${d})`:"/"+d),u&&(d+="?"),r+=d,o+=20,u&&(o+=-8),n&&(o+=-20),".*"===l&&(o+=-50)}e.push(o)}i.push(e)}if(n.strict&&n.end){const e=i.length-1;i[e][i[e].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function u(e){const t=e.match(o),n={};if(!t)return null;for(let i=1;i<t.length;i++){const e=t[i]||"",r=s[i-1];n[r.name]=e&&r.repeatable?e.split("/"):e}return n}function c(t){let n="",i=!1;for(const r of e){i&&n.endsWith("/")||(n+="/"),i=!1;for(const e of r)if(0===e.type)n+=e.value;else if(1===e.type){const{value:s,repeatable:o,optional:a}=e,u=s in t?t[s]:"";if(l(u)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=l(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}return{re:o,score:i,keys:s,parse:u,stringify:c}}function Y(e,t){let n=0;while(n<e.length&&n<t.length){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function J(e,t){let n=0;const i=e.score,r=t.score;while(n<i.length&&n<r.length){const e=Y(i[n],r[n]);if(e)return e;n++}if(1===Math.abs(r.length-i.length)){if(Z(i))return 1;if(Z(r))return-1}return r.length-i.length}function Z(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ee={type:0,value:""},te=/[a-zA-Z0-9_]/;function ne(e){if(!e)return[[]];if("/"===e)return[[ee]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${c}": ${e}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a,u=0,c="",l="";function h(){c&&(0===n?s.push({type:0,value:c}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),c="")}function d(){c+=a}while(u<e.length)if(a=e[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:te.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:t("Unknown state");break}else i=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function ie(e,t,n){const i=X(ne(e.path),n);const r=a(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf===!t.record.aliasOf&&t.children.push(r),r}function re(e,t){const n=[],i=new Map;function r(e){return i.get(e)}function s(e,n,i){const r=!i,u=oe(e);u.aliasOf=i&&i.record;const h=le(t,e),d=[u];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)d.push(a({},u,{components:i?i.record.components:u.components,path:e,aliasOf:i?i.record:u}))}let p,f;for(const t of d){const{path:a}=t;if(n&&"/"!==a[0]){const e=n.record.path,i="/"===e[e.length-1]?"":"/";t.path=n.record.path+(a&&i+a)}if(p=ie(t,n,h),i?i.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),r&&e.name&&!ue(p)&&o(e.name)),u.children){const e=u.children;for(let t=0;t<e.length;t++)s(e[t],p,i&&i.children[t])}i=i||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return f?()=>{o(f)}:c}function o(e){if(V(e)){const t=i.get(e);t&&(i.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&i.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function u(){return n}function l(e){let t=0;while(t<n.length&&J(e,n[t])>=0&&(e.record.path!==n[t].record.path||!he(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!ue(e)&&i.set(e.record.name,e)}function h(e,t){let r,s,o,u={};if("name"in e&&e.name){if(r=i.get(e.name),!r)throw W(1,{location:e});0,o=r.record.name,u=a(se(t.params,r.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&se(e.params,r.keys.map((e=>e.name)))),s=r.stringify(u)}else if("path"in e)s=e.path,r=n.find((e=>e.re.test(s))),r&&(u=r.parse(s),o=r.record.name);else{if(r=t.name?i.get(t.name):n.find((e=>e.re.test(t.path))),!r)throw W(1,{location:e,currentLocation:t});o=r.record.name,u=a({},t.params,e.params),s=r.stringify(u)}const c=[];let l=r;while(l)c.unshift(l.record),l=l.parent;return{name:o,path:s,params:u,matched:c,meta:ce(c)}}return t=le({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>s(e))),{addRoute:s,resolve:h,removeRoute:o,getRoutes:u,getRecordMatcher:r}}function se(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function oe(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ae(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ae(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]="boolean"===typeof n?n:n[i];return t}function ue(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ce(e){return e.reduce(((e,t)=>a(e,t.meta)),{})}function le(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function he(e,t){return t.children.some((t=>t===e||he(e,t)))}const de=/#/g,pe=/&/g,fe=/\//g,me=/=/g,ge=/\?/g,ye=/\+/g,ve=/%5B/g,_e=/%5D/g,be=/%5E/g,Te=/%60/g,we=/%7B/g,Ee=/%7C/g,Se=/%7D/g,ke=/%20/g;function Ce(e){return encodeURI(""+e).replace(Ee,"|").replace(ve,"[").replace(_e,"]")}function Ie(e){return Ce(e).replace(we,"{").replace(Se,"}").replace(be,"^")}function Oe(e){return Ce(e).replace(ye,"%2B").replace(ke,"+").replace(de,"%23").replace(pe,"%26").replace(Te,"`").replace(we,"{").replace(Se,"}").replace(be,"^")}function xe(e){return Oe(e).replace(me,"%3D")}function Ae(e){return Ce(e).replace(de,"%23").replace(ge,"%3F")}function De(e){return null==e?"":Ae(e).replace(fe,"%2F")}function Pe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Re(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],i=(n?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const e=i[r].replace(ye," "),n=e.indexOf("="),s=Pe(n<0?e:e.slice(0,n)),o=n<0?null:Pe(e.slice(n+1));if(s in t){let e=t[s];l(e)||(e=t[s]=[e]),e.push(o)}else t[s]=o}return t}function Ne(e){let t="";for(let n in e){const i=e[n];if(n=xe(n),null==i){void 0!==i&&(t+=(t.length?"&":"")+n);continue}const r=l(i)?i.map((e=>e&&Oe(e))):[i&&Oe(i)];r.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function Le(e){const t={};for(const n in e){const i=e[n];void 0!==i&&(t[n]=l(i)?i.map((e=>null==e?null:""+e)):null==i?i:""+i)}return t}const Me=Symbol(""),Ue=Symbol(""),je=Symbol(""),Fe=Symbol(""),Be=Symbol("");function Ve(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function $e(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((o,a)=>{const u=e=>{!1===e?a(W(4,{from:n,to:t})):e instanceof Error?a(e):B(e)?a(W(2,{from:t,to:e})):(s&&i.enterCallbacks[r]===s&&"function"===typeof e&&s.push(e),o())},c=e.call(i&&i.instances[r],t,n,u);let l=Promise.resolve(c);e.length<3&&(l=l.then(u)),l.catch((e=>a(e)))}))}function qe(e,t,n,i){const r=[];for(const s of e){0;for(const e in s.components){let a=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(He(a)){const o=a.__vccOpts||a,u=o[t];u&&r.push($e(u,n,i,s,e))}else{let u=a();0,r.push((()=>u.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const a=o(r)?r.default:r;s.components[e]=a;const u=a.__vccOpts||a,c=u[t];return c&&$e(c,n,i,s,e)()}))))}}}return r}function He(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function We(e){const t=(0,i.f3)(je),n=(0,i.f3)(Fe),s=(0,i.Fl)((()=>t.resolve((0,r.SU)(e.to)))),o=(0,i.Fl)((()=>{const{matched:e}=s.value,{length:t}=e,i=e[t-1],r=n.matched;if(!i||!r.length)return-1;const o=r.findIndex(y.bind(null,i));if(o>-1)return o;const a=Xe(e[t-2]);return t>1&&Xe(i)===a&&r[r.length-1].path!==a?r.findIndex(y.bind(null,e[t-2])):o})),a=(0,i.Fl)((()=>o.value>-1&&Ke(n.params,s.value.params))),u=(0,i.Fl)((()=>o.value>-1&&o.value===n.matched.length-1&&v(n.params,s.value.params)));function l(n={}){return Qe(n)?t[(0,r.SU)(e.replace)?"replace":"push"]((0,r.SU)(e.to)).catch(c):Promise.resolve()}return{route:s,href:(0,i.Fl)((()=>s.value.href)),isActive:a,isExactActive:u,navigate:l}}const ze=(0,i.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:We,setup(e,{slots:t}){const n=(0,r.qj)(We(e)),{options:s}=(0,i.f3)(je),o=(0,i.Fl)((()=>({[Ye(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Ye(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&t.default(n);return e.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Ge=ze;function Qe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ke(e,t){for(const n in t){const i=t[n],r=e[n];if("string"===typeof i){if(i!==r)return!1}else if(!l(r)||r.length!==i.length||i.some(((e,t)=>e!==r[t])))return!1}return!0}function Xe(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ye=(e,t,n)=>null!=e?e:null!=t?t:n,Je=(0,i.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=(0,i.f3)(Be),o=(0,i.Fl)((()=>e.route||s.value)),u=(0,i.f3)(Ue,0),c=(0,i.Fl)((()=>{let e=(0,r.SU)(u);const{matched:t}=o.value;let n;while((n=t[e])&&!n.components)e++;return e})),l=(0,i.Fl)((()=>o.value.matched[c.value]));(0,i.JJ)(Ue,(0,i.Fl)((()=>c.value+1))),(0,i.JJ)(Me,l),(0,i.JJ)(Be,o);const h=(0,r.iH)();return(0,i.YP)((()=>[h.value,l.value,e.name]),(([e,t,n],[i,r,s])=>{t&&(t.instances[n]=e,r&&r!==t&&e&&e===i&&(t.leaveGuards.size||(t.leaveGuards=r.leaveGuards),t.updateGuards.size||(t.updateGuards=r.updateGuards))),!e||!t||r&&y(t,r)&&i||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=o.value,s=e.name,u=l.value,c=u&&u.components[s];if(!c)return Ze(n.default,{Component:c,route:r});const d=u.props[s],p=d?!0===d?r.params:"function"===typeof d?d(r):d:null,f=e=>{e.component.isUnmounted&&(u.instances[s]=null)},m=(0,i.h)(c,a({},p,t,{onVnodeUnmounted:f,ref:h}));return Ze(n.default,{Component:m,route:r})||m}}});function Ze(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const et=Je;function tt(e){const t=re(e.routes,e),n=e.parseQuery||Re,o=e.stringifyQuery||Ne,h=e.history;const d=Ve(),m=Ve(),y=Ve(),v=(0,r.XI)($);let _=$;s&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=u.bind(null,(e=>""+e)),T=u.bind(null,De),E=u.bind(null,Pe);function S(e,n){let i,r;return V(e)?(i=t.getRecordMatcher(e),r=n):r=e,t.addRoute(r,i)}function k(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function C(){return t.getRoutes().map((e=>e.record))}function I(e){return!!t.getRecordMatcher(e)}function D(e,i){if(i=a({},i||v.value),"string"===typeof e){const r=p(n,e,i.path),s=t.resolve({path:r.path},i),o=h.createHref(r.fullPath);return a(r,s,{params:E(s.params),hash:Pe(r.hash),redirectedFrom:void 0,href:o})}let r;if("path"in e)r=a({},e,{path:p(n,e.path,i.path).path});else{const t=a({},e.params);for(const e in t)null==t[e]&&delete t[e];r=a({},e,{params:T(e.params)}),i.params=T(i.params)}const s=t.resolve(r,i),u=e.hash||"";s.params=b(E(s.params));const c=f(o,a({},e,{hash:Ie(u),path:s.path})),l=h.createHref(c);return a({fullPath:c,hash:u,query:o===Ne?Le(e.query):e.query||{}},s,{redirectedFrom:void 0,href:l})}function N(e){return"string"===typeof e?p(n,e,v.value.path):a({},e)}function L(e,t){if(_!==e)return W(8,{from:t,to:e})}function M(e){return F(e)}function U(e){return M(a(N(e),{replace:!0}))}function j(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let i="function"===typeof n?n(e):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=N(i):{path:i},i.params={}),a({query:e.query,hash:e.hash,params:"path"in i?{}:e.params},i)}}function F(e,t){const n=_=D(e),i=v.value,r=e.state,s=e.force,u=!0===e.replace,c=j(n);if(c)return F(a(N(c),{state:"object"===typeof c?a({},r,c.state):r,force:s,replace:u}),t||n);const l=n;let h;return l.redirectedFrom=t,!s&&g(o,i,n)&&(h=W(16,{to:l,from:i}),ne(i,i,!0,!1)),(h?Promise.resolve(h):q(l,i)).catch((e=>z(e)?z(e,2)?e:te(e):Z(e,l,i))).then((e=>{if(e){if(z(e,2))return F(a({replace:u},N(e.to),{state:"object"===typeof e.to?a({},r,e.to.state):r,force:s}),t||l)}else e=G(l,i,!0,u,r);return H(l,i,e),e}))}function B(e,t){const n=L(e,t);return n?Promise.reject(n):Promise.resolve()}function q(e,t){let n;const[i,r,s]=it(e,t);n=qe(i.reverse(),"beforeRouteLeave",e,t);for(const a of i)a.leaveGuards.forEach((i=>{n.push($e(i,e,t))}));const o=B.bind(null,e,t);return n.push(o),nt(n).then((()=>{n=[];for(const i of d.list())n.push($e(i,e,t));return n.push(o),nt(n)})).then((()=>{n=qe(r,"beforeRouteUpdate",e,t);for(const i of r)i.updateGuards.forEach((i=>{n.push($e(i,e,t))}));return n.push(o),nt(n)})).then((()=>{n=[];for(const i of e.matched)if(i.beforeEnter&&!t.matched.includes(i))if(l(i.beforeEnter))for(const r of i.beforeEnter)n.push($e(r,e,t));else n.push($e(i.beforeEnter,e,t));return n.push(o),nt(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=qe(s,"beforeRouteEnter",e,t),n.push(o),nt(n)))).then((()=>{n=[];for(const i of m.list())n.push($e(i,e,t));return n.push(o),nt(n)})).catch((e=>z(e,8)?e:Promise.reject(e)))}function H(e,t,n){for(const i of y.list())i(e,t,n)}function G(e,t,n,i,r){const o=L(e,t);if(o)return o;const u=t===$,c=s?history.state:{};n&&(i||u?h.replace(e.fullPath,a({scroll:u&&c&&c.scroll},r)):h.push(e.fullPath,r)),v.value=e,ne(e,t,n,u),te()}let Q;function K(){Q||(Q=h.listen(((e,t,n)=>{if(!ae.listening)return;const i=D(e),r=j(i);if(r)return void F(a(r,{replace:!0}),i).catch(c);_=i;const o=v.value;s&&P(A(o.fullPath,n.delta),O()),q(i,o).catch((e=>z(e,12)?e:z(e,2)?(F(e.to,i).then((e=>{z(e,20)&&!n.delta&&n.type===w.pop&&h.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Z(e,i,o)))).then((e=>{e=e||G(i,o,!1),e&&(n.delta&&!z(e,8)?h.go(-n.delta,!1):n.type===w.pop&&z(e,20)&&h.go(-1,!1)),H(i,o,e)})).catch(c)})))}let X,Y=Ve(),J=Ve();function Z(e,t,n){te(e);const i=J.list();return i.length?i.forEach((i=>i(e,t,n))):console.error(e),Promise.reject(e)}function ee(){return X&&v.value!==$?Promise.resolve():new Promise(((e,t)=>{Y.add([e,t])}))}function te(e){return X||(X=!e,K(),Y.list().forEach((([t,n])=>e?n(e):t())),Y.reset()),e}function ne(t,n,r,o){const{scrollBehavior:a}=e;if(!s||!a)return Promise.resolve();const u=!r&&R(A(t.fullPath,0))||(o||!r)&&history.state&&history.state.scroll||null;return(0,i.Y3)().then((()=>a(t,n,u))).then((e=>e&&x(e))).catch((e=>Z(e,t,n)))}const ie=e=>h.go(e);let se;const oe=new Set,ae={currentRoute:v,listening:!0,addRoute:S,removeRoute:k,hasRoute:I,getRoutes:C,resolve:D,options:e,push:M,replace:U,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:d.add,beforeResolve:m.add,afterEach:y.add,onError:J.add,isReady:ee,install(e){const t=this;e.component("RouterLink",Ge),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.SU)(v)}),s&&!se&&v.value===$&&(se=!0,M(h.location).catch((e=>{0})));const n={};for(const r in $)n[r]=(0,i.Fl)((()=>v.value[r]));e.provide(je,t),e.provide(Fe,(0,r.qj)(n)),e.provide(Be,v);const o=e.unmount;oe.add(e),e.unmount=function(){oe.delete(e),oe.size<1&&(_=$,Q&&Q(),Q=null,v.value=$,se=!1,X=!1),o()}}};return ae}function nt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function it(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const s=t.matched[o];s&&(e.matched.find((e=>y(e,s)))?i.push(s):n.push(s));const a=e.matched[o];a&&(t.matched.find((e=>y(e,a)))||r.push(a))}return[n,i,r]}},4444:function(e,t,n){"use strict";n.d(t,{y:function(){return C}});n(7658);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=function(){return"function"===typeof Symbol},c=function(e){return u()&&Boolean(Symbol[e])},l=function(e){return c(e)?Symbol[e]:"@@"+e};u()&&!c("observable")&&(Symbol.observable=Symbol("observable"));var h=l("iterator"),d=l("observable"),p=l("species");function f(e,t){var n=e[t];if(null!=n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}}function m(e){var t=e.constructor;return void 0!==t&&(t=t[p],null===t&&(t=void 0)),void 0!==t?t:C}function g(e){return e instanceof C}function y(e){y.log?y.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(t){y(t)}}))}function _(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"===typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(i){y(i)}}function b(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function T(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length;++n)if(w(e,t[n].type,t[n].value),"closed"===e._state)break}}function w(e,t,n){e._state="running";var i=e._observer;try{var r=f(i,t);switch(t){case"next":r&&r.call(i,n);break;case"error":if(b(e),!r)throw n;r.call(i,n);break;case"complete":b(e),r&&r.call(i);break}}catch(s){y(s)}"closed"===e._state?_(e):"running"===e._state&&(e._state="ready")}function E(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return T(e)}))):void w(e,t,n);e._queue.push({type:t,value:n})}}var S=function(){function e(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var n=new k(this);try{this._cleanup=t.call(void 0,n)}catch(i){n.error(i)}"initializing"===this._state&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){"closed"!==this._state&&(b(this),_(this))},a(e,[{key:"closed",get:function(){return"closed"===this._state}}]),e}(),k=function(){function e(e){this._subscription=e}var t=e.prototype;return t.next=function(e){E(this._subscription,"next",e)},t.error=function(e){E(this._subscription,"error",e)},t.complete=function(){E(this._subscription,"complete")},a(e,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),C=function(){function e(t){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var t=e.prototype;return t.subscribe=function(e){return"object"===typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new S(e,this._subscriber)},t.forEach=function(e){var t=this;return new Promise((function(n,i){if("function"===typeof e)var r=t.subscribe({next:function(t){try{e(t,s)}catch(n){i(n),r.unsubscribe()}},error:i,complete:n});else i(new TypeError(e+" is not a function"));function s(){r.unsubscribe(),n()}}))},t.map=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=m(this);return new n((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(i){return n.error(i)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.filter=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=m(this);return new n((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(i){return n.error(i)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))},t.reduce=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=m(this),i=arguments.length>1,r=!1,s=arguments[1],o=s;return new n((function(n){return t.subscribe({next:function(t){var s=!r;if(r=!0,!s||i)try{o=e(o,t)}catch(a){return n.error(a)}else o=t},error:function(e){n.error(e)},complete:function(){if(!r&&!i)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(o),n.complete()}})}))},t.concat=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=m(this);return new r((function(t){var i,s=0;function o(e){i=e.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){s===n.length?(i=void 0,t.complete()):o(r.from(n[s++]))}})}return o(e),function(){i&&(i.unsubscribe(),i=void 0)}}))},t.flatMap=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var n=m(this);return new n((function(i){var r=[],s=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(a){return i.error(a)}var s=n.from(t).subscribe({next:function(e){i.next(e)},error:function(e){i.error(e)},complete:function(){var e=r.indexOf(s);e>=0&&r.splice(e,1),o()}});r.push(s)},error:function(e){i.error(e)},complete:function(){o()}});function o(){s.closed&&0===r.length&&i.complete()}return function(){r.forEach((function(e){return e.unsubscribe()})),s.unsubscribe()}}))},t[d]=function(){return this},e.from=function(t){var n="function"===typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var r=f(t,d);if(r){var s=r.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return g(s)&&s.constructor===n?s:new n((function(e){return s.subscribe(e)}))}if(c("iterator")&&(r=f(t,h),r))return new n((function(e){v((function(){if(!e.closed){for(var n,s=i(r.call(t));!(n=s()).done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")},e.of=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r="function"===typeof this?this:e;return new r((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))},a(e,null,[{key:p,get:function(){return this}}]),e}();u()&&Object.defineProperty(C,Symbol("extensions"),{value:{symbol:d,hostReportError:y},configurable:!0})}}]);
//# sourceMappingURL=chunk-vendors.cc504a7b.js.map